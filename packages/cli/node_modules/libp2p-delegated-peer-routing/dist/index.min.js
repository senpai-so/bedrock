(function (root, factory) {(typeof module === 'object' && module.exports) ? module.exports = factory() : root.Libp2pDelegatedPeerRouting = factory()}(typeof self !== 'undefined' ? self : this, function () {
var Libp2pDelegatedPeerRouting=(()=>{var Fa=Object.defineProperty;var nf=e=>Fa(e,"__esModule",{value:!0});var hn=(e=>typeof require!="undefined"?require:typeof Proxy!="undefined"?new Proxy(e,{get:(t,r)=>(typeof require!="undefined"?require:t)[r]}):e)(function(e){if(typeof require!="undefined")return require.apply(this,arguments);throw new Error('Dynamic require of "'+e+'" is not supported')});var Q=(e,t)=>()=>(e&&(t=e(e=0)),t);var A=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),ge=(e,t)=>{nf(e);for(var r in t)Fa(e,r,{get:t[r],enumerable:!0})};function Va(e,t,r){t=t||[],r=r||0;for(var n=r;e>=uf;)t[r++]=e&255|Ma,e/=128;for(;e&of;)t[r++]=e&255|Ma,e>>>=7;return t[r]=e|0,Va.bytes=r-n+1,t}function xi(e,t){var r=0,t=t||0,n=0,i=t,a,s=e.length;do{if(i>=s)throw xi.bytes=0,new RangeError("Could not decode varint");a=e[i++],r+=n<28?(a&za)<<n:(a&za)*Math.pow(2,n),n+=7}while(a>=ff);return xi.bytes=i-t,r}var af,Ma,sf,of,uf,cf,ff,za,lf,hf,pf,df,yf,gf,vf,xf,mf,bf,wf,Sf,Er,Ha=Q(()=>{af=Va,Ma=128,sf=127,of=~sf,uf=Math.pow(2,31);cf=xi,ff=128,za=127;lf=Math.pow(2,7),hf=Math.pow(2,14),pf=Math.pow(2,21),df=Math.pow(2,28),yf=Math.pow(2,35),gf=Math.pow(2,42),vf=Math.pow(2,49),xf=Math.pow(2,56),mf=Math.pow(2,63),bf=function(e){return e<lf?1:e<hf?2:e<pf?3:e<df?4:e<yf?5:e<gf?6:e<vf?7:e<xf?8:e<mf?9:10},wf={encode:af,decode:cf,encodingLength:bf},Sf=wf,Er=Sf});var Br,er,tr,pn=Q(()=>{Ha();Br=e=>[Er.decode(e),Er.decode.bytes],er=(e,t,r=0)=>(Er.encode(e,t,r),t),tr=e=>Er.encodingLength(e)});var f1,Wa,ut,ja,$a,gt=Q(()=>{f1=new Uint8Array(0),Wa=(e,t)=>{if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;for(let r=0;r<e.byteLength;r++)if(e[r]!==t[r])return!1;return!0},ut=e=>{if(e instanceof Uint8Array&&e.constructor.name==="Uint8Array")return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")},ja=e=>new TextEncoder().encode(e),$a=e=>new TextDecoder().decode(e)});var dn={};ge(dn,{Digest:()=>rr,create:()=>Cr,decode:()=>mi,equals:()=>bi});var Cr,mi,bi,rr,Ar=Q(()=>{gt();pn();Cr=(e,t)=>{let r=t.byteLength,n=tr(e),i=n+tr(r),a=new Uint8Array(i+r);return er(e,a,0),er(r,a,n),a.set(t,i),new rr(e,r,t,a)},mi=e=>{let t=ut(e),[r,n]=Br(t),[i,a]=Br(t.subarray(n)),s=t.subarray(n+a);if(s.byteLength!==i)throw new Error("Incorrect length");return new rr(r,i,s,t)},bi=(e,t)=>e===t?!0:e.code===t.code&&e.size===t.size&&Wa(e.bytes,t.bytes),rr=class{constructor(t,r,n,i){this.code=t,this.size=r,this.digest=n,this.bytes=i}}});function Ef(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var i=0;i<e.length;i++){var a=e.charAt(i),s=a.charCodeAt(0);if(r[s]!==255)throw new TypeError(a+" is ambiguous");r[s]=i}var o=e.length,u=e.charAt(0),c=Math.log(o)/Math.log(256),f=Math.log(256)/Math.log(o);function l(p){if(p instanceof Uint8Array||(ArrayBuffer.isView(p)?p=new Uint8Array(p.buffer,p.byteOffset,p.byteLength):Array.isArray(p)&&(p=Uint8Array.from(p))),!(p instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(p.length===0)return"";for(var g=0,v=0,m=0,S=p.length;m!==S&&p[m]===0;)m++,g++;for(var C=(S-m)*f+1>>>0,k=new Uint8Array(C);m!==S;){for(var I=p[m],T=0,O=C-1;(I!==0||T<v)&&O!==-1;O--,T++)I+=256*k[O]>>>0,k[O]=I%o>>>0,I=I/o>>>0;if(I!==0)throw new Error("Non-zero carry");v=T,m++}for(var F=C-v;F!==C&&k[F]===0;)F++;for(var ce=u.repeat(g);F<C;++F)ce+=e.charAt(k[F]);return ce}function h(p){if(typeof p!="string")throw new TypeError("Expected String");if(p.length===0)return new Uint8Array;var g=0;if(p[g]!==" "){for(var v=0,m=0;p[g]===u;)v++,g++;for(var S=(p.length-g)*c+1>>>0,C=new Uint8Array(S);p[g];){var k=r[p.charCodeAt(g)];if(k===255)return;for(var I=0,T=S-1;(k!==0||I<m)&&T!==-1;T--,I++)k+=o*C[T]>>>0,C[T]=k%256>>>0,k=k/256>>>0;if(k!==0)throw new Error("Non-zero carry");m=I,g++}if(p[g]!==" "){for(var O=S-m;O!==S&&C[O]===0;)O++;for(var F=new Uint8Array(v+(S-O)),ce=v;O!==S;)F[ce++]=C[O++];return F}}}function d(p){var g=h(p);if(g)return g;throw new Error(`Non-${t} character`)}return{encode:l,decodeUnsafe:h,decode:d}}var Bf,Cf,Ya,Za=Q(()=>{Bf=Ef,Cf=Bf,Ya=Cf});var Xa,Ja,es,ts,rs,yn,vt,Af,_f,ae,Ge=Q(()=>{Za();gt();Xa=class{constructor(t,r,n){this.name=t,this.prefix=r,this.baseEncode=n}encode(t){if(t instanceof Uint8Array)return`${this.prefix}${this.baseEncode(t)}`;throw Error("Unknown type, must be binary type")}},Ja=class{constructor(t,r,n){this.name=t,this.prefix=r,this.baseDecode=n}decode(t){if(typeof t=="string")switch(t[0]){case this.prefix:return this.baseDecode(t.slice(1));default:throw Error(`Unable to decode multibase string ${JSON.stringify(t)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`)}else throw Error("Can only multibase decode strings")}or(t){return ts(this,t)}},es=class{constructor(t){this.decoders=t}or(t){return ts(this,t)}decode(t){let r=t[0],n=this.decoders[r];if(n)return n.decode(t);throw RangeError(`Unable to decode multibase string ${JSON.stringify(t)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}},ts=(e,t)=>new es({...e.decoders||{[e.prefix]:e},...t.decoders||{[t.prefix]:t}}),rs=class{constructor(t,r,n,i){this.name=t,this.prefix=r,this.baseEncode=n,this.baseDecode=i,this.encoder=new Xa(t,r,n),this.decoder=new Ja(t,r,i)}encode(t){return this.encoder.encode(t)}decode(t){return this.decoder.decode(t)}},yn=({name:e,prefix:t,encode:r,decode:n})=>new rs(e,t,r,n),vt=({prefix:e,name:t,alphabet:r})=>{let{encode:n,decode:i}=Ya(r,t);return yn({prefix:e,name:t,encode:n,decode:a=>ut(i(a))})},Af=(e,t,r,n)=>{let i={};for(let f=0;f<t.length;++f)i[t[f]]=f;let a=e.length;for(;e[a-1]==="=";)--a;let s=new Uint8Array(a*r/8|0),o=0,u=0,c=0;for(let f=0;f<a;++f){let l=i[e[f]];if(l===void 0)throw new SyntaxError(`Non-${n} character`);u=u<<r|l,o+=r,o>=8&&(o-=8,s[c++]=255&u>>o)}if(o>=r||255&u<<8-o)throw new SyntaxError("Unexpected end of data");return s},_f=(e,t,r)=>{let n=t[t.length-1]==="=",i=(1<<r)-1,a="",s=0,o=0;for(let u=0;u<e.length;++u)for(o=o<<8|e[u],s+=8;s>r;)s-=r,a+=t[i&o>>s];if(s&&(a+=t[i&o<<r-s]),n)for(;a.length*r&7;)a+="=";return a},ae=({name:e,prefix:t,bitsPerChar:r,alphabet:n})=>yn({prefix:t,name:e,encode(i){return _f(i,n,r)},decode(i){return Af(i,n,r,e)}})});var Ut={};ge(Ut,{base58btc:()=>We,base58flickr:()=>Tf});var We,Tf,Ot=Q(()=>{Ge();We=vt({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),Tf=vt({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"})});var _r={};ge(_r,{base32:()=>nr,base32hex:()=>Df,base32hexpad:()=>Kf,base32hexpadupper:()=>Nf,base32hexupper:()=>kf,base32pad:()=>Pf,base32padupper:()=>Rf,base32upper:()=>If,base32z:()=>Lf});var nr,If,Pf,Rf,Df,kf,Kf,Nf,Lf,Tr=Q(()=>{Ge();nr=ae({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),If=ae({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),Pf=ae({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),Rf=ae({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),Df=ae({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),kf=ae({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),Kf=ae({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),Nf=ae({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),Lf=ae({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5})});var as={};ge(as,{CID:()=>fe});var fe,qf,Uf,Of,Ir,Ff,ns,is,gn,vn,Mf,Vf,zf,wi=Q(()=>{pn();Ar();Ot();Tr();gt();fe=class{constructor(t,r,n,i){this.code=r,this.version=t,this.multihash=n,this.bytes=i,this.byteOffset=i.byteOffset,this.byteLength=i.byteLength,this.asCID=this,this._baseCache=new Map,Object.defineProperties(this,{byteOffset:vn,byteLength:vn,code:gn,version:gn,multihash:gn,bytes:gn,_baseCache:vn,asCID:vn})}toV0(){switch(this.version){case 0:return this;default:{let{code:t,multihash:r}=this;if(t!==Ir)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(r.code!==Ff)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return fe.createV0(r)}}}toV1(){switch(this.version){case 0:{let{code:t,digest:r}=this.multihash,n=Cr(t,r);return fe.createV1(this.code,n)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}equals(t){return t&&this.code===t.code&&this.version===t.version&&bi(this.multihash,t.multihash)}toString(t){let{bytes:r,version:n,_baseCache:i}=this;switch(n){case 0:return Uf(r,i,t||We.encoder);default:return Of(r,i,t||nr.encoder)}}toJSON(){return{code:this.code,version:this.version,hash:this.multihash.bytes}}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return"CID("+this.toString()+")"}static isCID(t){return Vf(/^0\.0/,zf),!!(t&&(t[is]||t.asCID===t))}get toBaseEncodedString(){throw new Error("Deprecated, use .toString()")}get codec(){throw new Error('"codec" property is deprecated, use integer "code" property instead')}get buffer(){throw new Error("Deprecated .buffer property, use .bytes to get Uint8Array instead")}get multibaseName(){throw new Error('"multibaseName" property is deprecated')}get prefix(){throw new Error('"prefix" property is deprecated')}static asCID(t){if(t instanceof fe)return t;if(t!=null&&t.asCID===t){let{version:r,code:n,multihash:i,bytes:a}=t;return new fe(r,n,i,a||ns(r,n,i.bytes))}else if(t!=null&&t[is]===!0){let{version:r,multihash:n,code:i}=t,a=mi(n);return fe.create(r,i,a)}else return null}static create(t,r,n){if(typeof r!="number")throw new Error("String codecs are no longer supported");switch(t){case 0:{if(r!==Ir)throw new Error(`Version 0 CID must use dag-pb (code: ${Ir}) block encoding`);return new fe(t,r,n,n.bytes)}case 1:{let i=ns(t,r,n.bytes);return new fe(t,r,n,i)}default:throw new Error("Invalid version")}}static createV0(t){return fe.create(0,Ir,t)}static createV1(t,r){return fe.create(1,t,r)}static decode(t){let[r,n]=fe.decodeFirst(t);if(n.length)throw new Error("Incorrect length");return r}static decodeFirst(t){let r=fe.inspectBytes(t),n=r.size-r.multihashSize,i=ut(t.subarray(n,n+r.multihashSize));if(i.byteLength!==r.multihashSize)throw new Error("Incorrect length");let a=i.subarray(r.multihashSize-r.digestSize),s=new rr(r.multihashCode,r.digestSize,a,i);return[r.version===0?fe.createV0(s):fe.createV1(r.codec,s),t.subarray(r.size)]}static inspectBytes(t){let r=0,n=()=>{let[l,h]=Br(t.subarray(r));return r+=h,l},i=n(),a=Ir;if(i===18?(i=0,r=0):i===1&&(a=n()),i!==0&&i!==1)throw new RangeError(`Invalid CID version ${i}`);let s=r,o=n(),u=n(),c=r+u,f=c-s;return{version:i,codec:a,multihashCode:o,digestSize:u,multihashSize:f,size:c}}static parse(t,r){let[n,i]=qf(t,r),a=fe.decode(i);return a._baseCache.set(n,t),a}},qf=(e,t)=>{switch(e[0]){case"Q":{let r=t||We;return[We.prefix,r.decode(`${We.prefix}${e}`)]}case We.prefix:{let r=t||We;return[We.prefix,r.decode(e)]}case nr.prefix:{let r=t||nr;return[nr.prefix,r.decode(e)]}default:{if(t==null)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[e[0],t.decode(e)]}}},Uf=(e,t,r)=>{let{prefix:n}=r;if(n!==We.prefix)throw Error(`Cannot string encode V0 in ${r.name} encoding`);let i=t.get(n);if(i==null){let a=r.encode(e).slice(1);return t.set(n,a),a}else return i},Of=(e,t,r)=>{let{prefix:n}=r,i=t.get(n);if(i==null){let a=r.encode(e);return t.set(n,a),a}else return i},Ir=112,Ff=18,ns=(e,t,r)=>{let n=tr(e),i=n+tr(t),a=new Uint8Array(i+r.byteLength);return er(e,a,0),er(t,a,n),a.set(r,i),a},is=Symbol.for("@ipld/js-cid/CID"),gn={writable:!1,configurable:!1,enumerable:!0},vn={writable:!1,enumerable:!1,configurable:!1},Mf="0.0.0-dev",Vf=(e,t)=>{if(e.test(Mf))console.warn(t);else throw new Error(t)},zf=`CID.isCID(v) is deprecated and will be removed in the next major release.
Following code pattern:

if (CID.isCID(value)) {
  doSomethingWithCID(value)
}

Is replaced with:

const cid = CID.asCID(value)
if (cid) {
  // Make sure to use cid instead of value
  doSomethingWithCID(cid)
}
`});var xn={};ge(xn,{base36:()=>Hf,base36upper:()=>Gf});var Hf,Gf,Si=Q(()=>{Ge();Hf=vt({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),Gf=vt({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"})});var ir={};ge(ir,{base64:()=>Wf,base64pad:()=>jf,base64url:()=>$f,base64urlpad:()=>Qf});var Wf,jf,$f,Qf,Pr=Q(()=>{Ge();Wf=ae({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),jf=ae({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),$f=ae({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),Qf=ae({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6})});var mn={};ge(mn,{base16:()=>Yf,base16upper:()=>Zf});var Yf,Zf,Ei=Q(()=>{Ge();Yf=ae({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),Zf=ae({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4})});var os=A((_1,ss)=>{"use strict";ss.exports=Xf;function Xf(e,t){for(var r=new Array(arguments.length-1),n=0,i=2,a=!0;i<arguments.length;)r[n++]=arguments[i++];return new Promise(function(o,u){r[n]=function(f){if(a)if(a=!1,f)u(f);else{for(var l=new Array(arguments.length-1),h=0;h<l.length;)l[h++]=arguments[h];o.apply(null,l)}};try{e.apply(t||null,r)}catch(c){a&&(a=!1,u(c))}})}});var ls=A(fs=>{"use strict";var bn=fs;bn.length=function(t){var r=t.length;if(!r)return 0;for(var n=0;--r%4>1&&t.charAt(r)==="=";)++n;return Math.ceil(t.length*3)/4-n};var ar=new Array(64),us=new Array(123);for(Me=0;Me<64;)us[ar[Me]=Me<26?Me+65:Me<52?Me+71:Me<62?Me-4:Me-59|43]=Me++;var Me;bn.encode=function(t,r,n){for(var i=null,a=[],s=0,o=0,u;r<n;){var c=t[r++];switch(o){case 0:a[s++]=ar[c>>2],u=(c&3)<<4,o=1;break;case 1:a[s++]=ar[u|c>>4],u=(c&15)<<2,o=2;break;case 2:a[s++]=ar[u|c>>6],a[s++]=ar[c&63],o=0;break}s>8191&&((i||(i=[])).push(String.fromCharCode.apply(String,a)),s=0)}return o&&(a[s++]=ar[u],a[s++]=61,o===1&&(a[s++]=61)),i?(s&&i.push(String.fromCharCode.apply(String,a.slice(0,s))),i.join("")):String.fromCharCode.apply(String,a.slice(0,s))};var cs="invalid encoding";bn.decode=function(t,r,n){for(var i=n,a=0,s,o=0;o<t.length;){var u=t.charCodeAt(o++);if(u===61&&a>1)break;if((u=us[u])===void 0)throw Error(cs);switch(a){case 0:s=u,a=1;break;case 1:r[n++]=s<<2|(u&48)>>4,s=u,a=2;break;case 2:r[n++]=(s&15)<<4|(u&60)>>2,s=u,a=3;break;case 3:r[n++]=(s&3)<<6|u,a=0;break}}if(a===1)throw Error(cs);return n-i};bn.test=function(t){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(t)}});var ps=A((I1,hs)=>{"use strict";hs.exports=wn;function wn(){this._listeners={}}wn.prototype.on=function(t,r,n){return(this._listeners[t]||(this._listeners[t]=[])).push({fn:r,ctx:n||this}),this};wn.prototype.off=function(t,r){if(t===void 0)this._listeners={};else if(r===void 0)this._listeners[t]=[];else for(var n=this._listeners[t],i=0;i<n.length;)n[i].fn===r?n.splice(i,1):++i;return this};wn.prototype.emit=function(t){var r=this._listeners[t];if(r){for(var n=[],i=1;i<arguments.length;)n.push(arguments[i++]);for(i=0;i<r.length;)r[i].fn.apply(r[i++].ctx,n)}return this}});var bs=A((P1,ms)=>{"use strict";ms.exports=ds(ds);function ds(e){return typeof Float32Array!="undefined"?function(){var t=new Float32Array([-0]),r=new Uint8Array(t.buffer),n=r[3]===128;function i(u,c,f){t[0]=u,c[f]=r[0],c[f+1]=r[1],c[f+2]=r[2],c[f+3]=r[3]}function a(u,c,f){t[0]=u,c[f]=r[3],c[f+1]=r[2],c[f+2]=r[1],c[f+3]=r[0]}e.writeFloatLE=n?i:a,e.writeFloatBE=n?a:i;function s(u,c){return r[0]=u[c],r[1]=u[c+1],r[2]=u[c+2],r[3]=u[c+3],t[0]}function o(u,c){return r[3]=u[c],r[2]=u[c+1],r[1]=u[c+2],r[0]=u[c+3],t[0]}e.readFloatLE=n?s:o,e.readFloatBE=n?o:s}():function(){function t(n,i,a,s){var o=i<0?1:0;if(o&&(i=-i),i===0)n(1/i>0?0:2147483648,a,s);else if(isNaN(i))n(2143289344,a,s);else if(i>34028234663852886e22)n((o<<31|2139095040)>>>0,a,s);else if(i<11754943508222875e-54)n((o<<31|Math.round(i/1401298464324817e-60))>>>0,a,s);else{var u=Math.floor(Math.log(i)/Math.LN2),c=Math.round(i*Math.pow(2,-u)*8388608)&8388607;n((o<<31|u+127<<23|c)>>>0,a,s)}}e.writeFloatLE=t.bind(null,ys),e.writeFloatBE=t.bind(null,gs);function r(n,i,a){var s=n(i,a),o=(s>>31)*2+1,u=s>>>23&255,c=s&8388607;return u===255?c?NaN:o*(1/0):u===0?o*1401298464324817e-60*c:o*Math.pow(2,u-150)*(c+8388608)}e.readFloatLE=r.bind(null,vs),e.readFloatBE=r.bind(null,xs)}(),typeof Float64Array!="undefined"?function(){var t=new Float64Array([-0]),r=new Uint8Array(t.buffer),n=r[7]===128;function i(u,c,f){t[0]=u,c[f]=r[0],c[f+1]=r[1],c[f+2]=r[2],c[f+3]=r[3],c[f+4]=r[4],c[f+5]=r[5],c[f+6]=r[6],c[f+7]=r[7]}function a(u,c,f){t[0]=u,c[f]=r[7],c[f+1]=r[6],c[f+2]=r[5],c[f+3]=r[4],c[f+4]=r[3],c[f+5]=r[2],c[f+6]=r[1],c[f+7]=r[0]}e.writeDoubleLE=n?i:a,e.writeDoubleBE=n?a:i;function s(u,c){return r[0]=u[c],r[1]=u[c+1],r[2]=u[c+2],r[3]=u[c+3],r[4]=u[c+4],r[5]=u[c+5],r[6]=u[c+6],r[7]=u[c+7],t[0]}function o(u,c){return r[7]=u[c],r[6]=u[c+1],r[5]=u[c+2],r[4]=u[c+3],r[3]=u[c+4],r[2]=u[c+5],r[1]=u[c+6],r[0]=u[c+7],t[0]}e.readDoubleLE=n?s:o,e.readDoubleBE=n?o:s}():function(){function t(n,i,a,s,o,u){var c=s<0?1:0;if(c&&(s=-s),s===0)n(0,o,u+i),n(1/s>0?0:2147483648,o,u+a);else if(isNaN(s))n(0,o,u+i),n(2146959360,o,u+a);else if(s>17976931348623157e292)n(0,o,u+i),n((c<<31|2146435072)>>>0,o,u+a);else{var f;if(s<22250738585072014e-324)f=s/5e-324,n(f>>>0,o,u+i),n((c<<31|f/4294967296)>>>0,o,u+a);else{var l=Math.floor(Math.log(s)/Math.LN2);l===1024&&(l=1023),f=s*Math.pow(2,-l),n(f*4503599627370496>>>0,o,u+i),n((c<<31|l+1023<<20|f*1048576&1048575)>>>0,o,u+a)}}}e.writeDoubleLE=t.bind(null,ys,0,4),e.writeDoubleBE=t.bind(null,gs,4,0);function r(n,i,a,s,o){var u=n(s,o+i),c=n(s,o+a),f=(c>>31)*2+1,l=c>>>20&2047,h=4294967296*(c&1048575)+u;return l===2047?h?NaN:f*(1/0):l===0?f*5e-324*h:f*Math.pow(2,l-1075)*(h+4503599627370496)}e.readDoubleLE=r.bind(null,vs,0,4),e.readDoubleBE=r.bind(null,xs,4,0)}(),e}function ys(e,t,r){t[r]=e&255,t[r+1]=e>>>8&255,t[r+2]=e>>>16&255,t[r+3]=e>>>24}function gs(e,t,r){t[r]=e>>>24,t[r+1]=e>>>16&255,t[r+2]=e>>>8&255,t[r+3]=e&255}function vs(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24)>>>0}function xs(e,t){return(e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3])>>>0}});var ws=A((exports,module)=>{"use strict";module.exports=inquire;function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(e){}return null}});var Es=A(Ss=>{"use strict";var Bi=Ss;Bi.length=function(t){for(var r=0,n=0,i=0;i<t.length;++i)n=t.charCodeAt(i),n<128?r+=1:n<2048?r+=2:(n&64512)==55296&&(t.charCodeAt(i+1)&64512)==56320?(++i,r+=4):r+=3;return r};Bi.read=function(t,r,n){var i=n-r;if(i<1)return"";for(var a=null,s=[],o=0,u;r<n;)u=t[r++],u<128?s[o++]=u:u>191&&u<224?s[o++]=(u&31)<<6|t[r++]&63:u>239&&u<365?(u=((u&7)<<18|(t[r++]&63)<<12|(t[r++]&63)<<6|t[r++]&63)-65536,s[o++]=55296+(u>>10),s[o++]=56320+(u&1023)):s[o++]=(u&15)<<12|(t[r++]&63)<<6|t[r++]&63,o>8191&&((a||(a=[])).push(String.fromCharCode.apply(String,s)),o=0);return a?(o&&a.push(String.fromCharCode.apply(String,s.slice(0,o))),a.join("")):String.fromCharCode.apply(String,s.slice(0,o))};Bi.write=function(t,r,n){for(var i=n,a,s,o=0;o<t.length;++o)a=t.charCodeAt(o),a<128?r[n++]=a:a<2048?(r[n++]=a>>6|192,r[n++]=a&63|128):(a&64512)==55296&&((s=t.charCodeAt(o+1))&64512)==56320?(a=65536+((a&1023)<<10)+(s&1023),++o,r[n++]=a>>18|240,r[n++]=a>>12&63|128,r[n++]=a>>6&63|128,r[n++]=a&63|128):(r[n++]=a>>12|224,r[n++]=a>>6&63|128,r[n++]=a&63|128);return n-i}});var Cs=A((D1,Bs)=>{"use strict";Bs.exports=Jf;function Jf(e,t,r){var n=r||8192,i=n>>>1,a=null,s=n;return function(u){if(u<1||u>i)return e(u);s+u>n&&(a=e(n),s=0);var c=t.call(a,s,s+=u);return s&7&&(s=(s|7)+1),c}}});var _s=A((k1,As)=>{"use strict";As.exports=he;var Rr=mt();function he(e,t){this.lo=e>>>0,this.hi=t>>>0}var Ft=he.zero=new he(0,0);Ft.toNumber=function(){return 0};Ft.zzEncode=Ft.zzDecode=function(){return this};Ft.length=function(){return 1};var el=he.zeroHash="\0\0\0\0\0\0\0\0";he.fromNumber=function(t){if(t===0)return Ft;var r=t<0;r&&(t=-t);var n=t>>>0,i=(t-n)/4294967296>>>0;return r&&(i=~i>>>0,n=~n>>>0,++n>4294967295&&(n=0,++i>4294967295&&(i=0))),new he(n,i)};he.from=function(t){if(typeof t=="number")return he.fromNumber(t);if(Rr.isString(t))if(Rr.Long)t=Rr.Long.fromString(t);else return he.fromNumber(parseInt(t,10));return t.low||t.high?new he(t.low>>>0,t.high>>>0):Ft};he.prototype.toNumber=function(t){if(!t&&this.hi>>>31){var r=~this.lo+1>>>0,n=~this.hi>>>0;return r||(n=n+1>>>0),-(r+n*4294967296)}return this.lo+this.hi*4294967296};he.prototype.toLong=function(t){return Rr.Long?new Rr.Long(this.lo|0,this.hi|0,Boolean(t)):{low:this.lo|0,high:this.hi|0,unsigned:Boolean(t)}};var xt=String.prototype.charCodeAt;he.fromHash=function(t){return t===el?Ft:new he((xt.call(t,0)|xt.call(t,1)<<8|xt.call(t,2)<<16|xt.call(t,3)<<24)>>>0,(xt.call(t,4)|xt.call(t,5)<<8|xt.call(t,6)<<16|xt.call(t,7)<<24)>>>0)};he.prototype.toHash=function(){return String.fromCharCode(this.lo&255,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,this.hi&255,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)};he.prototype.zzEncode=function(){var t=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^t)>>>0,this.lo=(this.lo<<1^t)>>>0,this};he.prototype.zzDecode=function(){var t=-(this.lo&1);return this.lo=((this.lo>>>1|this.hi<<31)^t)>>>0,this.hi=(this.hi>>>1^t)>>>0,this};he.prototype.length=function(){var t=this.lo,r=(this.lo>>>28|this.hi<<4)>>>0,n=this.hi>>>24;return n===0?r===0?t<16384?t<128?1:2:t<2097152?3:4:r<16384?r<128?5:6:r<2097152?7:8:n<128?9:10}});var mt=A(Ci=>{"use strict";var D=Ci;D.asPromise=os();D.base64=ls();D.EventEmitter=ps();D.float=bs();D.inquire=ws();D.utf8=Es();D.pool=Cs();D.LongBits=_s();D.isNode=Boolean(typeof globalThis!="undefined"&&globalThis&&globalThis.process&&globalThis.process.versions&&globalThis.process.versions.node);D.global=D.isNode&&globalThis||typeof window!="undefined"&&window||typeof self!="undefined"&&self||Ci;D.emptyArray=Object.freeze?Object.freeze([]):[];D.emptyObject=Object.freeze?Object.freeze({}):{};D.isInteger=Number.isInteger||function(t){return typeof t=="number"&&isFinite(t)&&Math.floor(t)===t};D.isString=function(t){return typeof t=="string"||t instanceof String};D.isObject=function(t){return t&&typeof t=="object"};D.isset=D.isSet=function(t,r){var n=t[r];return n!=null&&t.hasOwnProperty(r)?typeof n!="object"||(Array.isArray(n)?n.length:Object.keys(n).length)>0:!1};D.Buffer=function(){try{var e=D.inquire("buffer").Buffer;return e.prototype.utf8Write?e:null}catch(t){return null}}();D._Buffer_from=null;D._Buffer_allocUnsafe=null;D.newBuffer=function(t){return typeof t=="number"?D.Buffer?D._Buffer_allocUnsafe(t):new D.Array(t):D.Buffer?D._Buffer_from(t):typeof Uint8Array=="undefined"?t:new Uint8Array(t)};D.Array=typeof Uint8Array!="undefined"?Uint8Array:Array;D.Long=D.global.dcodeIO&&D.global.dcodeIO.Long||D.global.Long||D.inquire("long");D.key2Re=/^true|false|0|1$/;D.key32Re=/^-?(?:0|[1-9][0-9]*)$/;D.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/;D.longToHash=function(t){return t?D.LongBits.from(t).toHash():D.LongBits.zeroHash};D.longFromHash=function(t,r){var n=D.LongBits.fromHash(t);return D.Long?D.Long.fromBits(n.lo,n.hi,r):n.toNumber(Boolean(r))};function Ts(e,t,r){for(var n=Object.keys(t),i=0;i<n.length;++i)(e[n[i]]===void 0||!r)&&(e[n[i]]=t[n[i]]);return e}D.merge=Ts;D.lcFirst=function(t){return t.charAt(0).toLowerCase()+t.substring(1)};function Is(e){function t(r,n){if(!(this instanceof t))return new t(r,n);Object.defineProperty(this,"message",{get:function(){return r}}),Error.captureStackTrace?Error.captureStackTrace(this,t):Object.defineProperty(this,"stack",{value:new Error().stack||""}),n&&Ts(this,n)}return(t.prototype=Object.create(Error.prototype)).constructor=t,Object.defineProperty(t.prototype,"name",{get:function(){return e}}),t.prototype.toString=function(){return this.name+": "+this.message},t}D.newError=Is;D.ProtocolError=Is("ProtocolError");D.oneOfGetter=function(t){for(var r={},n=0;n<t.length;++n)r[t[n]]=1;return function(){for(var i=Object.keys(this),a=i.length-1;a>-1;--a)if(r[i[a]]===1&&this[i[a]]!==void 0&&this[i[a]]!==null)return i[a]}};D.oneOfSetter=function(t){return function(r){for(var n=0;n<t.length;++n)t[n]!==r&&delete this[t[n]]}};D.toJSONOptions={longs:String,enums:String,bytes:String,json:!0};D._configure=function(){var e=D.Buffer;if(!e){D._Buffer_from=D._Buffer_allocUnsafe=null;return}D._Buffer_from=e.from!==Uint8Array.from&&e.from||function(r,n){return new e(r,n)},D._Buffer_allocUnsafe=e.allocUnsafe||function(r){return new e(r)}}});var Di=A((N1,ks)=>{"use strict";ks.exports=V;var De=mt(),Ai,Sn=De.LongBits,Ps=De.base64,Rs=De.utf8;function Dr(e,t,r){this.fn=e,this.len=t,this.next=void 0,this.val=r}function _i(){}function tl(e){this.head=e.head,this.tail=e.tail,this.len=e.len,this.next=e.states}function V(){this.len=0,this.head=new Dr(_i,0,0),this.tail=this.head,this.states=null}var Ds=function(){return De.Buffer?function(){return(V.create=function(){return new Ai})()}:function(){return new V}};V.create=Ds();V.alloc=function(t){return new De.Array(t)};De.Array!==Array&&(V.alloc=De.pool(V.alloc,De.Array.prototype.subarray));V.prototype._push=function(t,r,n){return this.tail=this.tail.next=new Dr(t,r,n),this.len+=r,this};function Ti(e,t,r){t[r]=e&255}function rl(e,t,r){for(;e>127;)t[r++]=e&127|128,e>>>=7;t[r]=e}function Ii(e,t){this.len=e,this.next=void 0,this.val=t}Ii.prototype=Object.create(Dr.prototype);Ii.prototype.fn=rl;V.prototype.uint32=function(t){return this.len+=(this.tail=this.tail.next=new Ii((t=t>>>0)<128?1:t<16384?2:t<2097152?3:t<268435456?4:5,t)).len,this};V.prototype.int32=function(t){return t<0?this._push(Pi,10,Sn.fromNumber(t)):this.uint32(t)};V.prototype.sint32=function(t){return this.uint32((t<<1^t>>31)>>>0)};function Pi(e,t,r){for(;e.hi;)t[r++]=e.lo&127|128,e.lo=(e.lo>>>7|e.hi<<25)>>>0,e.hi>>>=7;for(;e.lo>127;)t[r++]=e.lo&127|128,e.lo=e.lo>>>7;t[r++]=e.lo}V.prototype.uint64=function(t){var r=Sn.from(t);return this._push(Pi,r.length(),r)};V.prototype.int64=V.prototype.uint64;V.prototype.sint64=function(t){var r=Sn.from(t).zzEncode();return this._push(Pi,r.length(),r)};V.prototype.bool=function(t){return this._push(Ti,1,t?1:0)};function Ri(e,t,r){t[r]=e&255,t[r+1]=e>>>8&255,t[r+2]=e>>>16&255,t[r+3]=e>>>24}V.prototype.fixed32=function(t){return this._push(Ri,4,t>>>0)};V.prototype.sfixed32=V.prototype.fixed32;V.prototype.fixed64=function(t){var r=Sn.from(t);return this._push(Ri,4,r.lo)._push(Ri,4,r.hi)};V.prototype.sfixed64=V.prototype.fixed64;V.prototype.float=function(t){return this._push(De.float.writeFloatLE,4,t)};V.prototype.double=function(t){return this._push(De.float.writeDoubleLE,8,t)};var nl=De.Array.prototype.set?function(t,r,n){r.set(t,n)}:function(t,r,n){for(var i=0;i<t.length;++i)r[n+i]=t[i]};V.prototype.bytes=function(t){var r=t.length>>>0;if(!r)return this._push(Ti,1,0);if(De.isString(t)){var n=V.alloc(r=Ps.length(t));Ps.decode(t,n,0),t=n}return this.uint32(r)._push(nl,r,t)};V.prototype.string=function(t){var r=Rs.length(t);return r?this.uint32(r)._push(Rs.write,r,t):this._push(Ti,1,0)};V.prototype.fork=function(){return this.states=new tl(this),this.head=this.tail=new Dr(_i,0,0),this.len=0,this};V.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new Dr(_i,0,0),this.len=0),this};V.prototype.ldelim=function(){var t=this.head,r=this.tail,n=this.len;return this.reset().uint32(n),n&&(this.tail.next=t.next,this.tail=r,this.len+=n),this};V.prototype.finish=function(){for(var t=this.head.next,r=this.constructor.alloc(this.len),n=0;t;)t.fn(t.val,r,n),n+=t.len,t=t.next;return r};V._configure=function(e){Ai=e,V.create=Ds(),Ai._configure()}});var Ls=A((L1,Ns)=>{"use strict";Ns.exports=je;var Ks=Di();(je.prototype=Object.create(Ks.prototype)).constructor=je;var bt=mt();function je(){Ks.call(this)}je._configure=function(){je.alloc=bt._Buffer_allocUnsafe,je.writeBytesBuffer=bt.Buffer&&bt.Buffer.prototype instanceof Uint8Array&&bt.Buffer.prototype.set.name==="set"?function(t,r,n){r.set(t,n)}:function(t,r,n){if(t.copy)t.copy(r,n,0,t.length);else for(var i=0;i<t.length;)r[n++]=t[i++]}};je.prototype.bytes=function(t){bt.isString(t)&&(t=bt._Buffer_from(t,"base64"));var r=t.length>>>0;return this.uint32(r),r&&this._push(je.writeBytesBuffer,r,t),this};function il(e,t,r){e.length<40?bt.utf8.write(e,t,r):t.utf8Write?t.utf8Write(e,r):t.write(e,r)}je.prototype.string=function(t){var r=bt.Buffer.byteLength(t);return this.uint32(r),r&&this._push(il,r,t),this};je._configure()});var Ni=A((q1,Ms)=>{"use strict";Ms.exports=se;var $e=mt(),ki,qs=$e.LongBits,al=$e.utf8;function Ve(e,t){return RangeError("index out of range: "+e.pos+" + "+(t||1)+" > "+e.len)}function se(e){this.buf=e,this.pos=0,this.len=e.length}var Us=typeof Uint8Array!="undefined"?function(t){if(t instanceof Uint8Array||Array.isArray(t))return new se(t);throw Error("illegal buffer")}:function(t){if(Array.isArray(t))return new se(t);throw Error("illegal buffer")},Os=function(){return $e.Buffer?function(r){return(se.create=function(i){return $e.Buffer.isBuffer(i)?new ki(i):Us(i)})(r)}:Us};se.create=Os();se.prototype._slice=$e.Array.prototype.subarray||$e.Array.prototype.slice;se.prototype.uint32=function(){var t=4294967295;return function(){if(t=(this.buf[this.pos]&127)>>>0,this.buf[this.pos++]<128||(t=(t|(this.buf[this.pos]&127)<<7)>>>0,this.buf[this.pos++]<128)||(t=(t|(this.buf[this.pos]&127)<<14)>>>0,this.buf[this.pos++]<128)||(t=(t|(this.buf[this.pos]&127)<<21)>>>0,this.buf[this.pos++]<128)||(t=(t|(this.buf[this.pos]&15)<<28)>>>0,this.buf[this.pos++]<128))return t;if((this.pos+=5)>this.len)throw this.pos=this.len,Ve(this,10);return t}}();se.prototype.int32=function(){return this.uint32()|0};se.prototype.sint32=function(){var t=this.uint32();return t>>>1^-(t&1)|0};function Ki(){var e=new qs(0,0),t=0;if(this.len-this.pos>4){for(;t<4;++t)if(e.lo=(e.lo|(this.buf[this.pos]&127)<<t*7)>>>0,this.buf[this.pos++]<128)return e;if(e.lo=(e.lo|(this.buf[this.pos]&127)<<28)>>>0,e.hi=(e.hi|(this.buf[this.pos]&127)>>4)>>>0,this.buf[this.pos++]<128)return e;t=0}else{for(;t<3;++t){if(this.pos>=this.len)throw Ve(this);if(e.lo=(e.lo|(this.buf[this.pos]&127)<<t*7)>>>0,this.buf[this.pos++]<128)return e}return e.lo=(e.lo|(this.buf[this.pos++]&127)<<t*7)>>>0,e}if(this.len-this.pos>4){for(;t<5;++t)if(e.hi=(e.hi|(this.buf[this.pos]&127)<<t*7+3)>>>0,this.buf[this.pos++]<128)return e}else for(;t<5;++t){if(this.pos>=this.len)throw Ve(this);if(e.hi=(e.hi|(this.buf[this.pos]&127)<<t*7+3)>>>0,this.buf[this.pos++]<128)return e}throw Error("invalid varint encoding")}se.prototype.bool=function(){return this.uint32()!==0};function En(e,t){return(e[t-4]|e[t-3]<<8|e[t-2]<<16|e[t-1]<<24)>>>0}se.prototype.fixed32=function(){if(this.pos+4>this.len)throw Ve(this,4);return En(this.buf,this.pos+=4)};se.prototype.sfixed32=function(){if(this.pos+4>this.len)throw Ve(this,4);return En(this.buf,this.pos+=4)|0};function Fs(){if(this.pos+8>this.len)throw Ve(this,8);return new qs(En(this.buf,this.pos+=4),En(this.buf,this.pos+=4))}se.prototype.float=function(){if(this.pos+4>this.len)throw Ve(this,4);var t=$e.float.readFloatLE(this.buf,this.pos);return this.pos+=4,t};se.prototype.double=function(){if(this.pos+8>this.len)throw Ve(this,4);var t=$e.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,t};se.prototype.bytes=function(){var t=this.uint32(),r=this.pos,n=this.pos+t;if(n>this.len)throw Ve(this,t);return this.pos+=t,Array.isArray(this.buf)?this.buf.slice(r,n):r===n?new this.buf.constructor(0):this._slice.call(this.buf,r,n)};se.prototype.string=function(){var t=this.bytes();return al.read(t,0,t.length)};se.prototype.skip=function(t){if(typeof t=="number"){if(this.pos+t>this.len)throw Ve(this,t);this.pos+=t}else do if(this.pos>=this.len)throw Ve(this);while(this.buf[this.pos++]&128);return this};se.prototype.skipType=function(e){switch(e){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(e=this.uint32()&7)!=4;)this.skipType(e);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+e+" at offset "+this.pos)}return this};se._configure=function(e){ki=e,se.create=Os(),ki._configure();var t=$e.Long?"toLong":"toNumber";$e.merge(se.prototype,{int64:function(){return Ki.call(this)[t](!1)},uint64:function(){return Ki.call(this)[t](!0)},sint64:function(){return Ki.call(this).zzDecode()[t](!1)},fixed64:function(){return Fs.call(this)[t](!0)},sfixed64:function(){return Fs.call(this)[t](!1)}})}});var Gs=A((U1,Hs)=>{"use strict";Hs.exports=Mt;var Vs=Ni();(Mt.prototype=Object.create(Vs.prototype)).constructor=Mt;var zs=mt();function Mt(e){Vs.call(this,e)}Mt._configure=function(){zs.Buffer&&(Mt.prototype._slice=zs.Buffer.prototype.slice)};Mt.prototype.string=function(){var t=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+t,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+t,this.len))};Mt._configure()});var js=A((O1,Ws)=>{"use strict";Ws.exports=kr;var Li=mt();(kr.prototype=Object.create(Li.EventEmitter.prototype)).constructor=kr;function kr(e,t,r){if(typeof e!="function")throw TypeError("rpcImpl must be a function");Li.EventEmitter.call(this),this.rpcImpl=e,this.requestDelimited=Boolean(t),this.responseDelimited=Boolean(r)}kr.prototype.rpcCall=function e(t,r,n,i,a){if(!i)throw TypeError("request must be specified");var s=this;if(!a)return Li.asPromise(e,s,t,r,n,i);if(!s.rpcImpl){setTimeout(function(){a(Error("already ended"))},0);return}try{return s.rpcImpl(t,r[s.requestDelimited?"encodeDelimited":"encode"](i).finish(),function(u,c){if(u)return s.emit("error",u,t),a(u);if(c===null){s.end(!0);return}if(!(c instanceof n))try{c=n[s.responseDelimited?"decodeDelimited":"decode"](c)}catch(f){return s.emit("error",f,t),a(f)}return s.emit("data",c,t),a(null,c)})}catch(o){s.emit("error",o,t),setTimeout(function(){a(o)},0);return}};kr.prototype.end=function(t){return this.rpcImpl&&(t||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}});var Qs=A($s=>{"use strict";var sl=$s;sl.Service=js()});var Zs=A((M1,Ys)=>{"use strict";Ys.exports={}});var eo=A(Js=>{"use strict";var _e=Js;_e.build="minimal";_e.Writer=Di();_e.BufferWriter=Ls();_e.Reader=Ni();_e.BufferReader=Gs();_e.util=mt();_e.rpc=Qs();_e.roots=Zs();_e.configure=Xs;function Xs(){_e.util._configure(),_e.Writer._configure(_e.BufferWriter),_e.Reader._configure(_e.BufferReader)}Xs()});var qi=A((z1,to)=>{"use strict";to.exports=eo()});var Cn=A((H1,no)=>{"use strict";var Vt=qi(),Bn=Vt.Reader,ro=Vt.Writer,ve=Vt.util,ke=Vt.roots["libp2p-crypto-keys"]||(Vt.roots["libp2p-crypto-keys"]={});ke.KeyType=function(){var e={},t=Object.create(e);return t[e[0]="RSA"]=0,t[e[1]="Ed25519"]=1,t[e[2]="Secp256k1"]=2,t}();ke.PublicKey=function(){function e(t){if(t)for(var r=Object.keys(t),n=0;n<r.length;++n)t[r[n]]!=null&&(this[r[n]]=t[r[n]])}return e.prototype.Type=0,e.prototype.Data=ve.newBuffer([]),e.encode=function(r,n){return n||(n=ro.create()),n.uint32(8).int32(r.Type),n.uint32(18).bytes(r.Data),n},e.decode=function(r,n){r instanceof Bn||(r=Bn.create(r));for(var i=n===void 0?r.len:r.pos+n,a=new ke.PublicKey;r.pos<i;){var s=r.uint32();switch(s>>>3){case 1:a.Type=r.int32();break;case 2:a.Data=r.bytes();break;default:r.skipType(s&7);break}}if(!a.hasOwnProperty("Type"))throw ve.ProtocolError("missing required 'Type'",{instance:a});if(!a.hasOwnProperty("Data"))throw ve.ProtocolError("missing required 'Data'",{instance:a});return a},e.fromObject=function(r){if(r instanceof ke.PublicKey)return r;var n=new ke.PublicKey;switch(r.Type){case"RSA":case 0:n.Type=0;break;case"Ed25519":case 1:n.Type=1;break;case"Secp256k1":case 2:n.Type=2;break}return r.Data!=null&&(typeof r.Data=="string"?ve.base64.decode(r.Data,n.Data=ve.newBuffer(ve.base64.length(r.Data)),0):r.Data.length&&(n.Data=r.Data)),n},e.toObject=function(r,n){n||(n={});var i={};return n.defaults&&(i.Type=n.enums===String?"RSA":0,n.bytes===String?i.Data="":(i.Data=[],n.bytes!==Array&&(i.Data=ve.newBuffer(i.Data)))),r.Type!=null&&r.hasOwnProperty("Type")&&(i.Type=n.enums===String?ke.KeyType[r.Type]:r.Type),r.Data!=null&&r.hasOwnProperty("Data")&&(i.Data=n.bytes===String?ve.base64.encode(r.Data,0,r.Data.length):n.bytes===Array?Array.prototype.slice.call(r.Data):r.Data),i},e.prototype.toJSON=function(){return this.constructor.toObject(this,Vt.util.toJSONOptions)},e}();ke.PrivateKey=function(){function e(t){if(t)for(var r=Object.keys(t),n=0;n<r.length;++n)t[r[n]]!=null&&(this[r[n]]=t[r[n]])}return e.prototype.Type=0,e.prototype.Data=ve.newBuffer([]),e.encode=function(r,n){return n||(n=ro.create()),n.uint32(8).int32(r.Type),n.uint32(18).bytes(r.Data),n},e.decode=function(r,n){r instanceof Bn||(r=Bn.create(r));for(var i=n===void 0?r.len:r.pos+n,a=new ke.PrivateKey;r.pos<i;){var s=r.uint32();switch(s>>>3){case 1:a.Type=r.int32();break;case 2:a.Data=r.bytes();break;default:r.skipType(s&7);break}}if(!a.hasOwnProperty("Type"))throw ve.ProtocolError("missing required 'Type'",{instance:a});if(!a.hasOwnProperty("Data"))throw ve.ProtocolError("missing required 'Data'",{instance:a});return a},e.fromObject=function(r){if(r instanceof ke.PrivateKey)return r;var n=new ke.PrivateKey;switch(r.Type){case"RSA":case 0:n.Type=0;break;case"Ed25519":case 1:n.Type=1;break;case"Secp256k1":case 2:n.Type=2;break}return r.Data!=null&&(typeof r.Data=="string"?ve.base64.decode(r.Data,n.Data=ve.newBuffer(ve.base64.length(r.Data)),0):r.Data.length&&(n.Data=r.Data)),n},e.toObject=function(r,n){n||(n={});var i={};return n.defaults&&(i.Type=n.enums===String?"RSA":0,n.bytes===String?i.Data="":(i.Data=[],n.bytes!==Array&&(i.Data=ve.newBuffer(i.Data)))),r.Type!=null&&r.hasOwnProperty("Type")&&(i.Type=n.enums===String?ke.KeyType[r.Type]:r.Type),r.Data!=null&&r.hasOwnProperty("Data")&&(i.Data=n.bytes===String?ve.base64.encode(r.Data,0,r.Data.length):n.bytes===Array?Array.prototype.slice.call(r.Data):r.Data),i},e.prototype.toJSON=function(){return this.constructor.toObject(this,Vt.util.toJSONOptions)},e}();no.exports=ke});var Y=A((G1,io)=>{io.exports={options:{usePureJavaScript:!1}}});var oo=A((W1,so)=>{var Ui={};so.exports=Ui;var ao={};Ui.encode=function(e,t,r){if(typeof t!="string")throw new TypeError('"alphabet" must be a string.');if(r!==void 0&&typeof r!="number")throw new TypeError('"maxline" must be a number.');var n="";if(!(e instanceof Uint8Array))n=ol(e,t);else{var i=0,a=t.length,s=t.charAt(0),o=[0];for(i=0;i<e.length;++i){for(var u=0,c=e[i];u<o.length;++u)c+=o[u]<<8,o[u]=c%a,c=c/a|0;for(;c>0;)o.push(c%a),c=c/a|0}for(i=0;e[i]===0&&i<e.length-1;++i)n+=s;for(i=o.length-1;i>=0;--i)n+=t[o[i]]}if(r){var f=new RegExp(".{1,"+r+"}","g");n=n.match(f).join(`\r
`)}return n};Ui.decode=function(e,t){if(typeof e!="string")throw new TypeError('"input" must be a string.');if(typeof t!="string")throw new TypeError('"alphabet" must be a string.');var r=ao[t];if(!r){r=ao[t]=[];for(var n=0;n<t.length;++n)r[t.charCodeAt(n)]=n}e=e.replace(/\s/g,"");for(var i=t.length,a=t.charAt(0),s=[0],n=0;n<e.length;n++){var o=r[e.charCodeAt(n)];if(o===void 0)return;for(var u=0,c=o;u<s.length;++u)c+=s[u]*i,s[u]=c&255,c>>=8;for(;c>0;)s.push(c&255),c>>=8}for(var f=0;e[f]===a&&f<e.length-1;++f)s.push(0);return typeof Buffer!="undefined"?Buffer.from(s.reverse()):new Uint8Array(s.reverse())};function ol(e,t){var r=0,n=t.length,i=t.charAt(0),a=[0];for(r=0;r<e.length();++r){for(var s=0,o=e.at(r);s<a.length;++s)o+=a[s]<<8,a[s]=o%n,o=o/n|0;for(;o>0;)a.push(o%n),o=o/n|0}var u="";for(r=0;e.at(r)===0&&r<e.length()-1;++r)u+=i;for(r=a.length-1;r>=0;--r)u+=t[a[r]];return u}});var ue=A((j1,lo)=>{var uo=Y(),co=oo(),y=lo.exports=uo.util=uo.util||{};(function(){if(typeof process!="undefined"&&process.nextTick&&!process.browser){y.nextTick=process.nextTick,typeof setImmediate=="function"?y.setImmediate=setImmediate:y.setImmediate=y.nextTick;return}if(typeof setImmediate=="function"){y.setImmediate=function(){return setImmediate.apply(void 0,arguments)},y.nextTick=function(o){return setImmediate(o)};return}if(y.setImmediate=function(o){setTimeout(o,0)},typeof window!="undefined"&&typeof window.postMessage=="function"){let o=function(u){if(u.source===window&&u.data===e){u.stopPropagation();var c=t.slice();t.length=0,c.forEach(function(f){f()})}};var s=o,e="forge.setImmediate",t=[];y.setImmediate=function(u){t.push(u),t.length===1&&window.postMessage(e,"*")},window.addEventListener("message",o,!0)}if(typeof MutationObserver!="undefined"){var r=Date.now(),n=!0,i=document.createElement("div"),t=[];new MutationObserver(function(){var u=t.slice();t.length=0,u.forEach(function(c){c()})}).observe(i,{attributes:!0});var a=y.setImmediate;y.setImmediate=function(u){Date.now()-r>15?(r=Date.now(),a(u)):(t.push(u),t.length===1&&i.setAttribute("a",n=!n))}}y.nextTick=y.setImmediate})();y.isNodejs=typeof process!="undefined"&&process.versions&&process.versions.node;y.globalScope=function(){return y.isNodejs?globalThis:typeof self=="undefined"?window:self}();y.isArray=Array.isArray||function(e){return Object.prototype.toString.call(e)==="[object Array]"};y.isArrayBuffer=function(e){return typeof ArrayBuffer!="undefined"&&e instanceof ArrayBuffer};y.isArrayBufferView=function(e){return e&&y.isArrayBuffer(e.buffer)&&e.byteLength!==void 0};function Kr(e){if(!(e===8||e===16||e===24||e===32))throw new Error("Only 8, 16, 24, or 32 bits supported: "+e)}y.ByteBuffer=Oi;function Oi(e){if(this.data="",this.read=0,typeof e=="string")this.data=e;else if(y.isArrayBuffer(e)||y.isArrayBufferView(e))if(typeof Buffer!="undefined"&&e instanceof Buffer)this.data=e.toString("binary");else{var t=new Uint8Array(e);try{this.data=String.fromCharCode.apply(null,t)}catch(n){for(var r=0;r<t.length;++r)this.putByte(t[r])}}else(e instanceof Oi||typeof e=="object"&&typeof e.data=="string"&&typeof e.read=="number")&&(this.data=e.data,this.read=e.read);this._constructedStringLength=0}y.ByteStringBuffer=Oi;var ul=4096;y.ByteStringBuffer.prototype._optimizeConstructedString=function(e){this._constructedStringLength+=e,this._constructedStringLength>ul&&(this.data.substr(0,1),this._constructedStringLength=0)};y.ByteStringBuffer.prototype.length=function(){return this.data.length-this.read};y.ByteStringBuffer.prototype.isEmpty=function(){return this.length()<=0};y.ByteStringBuffer.prototype.putByte=function(e){return this.putBytes(String.fromCharCode(e))};y.ByteStringBuffer.prototype.fillWithByte=function(e,t){e=String.fromCharCode(e);for(var r=this.data;t>0;)t&1&&(r+=e),t>>>=1,t>0&&(e+=e);return this.data=r,this._optimizeConstructedString(t),this};y.ByteStringBuffer.prototype.putBytes=function(e){return this.data+=e,this._optimizeConstructedString(e.length),this};y.ByteStringBuffer.prototype.putString=function(e){return this.putBytes(y.encodeUtf8(e))};y.ByteStringBuffer.prototype.putInt16=function(e){return this.putBytes(String.fromCharCode(e>>8&255)+String.fromCharCode(e&255))};y.ByteStringBuffer.prototype.putInt24=function(e){return this.putBytes(String.fromCharCode(e>>16&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(e&255))};y.ByteStringBuffer.prototype.putInt32=function(e){return this.putBytes(String.fromCharCode(e>>24&255)+String.fromCharCode(e>>16&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(e&255))};y.ByteStringBuffer.prototype.putInt16Le=function(e){return this.putBytes(String.fromCharCode(e&255)+String.fromCharCode(e>>8&255))};y.ByteStringBuffer.prototype.putInt24Le=function(e){return this.putBytes(String.fromCharCode(e&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(e>>16&255))};y.ByteStringBuffer.prototype.putInt32Le=function(e){return this.putBytes(String.fromCharCode(e&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(e>>16&255)+String.fromCharCode(e>>24&255))};y.ByteStringBuffer.prototype.putInt=function(e,t){Kr(t);var r="";do t-=8,r+=String.fromCharCode(e>>t&255);while(t>0);return this.putBytes(r)};y.ByteStringBuffer.prototype.putSignedInt=function(e,t){return e<0&&(e+=2<<t-1),this.putInt(e,t)};y.ByteStringBuffer.prototype.putBuffer=function(e){return this.putBytes(e.getBytes())};y.ByteStringBuffer.prototype.getByte=function(){return this.data.charCodeAt(this.read++)};y.ByteStringBuffer.prototype.getInt16=function(){var e=this.data.charCodeAt(this.read)<<8^this.data.charCodeAt(this.read+1);return this.read+=2,e};y.ByteStringBuffer.prototype.getInt24=function(){var e=this.data.charCodeAt(this.read)<<16^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2);return this.read+=3,e};y.ByteStringBuffer.prototype.getInt32=function(){var e=this.data.charCodeAt(this.read)<<24^this.data.charCodeAt(this.read+1)<<16^this.data.charCodeAt(this.read+2)<<8^this.data.charCodeAt(this.read+3);return this.read+=4,e};y.ByteStringBuffer.prototype.getInt16Le=function(){var e=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8;return this.read+=2,e};y.ByteStringBuffer.prototype.getInt24Le=function(){var e=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16;return this.read+=3,e};y.ByteStringBuffer.prototype.getInt32Le=function(){var e=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16^this.data.charCodeAt(this.read+3)<<24;return this.read+=4,e};y.ByteStringBuffer.prototype.getInt=function(e){Kr(e);var t=0;do t=(t<<8)+this.data.charCodeAt(this.read++),e-=8;while(e>0);return t};y.ByteStringBuffer.prototype.getSignedInt=function(e){var t=this.getInt(e),r=2<<e-2;return t>=r&&(t-=r<<1),t};y.ByteStringBuffer.prototype.getBytes=function(e){var t;return e?(e=Math.min(this.length(),e),t=this.data.slice(this.read,this.read+e),this.read+=e):e===0?t="":(t=this.read===0?this.data:this.data.slice(this.read),this.clear()),t};y.ByteStringBuffer.prototype.bytes=function(e){return typeof e=="undefined"?this.data.slice(this.read):this.data.slice(this.read,this.read+e)};y.ByteStringBuffer.prototype.at=function(e){return this.data.charCodeAt(this.read+e)};y.ByteStringBuffer.prototype.setAt=function(e,t){return this.data=this.data.substr(0,this.read+e)+String.fromCharCode(t)+this.data.substr(this.read+e+1),this};y.ByteStringBuffer.prototype.last=function(){return this.data.charCodeAt(this.data.length-1)};y.ByteStringBuffer.prototype.copy=function(){var e=y.createBuffer(this.data);return e.read=this.read,e};y.ByteStringBuffer.prototype.compact=function(){return this.read>0&&(this.data=this.data.slice(this.read),this.read=0),this};y.ByteStringBuffer.prototype.clear=function(){return this.data="",this.read=0,this};y.ByteStringBuffer.prototype.truncate=function(e){var t=Math.max(0,this.length()-e);return this.data=this.data.substr(this.read,t),this.read=0,this};y.ByteStringBuffer.prototype.toHex=function(){for(var e="",t=this.read;t<this.data.length;++t){var r=this.data.charCodeAt(t);r<16&&(e+="0"),e+=r.toString(16)}return e};y.ByteStringBuffer.prototype.toString=function(){return y.decodeUtf8(this.bytes())};function cl(e,t){t=t||{},this.read=t.readOffset||0,this.growSize=t.growSize||1024;var r=y.isArrayBuffer(e),n=y.isArrayBufferView(e);if(r||n){r?this.data=new DataView(e):this.data=new DataView(e.buffer,e.byteOffset,e.byteLength),this.write="writeOffset"in t?t.writeOffset:this.data.byteLength;return}this.data=new DataView(new ArrayBuffer(0)),this.write=0,e!=null&&this.putBytes(e),"writeOffset"in t&&(this.write=t.writeOffset)}y.DataBuffer=cl;y.DataBuffer.prototype.length=function(){return this.write-this.read};y.DataBuffer.prototype.isEmpty=function(){return this.length()<=0};y.DataBuffer.prototype.accommodate=function(e,t){if(this.length()>=e)return this;t=Math.max(t||this.growSize,e);var r=new Uint8Array(this.data.buffer,this.data.byteOffset,this.data.byteLength),n=new Uint8Array(this.length()+t);return n.set(r),this.data=new DataView(n.buffer),this};y.DataBuffer.prototype.putByte=function(e){return this.accommodate(1),this.data.setUint8(this.write++,e),this};y.DataBuffer.prototype.fillWithByte=function(e,t){this.accommodate(t);for(var r=0;r<t;++r)this.data.setUint8(e);return this};y.DataBuffer.prototype.putBytes=function(e,t){if(y.isArrayBufferView(e)){var r=new Uint8Array(e.buffer,e.byteOffset,e.byteLength),n=r.byteLength-r.byteOffset;this.accommodate(n);var i=new Uint8Array(this.data.buffer,this.write);return i.set(r),this.write+=n,this}if(y.isArrayBuffer(e)){var r=new Uint8Array(e);this.accommodate(r.byteLength);var i=new Uint8Array(this.data.buffer);return i.set(r,this.write),this.write+=r.byteLength,this}if(e instanceof y.DataBuffer||typeof e=="object"&&typeof e.read=="number"&&typeof e.write=="number"&&y.isArrayBufferView(e.data)){var r=new Uint8Array(e.data.byteLength,e.read,e.length());this.accommodate(r.byteLength);var i=new Uint8Array(e.data.byteLength,this.write);return i.set(r),this.write+=r.byteLength,this}if(e instanceof y.ByteStringBuffer&&(e=e.data,t="binary"),t=t||"binary",typeof e=="string"){var a;if(t==="hex")return this.accommodate(Math.ceil(e.length/2)),a=new Uint8Array(this.data.buffer,this.write),this.write+=y.binary.hex.decode(e,a,this.write),this;if(t==="base64")return this.accommodate(Math.ceil(e.length/4)*3),a=new Uint8Array(this.data.buffer,this.write),this.write+=y.binary.base64.decode(e,a,this.write),this;if(t==="utf8"&&(e=y.encodeUtf8(e),t="binary"),t==="binary"||t==="raw")return this.accommodate(e.length),a=new Uint8Array(this.data.buffer,this.write),this.write+=y.binary.raw.decode(a),this;if(t==="utf16")return this.accommodate(e.length*2),a=new Uint16Array(this.data.buffer,this.write),this.write+=y.text.utf16.encode(a),this;throw new Error("Invalid encoding: "+t)}throw Error("Invalid parameter: "+e)};y.DataBuffer.prototype.putBuffer=function(e){return this.putBytes(e),e.clear(),this};y.DataBuffer.prototype.putString=function(e){return this.putBytes(e,"utf16")};y.DataBuffer.prototype.putInt16=function(e){return this.accommodate(2),this.data.setInt16(this.write,e),this.write+=2,this};y.DataBuffer.prototype.putInt24=function(e){return this.accommodate(3),this.data.setInt16(this.write,e>>8&65535),this.data.setInt8(this.write,e>>16&255),this.write+=3,this};y.DataBuffer.prototype.putInt32=function(e){return this.accommodate(4),this.data.setInt32(this.write,e),this.write+=4,this};y.DataBuffer.prototype.putInt16Le=function(e){return this.accommodate(2),this.data.setInt16(this.write,e,!0),this.write+=2,this};y.DataBuffer.prototype.putInt24Le=function(e){return this.accommodate(3),this.data.setInt8(this.write,e>>16&255),this.data.setInt16(this.write,e>>8&65535,!0),this.write+=3,this};y.DataBuffer.prototype.putInt32Le=function(e){return this.accommodate(4),this.data.setInt32(this.write,e,!0),this.write+=4,this};y.DataBuffer.prototype.putInt=function(e,t){Kr(t),this.accommodate(t/8);do t-=8,this.data.setInt8(this.write++,e>>t&255);while(t>0);return this};y.DataBuffer.prototype.putSignedInt=function(e,t){return Kr(t),this.accommodate(t/8),e<0&&(e+=2<<t-1),this.putInt(e,t)};y.DataBuffer.prototype.getByte=function(){return this.data.getInt8(this.read++)};y.DataBuffer.prototype.getInt16=function(){var e=this.data.getInt16(this.read);return this.read+=2,e};y.DataBuffer.prototype.getInt24=function(){var e=this.data.getInt16(this.read)<<8^this.data.getInt8(this.read+2);return this.read+=3,e};y.DataBuffer.prototype.getInt32=function(){var e=this.data.getInt32(this.read);return this.read+=4,e};y.DataBuffer.prototype.getInt16Le=function(){var e=this.data.getInt16(this.read,!0);return this.read+=2,e};y.DataBuffer.prototype.getInt24Le=function(){var e=this.data.getInt8(this.read)^this.data.getInt16(this.read+1,!0)<<8;return this.read+=3,e};y.DataBuffer.prototype.getInt32Le=function(){var e=this.data.getInt32(this.read,!0);return this.read+=4,e};y.DataBuffer.prototype.getInt=function(e){Kr(e);var t=0;do t=(t<<8)+this.data.getInt8(this.read++),e-=8;while(e>0);return t};y.DataBuffer.prototype.getSignedInt=function(e){var t=this.getInt(e),r=2<<e-2;return t>=r&&(t-=r<<1),t};y.DataBuffer.prototype.getBytes=function(e){var t;return e?(e=Math.min(this.length(),e),t=this.data.slice(this.read,this.read+e),this.read+=e):e===0?t="":(t=this.read===0?this.data:this.data.slice(this.read),this.clear()),t};y.DataBuffer.prototype.bytes=function(e){return typeof e=="undefined"?this.data.slice(this.read):this.data.slice(this.read,this.read+e)};y.DataBuffer.prototype.at=function(e){return this.data.getUint8(this.read+e)};y.DataBuffer.prototype.setAt=function(e,t){return this.data.setUint8(e,t),this};y.DataBuffer.prototype.last=function(){return this.data.getUint8(this.write-1)};y.DataBuffer.prototype.copy=function(){return new y.DataBuffer(this)};y.DataBuffer.prototype.compact=function(){if(this.read>0){var e=new Uint8Array(this.data.buffer,this.read),t=new Uint8Array(e.byteLength);t.set(e),this.data=new DataView(t),this.write-=this.read,this.read=0}return this};y.DataBuffer.prototype.clear=function(){return this.data=new DataView(new ArrayBuffer(0)),this.read=this.write=0,this};y.DataBuffer.prototype.truncate=function(e){return this.write=Math.max(0,this.length()-e),this.read=Math.min(this.read,this.write),this};y.DataBuffer.prototype.toHex=function(){for(var e="",t=this.read;t<this.data.byteLength;++t){var r=this.data.getUint8(t);r<16&&(e+="0"),e+=r.toString(16)}return e};y.DataBuffer.prototype.toString=function(e){var t=new Uint8Array(this.data,this.read,this.length());if(e=e||"utf8",e==="binary"||e==="raw")return y.binary.raw.encode(t);if(e==="hex")return y.binary.hex.encode(t);if(e==="base64")return y.binary.base64.encode(t);if(e==="utf8")return y.text.utf8.decode(t);if(e==="utf16")return y.text.utf16.decode(t);throw new Error("Invalid encoding: "+e)};y.createBuffer=function(e,t){return t=t||"raw",e!==void 0&&t==="utf8"&&(e=y.encodeUtf8(e)),new y.ByteBuffer(e)};y.fillString=function(e,t){for(var r="";t>0;)t&1&&(r+=e),t>>>=1,t>0&&(e+=e);return r};y.xorBytes=function(e,t,r){for(var n="",i="",a="",s=0,o=0;r>0;--r,++s)i=e.charCodeAt(s)^t.charCodeAt(s),o>=10&&(n+=a,a="",o=0),a+=String.fromCharCode(i),++o;return n+=a,n};y.hexToBytes=function(e){var t="",r=0;for(e.length&!0&&(r=1,t+=String.fromCharCode(parseInt(e[0],16)));r<e.length;r+=2)t+=String.fromCharCode(parseInt(e.substr(r,2),16));return t};y.bytesToHex=function(e){return y.createBuffer(e).toHex()};y.int32ToBytes=function(e){return String.fromCharCode(e>>24&255)+String.fromCharCode(e>>16&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(e&255)};var wt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",St=[62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,64,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51],fo="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";y.encode64=function(e,t){for(var r="",n="",i,a,s,o=0;o<e.length;)i=e.charCodeAt(o++),a=e.charCodeAt(o++),s=e.charCodeAt(o++),r+=wt.charAt(i>>2),r+=wt.charAt((i&3)<<4|a>>4),isNaN(a)?r+="==":(r+=wt.charAt((a&15)<<2|s>>6),r+=isNaN(s)?"=":wt.charAt(s&63)),t&&r.length>t&&(n+=r.substr(0,t)+`\r
`,r=r.substr(t));return n+=r,n};y.decode64=function(e){e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");for(var t="",r,n,i,a,s=0;s<e.length;)r=St[e.charCodeAt(s++)-43],n=St[e.charCodeAt(s++)-43],i=St[e.charCodeAt(s++)-43],a=St[e.charCodeAt(s++)-43],t+=String.fromCharCode(r<<2|n>>4),i!==64&&(t+=String.fromCharCode((n&15)<<4|i>>2),a!==64&&(t+=String.fromCharCode((i&3)<<6|a)));return t};y.encodeUtf8=function(e){return unescape(encodeURIComponent(e))};y.decodeUtf8=function(e){return decodeURIComponent(escape(e))};y.binary={raw:{},hex:{},base64:{},base58:{},baseN:{encode:co.encode,decode:co.decode}};y.binary.raw.encode=function(e){return String.fromCharCode.apply(null,e)};y.binary.raw.decode=function(e,t,r){var n=t;n||(n=new Uint8Array(e.length)),r=r||0;for(var i=r,a=0;a<e.length;++a)n[i++]=e.charCodeAt(a);return t?i-r:n};y.binary.hex.encode=y.bytesToHex;y.binary.hex.decode=function(e,t,r){var n=t;n||(n=new Uint8Array(Math.ceil(e.length/2))),r=r||0;var i=0,a=r;for(e.length&1&&(i=1,n[a++]=parseInt(e[0],16));i<e.length;i+=2)n[a++]=parseInt(e.substr(i,2),16);return t?a-r:n};y.binary.base64.encode=function(e,t){for(var r="",n="",i,a,s,o=0;o<e.byteLength;)i=e[o++],a=e[o++],s=e[o++],r+=wt.charAt(i>>2),r+=wt.charAt((i&3)<<4|a>>4),isNaN(a)?r+="==":(r+=wt.charAt((a&15)<<2|s>>6),r+=isNaN(s)?"=":wt.charAt(s&63)),t&&r.length>t&&(n+=r.substr(0,t)+`\r
`,r=r.substr(t));return n+=r,n};y.binary.base64.decode=function(e,t,r){var n=t;n||(n=new Uint8Array(Math.ceil(e.length/4)*3)),e=e.replace(/[^A-Za-z0-9\+\/\=]/g,""),r=r||0;for(var i,a,s,o,u=0,c=r;u<e.length;)i=St[e.charCodeAt(u++)-43],a=St[e.charCodeAt(u++)-43],s=St[e.charCodeAt(u++)-43],o=St[e.charCodeAt(u++)-43],n[c++]=i<<2|a>>4,s!==64&&(n[c++]=(a&15)<<4|s>>2,o!==64&&(n[c++]=(s&3)<<6|o));return t?c-r:n.subarray(0,c)};y.binary.base58.encode=function(e,t){return y.binary.baseN.encode(e,fo,t)};y.binary.base58.decode=function(e,t){return y.binary.baseN.decode(e,fo,t)};y.text={utf8:{},utf16:{}};y.text.utf8.encode=function(e,t,r){e=y.encodeUtf8(e);var n=t;n||(n=new Uint8Array(e.length)),r=r||0;for(var i=r,a=0;a<e.length;++a)n[i++]=e.charCodeAt(a);return t?i-r:n};y.text.utf8.decode=function(e){return y.decodeUtf8(String.fromCharCode.apply(null,e))};y.text.utf16.encode=function(e,t,r){var n=t;n||(n=new Uint8Array(e.length*2));var i=new Uint16Array(n.buffer);r=r||0;for(var a=r,s=r,o=0;o<e.length;++o)i[s++]=e.charCodeAt(o),a+=2;return t?a-r:n};y.text.utf16.decode=function(e){return String.fromCharCode.apply(null,new Uint16Array(e.buffer))};y.deflate=function(e,t,r){if(t=y.decode64(e.deflate(y.encode64(t)).rval),r){var n=2,i=t.charCodeAt(1);i&32&&(n=6),t=t.substring(n,t.length-4)}return t};y.inflate=function(e,t,r){var n=e.inflate(y.encode64(t)).rval;return n===null?null:y.decode64(n)};var Fi=function(e,t,r){if(!e)throw new Error("WebStorage not available.");var n;if(r===null?n=e.removeItem(t):(r=y.encode64(JSON.stringify(r)),n=e.setItem(t,r)),typeof n!="undefined"&&n.rval!==!0){var i=new Error(n.error.message);throw i.id=n.error.id,i.name=n.error.name,i}},Mi=function(e,t){if(!e)throw new Error("WebStorage not available.");var r=e.getItem(t);if(e.init)if(r.rval===null){if(r.error){var n=new Error(r.error.message);throw n.id=r.error.id,n.name=r.error.name,n}r=null}else r=r.rval;return r!==null&&(r=JSON.parse(y.decode64(r))),r},fl=function(e,t,r,n){var i=Mi(e,t);i===null&&(i={}),i[r]=n,Fi(e,t,i)},ll=function(e,t,r){var n=Mi(e,t);return n!==null&&(n=r in n?n[r]:null),n},hl=function(e,t,r){var n=Mi(e,t);if(n!==null&&r in n){delete n[r];var i=!0;for(var a in n){i=!1;break}i&&(n=null),Fi(e,t,n)}},pl=function(e,t){Fi(e,t,null)},An=function(e,t,r){var n=null;typeof r=="undefined"&&(r=["web","flash"]);var i,a=!1,s=null;for(var o in r){i=r[o];try{if(i==="flash"||i==="both"){if(t[0]===null)throw new Error("Flash local storage not available.");n=e.apply(this,t),a=i==="flash"}(i==="web"||i==="both")&&(t[0]=localStorage,n=e.apply(this,t),a=!0)}catch(u){s=u}if(a)break}if(!a)throw s;return n};y.setItem=function(e,t,r,n,i){An(fl,arguments,i)};y.getItem=function(e,t,r,n){return An(ll,arguments,n)};y.removeItem=function(e,t,r,n){An(hl,arguments,n)};y.clearItems=function(e,t,r){An(pl,arguments,r)};y.parseUrl=function(e){var t=/^(https?):\/\/([^:&^\/]*):?(\d*)(.*)$/g;t.lastIndex=0;var r=t.exec(e),n=r===null?null:{full:e,scheme:r[1],host:r[2],port:r[3],path:r[4]};return n&&(n.fullHost=n.host,n.port?(n.port!==80&&n.scheme==="http"||n.port!==443&&n.scheme==="https")&&(n.fullHost+=":"+n.port):n.scheme==="http"?n.port=80:n.scheme==="https"&&(n.port=443),n.full=n.scheme+"://"+n.fullHost),n};var _n=null;y.getQueryVariables=function(e){var t=function(n){for(var i={},a=n.split("&"),s=0;s<a.length;s++){var o=a[s].indexOf("="),u,c;o>0?(u=a[s].substring(0,o),c=a[s].substring(o+1)):(u=a[s],c=null),u in i||(i[u]=[]),!(u in Object.prototype)&&c!==null&&i[u].push(unescape(c))}return i},r;return typeof e=="undefined"?(_n===null&&(typeof window!="undefined"&&window.location&&window.location.search?_n=t(window.location.search.substring(1)):_n={}),r=_n):r=t(e),r};y.parseFragment=function(e){var t=e,r="",n=e.indexOf("?");n>0&&(t=e.substring(0,n),r=e.substring(n+1));var i=t.split("/");i.length>0&&i[0]===""&&i.shift();var a=r===""?{}:y.getQueryVariables(r);return{pathString:t,queryString:r,path:i,query:a}};y.makeRequest=function(e){var t=y.parseFragment(e),r={path:t.pathString,query:t.queryString,getPath:function(n){return typeof n=="undefined"?t.path:t.path[n]},getQuery:function(n,i){var a;return typeof n=="undefined"?a=t.query:(a=t.query[n],a&&typeof i!="undefined"&&(a=a[i])),a},getQueryLast:function(n,i){var a,s=r.getQuery(n);return s?a=s[s.length-1]:a=i,a}};return r};y.makeLink=function(e,t,r){e=jQuery.isArray(e)?e.join("/"):e;var n=jQuery.param(t||{});return r=r||"",e+(n.length>0?"?"+n:"")+(r.length>0?"#"+r:"")};y.isEmpty=function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0};y.format=function(e){for(var t=/%./g,r,n,i=0,a=[],s=0;r=t.exec(e);){n=e.substring(s,t.lastIndex-2),n.length>0&&a.push(n),s=t.lastIndex;var o=r[0][1];switch(o){case"s":case"o":i<arguments.length?a.push(arguments[i+++1]):a.push("<?>");break;case"%":a.push("%");break;default:a.push("<%"+o+"?>")}}return a.push(e.substring(s)),a.join("")};y.formatNumber=function(e,t,r,n){var i=e,a=isNaN(t=Math.abs(t))?2:t,s=r===void 0?",":r,o=n===void 0?".":n,u=i<0?"-":"",c=parseInt(i=Math.abs(+i||0).toFixed(a),10)+"",f=c.length>3?c.length%3:0;return u+(f?c.substr(0,f)+o:"")+c.substr(f).replace(/(\d{3})(?=\d)/g,"$1"+o)+(a?s+Math.abs(i-c).toFixed(a).slice(2):"")};y.formatSize=function(e){return e>=1073741824?e=y.formatNumber(e/1073741824,2,".","")+" GiB":e>=1048576?e=y.formatNumber(e/1048576,2,".","")+" MiB":e>=1024?e=y.formatNumber(e/1024,0)+" KiB":e=y.formatNumber(e,0)+" bytes",e};y.bytesFromIP=function(e){return e.indexOf(".")!==-1?y.bytesFromIPv4(e):e.indexOf(":")!==-1?y.bytesFromIPv6(e):null};y.bytesFromIPv4=function(e){if(e=e.split("."),e.length!==4)return null;for(var t=y.createBuffer(),r=0;r<e.length;++r){var n=parseInt(e[r],10);if(isNaN(n))return null;t.putByte(n)}return t.getBytes()};y.bytesFromIPv6=function(e){var t=0;e=e.split(":").filter(function(s){return s.length===0&&++t,!0});for(var r=(8-e.length+t)*2,n=y.createBuffer(),i=0;i<8;++i){if(!e[i]||e[i].length===0){n.fillWithByte(0,r),r=0;continue}var a=y.hexToBytes(e[i]);a.length<2&&n.putByte(0),n.putBytes(a)}return n.getBytes()};y.bytesToIP=function(e){return e.length===4?y.bytesToIPv4(e):e.length===16?y.bytesToIPv6(e):null};y.bytesToIPv4=function(e){if(e.length!==4)return null;for(var t=[],r=0;r<e.length;++r)t.push(e.charCodeAt(r));return t.join(".")};y.bytesToIPv6=function(e){if(e.length!==16)return null;for(var t=[],r=[],n=0,i=0;i<e.length;i+=2){for(var a=y.bytesToHex(e[i]+e[i+1]);a[0]==="0"&&a!=="0";)a=a.substr(1);if(a==="0"){var s=r[r.length-1],o=t.length;!s||o!==s.end+1?r.push({start:o,end:o}):(s.end=o,s.end-s.start>r[n].end-r[n].start&&(n=r.length-1))}t.push(a)}if(r.length>0){var u=r[n];u.end-u.start>0&&(t.splice(u.start,u.end-u.start+1,""),u.start===0&&t.unshift(""),u.end===7&&t.push(""))}return t.join(":")};y.estimateCores=function(e,t){if(typeof e=="function"&&(t=e,e={}),e=e||{},"cores"in y&&!e.update)return t(null,y.cores);if(typeof navigator!="undefined"&&"hardwareConcurrency"in navigator&&navigator.hardwareConcurrency>0)return y.cores=navigator.hardwareConcurrency,t(null,y.cores);if(typeof Worker=="undefined")return y.cores=1,t(null,y.cores);if(typeof Blob=="undefined")return y.cores=2,t(null,y.cores);var r=URL.createObjectURL(new Blob(["(",function(){self.addEventListener("message",function(s){for(var o=Date.now(),u=o+4;Date.now()<u;);self.postMessage({st:o,et:u})})}.toString(),")()"],{type:"application/javascript"}));n([],5,16);function n(s,o,u){if(o===0){var c=Math.floor(s.reduce(function(f,l){return f+l},0)/s.length);return y.cores=Math.max(1,c),URL.revokeObjectURL(r),t(null,y.cores)}i(u,function(f,l){s.push(a(u,l)),n(s,o-1,u)})}function i(s,o){for(var u=[],c=[],f=0;f<s;++f){var l=new Worker(r);l.addEventListener("message",function(h){if(c.push(h.data),c.length===s){for(var d=0;d<s;++d)u[d].terminate();o(null,c)}}),u.push(l)}for(var f=0;f<s;++f)u[f].postMessage(f)}function a(s,o){for(var u=[],c=0;c<s;++c)for(var f=o[c],l=u[c]=[],h=0;h<s;++h)if(c!==h){var d=o[h];(f.st>d.st&&f.st<d.et||d.st>f.st&&d.st<f.et)&&l.push(h)}return u.reduce(function(p,g){return Math.max(p,g.length)},0)}}});var Tn=A(($1,ho)=>{var Nr=Y();Nr.pki=Nr.pki||{};var Vi=ho.exports=Nr.pki.oids=Nr.oids=Nr.oids||{};function B(e,t){Vi[e]=t,Vi[t]=e}function W(e,t){Vi[e]=t}B("1.2.840.113549.1.1.1","rsaEncryption");B("1.2.840.113549.1.1.4","md5WithRSAEncryption");B("1.2.840.113549.1.1.5","sha1WithRSAEncryption");B("1.2.840.113549.1.1.7","RSAES-OAEP");B("1.2.840.113549.1.1.8","mgf1");B("1.2.840.113549.1.1.9","pSpecified");B("1.2.840.113549.1.1.10","RSASSA-PSS");B("1.2.840.113549.1.1.11","sha256WithRSAEncryption");B("1.2.840.113549.1.1.12","sha384WithRSAEncryption");B("1.2.840.113549.1.1.13","sha512WithRSAEncryption");B("1.3.101.112","EdDSA25519");B("1.2.840.10040.4.3","dsa-with-sha1");B("1.3.14.3.2.7","desCBC");B("1.3.14.3.2.26","sha1");B("2.16.840.1.101.3.4.2.1","sha256");B("2.16.840.1.101.3.4.2.2","sha384");B("2.16.840.1.101.3.4.2.3","sha512");B("1.2.840.113549.2.5","md5");B("1.2.840.113549.1.7.1","data");B("1.2.840.113549.1.7.2","signedData");B("1.2.840.113549.1.7.3","envelopedData");B("1.2.840.113549.1.7.4","signedAndEnvelopedData");B("1.2.840.113549.1.7.5","digestedData");B("1.2.840.113549.1.7.6","encryptedData");B("1.2.840.113549.1.9.1","emailAddress");B("1.2.840.113549.1.9.2","unstructuredName");B("1.2.840.113549.1.9.3","contentType");B("1.2.840.113549.1.9.4","messageDigest");B("1.2.840.113549.1.9.5","signingTime");B("1.2.840.113549.1.9.6","counterSignature");B("1.2.840.113549.1.9.7","challengePassword");B("1.2.840.113549.1.9.8","unstructuredAddress");B("1.2.840.113549.1.9.14","extensionRequest");B("1.2.840.113549.1.9.20","friendlyName");B("1.2.840.113549.1.9.21","localKeyId");B("1.2.840.113549.1.9.22.1","x509Certificate");B("1.2.840.113549.1.12.10.1.1","keyBag");B("1.2.840.113549.1.12.10.1.2","pkcs8ShroudedKeyBag");B("1.2.840.113549.1.12.10.1.3","certBag");B("1.2.840.113549.1.12.10.1.4","crlBag");B("1.2.840.113549.1.12.10.1.5","secretBag");B("1.2.840.113549.1.12.10.1.6","safeContentsBag");B("1.2.840.113549.1.5.13","pkcs5PBES2");B("1.2.840.113549.1.5.12","pkcs5PBKDF2");B("1.2.840.113549.1.12.1.1","pbeWithSHAAnd128BitRC4");B("1.2.840.113549.1.12.1.2","pbeWithSHAAnd40BitRC4");B("1.2.840.113549.1.12.1.3","pbeWithSHAAnd3-KeyTripleDES-CBC");B("1.2.840.113549.1.12.1.4","pbeWithSHAAnd2-KeyTripleDES-CBC");B("1.2.840.113549.1.12.1.5","pbeWithSHAAnd128BitRC2-CBC");B("1.2.840.113549.1.12.1.6","pbewithSHAAnd40BitRC2-CBC");B("1.2.840.113549.2.7","hmacWithSHA1");B("1.2.840.113549.2.8","hmacWithSHA224");B("1.2.840.113549.2.9","hmacWithSHA256");B("1.2.840.113549.2.10","hmacWithSHA384");B("1.2.840.113549.2.11","hmacWithSHA512");B("1.2.840.113549.3.7","des-EDE3-CBC");B("2.16.840.1.101.3.4.1.2","aes128-CBC");B("2.16.840.1.101.3.4.1.22","aes192-CBC");B("2.16.840.1.101.3.4.1.42","aes256-CBC");B("2.5.4.3","commonName");B("2.5.4.5","serialName");B("2.5.4.6","countryName");B("2.5.4.7","localityName");B("2.5.4.8","stateOrProvinceName");B("2.5.4.9","streetAddress");B("2.5.4.10","organizationName");B("2.5.4.11","organizationalUnitName");B("2.5.4.13","description");B("2.5.4.15","businessCategory");B("2.5.4.17","postalCode");B("1.3.6.1.4.1.311.60.2.1.2","jurisdictionOfIncorporationStateOrProvinceName");B("1.3.6.1.4.1.311.60.2.1.3","jurisdictionOfIncorporationCountryName");B("2.16.840.1.113730.1.1","nsCertType");B("2.16.840.1.113730.1.13","nsComment");W("2.5.29.1","authorityKeyIdentifier");W("2.5.29.2","keyAttributes");W("2.5.29.3","certificatePolicies");W("2.5.29.4","keyUsageRestriction");W("2.5.29.5","policyMapping");W("2.5.29.6","subtreesConstraint");W("2.5.29.7","subjectAltName");W("2.5.29.8","issuerAltName");W("2.5.29.9","subjectDirectoryAttributes");W("2.5.29.10","basicConstraints");W("2.5.29.11","nameConstraints");W("2.5.29.12","policyConstraints");W("2.5.29.13","basicConstraints");B("2.5.29.14","subjectKeyIdentifier");B("2.5.29.15","keyUsage");W("2.5.29.16","privateKeyUsagePeriod");B("2.5.29.17","subjectAltName");B("2.5.29.18","issuerAltName");B("2.5.29.19","basicConstraints");W("2.5.29.20","cRLNumber");W("2.5.29.21","cRLReason");W("2.5.29.22","expirationDate");W("2.5.29.23","instructionCode");W("2.5.29.24","invalidityDate");W("2.5.29.25","cRLDistributionPoints");W("2.5.29.26","issuingDistributionPoint");W("2.5.29.27","deltaCRLIndicator");W("2.5.29.28","issuingDistributionPoint");W("2.5.29.29","certificateIssuer");W("2.5.29.30","nameConstraints");B("2.5.29.31","cRLDistributionPoints");B("2.5.29.32","certificatePolicies");W("2.5.29.33","policyMappings");W("2.5.29.34","policyConstraints");B("2.5.29.35","authorityKeyIdentifier");W("2.5.29.36","policyConstraints");B("2.5.29.37","extKeyUsage");W("2.5.29.46","freshestCRL");W("2.5.29.54","inhibitAnyPolicy");B("1.3.6.1.4.1.11129.2.4.2","timestampList");B("1.3.6.1.5.5.7.1.1","authorityInfoAccess");B("1.3.6.1.5.5.7.3.1","serverAuth");B("1.3.6.1.5.5.7.3.2","clientAuth");B("1.3.6.1.5.5.7.3.3","codeSigning");B("1.3.6.1.5.5.7.3.4","emailProtection");B("1.3.6.1.5.5.7.3.8","timeStamping")});var qr=A((Q1,yo)=>{var ee=Y();ue();Tn();var _=yo.exports=ee.asn1=ee.asn1||{};_.Class={UNIVERSAL:0,APPLICATION:64,CONTEXT_SPECIFIC:128,PRIVATE:192};_.Type={NONE:0,BOOLEAN:1,INTEGER:2,BITSTRING:3,OCTETSTRING:4,NULL:5,OID:6,ODESC:7,EXTERNAL:8,REAL:9,ENUMERATED:10,EMBEDDED:11,UTF8:12,ROID:13,SEQUENCE:16,SET:17,PRINTABLESTRING:19,IA5STRING:22,UTCTIME:23,GENERALIZEDTIME:24,BMPSTRING:30};_.create=function(e,t,r,n,i){if(ee.util.isArray(n)){for(var a=[],s=0;s<n.length;++s)n[s]!==void 0&&a.push(n[s]);n=a}var o={tagClass:e,type:t,constructed:r,composed:r||ee.util.isArray(n),value:n};return i&&"bitStringContents"in i&&(o.bitStringContents=i.bitStringContents,o.original=_.copy(o)),o};_.copy=function(e,t){var r;if(ee.util.isArray(e)){r=[];for(var n=0;n<e.length;++n)r.push(_.copy(e[n],t));return r}return typeof e=="string"?e:(r={tagClass:e.tagClass,type:e.type,constructed:e.constructed,composed:e.composed,value:_.copy(e.value,t)},t&&!t.excludeBitStringContents&&(r.bitStringContents=e.bitStringContents),r)};_.equals=function(e,t,r){if(ee.util.isArray(e)){if(!ee.util.isArray(t)||e.length!==t.length)return!1;for(var n=0;n<e.length;++n)if(!_.equals(e[n],t[n]))return!1;return!0}if(typeof e!=typeof t)return!1;if(typeof e=="string")return e===t;var i=e.tagClass===t.tagClass&&e.type===t.type&&e.constructed===t.constructed&&e.composed===t.composed&&_.equals(e.value,t.value);return r&&r.includeBitStringContents&&(i=i&&e.bitStringContents===t.bitStringContents),i};_.getBerValueLength=function(e){var t=e.getByte();if(t!==128){var r,n=t&128;return n?r=e.getInt((t&127)<<3):r=t,r}};function Lr(e,t,r){if(r>t){var n=new Error("Too few bytes to parse DER.");throw n.available=e.length(),n.remaining=t,n.requested=r,n}}var dl=function(e,t){var r=e.getByte();if(t--,r!==128){var n,i=r&128;if(!i)n=r;else{var a=r&127;Lr(e,t,a),n=e.getInt(a<<3)}if(n<0)throw new Error("Negative length: "+n);return n}};_.fromDer=function(e,t){return t===void 0&&(t={strict:!0,decodeBitStrings:!0}),typeof t=="boolean"&&(t={strict:t,decodeBitStrings:!0}),"strict"in t||(t.strict=!0),"decodeBitStrings"in t||(t.decodeBitStrings=!0),typeof e=="string"&&(e=ee.util.createBuffer(e)),In(e,e.length(),0,t)};function In(e,t,r,n){var i;Lr(e,t,2);var a=e.getByte();t--;var s=a&192,o=a&31;i=e.length();var u=dl(e,t);if(t-=i-e.length(),u!==void 0&&u>t){if(n.strict){var c=new Error("Too few bytes to read ASN.1 value.");throw c.available=e.length(),c.remaining=t,c.requested=u,c}u=t}var f,l,h=(a&32)==32;if(h)if(f=[],u===void 0)for(;;){if(Lr(e,t,2),e.bytes(2)===String.fromCharCode(0,0)){e.getBytes(2),t-=2;break}i=e.length(),f.push(In(e,t,r+1,n)),t-=i-e.length()}else for(;u>0;)i=e.length(),f.push(In(e,u,r+1,n)),t-=i-e.length(),u-=i-e.length();if(f===void 0&&s===_.Class.UNIVERSAL&&o===_.Type.BITSTRING&&(l=e.bytes(u)),f===void 0&&n.decodeBitStrings&&s===_.Class.UNIVERSAL&&o===_.Type.BITSTRING&&u>1){var d=e.read,p=t,g=0;if(o===_.Type.BITSTRING&&(Lr(e,t,1),g=e.getByte(),t--),g===0)try{i=e.length();var v={verbose:n.verbose,strict:!0,decodeBitStrings:!0},m=In(e,t,r+1,v),S=i-e.length();t-=S,o==_.Type.BITSTRING&&S++;var C=m.tagClass;S===u&&(C===_.Class.UNIVERSAL||C===_.Class.CONTEXT_SPECIFIC)&&(f=[m])}catch(I){}f===void 0&&(e.read=d,t=p)}if(f===void 0){if(u===void 0){if(n.strict)throw new Error("Non-constructed ASN.1 object of indefinite length.");u=t}if(o===_.Type.BMPSTRING)for(f="";u>0;u-=2)Lr(e,t,2),f+=String.fromCharCode(e.getInt16()),t-=2;else f=e.getBytes(u)}var k=l===void 0?null:{bitStringContents:l};return _.create(s,o,h,f,k)}_.toDer=function(e){var t=ee.util.createBuffer(),r=e.tagClass|e.type,n=ee.util.createBuffer(),i=!1;if("bitStringContents"in e&&(i=!0,e.original&&(i=_.equals(e,e.original))),i)n.putBytes(e.bitStringContents);else if(e.composed){e.constructed?r|=32:n.putByte(0);for(var a=0;a<e.value.length;++a)e.value[a]!==void 0&&n.putBuffer(_.toDer(e.value[a]))}else if(e.type===_.Type.BMPSTRING)for(var a=0;a<e.value.length;++a)n.putInt16(e.value.charCodeAt(a));else e.type===_.Type.INTEGER&&e.value.length>1&&(e.value.charCodeAt(0)===0&&(e.value.charCodeAt(1)&128)==0||e.value.charCodeAt(0)===255&&(e.value.charCodeAt(1)&128)==128)?n.putBytes(e.value.substr(1)):n.putBytes(e.value);if(t.putByte(r),n.length()<=127)t.putByte(n.length()&127);else{var s=n.length(),o="";do o+=String.fromCharCode(s&255),s=s>>>8;while(s>0);t.putByte(o.length|128);for(var a=o.length-1;a>=0;--a)t.putByte(o.charCodeAt(a))}return t.putBuffer(n),t};_.oidToDer=function(e){var t=e.split("."),r=ee.util.createBuffer();r.putByte(40*parseInt(t[0],10)+parseInt(t[1],10));for(var n,i,a,s,o=2;o<t.length;++o){n=!0,i=[],a=parseInt(t[o],10);do s=a&127,a=a>>>7,n||(s|=128),i.push(s),n=!1;while(a>0);for(var u=i.length-1;u>=0;--u)r.putByte(i[u])}return r};_.derToOid=function(e){var t;typeof e=="string"&&(e=ee.util.createBuffer(e));var r=e.getByte();t=Math.floor(r/40)+"."+r%40;for(var n=0;e.length()>0;)r=e.getByte(),n=n<<7,r&128?n+=r&127:(t+="."+(n+r),n=0);return t};_.utcTimeToDate=function(e){var t=new Date,r=parseInt(e.substr(0,2),10);r=r>=50?1900+r:2e3+r;var n=parseInt(e.substr(2,2),10)-1,i=parseInt(e.substr(4,2),10),a=parseInt(e.substr(6,2),10),s=parseInt(e.substr(8,2),10),o=0;if(e.length>11){var u=e.charAt(10),c=10;u!=="+"&&u!=="-"&&(o=parseInt(e.substr(10,2),10),c+=2)}if(t.setUTCFullYear(r,n,i),t.setUTCHours(a,s,o,0),c&&(u=e.charAt(c),u==="+"||u==="-")){var f=parseInt(e.substr(c+1,2),10),l=parseInt(e.substr(c+4,2),10),h=f*60+l;h*=6e4,u==="+"?t.setTime(+t-h):t.setTime(+t+h)}return t};_.generalizedTimeToDate=function(e){var t=new Date,r=parseInt(e.substr(0,4),10),n=parseInt(e.substr(4,2),10)-1,i=parseInt(e.substr(6,2),10),a=parseInt(e.substr(8,2),10),s=parseInt(e.substr(10,2),10),o=parseInt(e.substr(12,2),10),u=0,c=0,f=!1;e.charAt(e.length-1)==="Z"&&(f=!0);var l=e.length-5,h=e.charAt(l);if(h==="+"||h==="-"){var d=parseInt(e.substr(l+1,2),10),p=parseInt(e.substr(l+4,2),10);c=d*60+p,c*=6e4,h==="+"&&(c*=-1),f=!0}return e.charAt(14)==="."&&(u=parseFloat(e.substr(14),10)*1e3),f?(t.setUTCFullYear(r,n,i),t.setUTCHours(a,s,o,u),t.setTime(+t+c)):(t.setFullYear(r,n,i),t.setHours(a,s,o,u)),t};_.dateToUtcTime=function(e){if(typeof e=="string")return e;var t="",r=[];r.push((""+e.getUTCFullYear()).substr(2)),r.push(""+(e.getUTCMonth()+1)),r.push(""+e.getUTCDate()),r.push(""+e.getUTCHours()),r.push(""+e.getUTCMinutes()),r.push(""+e.getUTCSeconds());for(var n=0;n<r.length;++n)r[n].length<2&&(t+="0"),t+=r[n];return t+="Z",t};_.dateToGeneralizedTime=function(e){if(typeof e=="string")return e;var t="",r=[];r.push(""+e.getUTCFullYear()),r.push(""+(e.getUTCMonth()+1)),r.push(""+e.getUTCDate()),r.push(""+e.getUTCHours()),r.push(""+e.getUTCMinutes()),r.push(""+e.getUTCSeconds());for(var n=0;n<r.length;++n)r[n].length<2&&(t+="0"),t+=r[n];return t+="Z",t};_.integerToDer=function(e){var t=ee.util.createBuffer();if(e>=-128&&e<128)return t.putSignedInt(e,8);if(e>=-32768&&e<32768)return t.putSignedInt(e,16);if(e>=-8388608&&e<8388608)return t.putSignedInt(e,24);if(e>=-2147483648&&e<2147483648)return t.putSignedInt(e,32);var r=new Error("Integer too large; max is 32-bits.");throw r.integer=e,r};_.derToInteger=function(e){typeof e=="string"&&(e=ee.util.createBuffer(e));var t=e.length()*8;if(t>32)throw new Error("Integer too large; max is 32-bits.");return e.getSignedInt(t)};_.validate=function(e,t,r,n){var i=!1;if((e.tagClass===t.tagClass||typeof t.tagClass=="undefined")&&(e.type===t.type||typeof t.type=="undefined"))if(e.constructed===t.constructed||typeof t.constructed=="undefined"){if(i=!0,t.value&&ee.util.isArray(t.value))for(var a=0,s=0;i&&s<t.value.length;++s)i=t.value[s].optional||!1,e.value[a]&&(i=_.validate(e.value[a],t.value[s],r,n),i?++a:t.value[s].optional&&(i=!0)),!i&&n&&n.push("["+t.name+'] Tag class "'+t.tagClass+'", type "'+t.type+'" expected value length "'+t.value.length+'", got "'+e.value.length+'"');if(i&&r&&(t.capture&&(r[t.capture]=e.value),t.captureAsn1&&(r[t.captureAsn1]=e),t.captureBitStringContents&&"bitStringContents"in e&&(r[t.captureBitStringContents]=e.bitStringContents),t.captureBitStringValue&&"bitStringContents"in e)){var o;if(e.bitStringContents.length<2)r[t.captureBitStringValue]="";else{var u=e.bitStringContents.charCodeAt(0);if(u!==0)throw new Error("captureBitStringValue only supported for zero unused bits");r[t.captureBitStringValue]=e.bitStringContents.slice(1)}}}else n&&n.push("["+t.name+'] Expected constructed "'+t.constructed+'", got "'+e.constructed+'"');else n&&(e.tagClass!==t.tagClass&&n.push("["+t.name+'] Expected tag class "'+t.tagClass+'", got "'+e.tagClass+'"'),e.type!==t.type&&n.push("["+t.name+'] Expected type "'+t.type+'", got "'+e.type+'"'));return i};var po=/[^\\u0000-\\u00ff]/;_.prettyPrint=function(e,t,r){var n="";t=t||0,r=r||2,t>0&&(n+=`
`);for(var i="",a=0;a<t*r;++a)i+=" ";switch(n+=i+"Tag: ",e.tagClass){case _.Class.UNIVERSAL:n+="Universal:";break;case _.Class.APPLICATION:n+="Application:";break;case _.Class.CONTEXT_SPECIFIC:n+="Context-Specific:";break;case _.Class.PRIVATE:n+="Private:";break}if(e.tagClass===_.Class.UNIVERSAL)switch(n+=e.type,e.type){case _.Type.NONE:n+=" (None)";break;case _.Type.BOOLEAN:n+=" (Boolean)";break;case _.Type.INTEGER:n+=" (Integer)";break;case _.Type.BITSTRING:n+=" (Bit string)";break;case _.Type.OCTETSTRING:n+=" (Octet string)";break;case _.Type.NULL:n+=" (Null)";break;case _.Type.OID:n+=" (Object Identifier)";break;case _.Type.ODESC:n+=" (Object Descriptor)";break;case _.Type.EXTERNAL:n+=" (External or Instance of)";break;case _.Type.REAL:n+=" (Real)";break;case _.Type.ENUMERATED:n+=" (Enumerated)";break;case _.Type.EMBEDDED:n+=" (Embedded PDV)";break;case _.Type.UTF8:n+=" (UTF8)";break;case _.Type.ROID:n+=" (Relative Object Identifier)";break;case _.Type.SEQUENCE:n+=" (Sequence)";break;case _.Type.SET:n+=" (Set)";break;case _.Type.PRINTABLESTRING:n+=" (Printable String)";break;case _.Type.IA5String:n+=" (IA5String (ASCII))";break;case _.Type.UTCTIME:n+=" (UTC time)";break;case _.Type.GENERALIZEDTIME:n+=" (Generalized time)";break;case _.Type.BMPSTRING:n+=" (BMP String)";break}else n+=e.type;if(n+=`
`,n+=i+"Constructed: "+e.constructed+`
`,e.composed){for(var s=0,o="",a=0;a<e.value.length;++a)e.value[a]!==void 0&&(s+=1,o+=_.prettyPrint(e.value[a],t+1,r),a+1<e.value.length&&(o+=","));n+=i+"Sub values: "+s+o}else{if(n+=i+"Value: ",e.type===_.Type.OID){var u=_.derToOid(e.value);n+=u,ee.pki&&ee.pki.oids&&u in ee.pki.oids&&(n+=" ("+ee.pki.oids[u]+") ")}if(e.type===_.Type.INTEGER)try{n+=_.derToInteger(e.value)}catch(f){n+="0x"+ee.util.bytesToHex(e.value)}else if(e.type===_.Type.BITSTRING){if(e.value.length>1?n+="0x"+ee.util.bytesToHex(e.value.slice(1)):n+="(none)",e.value.length>0){var c=e.value.charCodeAt(0);c==1?n+=" (1 unused bit shown)":c>1&&(n+=" ("+c+" unused bits shown)")}}else e.type===_.Type.OCTETSTRING?(po.test(e.value)||(n+="("+e.value+") "),n+="0x"+ee.util.bytesToHex(e.value)):e.type===_.Type.UTF8?n+=ee.util.decodeUtf8(e.value):e.type===_.Type.PRINTABLESTRING||e.type===_.Type.IA5String?n+=e.value:po.test(e.value)?n+="0x"+ee.util.bytesToHex(e.value):e.value.length===0?n+="[null]":n+=e.value}return n}});var Hi=A((Y1,go)=>{var pe=Y();ue();go.exports=pe.cipher=pe.cipher||{};pe.cipher.algorithms=pe.cipher.algorithms||{};pe.cipher.createCipher=function(e,t){var r=e;if(typeof r=="string"&&(r=pe.cipher.getAlgorithm(r),r&&(r=r())),!r)throw new Error("Unsupported algorithm: "+e);return new pe.cipher.BlockCipher({algorithm:r,key:t,decrypt:!1})};pe.cipher.createDecipher=function(e,t){var r=e;if(typeof r=="string"&&(r=pe.cipher.getAlgorithm(r),r&&(r=r())),!r)throw new Error("Unsupported algorithm: "+e);return new pe.cipher.BlockCipher({algorithm:r,key:t,decrypt:!0})};pe.cipher.registerAlgorithm=function(e,t){e=e.toUpperCase(),pe.cipher.algorithms[e]=t};pe.cipher.getAlgorithm=function(e){return e=e.toUpperCase(),e in pe.cipher.algorithms?pe.cipher.algorithms[e]:null};var zi=pe.cipher.BlockCipher=function(e){this.algorithm=e.algorithm,this.mode=this.algorithm.mode,this.blockSize=this.mode.blockSize,this._finish=!1,this._input=null,this.output=null,this._op=e.decrypt?this.mode.decrypt:this.mode.encrypt,this._decrypt=e.decrypt,this.algorithm.initialize(e)};zi.prototype.start=function(e){e=e||{};var t={};for(var r in e)t[r]=e[r];t.decrypt=this._decrypt,this._finish=!1,this._input=pe.util.createBuffer(),this.output=e.output||pe.util.createBuffer(),this.mode.start(t)};zi.prototype.update=function(e){for(e&&this._input.putBuffer(e);!this._op.call(this.mode,this._input,this.output,this._finish)&&!this._finish;);this._input.compact()};zi.prototype.finish=function(e){e&&(this.mode.name==="ECB"||this.mode.name==="CBC")&&(this.mode.pad=function(r){return e(this.blockSize,r,!1)},this.mode.unpad=function(r){return e(this.blockSize,r,!0)});var t={};return t.decrypt=this._decrypt,t.overflow=this._input.length()%this.blockSize,!(!this._decrypt&&this.mode.pad&&!this.mode.pad(this._input,t)||(this._finish=!0,this.update(),this._decrypt&&this.mode.unpad&&!this.mode.unpad(this.output,t))||this.mode.afterFinish&&!this.mode.afterFinish(this.output,t))}});var Wi=A((Z1,vo)=>{var de=Y();ue();de.cipher=de.cipher||{};var U=vo.exports=de.cipher.modes=de.cipher.modes||{};U.ecb=function(e){e=e||{},this.name="ECB",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)};U.ecb.prototype.start=function(e){};U.ecb.prototype.encrypt=function(e,t,r){if(e.length()<this.blockSize&&!(r&&e.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=e.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(var n=0;n<this._ints;++n)t.putInt32(this._outBlock[n])};U.ecb.prototype.decrypt=function(e,t,r){if(e.length()<this.blockSize&&!(r&&e.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=e.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(var n=0;n<this._ints;++n)t.putInt32(this._outBlock[n])};U.ecb.prototype.pad=function(e,t){var r=e.length()===this.blockSize?this.blockSize:this.blockSize-e.length();return e.fillWithByte(r,r),!0};U.ecb.prototype.unpad=function(e,t){if(t.overflow>0)return!1;var r=e.length(),n=e.at(r-1);return n>this.blockSize<<2?!1:(e.truncate(n),!0)};U.cbc=function(e){e=e||{},this.name="CBC",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)};U.cbc.prototype.start=function(e){if(e.iv===null){if(!this._prev)throw new Error("Invalid IV parameter.");this._iv=this._prev.slice(0)}else if("iv"in e)this._iv=Pn(e.iv,this.blockSize),this._prev=this._iv.slice(0);else throw new Error("Invalid IV parameter.")};U.cbc.prototype.encrypt=function(e,t,r){if(e.length()<this.blockSize&&!(r&&e.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=this._prev[n]^e.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(var n=0;n<this._ints;++n)t.putInt32(this._outBlock[n]);this._prev=this._outBlock};U.cbc.prototype.decrypt=function(e,t,r){if(e.length()<this.blockSize&&!(r&&e.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=e.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(var n=0;n<this._ints;++n)t.putInt32(this._prev[n]^this._outBlock[n]);this._prev=this._inBlock.slice(0)};U.cbc.prototype.pad=function(e,t){var r=e.length()===this.blockSize?this.blockSize:this.blockSize-e.length();return e.fillWithByte(r,r),!0};U.cbc.prototype.unpad=function(e,t){if(t.overflow>0)return!1;var r=e.length(),n=e.at(r-1);return n>this.blockSize<<2?!1:(e.truncate(n),!0)};U.cfb=function(e){e=e||{},this.name="CFB",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialBlock=new Array(this._ints),this._partialOutput=de.util.createBuffer(),this._partialBytes=0};U.cfb.prototype.start=function(e){if(!("iv"in e))throw new Error("Invalid IV parameter.");this._iv=Pn(e.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0};U.cfb.prototype.encrypt=function(e,t,r){var n=e.length();if(n===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize){for(var i=0;i<this._ints;++i)this._inBlock[i]=e.getInt32()^this._outBlock[i],t.putInt32(this._inBlock[i]);return}var a=(this.blockSize-n)%this.blockSize;a>0&&(a=this.blockSize-a),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialBlock[i]=e.getInt32()^this._outBlock[i],this._partialOutput.putInt32(this._partialBlock[i]);if(a>0)e.read-=this.blockSize;else for(var i=0;i<this._ints;++i)this._inBlock[i]=this._partialBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),a>0&&!r)return t.putBytes(this._partialOutput.getBytes(a-this._partialBytes)),this._partialBytes=a,!0;t.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0};U.cfb.prototype.decrypt=function(e,t,r){var n=e.length();if(n===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize){for(var i=0;i<this._ints;++i)this._inBlock[i]=e.getInt32(),t.putInt32(this._inBlock[i]^this._outBlock[i]);return}var a=(this.blockSize-n)%this.blockSize;a>0&&(a=this.blockSize-a),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialBlock[i]=e.getInt32(),this._partialOutput.putInt32(this._partialBlock[i]^this._outBlock[i]);if(a>0)e.read-=this.blockSize;else for(var i=0;i<this._ints;++i)this._inBlock[i]=this._partialBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),a>0&&!r)return t.putBytes(this._partialOutput.getBytes(a-this._partialBytes)),this._partialBytes=a,!0;t.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0};U.ofb=function(e){e=e||{},this.name="OFB",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=de.util.createBuffer(),this._partialBytes=0};U.ofb.prototype.start=function(e){if(!("iv"in e))throw new Error("Invalid IV parameter.");this._iv=Pn(e.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0};U.ofb.prototype.encrypt=function(e,t,r){var n=e.length();if(e.length()===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize){for(var i=0;i<this._ints;++i)t.putInt32(e.getInt32()^this._outBlock[i]),this._inBlock[i]=this._outBlock[i];return}var a=(this.blockSize-n)%this.blockSize;a>0&&(a=this.blockSize-a),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialOutput.putInt32(e.getInt32()^this._outBlock[i]);if(a>0)e.read-=this.blockSize;else for(var i=0;i<this._ints;++i)this._inBlock[i]=this._outBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),a>0&&!r)return t.putBytes(this._partialOutput.getBytes(a-this._partialBytes)),this._partialBytes=a,!0;t.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0};U.ofb.prototype.decrypt=U.ofb.prototype.encrypt;U.ctr=function(e){e=e||{},this.name="CTR",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=de.util.createBuffer(),this._partialBytes=0};U.ctr.prototype.start=function(e){if(!("iv"in e))throw new Error("Invalid IV parameter.");this._iv=Pn(e.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0};U.ctr.prototype.encrypt=function(e,t,r){var n=e.length();if(n===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize)for(var i=0;i<this._ints;++i)t.putInt32(e.getInt32()^this._outBlock[i]);else{var a=(this.blockSize-n)%this.blockSize;a>0&&(a=this.blockSize-a),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialOutput.putInt32(e.getInt32()^this._outBlock[i]);if(a>0&&(e.read-=this.blockSize),this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),a>0&&!r)return t.putBytes(this._partialOutput.getBytes(a-this._partialBytes)),this._partialBytes=a,!0;t.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}Rn(this._inBlock)};U.ctr.prototype.decrypt=U.ctr.prototype.encrypt;U.gcm=function(e){e=e||{},this.name="GCM",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints),this._partialOutput=de.util.createBuffer(),this._partialBytes=0,this._R=3774873600};U.gcm.prototype.start=function(e){if(!("iv"in e))throw new Error("Invalid IV parameter.");var t=de.util.createBuffer(e.iv);this._cipherLength=0;var r;if("additionalData"in e?r=de.util.createBuffer(e.additionalData):r=de.util.createBuffer(),"tagLength"in e?this._tagLength=e.tagLength:this._tagLength=128,this._tag=null,e.decrypt&&(this._tag=de.util.createBuffer(e.tag).getBytes(),this._tag.length!==this._tagLength/8))throw new Error("Authentication tag does not match tag length.");this._hashBlock=new Array(this._ints),this.tag=null,this._hashSubkey=new Array(this._ints),this.cipher.encrypt([0,0,0,0],this._hashSubkey),this.componentBits=4,this._m=this.generateHashTable(this._hashSubkey,this.componentBits);var n=t.length();if(n===12)this._j0=[t.getInt32(),t.getInt32(),t.getInt32(),1];else{for(this._j0=[0,0,0,0];t.length()>0;)this._j0=this.ghash(this._hashSubkey,this._j0,[t.getInt32(),t.getInt32(),t.getInt32(),t.getInt32()]);this._j0=this.ghash(this._hashSubkey,this._j0,[0,0].concat(Gi(n*8)))}this._inBlock=this._j0.slice(0),Rn(this._inBlock),this._partialBytes=0,r=de.util.createBuffer(r),this._aDataLength=Gi(r.length()*8);var i=r.length()%this.blockSize;for(i&&r.fillWithByte(0,this.blockSize-i),this._s=[0,0,0,0];r.length()>0;)this._s=this.ghash(this._hashSubkey,this._s,[r.getInt32(),r.getInt32(),r.getInt32(),r.getInt32()])};U.gcm.prototype.encrypt=function(e,t,r){var n=e.length();if(n===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize){for(var i=0;i<this._ints;++i)t.putInt32(this._outBlock[i]^=e.getInt32());this._cipherLength+=this.blockSize}else{var a=(this.blockSize-n)%this.blockSize;a>0&&(a=this.blockSize-a),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialOutput.putInt32(e.getInt32()^this._outBlock[i]);if(a<=0||r){if(r){var s=n%this.blockSize;this._cipherLength+=s,this._partialOutput.truncate(this.blockSize-s)}else this._cipherLength+=this.blockSize;for(var i=0;i<this._ints;++i)this._outBlock[i]=this._partialOutput.getInt32();this._partialOutput.read-=this.blockSize}if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),a>0&&!r)return e.read-=this.blockSize,t.putBytes(this._partialOutput.getBytes(a-this._partialBytes)),this._partialBytes=a,!0;t.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}this._s=this.ghash(this._hashSubkey,this._s,this._outBlock),Rn(this._inBlock)};U.gcm.prototype.decrypt=function(e,t,r){var n=e.length();if(n<this.blockSize&&!(r&&n>0))return!0;this.cipher.encrypt(this._inBlock,this._outBlock),Rn(this._inBlock),this._hashBlock[0]=e.getInt32(),this._hashBlock[1]=e.getInt32(),this._hashBlock[2]=e.getInt32(),this._hashBlock[3]=e.getInt32(),this._s=this.ghash(this._hashSubkey,this._s,this._hashBlock);for(var i=0;i<this._ints;++i)t.putInt32(this._outBlock[i]^this._hashBlock[i]);n<this.blockSize?this._cipherLength+=n%this.blockSize:this._cipherLength+=this.blockSize};U.gcm.prototype.afterFinish=function(e,t){var r=!0;t.decrypt&&t.overflow&&e.truncate(this.blockSize-t.overflow),this.tag=de.util.createBuffer();var n=this._aDataLength.concat(Gi(this._cipherLength*8));this._s=this.ghash(this._hashSubkey,this._s,n);var i=[];this.cipher.encrypt(this._j0,i);for(var a=0;a<this._ints;++a)this.tag.putInt32(this._s[a]^i[a]);return this.tag.truncate(this.tag.length()%(this._tagLength/8)),t.decrypt&&this.tag.bytes()!==this._tag&&(r=!1),r};U.gcm.prototype.multiply=function(e,t){for(var r=[0,0,0,0],n=t.slice(0),i=0;i<128;++i){var a=e[i/32|0]&1<<31-i%32;a&&(r[0]^=n[0],r[1]^=n[1],r[2]^=n[2],r[3]^=n[3]),this.pow(n,n)}return r};U.gcm.prototype.pow=function(e,t){for(var r=e[3]&1,n=3;n>0;--n)t[n]=e[n]>>>1|(e[n-1]&1)<<31;t[0]=e[0]>>>1,r&&(t[0]^=this._R)};U.gcm.prototype.tableMultiply=function(e){for(var t=[0,0,0,0],r=0;r<32;++r){var n=r/8|0,i=e[n]>>>(7-r%8)*4&15,a=this._m[r][i];t[0]^=a[0],t[1]^=a[1],t[2]^=a[2],t[3]^=a[3]}return t};U.gcm.prototype.ghash=function(e,t,r){return t[0]^=r[0],t[1]^=r[1],t[2]^=r[2],t[3]^=r[3],this.tableMultiply(t)};U.gcm.prototype.generateHashTable=function(e,t){for(var r=8/t,n=4*r,i=16*r,a=new Array(i),s=0;s<i;++s){var o=[0,0,0,0],u=s/n|0,c=(n-1-s%n)*t;o[u]=1<<t-1<<c,a[s]=this.generateSubHashTable(this.multiply(o,e),t)}return a};U.gcm.prototype.generateSubHashTable=function(e,t){var r=1<<t,n=r>>>1,i=new Array(r);i[n]=e.slice(0);for(var a=n>>>1;a>0;)this.pow(i[2*a],i[a]=[]),a>>=1;for(a=2;a<n;){for(var s=1;s<a;++s){var o=i[a],u=i[s];i[a+s]=[o[0]^u[0],o[1]^u[1],o[2]^u[2],o[3]^u[3]]}a*=2}for(i[0]=[0,0,0,0],a=n+1;a<r;++a){var c=i[a^n];i[a]=[e[0]^c[0],e[1]^c[1],e[2]^c[2],e[3]^c[3]]}return i};function Pn(e,t){if(typeof e=="string"&&(e=de.util.createBuffer(e)),de.util.isArray(e)&&e.length>4){var r=e;e=de.util.createBuffer();for(var n=0;n<r.length;++n)e.putByte(r[n])}if(e.length()<t)throw new Error("Invalid IV length; got "+e.length()+" bytes and expected "+t+" bytes.");if(!de.util.isArray(e)){for(var i=[],a=t/4,n=0;n<a;++n)i.push(e.getInt32());e=i}return e}function Rn(e){e[e.length-1]=e[e.length-1]+1&4294967295}function Gi(e){return[e/4294967296|0,e&4294967295]}});var Yi=A((X1,wo)=>{var X=Y();Hi();Wi();ue();wo.exports=X.aes=X.aes||{};X.aes.startEncrypting=function(e,t,r,n){var i=Dn({key:e,output:r,decrypt:!1,mode:n});return i.start(t),i};X.aes.createEncryptionCipher=function(e,t){return Dn({key:e,output:null,decrypt:!1,mode:t})};X.aes.startDecrypting=function(e,t,r,n){var i=Dn({key:e,output:r,decrypt:!0,mode:n});return i.start(t),i};X.aes.createDecryptionCipher=function(e,t){return Dn({key:e,output:null,decrypt:!0,mode:t})};X.aes.Algorithm=function(e,t){ji||mo();var r=this;r.name=e,r.mode=new t({blockSize:16,cipher:{encrypt:function(n,i){return Qi(r._w,n,i,!1)},decrypt:function(n,i){return Qi(r._w,n,i,!0)}}}),r._init=!1};X.aes.Algorithm.prototype.initialize=function(e){if(!this._init){var t=e.key,r;if(typeof t=="string"&&(t.length===16||t.length===24||t.length===32))t=X.util.createBuffer(t);else if(X.util.isArray(t)&&(t.length===16||t.length===24||t.length===32)){r=t,t=X.util.createBuffer();for(var n=0;n<r.length;++n)t.putByte(r[n])}if(!X.util.isArray(t)){r=t,t=[];var i=r.length();if(i===16||i===24||i===32){i=i>>>2;for(var n=0;n<i;++n)t.push(r.getInt32())}}if(!X.util.isArray(t)||!(t.length===4||t.length===6||t.length===8))throw new Error("Invalid key parameter.");var a=this.mode.name,s=["CFB","OFB","CTR","GCM"].indexOf(a)!==-1;this._w=bo(t,e.decrypt&&!s),this._init=!0}};X.aes._expandKey=function(e,t){return ji||mo(),bo(e,t)};X.aes._updateBlock=Qi;sr("AES-ECB",X.cipher.modes.ecb);sr("AES-CBC",X.cipher.modes.cbc);sr("AES-CFB",X.cipher.modes.cfb);sr("AES-OFB",X.cipher.modes.ofb);sr("AES-CTR",X.cipher.modes.ctr);sr("AES-GCM",X.cipher.modes.gcm);function sr(e,t){var r=function(){return new X.aes.Algorithm(e,t)};X.cipher.registerAlgorithm(e,r)}var ji=!1,or=4,Se,$i,xo,zt,ze;function mo(){ji=!0,xo=[0,1,2,4,8,16,32,64,128,27,54];for(var e=new Array(256),t=0;t<128;++t)e[t]=t<<1,e[t+128]=t+128<<1^283;Se=new Array(256),$i=new Array(256),zt=new Array(4),ze=new Array(4);for(var t=0;t<4;++t)zt[t]=new Array(256),ze[t]=new Array(256);for(var r=0,n=0,i,a,s,o,u,c,f,t=0;t<256;++t){o=n^n<<1^n<<2^n<<3^n<<4,o=o>>8^o&255^99,Se[r]=o,$i[o]=r,u=e[o],i=e[r],a=e[i],s=e[a],c=u<<24^o<<16^o<<8^(o^u),f=(i^a^s)<<24^(r^s)<<16^(r^a^s)<<8^(r^i^s);for(var l=0;l<4;++l)zt[l][r]=c,ze[l][o]=f,c=c<<24|c>>>8,f=f<<24|f>>>8;r===0?r=n=1:(r=i^e[e[e[i^s]]],n^=e[e[n]])}}function bo(e,t){for(var r=e.slice(0),n,i=1,a=r.length,s=a+6+1,o=or*s,u=a;u<o;++u)n=r[u-1],u%a==0?(n=Se[n>>>16&255]<<24^Se[n>>>8&255]<<16^Se[n&255]<<8^Se[n>>>24]^xo[i]<<24,i++):a>6&&u%a==4&&(n=Se[n>>>24]<<24^Se[n>>>16&255]<<16^Se[n>>>8&255]<<8^Se[n&255]),r[u]=r[u-a]^n;if(t){var c,f=ze[0],l=ze[1],h=ze[2],d=ze[3],p=r.slice(0);o=r.length;for(var u=0,g=o-or;u<o;u+=or,g-=or)if(u===0||u===o-or)p[u]=r[g],p[u+1]=r[g+3],p[u+2]=r[g+2],p[u+3]=r[g+1];else for(var v=0;v<or;++v)c=r[g+v],p[u+(3&-v)]=f[Se[c>>>24]]^l[Se[c>>>16&255]]^h[Se[c>>>8&255]]^d[Se[c&255]];r=p}return r}function Qi(e,t,r,n){var i=e.length/4-1,a,s,o,u,c;n?(a=ze[0],s=ze[1],o=ze[2],u=ze[3],c=$i):(a=zt[0],s=zt[1],o=zt[2],u=zt[3],c=Se);var f,l,h,d,p,g,v;f=t[0]^e[0],l=t[n?3:1]^e[1],h=t[2]^e[2],d=t[n?1:3]^e[3];for(var m=3,S=1;S<i;++S)p=a[f>>>24]^s[l>>>16&255]^o[h>>>8&255]^u[d&255]^e[++m],g=a[l>>>24]^s[h>>>16&255]^o[d>>>8&255]^u[f&255]^e[++m],v=a[h>>>24]^s[d>>>16&255]^o[f>>>8&255]^u[l&255]^e[++m],d=a[d>>>24]^s[f>>>16&255]^o[l>>>8&255]^u[h&255]^e[++m],f=p,l=g,h=v;r[0]=c[f>>>24]<<24^c[l>>>16&255]<<16^c[h>>>8&255]<<8^c[d&255]^e[++m],r[n?3:1]=c[l>>>24]<<24^c[h>>>16&255]<<16^c[d>>>8&255]<<8^c[f&255]^e[++m],r[2]=c[h>>>24]<<24^c[d>>>16&255]<<16^c[f>>>8&255]<<8^c[l&255]^e[++m],r[n?1:3]=c[d>>>24]<<24^c[f>>>16&255]<<16^c[l>>>8&255]<<8^c[h&255]^e[++m]}function Dn(e){e=e||{};var t=(e.mode||"CBC").toUpperCase(),r="AES-"+t,n;e.decrypt?n=X.cipher.createDecipher(r,e.key):n=X.cipher.createCipher(r,e.key);var i=n.start;return n.start=function(a,s){var o=null;s instanceof X.util.ByteBuffer&&(o=s,s={}),s=s||{},s.output=o,s.iv=a,i.call(n,s)},n}});var Bo=A((J1,Eo)=>{var te=Y();Hi();Wi();ue();Eo.exports=te.des=te.des||{};te.des.startEncrypting=function(e,t,r,n){var i=kn({key:e,output:r,decrypt:!1,mode:n||(t===null?"ECB":"CBC")});return i.start(t),i};te.des.createEncryptionCipher=function(e,t){return kn({key:e,output:null,decrypt:!1,mode:t})};te.des.startDecrypting=function(e,t,r,n){var i=kn({key:e,output:r,decrypt:!0,mode:n||(t===null?"ECB":"CBC")});return i.start(t),i};te.des.createDecryptionCipher=function(e,t){return kn({key:e,output:null,decrypt:!0,mode:t})};te.des.Algorithm=function(e,t){var r=this;r.name=e,r.mode=new t({blockSize:8,cipher:{encrypt:function(n,i){return So(r._keys,n,i,!1)},decrypt:function(n,i){return So(r._keys,n,i,!0)}}}),r._init=!1};te.des.Algorithm.prototype.initialize=function(e){if(!this._init){var t=te.util.createBuffer(e.key);if(this.name.indexOf("3DES")===0&&t.length()!==24)throw new Error("Invalid Triple-DES key size: "+t.length()*8);this._keys=El(t),this._init=!0}};Qe("DES-ECB",te.cipher.modes.ecb);Qe("DES-CBC",te.cipher.modes.cbc);Qe("DES-CFB",te.cipher.modes.cfb);Qe("DES-OFB",te.cipher.modes.ofb);Qe("DES-CTR",te.cipher.modes.ctr);Qe("3DES-ECB",te.cipher.modes.ecb);Qe("3DES-CBC",te.cipher.modes.cbc);Qe("3DES-CFB",te.cipher.modes.cfb);Qe("3DES-OFB",te.cipher.modes.ofb);Qe("3DES-CTR",te.cipher.modes.ctr);function Qe(e,t){var r=function(){return new te.des.Algorithm(e,t)};te.cipher.registerAlgorithm(e,r)}var yl=[16843776,0,65536,16843780,16842756,66564,4,65536,1024,16843776,16843780,1024,16778244,16842756,16777216,4,1028,16778240,16778240,66560,66560,16842752,16842752,16778244,65540,16777220,16777220,65540,0,1028,66564,16777216,65536,16843780,4,16842752,16843776,16777216,16777216,1024,16842756,65536,66560,16777220,1024,4,16778244,66564,16843780,65540,16842752,16778244,16777220,1028,66564,16843776,1028,16778240,16778240,0,65540,66560,0,16842756],gl=[-2146402272,-2147450880,32768,1081376,1048576,32,-2146435040,-2147450848,-2147483616,-2146402272,-2146402304,-2147483648,-2147450880,1048576,32,-2146435040,1081344,1048608,-2147450848,0,-2147483648,32768,1081376,-2146435072,1048608,-2147483616,0,1081344,32800,-2146402304,-2146435072,32800,0,1081376,-2146435040,1048576,-2147450848,-2146435072,-2146402304,32768,-2146435072,-2147450880,32,-2146402272,1081376,32,32768,-2147483648,32800,-2146402304,1048576,-2147483616,1048608,-2147450848,-2147483616,1048608,1081344,0,-2147450880,32800,-2147483648,-2146435040,-2146402272,1081344],vl=[520,134349312,0,134348808,134218240,0,131592,134218240,131080,134217736,134217736,131072,134349320,131080,134348800,520,134217728,8,134349312,512,131584,134348800,134348808,131592,134218248,131584,131072,134218248,8,134349320,512,134217728,134349312,134217728,131080,520,131072,134349312,134218240,0,512,131080,134349320,134218240,134217736,512,0,134348808,134218248,131072,134217728,134349320,8,131592,131584,134217736,134348800,134218248,520,134348800,131592,8,134348808,131584],xl=[8396801,8321,8321,128,8396928,8388737,8388609,8193,0,8396800,8396800,8396929,129,0,8388736,8388609,1,8192,8388608,8396801,128,8388608,8193,8320,8388737,1,8320,8388736,8192,8396928,8396929,129,8388736,8388609,8396800,8396929,129,0,0,8396800,8320,8388736,8388737,1,8396801,8321,8321,128,8396929,129,1,8192,8388609,8193,8396928,8388737,8193,8320,8388608,8396801,128,8388608,8192,8396928],ml=[256,34078976,34078720,1107296512,524288,256,1073741824,34078720,1074266368,524288,33554688,1074266368,1107296512,1107820544,524544,1073741824,33554432,1074266112,1074266112,0,1073742080,1107820800,1107820800,33554688,1107820544,1073742080,0,1107296256,34078976,33554432,1107296256,524544,524288,1107296512,256,33554432,1073741824,34078720,1107296512,1074266368,33554688,1073741824,1107820544,34078976,1074266368,256,33554432,1107820544,1107820800,524544,1107296256,1107820800,34078720,0,1074266112,1107296256,524544,33554688,1073742080,524288,0,1074266112,34078976,1073742080],bl=[536870928,541065216,16384,541081616,541065216,16,541081616,4194304,536887296,4210704,4194304,536870928,4194320,536887296,536870912,16400,0,4194320,536887312,16384,4210688,536887312,16,541065232,541065232,0,4210704,541081600,16400,4210688,541081600,536870912,536887296,16,541065232,4210688,541081616,4194304,16400,536870928,4194304,536887296,536870912,16400,536870928,541081616,4210688,541065216,4210704,541081600,0,541065232,16,16384,541065216,4210704,16384,4194320,536887312,0,541081600,536870912,4194320,536887312],wl=[2097152,69206018,67110914,0,2048,67110914,2099202,69208064,69208066,2097152,0,67108866,2,67108864,69206018,2050,67110912,2099202,2097154,67110912,67108866,69206016,69208064,2097154,69206016,2048,2050,69208066,2099200,2,67108864,2099200,67108864,2099200,2097152,67110914,67110914,69206018,69206018,2,2097154,67108864,67110912,2097152,69208064,2050,2099202,69208064,2050,67108866,69208066,69206016,2099200,0,2,69208066,0,2099202,69206016,2048,67108866,67110912,2048,2097154],Sl=[268439616,4096,262144,268701760,268435456,268439616,64,268435456,262208,268697600,268701760,266240,268701696,266304,4096,64,268697600,268435520,268439552,4160,266240,262208,268697664,268701696,4160,0,0,268697664,268435520,268439552,266304,262144,266304,262144,268701696,4096,64,268697664,4096,266304,268439552,64,268435520,268697600,268697664,268435456,262144,268439616,0,268701760,262208,268435520,268697600,268439552,268439616,0,268701760,266240,266240,4160,4160,262208,268435456,268701696];function El(e){for(var t=[0,4,536870912,536870916,65536,65540,536936448,536936452,512,516,536871424,536871428,66048,66052,536936960,536936964],r=[0,1,1048576,1048577,67108864,67108865,68157440,68157441,256,257,1048832,1048833,67109120,67109121,68157696,68157697],n=[0,8,2048,2056,16777216,16777224,16779264,16779272,0,8,2048,2056,16777216,16777224,16779264,16779272],i=[0,2097152,134217728,136314880,8192,2105344,134225920,136323072,131072,2228224,134348800,136445952,139264,2236416,134356992,136454144],a=[0,262144,16,262160,0,262144,16,262160,4096,266240,4112,266256,4096,266240,4112,266256],s=[0,1024,32,1056,0,1024,32,1056,33554432,33555456,33554464,33555488,33554432,33555456,33554464,33555488],o=[0,268435456,524288,268959744,2,268435458,524290,268959746,0,268435456,524288,268959744,2,268435458,524290,268959746],u=[0,65536,2048,67584,536870912,536936448,536872960,536938496,131072,196608,133120,198656,537001984,537067520,537004032,537069568],c=[0,262144,0,262144,2,262146,2,262146,33554432,33816576,33554432,33816576,33554434,33816578,33554434,33816578],f=[0,268435456,8,268435464,0,268435456,8,268435464,1024,268436480,1032,268436488,1024,268436480,1032,268436488],l=[0,32,0,32,1048576,1048608,1048576,1048608,8192,8224,8192,8224,1056768,1056800,1056768,1056800],h=[0,16777216,512,16777728,2097152,18874368,2097664,18874880,67108864,83886080,67109376,83886592,69206016,85983232,69206528,85983744],d=[0,4096,134217728,134221824,524288,528384,134742016,134746112,16,4112,134217744,134221840,524304,528400,134742032,134746128],p=[0,4,256,260,0,4,256,260,1,5,257,261,1,5,257,261],g=e.length()>8?3:1,v=[],m=[0,0,1,1,1,1,1,1,0,1,1,1,1,1,1,0],S=0,C,k=0;k<g;k++){var I=e.getInt32(),T=e.getInt32();C=(I>>>4^T)&252645135,T^=C,I^=C<<4,C=(T>>>-16^I)&65535,I^=C,T^=C<<-16,C=(I>>>2^T)&858993459,T^=C,I^=C<<2,C=(T>>>-16^I)&65535,I^=C,T^=C<<-16,C=(I>>>1^T)&1431655765,T^=C,I^=C<<1,C=(T>>>8^I)&16711935,I^=C,T^=C<<8,C=(I>>>1^T)&1431655765,T^=C,I^=C<<1,C=I<<8|T>>>20&240,I=T<<24|T<<8&16711680|T>>>8&65280|T>>>24&240,T=C;for(var O=0;O<m.length;++O){m[O]?(I=I<<2|I>>>26,T=T<<2|T>>>26):(I=I<<1|I>>>27,T=T<<1|T>>>27),I&=-15,T&=-15;var F=t[I>>>28]|r[I>>>24&15]|n[I>>>20&15]|i[I>>>16&15]|a[I>>>12&15]|s[I>>>8&15]|o[I>>>4&15],ce=u[T>>>28]|c[T>>>24&15]|f[T>>>20&15]|l[T>>>16&15]|h[T>>>12&15]|d[T>>>8&15]|p[T>>>4&15];C=(ce>>>16^F)&65535,v[S++]=F^C,v[S++]=ce^C<<16}}return v}function So(e,t,r,n){var i=e.length===32?3:9,a;i===3?a=n?[30,-2,-2]:[0,32,2]:a=n?[94,62,-2,32,64,2,30,-2,-2]:[0,32,2,62,30,-2,64,96,2];var s,o=t[0],u=t[1];s=(o>>>4^u)&252645135,u^=s,o^=s<<4,s=(o>>>16^u)&65535,u^=s,o^=s<<16,s=(u>>>2^o)&858993459,o^=s,u^=s<<2,s=(u>>>8^o)&16711935,o^=s,u^=s<<8,s=(o>>>1^u)&1431655765,u^=s,o^=s<<1,o=o<<1|o>>>31,u=u<<1|u>>>31;for(var c=0;c<i;c+=3){for(var f=a[c+1],l=a[c+2],h=a[c];h!=f;h+=l){var d=u^e[h],p=(u>>>4|u<<28)^e[h+1];s=o,o=u,u=s^(gl[d>>>24&63]|xl[d>>>16&63]|bl[d>>>8&63]|Sl[d&63]|yl[p>>>24&63]|vl[p>>>16&63]|ml[p>>>8&63]|wl[p&63])}s=o,o=u,u=s}o=o>>>1|o<<31,u=u>>>1|u<<31,s=(o>>>1^u)&1431655765,u^=s,o^=s<<1,s=(u>>>8^o)&16711935,o^=s,u^=s<<8,s=(u>>>2^o)&858993459,o^=s,u^=s<<2,s=(o>>>16^u)&65535,u^=s,o^=s<<16,s=(o>>>4^u)&252645135,u^=s,o^=s<<4,r[0]=o,r[1]=u}function kn(e){e=e||{};var t=(e.mode||"CBC").toUpperCase(),r="DES-"+t,n;e.decrypt?n=te.cipher.createDecipher(r,e.key):n=te.cipher.createCipher(r,e.key);var i=n.start;return n.start=function(a,s){var o=null;s instanceof te.util.ByteBuffer&&(o=s,s={}),s=s||{},s.output=o,s.iv=a,i.call(n,s)},n}});var Ht=A((e2,Co)=>{var Kn=Y();Co.exports=Kn.md=Kn.md||{};Kn.md.algorithms=Kn.md.algorithms||{}});var _o=A((t2,Ao)=>{var ct=Y();Ht();ue();var Bl=Ao.exports=ct.hmac=ct.hmac||{};Bl.create=function(){var e=null,t=null,r=null,n=null,i={};return i.start=function(a,s){if(a!==null)if(typeof a=="string")if(a=a.toLowerCase(),a in ct.md.algorithms)t=ct.md.algorithms[a].create();else throw new Error('Unknown hash algorithm "'+a+'"');else t=a;if(s===null)s=e;else{if(typeof s=="string")s=ct.util.createBuffer(s);else if(ct.util.isArray(s)){var o=s;s=ct.util.createBuffer();for(var u=0;u<o.length;++u)s.putByte(o[u])}var c=s.length();c>t.blockLength&&(t.start(),t.update(s.bytes()),s=t.digest()),r=ct.util.createBuffer(),n=ct.util.createBuffer(),c=s.length();for(var u=0;u<c;++u){var o=s.at(u);r.putByte(54^o),n.putByte(92^o)}if(c<t.blockLength)for(var o=t.blockLength-c,u=0;u<o;++u)r.putByte(54),n.putByte(92);e=s,r=r.bytes(),n=n.bytes()}t.start(),t.update(r)},i.update=function(a){t.update(a)},i.getMac=function(){var a=t.digest().bytes();return t.start(),t.update(n),t.update(a),t.digest()},i.digest=i.getMac,i}});var ur=A(()=>{});var Io=A((i2,To)=>{var Ee=Y();_o();Ht();ue();var Cl=Ee.pkcs5=Ee.pkcs5||{},ft;Ee.util.isNodejs&&!Ee.options.usePureJavaScript&&(ft=ur());To.exports=Ee.pbkdf2=Cl.pbkdf2=function(e,t,r,n,i,a){if(typeof i=="function"&&(a=i,i=null),Ee.util.isNodejs&&!Ee.options.usePureJavaScript&&ft.pbkdf2&&(i===null||typeof i!="object")&&(ft.pbkdf2Sync.length>4||!i||i==="sha1"))return typeof i!="string"&&(i="sha1"),e=Buffer.from(e,"binary"),t=Buffer.from(t,"binary"),a?ft.pbkdf2Sync.length===4?ft.pbkdf2(e,t,r,n,function(C,k){if(C)return a(C);a(null,k.toString("binary"))}):ft.pbkdf2(e,t,r,n,i,function(C,k){if(C)return a(C);a(null,k.toString("binary"))}):ft.pbkdf2Sync.length===4?ft.pbkdf2Sync(e,t,r,n).toString("binary"):ft.pbkdf2Sync(e,t,r,n,i).toString("binary");if((typeof i=="undefined"||i===null)&&(i="sha1"),typeof i=="string"){if(!(i in Ee.md.algorithms))throw new Error("Unknown hash algorithm: "+i);i=Ee.md[i].create()}var s=i.digestLength;if(n>4294967295*s){var o=new Error("Derived key is too long.");if(a)return a(o);throw o}var u=Math.ceil(n/s),c=n-(u-1)*s,f=Ee.hmac.create();f.start(i,e);var l="",h,d,p;if(!a){for(var g=1;g<=u;++g){f.start(null,null),f.update(t),f.update(Ee.util.int32ToBytes(g)),h=p=f.digest().getBytes();for(var v=2;v<=r;++v)f.start(null,null),f.update(p),d=f.digest().getBytes(),h=Ee.util.xorBytes(h,d,s),p=d;l+=g<u?h:h.substr(0,c)}return l}var g=1,v;function m(){if(g>u)return a(null,l);f.start(null,null),f.update(t),f.update(Ee.util.int32ToBytes(g)),h=p=f.digest().getBytes(),v=2,S()}function S(){if(v<=r)return f.start(null,null),f.update(p),d=f.digest().getBytes(),h=Ee.util.xorBytes(h,d,s),p=d,++v,Ee.util.setImmediate(S);l+=g<u?h:h.substr(0,c),++g,m()}m()}});var Do=A((a2,Ro)=>{var Nn=Y();ue();var Po=Ro.exports=Nn.pem=Nn.pem||{};Po.encode=function(e,t){t=t||{};var r="-----BEGIN "+e.type+`-----\r
`,n;if(e.procType&&(n={name:"Proc-Type",values:[String(e.procType.version),e.procType.type]},r+=Ln(n)),e.contentDomain&&(n={name:"Content-Domain",values:[e.contentDomain]},r+=Ln(n)),e.dekInfo&&(n={name:"DEK-Info",values:[e.dekInfo.algorithm]},e.dekInfo.parameters&&n.values.push(e.dekInfo.parameters),r+=Ln(n)),e.headers)for(var i=0;i<e.headers.length;++i)r+=Ln(e.headers[i]);return e.procType&&(r+=`\r
`),r+=Nn.util.encode64(e.body,t.maxline||64)+`\r
`,r+="-----END "+e.type+`-----\r
`,r};Po.decode=function(e){for(var t=[],r=/\s*-----BEGIN ([A-Z0-9- ]+)-----\r?\n?([\x21-\x7e\s]+?(?:\r?\n\r?\n))?([:A-Za-z0-9+\/=\s]+?)-----END \1-----/g,n=/([\x21-\x7e]+):\s*([\x21-\x7e\s^:]+)/,i=/\r?\n/,a;a=r.exec(e),!!a;){var s={type:a[1],procType:null,contentDomain:null,dekInfo:null,headers:[],body:Nn.util.decode64(a[3])};if(t.push(s),!!a[2]){for(var o=a[2].split(i),u=0;a&&u<o.length;){for(var c=o[u].replace(/\s+$/,""),f=u+1;f<o.length;++f){var l=o[f];if(!/\s/.test(l[0]))break;c+=l,u=f}if(a=c.match(n),a){for(var h={name:a[1],values:[]},d=a[2].split(","),p=0;p<d.length;++p)h.values.push(Al(d[p]));if(s.procType)if(!s.contentDomain&&h.name==="Content-Domain")s.contentDomain=d[0]||"";else if(!s.dekInfo&&h.name==="DEK-Info"){if(h.values.length===0)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must have at least one subfield.');s.dekInfo={algorithm:d[0],parameters:d[1]||null}}else s.headers.push(h);else{if(h.name!=="Proc-Type")throw new Error('Invalid PEM formatted message. The first encapsulated header must be "Proc-Type".');if(h.values.length!==2)throw new Error('Invalid PEM formatted message. The "Proc-Type" header must have two subfields.');s.procType={version:d[0],type:d[1]}}}++u}if(s.procType==="ENCRYPTED"&&!s.dekInfo)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must be present if "Proc-Type" is "ENCRYPTED".')}}if(t.length===0)throw new Error("Invalid PEM formatted message.");return t};function Ln(e){for(var t=e.name+": ",r=[],n=function(u,c){return" "+c},i=0;i<e.values.length;++i)r.push(e.values[i].replace(/^(\S+\r\n)/,n));t+=r.join(",")+`\r
`;for(var a=0,s=-1,i=0;i<t.length;++i,++a)if(a>65&&s!==-1){var o=t[s];o===","?(++s,t=t.substr(0,s)+`\r
 `+t.substr(s)):t=t.substr(0,s)+`\r
`+o+t.substr(s+1),a=i-s-1,s=-1,++i}else(t[i]===" "||t[i]==="	"||t[i]===",")&&(s=i);return t}function Al(e){return e.replace(/^\s+/,"")}});var Uo=A((s2,qo)=>{var Ye=Y();Ht();ue();var ko=qo.exports=Ye.sha256=Ye.sha256||{};Ye.md.sha256=Ye.md.algorithms.sha256=ko;ko.create=function(){Ko||_l();var e=null,t=Ye.util.createBuffer(),r=new Array(64),n={algorithm:"sha256",blockLength:64,digestLength:32,messageLength:0,fullMessageLength:null,messageLengthSize:8};return n.start=function(){n.messageLength=0,n.fullMessageLength=n.messageLength64=[];for(var i=n.messageLengthSize/4,a=0;a<i;++a)n.fullMessageLength.push(0);return t=Ye.util.createBuffer(),e={h0:1779033703,h1:3144134277,h2:1013904242,h3:2773480762,h4:1359893119,h5:2600822924,h6:528734635,h7:1541459225},n},n.start(),n.update=function(i,a){a==="utf8"&&(i=Ye.util.encodeUtf8(i));var s=i.length;n.messageLength+=s,s=[s/4294967296>>>0,s>>>0];for(var o=n.fullMessageLength.length-1;o>=0;--o)n.fullMessageLength[o]+=s[1],s[1]=s[0]+(n.fullMessageLength[o]/4294967296>>>0),n.fullMessageLength[o]=n.fullMessageLength[o]>>>0,s[0]=s[1]/4294967296>>>0;return t.putBytes(i),Lo(e,r,t),(t.read>2048||t.length()===0)&&t.compact(),n},n.digest=function(){var i=Ye.util.createBuffer();i.putBytes(t.bytes());var a=n.fullMessageLength[n.fullMessageLength.length-1]+n.messageLengthSize,s=a&n.blockLength-1;i.putBytes(Zi.substr(0,n.blockLength-s));for(var o,u,c=n.fullMessageLength[0]*8,f=0;f<n.fullMessageLength.length-1;++f)o=n.fullMessageLength[f+1]*8,u=o/4294967296>>>0,c+=u,i.putInt32(c>>>0),c=o>>>0;i.putInt32(c);var l={h0:e.h0,h1:e.h1,h2:e.h2,h3:e.h3,h4:e.h4,h5:e.h5,h6:e.h6,h7:e.h7};Lo(l,r,i);var h=Ye.util.createBuffer();return h.putInt32(l.h0),h.putInt32(l.h1),h.putInt32(l.h2),h.putInt32(l.h3),h.putInt32(l.h4),h.putInt32(l.h5),h.putInt32(l.h6),h.putInt32(l.h7),h},n};var Zi=null,Ko=!1,No=null;function _l(){Zi=String.fromCharCode(128),Zi+=Ye.util.fillString(String.fromCharCode(0),64),No=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],Ko=!0}function Lo(e,t,r){for(var n,i,a,s,o,u,c,f,l,h,d,p,g,v,m,S=r.length();S>=64;){for(c=0;c<16;++c)t[c]=r.getInt32();for(;c<64;++c)n=t[c-2],n=(n>>>17|n<<15)^(n>>>19|n<<13)^n>>>10,i=t[c-15],i=(i>>>7|i<<25)^(i>>>18|i<<14)^i>>>3,t[c]=n+t[c-7]+i+t[c-16]|0;for(f=e.h0,l=e.h1,h=e.h2,d=e.h3,p=e.h4,g=e.h5,v=e.h6,m=e.h7,c=0;c<64;++c)s=(p>>>6|p<<26)^(p>>>11|p<<21)^(p>>>25|p<<7),o=v^p&(g^v),a=(f>>>2|f<<30)^(f>>>13|f<<19)^(f>>>22|f<<10),u=f&l|h&(f^l),n=m+s+o+No[c]+t[c],i=a+u,m=v,v=g,g=p,p=d+n>>>0,d=h,h=l,l=f,f=n+i>>>0;e.h0=e.h0+f|0,e.h1=e.h1+l|0,e.h2=e.h2+h|0,e.h3=e.h3+d|0,e.h4=e.h4+p|0,e.h5=e.h5+g|0,e.h6=e.h6+v|0,e.h7=e.h7+m|0,S-=64}}});var Fo=A((o2,Oo)=>{var Ze=Y();ue();var qn=null;Ze.util.isNodejs&&!Ze.options.usePureJavaScript&&!process.versions["node-webkit"]&&(qn=ur());var Tl=Oo.exports=Ze.prng=Ze.prng||{};Tl.create=function(e){for(var t={plugin:e,key:null,seed:null,time:null,reseeds:0,generated:0,keyBytes:""},r=e.md,n=new Array(32),i=0;i<32;++i)n[i]=r.create();t.pools=n,t.pool=0,t.generate=function(c,f){if(!f)return t.generateSync(c);var l=t.plugin.cipher,h=t.plugin.increment,d=t.plugin.formatKey,p=t.plugin.formatSeed,g=Ze.util.createBuffer();t.key=null,v();function v(m){if(m)return f(m);if(g.length()>=c)return f(null,g.getBytes(c));if(t.generated>1048575&&(t.key=null),t.key===null)return Ze.util.nextTick(function(){a(v)});var S=l(t.key,t.seed);t.generated+=S.length,g.putBytes(S),t.key=d(l(t.key,h(t.seed))),t.seed=p(l(t.key,t.seed)),Ze.util.setImmediate(v)}},t.generateSync=function(c){var f=t.plugin.cipher,l=t.plugin.increment,h=t.plugin.formatKey,d=t.plugin.formatSeed;t.key=null;for(var p=Ze.util.createBuffer();p.length()<c;){t.generated>1048575&&(t.key=null),t.key===null&&s();var g=f(t.key,t.seed);t.generated+=g.length,p.putBytes(g),t.key=h(f(t.key,l(t.seed))),t.seed=d(f(t.key,t.seed))}return p.getBytes(c)};function a(c){if(t.pools[0].messageLength>=32)return o(),c();var f=32-t.pools[0].messageLength<<5;t.seedFile(f,function(l,h){if(l)return c(l);t.collect(h),o(),c()})}function s(){if(t.pools[0].messageLength>=32)return o();var c=32-t.pools[0].messageLength<<5;t.collect(t.seedFileSync(c)),o()}function o(){t.reseeds=t.reseeds===4294967295?0:t.reseeds+1;var c=t.plugin.md.create();c.update(t.keyBytes);for(var f=1,l=0;l<32;++l)t.reseeds%f==0&&(c.update(t.pools[l].digest().getBytes()),t.pools[l].start()),f=f<<1;t.keyBytes=c.digest().getBytes(),c.start(),c.update(t.keyBytes);var h=c.digest().getBytes();t.key=t.plugin.formatKey(t.keyBytes),t.seed=t.plugin.formatSeed(h),t.generated=0}function u(c){var f=null,l=Ze.util.globalScope,h=l.crypto||l.msCrypto;h&&h.getRandomValues&&(f=function(I){return h.getRandomValues(I)});var d=Ze.util.createBuffer();if(f)for(;d.length()<c;){var p=Math.max(1,Math.min(c-d.length(),65536)/4),g=new Uint32Array(Math.floor(p));try{f(g);for(var v=0;v<g.length;++v)d.putInt32(g[v])}catch(I){if(!(typeof QuotaExceededError!="undefined"&&I instanceof QuotaExceededError))throw I}}if(d.length()<c)for(var m,S,C,k=Math.floor(Math.random()*65536);d.length()<c;){S=16807*(k&65535),m=16807*(k>>16),S+=(m&32767)<<16,S+=m>>15,S=(S&2147483647)+(S>>31),k=S&4294967295;for(var v=0;v<3;++v)C=k>>>(v<<3),C^=Math.floor(Math.random()*256),d.putByte(String.fromCharCode(C&255))}return d.getBytes(c)}return qn?(t.seedFile=function(c,f){qn.randomBytes(c,function(l,h){if(l)return f(l);f(null,h.toString())})},t.seedFileSync=function(c){return qn.randomBytes(c).toString()}):(t.seedFile=function(c,f){try{f(null,u(c))}catch(l){f(l)}},t.seedFileSync=u),t.collect=function(c){for(var f=c.length,l=0;l<f;++l)t.pools[t.pool].update(c.substr(l,1)),t.pool=t.pool===31?0:t.pool+1},t.collectInt=function(c,f){for(var l="",h=0;h<f;h+=8)l+=String.fromCharCode(c>>h&255);t.collect(l)},t.registerWorker=function(c){if(c===self)t.seedFile=function(l,h){function d(p){var g=p.data;g.forge&&g.forge.prng&&(self.removeEventListener("message",d),h(g.forge.prng.err,g.forge.prng.bytes))}self.addEventListener("message",d),self.postMessage({forge:{prng:{needed:l}}})};else{var f=function(l){var h=l.data;h.forge&&h.forge.prng&&t.seedFile(h.forge.prng.needed,function(d,p){c.postMessage({forge:{prng:{err:d,bytes:p}}})})};c.addEventListener("message",f)}},t}});var Ur=A((u2,Xi)=>{var ye=Y();Yi();Uo();Fo();ue();(function(){if(ye.random&&ye.random.getBytes){Xi.exports=ye.random;return}(function(e){var t={},r=new Array(4),n=ye.util.createBuffer();t.formatKey=function(l){var h=ye.util.createBuffer(l);return l=new Array(4),l[0]=h.getInt32(),l[1]=h.getInt32(),l[2]=h.getInt32(),l[3]=h.getInt32(),ye.aes._expandKey(l,!1)},t.formatSeed=function(l){var h=ye.util.createBuffer(l);return l=new Array(4),l[0]=h.getInt32(),l[1]=h.getInt32(),l[2]=h.getInt32(),l[3]=h.getInt32(),l},t.cipher=function(l,h){return ye.aes._updateBlock(l,h,r,!1),n.putInt32(r[0]),n.putInt32(r[1]),n.putInt32(r[2]),n.putInt32(r[3]),n.getBytes()},t.increment=function(l){return++l[3],l},t.md=ye.md.sha256;function i(){var l=ye.prng.create(t);return l.getBytes=function(h,d){return l.generate(h,d)},l.getBytesSync=function(h){return l.generate(h)},l}var a=i(),s=null,o=ye.util.globalScope,u=o.crypto||o.msCrypto;if(u&&u.getRandomValues&&(s=function(l){return u.getRandomValues(l)}),ye.options.usePureJavaScript||!ye.util.isNodejs&&!s){if(typeof window=="undefined"||window.document===void 0,a.collectInt(+new Date,32),typeof navigator!="undefined"){var c="";for(var f in navigator)try{typeof navigator[f]=="string"&&(c+=navigator[f])}catch(l){}a.collect(c),c=null}e&&(e().mousemove(function(l){a.collectInt(l.clientX,16),a.collectInt(l.clientY,16)}),e().keypress(function(l){a.collectInt(l.charCode,8)}))}if(!ye.random)ye.random=a;else for(var f in a)ye.random[f]=a[f];ye.random.createInstance=i,Xi.exports=ye.random})(typeof jQuery!="undefined"?jQuery:null)})()});var Ho=A((c2,zo)=>{var Te=Y();ue();var Ji=[217,120,249,196,25,221,181,237,40,233,253,121,74,160,216,157,198,126,55,131,43,118,83,142,98,76,100,136,68,139,251,162,23,154,89,245,135,179,79,19,97,69,109,141,9,129,125,50,189,143,64,235,134,183,123,11,240,149,33,34,92,107,78,130,84,214,101,147,206,96,178,28,115,86,192,20,167,140,241,220,18,117,202,31,59,190,228,209,66,61,212,48,163,60,182,38,111,191,14,218,70,105,7,87,39,242,29,155,188,148,67,3,248,17,199,246,144,239,62,231,6,195,213,47,200,102,30,215,8,232,234,222,128,82,238,247,132,170,114,172,53,77,106,42,150,26,210,113,90,21,73,116,75,159,208,94,4,24,164,236,194,224,65,110,15,81,203,204,36,145,175,80,161,244,112,57,153,124,58,133,35,184,180,122,252,2,54,91,37,85,151,49,45,93,250,152,227,138,146,174,5,223,41,16,103,108,186,201,211,0,230,207,225,158,168,44,99,22,1,63,88,226,137,169,13,56,52,27,171,51,255,176,187,72,12,95,185,177,205,46,197,243,219,71,229,165,156,119,10,166,32,104,254,127,193,173],Mo=[1,2,3,5],Il=function(e,t){return e<<t&65535|(e&65535)>>16-t},Pl=function(e,t){return(e&65535)>>t|e<<16-t&65535};zo.exports=Te.rc2=Te.rc2||{};Te.rc2.expandKey=function(e,t){typeof e=="string"&&(e=Te.util.createBuffer(e)),t=t||128;var r=e,n=e.length(),i=t,a=Math.ceil(i/8),s=255>>(i&7),o;for(o=n;o<128;o++)r.putByte(Ji[r.at(o-1)+r.at(o-n)&255]);for(r.setAt(128-a,Ji[r.at(128-a)&s]),o=127-a;o>=0;o--)r.setAt(o,Ji[r.at(o+1)^r.at(o+a)]);return r};var Vo=function(e,t,r){var n=!1,i=null,a=null,s=null,o,u,c,f,l=[];for(e=Te.rc2.expandKey(e,t),c=0;c<64;c++)l.push(e.getInt16Le());r?(o=function(p){for(c=0;c<4;c++)p[c]+=l[f]+(p[(c+3)%4]&p[(c+2)%4])+(~p[(c+3)%4]&p[(c+1)%4]),p[c]=Il(p[c],Mo[c]),f++},u=function(p){for(c=0;c<4;c++)p[c]+=l[p[(c+3)%4]&63]}):(o=function(p){for(c=3;c>=0;c--)p[c]=Pl(p[c],Mo[c]),p[c]-=l[f]+(p[(c+3)%4]&p[(c+2)%4])+(~p[(c+3)%4]&p[(c+1)%4]),f--},u=function(p){for(c=3;c>=0;c--)p[c]-=l[p[(c+3)%4]&63]});var h=function(p){var g=[];for(c=0;c<4;c++){var v=i.getInt16Le();s!==null&&(r?v^=s.getInt16Le():s.putInt16Le(v)),g.push(v&65535)}f=r?0:63;for(var m=0;m<p.length;m++)for(var S=0;S<p[m][0];S++)p[m][1](g);for(c=0;c<4;c++)s!==null&&(r?s.putInt16Le(g[c]):g[c]^=s.getInt16Le()),a.putInt16Le(g[c])},d=null;return d={start:function(p,g){p&&typeof p=="string"&&(p=Te.util.createBuffer(p)),n=!1,i=Te.util.createBuffer(),a=g||new Te.util.createBuffer,s=p,d.output=a},update:function(p){for(n||i.putBuffer(p);i.length()>=8;)h([[5,o],[1,u],[6,o],[1,u],[5,o]])},finish:function(p){var g=!0;if(r)if(p)g=p(8,i,!r);else{var v=i.length()===8?8:8-i.length();i.fillWithByte(v,v)}if(g&&(n=!0,d.update()),!r&&(g=i.length()===0,g))if(p)g=p(8,a,!r);else{var m=a.length(),S=a.at(m-1);S>m?g=!1:a.truncate(S)}return g}},d};Te.rc2.startEncrypting=function(e,t,r){var n=Te.rc2.createEncryptionCipher(e,128);return n.start(t,r),n};Te.rc2.createEncryptionCipher=function(e,t){return Vo(e,t,!0)};Te.rc2.startDecrypting=function(e,t,r){var n=Te.rc2.createDecryptionCipher(e,128);return n.start(t,r),n};Te.rc2.createDecryptionCipher=function(e,t){return Vo(e,t,!1)}});var Fn=A((f2,Xo)=>{var ea=Y();Xo.exports=ea.jsbn=ea.jsbn||{};var lt,Rl=244837814094590,Go=(Rl&16777215)==15715070;function w(e,t,r){this.data=[],e!=null&&(typeof e=="number"?this.fromNumber(e,t,r):t==null&&typeof e!="string"?this.fromString(e,256):this.fromString(e,t))}ea.jsbn.BigInteger=w;function z(){return new w(null)}function Dl(e,t,r,n,i,a){for(;--a>=0;){var s=t*this.data[e++]+r.data[n]+i;i=Math.floor(s/67108864),r.data[n++]=s&67108863}return i}function kl(e,t,r,n,i,a){for(var s=t&32767,o=t>>15;--a>=0;){var u=this.data[e]&32767,c=this.data[e++]>>15,f=o*u+c*s;u=s*u+((f&32767)<<15)+r.data[n]+(i&1073741823),i=(u>>>30)+(f>>>15)+o*c+(i>>>30),r.data[n++]=u&1073741823}return i}function Wo(e,t,r,n,i,a){for(var s=t&16383,o=t>>14;--a>=0;){var u=this.data[e]&16383,c=this.data[e++]>>14,f=o*u+c*s;u=s*u+((f&16383)<<14)+r.data[n]+i,i=(u>>28)+(f>>14)+o*c,r.data[n++]=u&268435455}return i}typeof navigator=="undefined"?(w.prototype.am=Wo,lt=28):Go&&navigator.appName=="Microsoft Internet Explorer"?(w.prototype.am=kl,lt=30):Go&&navigator.appName!="Netscape"?(w.prototype.am=Dl,lt=26):(w.prototype.am=Wo,lt=28);w.prototype.DB=lt;w.prototype.DM=(1<<lt)-1;w.prototype.DV=1<<lt;var ta=52;w.prototype.FV=Math.pow(2,ta);w.prototype.F1=ta-lt;w.prototype.F2=2*lt-ta;var Kl="0123456789abcdefghijklmnopqrstuvwxyz",Un=new Array,cr,Ke;cr="0".charCodeAt(0);for(Ke=0;Ke<=9;++Ke)Un[cr++]=Ke;cr="a".charCodeAt(0);for(Ke=10;Ke<36;++Ke)Un[cr++]=Ke;cr="A".charCodeAt(0);for(Ke=10;Ke<36;++Ke)Un[cr++]=Ke;function jo(e){return Kl.charAt(e)}function $o(e,t){var r=Un[e.charCodeAt(t)];return r??-1}function Nl(e){for(var t=this.t-1;t>=0;--t)e.data[t]=this.data[t];e.t=this.t,e.s=this.s}function Ll(e){this.t=1,this.s=e<0?-1:0,e>0?this.data[0]=e:e<-1?this.data[0]=e+this.DV:this.t=0}function Et(e){var t=z();return t.fromInt(e),t}function ql(e,t){var r;if(t==16)r=4;else if(t==8)r=3;else if(t==256)r=8;else if(t==2)r=1;else if(t==32)r=5;else if(t==4)r=2;else{this.fromRadix(e,t);return}this.t=0,this.s=0;for(var n=e.length,i=!1,a=0;--n>=0;){var s=r==8?e[n]&255:$o(e,n);if(s<0){e.charAt(n)=="-"&&(i=!0);continue}i=!1,a==0?this.data[this.t++]=s:a+r>this.DB?(this.data[this.t-1]|=(s&(1<<this.DB-a)-1)<<a,this.data[this.t++]=s>>this.DB-a):this.data[this.t-1]|=s<<a,a+=r,a>=this.DB&&(a-=this.DB)}r==8&&(e[0]&128)!=0&&(this.s=-1,a>0&&(this.data[this.t-1]|=(1<<this.DB-a)-1<<a)),this.clamp(),i&&w.ZERO.subTo(this,this)}function Ul(){for(var e=this.s&this.DM;this.t>0&&this.data[this.t-1]==e;)--this.t}function Ol(e){if(this.s<0)return"-"+this.negate().toString(e);var t;if(e==16)t=4;else if(e==8)t=3;else if(e==2)t=1;else if(e==32)t=5;else if(e==4)t=2;else return this.toRadix(e);var r=(1<<t)-1,n,i=!1,a="",s=this.t,o=this.DB-s*this.DB%t;if(s-- >0)for(o<this.DB&&(n=this.data[s]>>o)>0&&(i=!0,a=jo(n));s>=0;)o<t?(n=(this.data[s]&(1<<o)-1)<<t-o,n|=this.data[--s]>>(o+=this.DB-t)):(n=this.data[s]>>(o-=t)&r,o<=0&&(o+=this.DB,--s)),n>0&&(i=!0),i&&(a+=jo(n));return i?a:"0"}function Fl(){var e=z();return w.ZERO.subTo(this,e),e}function Ml(){return this.s<0?this.negate():this}function Vl(e){var t=this.s-e.s;if(t!=0)return t;var r=this.t;if(t=r-e.t,t!=0)return this.s<0?-t:t;for(;--r>=0;)if((t=this.data[r]-e.data[r])!=0)return t;return 0}function On(e){var t=1,r;return(r=e>>>16)!=0&&(e=r,t+=16),(r=e>>8)!=0&&(e=r,t+=8),(r=e>>4)!=0&&(e=r,t+=4),(r=e>>2)!=0&&(e=r,t+=2),(r=e>>1)!=0&&(e=r,t+=1),t}function zl(){return this.t<=0?0:this.DB*(this.t-1)+On(this.data[this.t-1]^this.s&this.DM)}function Hl(e,t){var r;for(r=this.t-1;r>=0;--r)t.data[r+e]=this.data[r];for(r=e-1;r>=0;--r)t.data[r]=0;t.t=this.t+e,t.s=this.s}function Gl(e,t){for(var r=e;r<this.t;++r)t.data[r-e]=this.data[r];t.t=Math.max(this.t-e,0),t.s=this.s}function Wl(e,t){var r=e%this.DB,n=this.DB-r,i=(1<<n)-1,a=Math.floor(e/this.DB),s=this.s<<r&this.DM,o;for(o=this.t-1;o>=0;--o)t.data[o+a+1]=this.data[o]>>n|s,s=(this.data[o]&i)<<r;for(o=a-1;o>=0;--o)t.data[o]=0;t.data[a]=s,t.t=this.t+a+1,t.s=this.s,t.clamp()}function jl(e,t){t.s=this.s;var r=Math.floor(e/this.DB);if(r>=this.t){t.t=0;return}var n=e%this.DB,i=this.DB-n,a=(1<<n)-1;t.data[0]=this.data[r]>>n;for(var s=r+1;s<this.t;++s)t.data[s-r-1]|=(this.data[s]&a)<<i,t.data[s-r]=this.data[s]>>n;n>0&&(t.data[this.t-r-1]|=(this.s&a)<<i),t.t=this.t-r,t.clamp()}function $l(e,t){for(var r=0,n=0,i=Math.min(e.t,this.t);r<i;)n+=this.data[r]-e.data[r],t.data[r++]=n&this.DM,n>>=this.DB;if(e.t<this.t){for(n-=e.s;r<this.t;)n+=this.data[r],t.data[r++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;r<e.t;)n-=e.data[r],t.data[r++]=n&this.DM,n>>=this.DB;n-=e.s}t.s=n<0?-1:0,n<-1?t.data[r++]=this.DV+n:n>0&&(t.data[r++]=n),t.t=r,t.clamp()}function Ql(e,t){var r=this.abs(),n=e.abs(),i=r.t;for(t.t=i+n.t;--i>=0;)t.data[i]=0;for(i=0;i<n.t;++i)t.data[i+r.t]=r.am(0,n.data[i],t,i,0,r.t);t.s=0,t.clamp(),this.s!=e.s&&w.ZERO.subTo(t,t)}function Yl(e){for(var t=this.abs(),r=e.t=2*t.t;--r>=0;)e.data[r]=0;for(r=0;r<t.t-1;++r){var n=t.am(r,t.data[r],e,2*r,0,1);(e.data[r+t.t]+=t.am(r+1,2*t.data[r],e,2*r+1,n,t.t-r-1))>=t.DV&&(e.data[r+t.t]-=t.DV,e.data[r+t.t+1]=1)}e.t>0&&(e.data[e.t-1]+=t.am(r,t.data[r],e,2*r,0,1)),e.s=0,e.clamp()}function Zl(e,t,r){var n=e.abs();if(!(n.t<=0)){var i=this.abs();if(i.t<n.t){t!=null&&t.fromInt(0),r!=null&&this.copyTo(r);return}r==null&&(r=z());var a=z(),s=this.s,o=e.s,u=this.DB-On(n.data[n.t-1]);u>0?(n.lShiftTo(u,a),i.lShiftTo(u,r)):(n.copyTo(a),i.copyTo(r));var c=a.t,f=a.data[c-1];if(f!=0){var l=f*(1<<this.F1)+(c>1?a.data[c-2]>>this.F2:0),h=this.FV/l,d=(1<<this.F1)/l,p=1<<this.F2,g=r.t,v=g-c,m=t??z();for(a.dlShiftTo(v,m),r.compareTo(m)>=0&&(r.data[r.t++]=1,r.subTo(m,r)),w.ONE.dlShiftTo(c,m),m.subTo(a,a);a.t<c;)a.data[a.t++]=0;for(;--v>=0;){var S=r.data[--g]==f?this.DM:Math.floor(r.data[g]*h+(r.data[g-1]+p)*d);if((r.data[g]+=a.am(0,S,r,v,0,c))<S)for(a.dlShiftTo(v,m),r.subTo(m,r);r.data[g]<--S;)r.subTo(m,r)}t!=null&&(r.drShiftTo(c,t),s!=o&&w.ZERO.subTo(t,t)),r.t=c,r.clamp(),u>0&&r.rShiftTo(u,r),s<0&&w.ZERO.subTo(r,r)}}}function Xl(e){var t=z();return this.abs().divRemTo(e,null,t),this.s<0&&t.compareTo(w.ZERO)>0&&e.subTo(t,t),t}function Gt(e){this.m=e}function Jl(e){return e.s<0||e.compareTo(this.m)>=0?e.mod(this.m):e}function eh(e){return e}function th(e){e.divRemTo(this.m,null,e)}function rh(e,t,r){e.multiplyTo(t,r),this.reduce(r)}function nh(e,t){e.squareTo(t),this.reduce(t)}Gt.prototype.convert=Jl;Gt.prototype.revert=eh;Gt.prototype.reduce=th;Gt.prototype.mulTo=rh;Gt.prototype.sqrTo=nh;function ih(){if(this.t<1)return 0;var e=this.data[0];if((e&1)==0)return 0;var t=e&3;return t=t*(2-(e&15)*t)&15,t=t*(2-(e&255)*t)&255,t=t*(2-((e&65535)*t&65535))&65535,t=t*(2-e*t%this.DV)%this.DV,t>0?this.DV-t:-t}function Wt(e){this.m=e,this.mp=e.invDigit(),this.mpl=this.mp&32767,this.mph=this.mp>>15,this.um=(1<<e.DB-15)-1,this.mt2=2*e.t}function ah(e){var t=z();return e.abs().dlShiftTo(this.m.t,t),t.divRemTo(this.m,null,t),e.s<0&&t.compareTo(w.ZERO)>0&&this.m.subTo(t,t),t}function sh(e){var t=z();return e.copyTo(t),this.reduce(t),t}function oh(e){for(;e.t<=this.mt2;)e.data[e.t++]=0;for(var t=0;t<this.m.t;++t){var r=e.data[t]&32767,n=r*this.mpl+((r*this.mph+(e.data[t]>>15)*this.mpl&this.um)<<15)&e.DM;for(r=t+this.m.t,e.data[r]+=this.m.am(0,n,e,t,0,this.m.t);e.data[r]>=e.DV;)e.data[r]-=e.DV,e.data[++r]++}e.clamp(),e.drShiftTo(this.m.t,e),e.compareTo(this.m)>=0&&e.subTo(this.m,e)}function uh(e,t){e.squareTo(t),this.reduce(t)}function ch(e,t,r){e.multiplyTo(t,r),this.reduce(r)}Wt.prototype.convert=ah;Wt.prototype.revert=sh;Wt.prototype.reduce=oh;Wt.prototype.mulTo=ch;Wt.prototype.sqrTo=uh;function fh(){return(this.t>0?this.data[0]&1:this.s)==0}function lh(e,t){if(e>4294967295||e<1)return w.ONE;var r=z(),n=z(),i=t.convert(this),a=On(e)-1;for(i.copyTo(r);--a>=0;)if(t.sqrTo(r,n),(e&1<<a)>0)t.mulTo(n,i,r);else{var s=r;r=n,n=s}return t.revert(r)}function hh(e,t){var r;return e<256||t.isEven()?r=new Gt(t):r=new Wt(t),this.exp(e,r)}w.prototype.copyTo=Nl;w.prototype.fromInt=Ll;w.prototype.fromString=ql;w.prototype.clamp=Ul;w.prototype.dlShiftTo=Hl;w.prototype.drShiftTo=Gl;w.prototype.lShiftTo=Wl;w.prototype.rShiftTo=jl;w.prototype.subTo=$l;w.prototype.multiplyTo=Ql;w.prototype.squareTo=Yl;w.prototype.divRemTo=Zl;w.prototype.invDigit=ih;w.prototype.isEven=fh;w.prototype.exp=lh;w.prototype.toString=Ol;w.prototype.negate=Fl;w.prototype.abs=Ml;w.prototype.compareTo=Vl;w.prototype.bitLength=zl;w.prototype.mod=Xl;w.prototype.modPowInt=hh;w.ZERO=Et(0);w.ONE=Et(1);function ph(){var e=z();return this.copyTo(e),e}function dh(){if(this.s<0){if(this.t==1)return this.data[0]-this.DV;if(this.t==0)return-1}else{if(this.t==1)return this.data[0];if(this.t==0)return 0}return(this.data[1]&(1<<32-this.DB)-1)<<this.DB|this.data[0]}function yh(){return this.t==0?this.s:this.data[0]<<24>>24}function gh(){return this.t==0?this.s:this.data[0]<<16>>16}function vh(e){return Math.floor(Math.LN2*this.DB/Math.log(e))}function xh(){return this.s<0?-1:this.t<=0||this.t==1&&this.data[0]<=0?0:1}function mh(e){if(e==null&&(e=10),this.signum()==0||e<2||e>36)return"0";var t=this.chunkSize(e),r=Math.pow(e,t),n=Et(r),i=z(),a=z(),s="";for(this.divRemTo(n,i,a);i.signum()>0;)s=(r+a.intValue()).toString(e).substr(1)+s,i.divRemTo(n,i,a);return a.intValue().toString(e)+s}function bh(e,t){this.fromInt(0),t==null&&(t=10);for(var r=this.chunkSize(t),n=Math.pow(t,r),i=!1,a=0,s=0,o=0;o<e.length;++o){var u=$o(e,o);if(u<0){e.charAt(o)=="-"&&this.signum()==0&&(i=!0);continue}s=t*s+u,++a>=r&&(this.dMultiply(n),this.dAddOffset(s,0),a=0,s=0)}a>0&&(this.dMultiply(Math.pow(t,a)),this.dAddOffset(s,0)),i&&w.ZERO.subTo(this,this)}function wh(e,t,r){if(typeof t=="number")if(e<2)this.fromInt(1);else for(this.fromNumber(e,r),this.testBit(e-1)||this.bitwiseTo(w.ONE.shiftLeft(e-1),ra,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(t);)this.dAddOffset(2,0),this.bitLength()>e&&this.subTo(w.ONE.shiftLeft(e-1),this);else{var n=new Array,i=e&7;n.length=(e>>3)+1,t.nextBytes(n),i>0?n[0]&=(1<<i)-1:n[0]=0,this.fromString(n,256)}}function Sh(){var e=this.t,t=new Array;t[0]=this.s;var r=this.DB-e*this.DB%8,n,i=0;if(e-- >0)for(r<this.DB&&(n=this.data[e]>>r)!=(this.s&this.DM)>>r&&(t[i++]=n|this.s<<this.DB-r);e>=0;)r<8?(n=(this.data[e]&(1<<r)-1)<<8-r,n|=this.data[--e]>>(r+=this.DB-8)):(n=this.data[e]>>(r-=8)&255,r<=0&&(r+=this.DB,--e)),(n&128)!=0&&(n|=-256),i==0&&(this.s&128)!=(n&128)&&++i,(i>0||n!=this.s)&&(t[i++]=n);return t}function Eh(e){return this.compareTo(e)==0}function Bh(e){return this.compareTo(e)<0?this:e}function Ch(e){return this.compareTo(e)>0?this:e}function Ah(e,t,r){var n,i,a=Math.min(e.t,this.t);for(n=0;n<a;++n)r.data[n]=t(this.data[n],e.data[n]);if(e.t<this.t){for(i=e.s&this.DM,n=a;n<this.t;++n)r.data[n]=t(this.data[n],i);r.t=this.t}else{for(i=this.s&this.DM,n=a;n<e.t;++n)r.data[n]=t(i,e.data[n]);r.t=e.t}r.s=t(this.s,e.s),r.clamp()}function _h(e,t){return e&t}function Th(e){var t=z();return this.bitwiseTo(e,_h,t),t}function ra(e,t){return e|t}function Ih(e){var t=z();return this.bitwiseTo(e,ra,t),t}function Qo(e,t){return e^t}function Ph(e){var t=z();return this.bitwiseTo(e,Qo,t),t}function Yo(e,t){return e&~t}function Rh(e){var t=z();return this.bitwiseTo(e,Yo,t),t}function Dh(){for(var e=z(),t=0;t<this.t;++t)e.data[t]=this.DM&~this.data[t];return e.t=this.t,e.s=~this.s,e}function kh(e){var t=z();return e<0?this.rShiftTo(-e,t):this.lShiftTo(e,t),t}function Kh(e){var t=z();return e<0?this.lShiftTo(-e,t):this.rShiftTo(e,t),t}function Nh(e){if(e==0)return-1;var t=0;return(e&65535)==0&&(e>>=16,t+=16),(e&255)==0&&(e>>=8,t+=8),(e&15)==0&&(e>>=4,t+=4),(e&3)==0&&(e>>=2,t+=2),(e&1)==0&&++t,t}function Lh(){for(var e=0;e<this.t;++e)if(this.data[e]!=0)return e*this.DB+Nh(this.data[e]);return this.s<0?this.t*this.DB:-1}function qh(e){for(var t=0;e!=0;)e&=e-1,++t;return t}function Uh(){for(var e=0,t=this.s&this.DM,r=0;r<this.t;++r)e+=qh(this.data[r]^t);return e}function Oh(e){var t=Math.floor(e/this.DB);return t>=this.t?this.s!=0:(this.data[t]&1<<e%this.DB)!=0}function Fh(e,t){var r=w.ONE.shiftLeft(e);return this.bitwiseTo(r,t,r),r}function Mh(e){return this.changeBit(e,ra)}function Vh(e){return this.changeBit(e,Yo)}function zh(e){return this.changeBit(e,Qo)}function Hh(e,t){for(var r=0,n=0,i=Math.min(e.t,this.t);r<i;)n+=this.data[r]+e.data[r],t.data[r++]=n&this.DM,n>>=this.DB;if(e.t<this.t){for(n+=e.s;r<this.t;)n+=this.data[r],t.data[r++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;r<e.t;)n+=e.data[r],t.data[r++]=n&this.DM,n>>=this.DB;n+=e.s}t.s=n<0?-1:0,n>0?t.data[r++]=n:n<-1&&(t.data[r++]=this.DV+n),t.t=r,t.clamp()}function Gh(e){var t=z();return this.addTo(e,t),t}function Wh(e){var t=z();return this.subTo(e,t),t}function jh(e){var t=z();return this.multiplyTo(e,t),t}function $h(e){var t=z();return this.divRemTo(e,t,null),t}function Qh(e){var t=z();return this.divRemTo(e,null,t),t}function Yh(e){var t=z(),r=z();return this.divRemTo(e,t,r),new Array(t,r)}function Zh(e){this.data[this.t]=this.am(0,e-1,this,0,0,this.t),++this.t,this.clamp()}function Xh(e,t){if(e!=0){for(;this.t<=t;)this.data[this.t++]=0;for(this.data[t]+=e;this.data[t]>=this.DV;)this.data[t]-=this.DV,++t>=this.t&&(this.data[this.t++]=0),++this.data[t]}}function Or(){}function Zo(e){return e}function Jh(e,t,r){e.multiplyTo(t,r)}function ep(e,t){e.squareTo(t)}Or.prototype.convert=Zo;Or.prototype.revert=Zo;Or.prototype.mulTo=Jh;Or.prototype.sqrTo=ep;function tp(e){return this.exp(e,new Or)}function rp(e,t,r){var n=Math.min(this.t+e.t,t);for(r.s=0,r.t=n;n>0;)r.data[--n]=0;var i;for(i=r.t-this.t;n<i;++n)r.data[n+this.t]=this.am(0,e.data[n],r,n,0,this.t);for(i=Math.min(e.t,t);n<i;++n)this.am(0,e.data[n],r,n,0,t-n);r.clamp()}function np(e,t,r){--t;var n=r.t=this.t+e.t-t;for(r.s=0;--n>=0;)r.data[n]=0;for(n=Math.max(t-this.t,0);n<e.t;++n)r.data[this.t+n-t]=this.am(t-n,e.data[n],r,0,0,this.t+n-t);r.clamp(),r.drShiftTo(1,r)}function fr(e){this.r2=z(),this.q3=z(),w.ONE.dlShiftTo(2*e.t,this.r2),this.mu=this.r2.divide(e),this.m=e}function ip(e){if(e.s<0||e.t>2*this.m.t)return e.mod(this.m);if(e.compareTo(this.m)<0)return e;var t=z();return e.copyTo(t),this.reduce(t),t}function ap(e){return e}function sp(e){for(e.drShiftTo(this.m.t-1,this.r2),e.t>this.m.t+1&&(e.t=this.m.t+1,e.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);e.compareTo(this.r2)<0;)e.dAddOffset(1,this.m.t+1);for(e.subTo(this.r2,e);e.compareTo(this.m)>=0;)e.subTo(this.m,e)}function op(e,t){e.squareTo(t),this.reduce(t)}function up(e,t,r){e.multiplyTo(t,r),this.reduce(r)}fr.prototype.convert=ip;fr.prototype.revert=ap;fr.prototype.reduce=sp;fr.prototype.mulTo=up;fr.prototype.sqrTo=op;function cp(e,t){var r=e.bitLength(),n,i=Et(1),a;if(r<=0)return i;r<18?n=1:r<48?n=3:r<144?n=4:r<768?n=5:n=6,r<8?a=new Gt(t):t.isEven()?a=new fr(t):a=new Wt(t);var s=new Array,o=3,u=n-1,c=(1<<n)-1;if(s[1]=a.convert(this),n>1){var f=z();for(a.sqrTo(s[1],f);o<=c;)s[o]=z(),a.mulTo(f,s[o-2],s[o]),o+=2}var l=e.t-1,h,d=!0,p=z(),g;for(r=On(e.data[l])-1;l>=0;){for(r>=u?h=e.data[l]>>r-u&c:(h=(e.data[l]&(1<<r+1)-1)<<u-r,l>0&&(h|=e.data[l-1]>>this.DB+r-u)),o=n;(h&1)==0;)h>>=1,--o;if((r-=o)<0&&(r+=this.DB,--l),d)s[h].copyTo(i),d=!1;else{for(;o>1;)a.sqrTo(i,p),a.sqrTo(p,i),o-=2;o>0?a.sqrTo(i,p):(g=i,i=p,p=g),a.mulTo(p,s[h],i)}for(;l>=0&&(e.data[l]&1<<r)==0;)a.sqrTo(i,p),g=i,i=p,p=g,--r<0&&(r=this.DB-1,--l)}return a.revert(i)}function fp(e){var t=this.s<0?this.negate():this.clone(),r=e.s<0?e.negate():e.clone();if(t.compareTo(r)<0){var n=t;t=r,r=n}var i=t.getLowestSetBit(),a=r.getLowestSetBit();if(a<0)return t;for(i<a&&(a=i),a>0&&(t.rShiftTo(a,t),r.rShiftTo(a,r));t.signum()>0;)(i=t.getLowestSetBit())>0&&t.rShiftTo(i,t),(i=r.getLowestSetBit())>0&&r.rShiftTo(i,r),t.compareTo(r)>=0?(t.subTo(r,t),t.rShiftTo(1,t)):(r.subTo(t,r),r.rShiftTo(1,r));return a>0&&r.lShiftTo(a,r),r}function lp(e){if(e<=0)return 0;var t=this.DV%e,r=this.s<0?e-1:0;if(this.t>0)if(t==0)r=this.data[0]%e;else for(var n=this.t-1;n>=0;--n)r=(t*r+this.data[n])%e;return r}function hp(e){var t=e.isEven();if(this.isEven()&&t||e.signum()==0)return w.ZERO;for(var r=e.clone(),n=this.clone(),i=Et(1),a=Et(0),s=Et(0),o=Et(1);r.signum()!=0;){for(;r.isEven();)r.rShiftTo(1,r),t?((!i.isEven()||!a.isEven())&&(i.addTo(this,i),a.subTo(e,a)),i.rShiftTo(1,i)):a.isEven()||a.subTo(e,a),a.rShiftTo(1,a);for(;n.isEven();)n.rShiftTo(1,n),t?((!s.isEven()||!o.isEven())&&(s.addTo(this,s),o.subTo(e,o)),s.rShiftTo(1,s)):o.isEven()||o.subTo(e,o),o.rShiftTo(1,o);r.compareTo(n)>=0?(r.subTo(n,r),t&&i.subTo(s,i),a.subTo(o,a)):(n.subTo(r,n),t&&s.subTo(i,s),o.subTo(a,o))}if(n.compareTo(w.ONE)!=0)return w.ZERO;if(o.compareTo(e)>=0)return o.subtract(e);if(o.signum()<0)o.addTo(e,o);else return o;return o.signum()<0?o.add(e):o}var He=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509],pp=(1<<26)/He[He.length-1];function dp(e){var t,r=this.abs();if(r.t==1&&r.data[0]<=He[He.length-1]){for(t=0;t<He.length;++t)if(r.data[0]==He[t])return!0;return!1}if(r.isEven())return!1;for(t=1;t<He.length;){for(var n=He[t],i=t+1;i<He.length&&n<pp;)n*=He[i++];for(n=r.modInt(n);t<i;)if(n%He[t++]==0)return!1}return r.millerRabin(e)}function yp(e){var t=this.subtract(w.ONE),r=t.getLowestSetBit();if(r<=0)return!1;for(var n=t.shiftRight(r),i=gp(),a,s=0;s<e;++s){do a=new w(this.bitLength(),i);while(a.compareTo(w.ONE)<=0||a.compareTo(t)>=0);var o=a.modPow(n,this);if(o.compareTo(w.ONE)!=0&&o.compareTo(t)!=0){for(var u=1;u++<r&&o.compareTo(t)!=0;)if(o=o.modPowInt(2,this),o.compareTo(w.ONE)==0)return!1;if(o.compareTo(t)!=0)return!1}}return!0}function gp(){return{nextBytes:function(e){for(var t=0;t<e.length;++t)e[t]=Math.floor(Math.random()*256)}}}w.prototype.chunkSize=vh;w.prototype.toRadix=mh;w.prototype.fromRadix=bh;w.prototype.fromNumber=wh;w.prototype.bitwiseTo=Ah;w.prototype.changeBit=Fh;w.prototype.addTo=Hh;w.prototype.dMultiply=Zh;w.prototype.dAddOffset=Xh;w.prototype.multiplyLowerTo=rp;w.prototype.multiplyUpperTo=np;w.prototype.modInt=lp;w.prototype.millerRabin=yp;w.prototype.clone=ph;w.prototype.intValue=dh;w.prototype.byteValue=yh;w.prototype.shortValue=gh;w.prototype.signum=xh;w.prototype.toByteArray=Sh;w.prototype.equals=Eh;w.prototype.min=Bh;w.prototype.max=Ch;w.prototype.and=Th;w.prototype.or=Ih;w.prototype.xor=Ph;w.prototype.andNot=Rh;w.prototype.not=Dh;w.prototype.shiftLeft=kh;w.prototype.shiftRight=Kh;w.prototype.getLowestSetBit=Lh;w.prototype.bitCount=Uh;w.prototype.testBit=Oh;w.prototype.setBit=Mh;w.prototype.clearBit=Vh;w.prototype.flipBit=zh;w.prototype.add=Gh;w.prototype.subtract=Wh;w.prototype.multiply=jh;w.prototype.divide=$h;w.prototype.remainder=Qh;w.prototype.divideAndRemainder=Yh;w.prototype.modPow=cp;w.prototype.modInverse=hp;w.prototype.pow=tp;w.prototype.gcd=fp;w.prototype.isProbablePrime=dp});var n0=A((l2,r0)=>{var Xe=Y();Ht();ue();var Jo=r0.exports=Xe.sha1=Xe.sha1||{};Xe.md.sha1=Xe.md.algorithms.sha1=Jo;Jo.create=function(){e0||vp();var e=null,t=Xe.util.createBuffer(),r=new Array(80),n={algorithm:"sha1",blockLength:64,digestLength:20,messageLength:0,fullMessageLength:null,messageLengthSize:8};return n.start=function(){n.messageLength=0,n.fullMessageLength=n.messageLength64=[];for(var i=n.messageLengthSize/4,a=0;a<i;++a)n.fullMessageLength.push(0);return t=Xe.util.createBuffer(),e={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878,h4:3285377520},n},n.start(),n.update=function(i,a){a==="utf8"&&(i=Xe.util.encodeUtf8(i));var s=i.length;n.messageLength+=s,s=[s/4294967296>>>0,s>>>0];for(var o=n.fullMessageLength.length-1;o>=0;--o)n.fullMessageLength[o]+=s[1],s[1]=s[0]+(n.fullMessageLength[o]/4294967296>>>0),n.fullMessageLength[o]=n.fullMessageLength[o]>>>0,s[0]=s[1]/4294967296>>>0;return t.putBytes(i),t0(e,r,t),(t.read>2048||t.length()===0)&&t.compact(),n},n.digest=function(){var i=Xe.util.createBuffer();i.putBytes(t.bytes());var a=n.fullMessageLength[n.fullMessageLength.length-1]+n.messageLengthSize,s=a&n.blockLength-1;i.putBytes(na.substr(0,n.blockLength-s));for(var o,u,c=n.fullMessageLength[0]*8,f=0;f<n.fullMessageLength.length-1;++f)o=n.fullMessageLength[f+1]*8,u=o/4294967296>>>0,c+=u,i.putInt32(c>>>0),c=o>>>0;i.putInt32(c);var l={h0:e.h0,h1:e.h1,h2:e.h2,h3:e.h3,h4:e.h4};t0(l,r,i);var h=Xe.util.createBuffer();return h.putInt32(l.h0),h.putInt32(l.h1),h.putInt32(l.h2),h.putInt32(l.h3),h.putInt32(l.h4),h},n};var na=null,e0=!1;function vp(){na=String.fromCharCode(128),na+=Xe.util.fillString(String.fromCharCode(0),64),e0=!0}function t0(e,t,r){for(var n,i,a,s,o,u,c,f,l=r.length();l>=64;){for(i=e.h0,a=e.h1,s=e.h2,o=e.h3,u=e.h4,f=0;f<16;++f)n=r.getInt32(),t[f]=n,c=o^a&(s^o),n=(i<<5|i>>>27)+c+u+1518500249+n,u=o,o=s,s=(a<<30|a>>>2)>>>0,a=i,i=n;for(;f<20;++f)n=t[f-3]^t[f-8]^t[f-14]^t[f-16],n=n<<1|n>>>31,t[f]=n,c=o^a&(s^o),n=(i<<5|i>>>27)+c+u+1518500249+n,u=o,o=s,s=(a<<30|a>>>2)>>>0,a=i,i=n;for(;f<32;++f)n=t[f-3]^t[f-8]^t[f-14]^t[f-16],n=n<<1|n>>>31,t[f]=n,c=a^s^o,n=(i<<5|i>>>27)+c+u+1859775393+n,u=o,o=s,s=(a<<30|a>>>2)>>>0,a=i,i=n;for(;f<40;++f)n=t[f-6]^t[f-16]^t[f-28]^t[f-32],n=n<<2|n>>>30,t[f]=n,c=a^s^o,n=(i<<5|i>>>27)+c+u+1859775393+n,u=o,o=s,s=(a<<30|a>>>2)>>>0,a=i,i=n;for(;f<60;++f)n=t[f-6]^t[f-16]^t[f-28]^t[f-32],n=n<<2|n>>>30,t[f]=n,c=a&s|o&(a^s),n=(i<<5|i>>>27)+c+u+2400959708+n,u=o,o=s,s=(a<<30|a>>>2)>>>0,a=i,i=n;for(;f<80;++f)n=t[f-6]^t[f-16]^t[f-28]^t[f-32],n=n<<2|n>>>30,t[f]=n,c=a^s^o,n=(i<<5|i>>>27)+c+u+3395469782+n,u=o,o=s,s=(a<<30|a>>>2)>>>0,a=i,i=n;e.h0=e.h0+i|0,e.h1=e.h1+a|0,e.h2=e.h2+s|0,e.h3=e.h3+o|0,e.h4=e.h4+u|0,l-=64}}});var s0=A((h2,a0)=>{var Je=Y();ue();Ur();n0();var i0=a0.exports=Je.pkcs1=Je.pkcs1||{};i0.encode_rsa_oaep=function(e,t,r){var n,i,a,s;typeof r=="string"?(n=r,i=arguments[3]||void 0,a=arguments[4]||void 0):r&&(n=r.label||void 0,i=r.seed||void 0,a=r.md||void 0,r.mgf1&&r.mgf1.md&&(s=r.mgf1.md)),a?a.start():a=Je.md.sha1.create(),s||(s=a);var o=Math.ceil(e.n.bitLength()/8),u=o-2*a.digestLength-2;if(t.length>u){var c=new Error("RSAES-OAEP input message length is too long.");throw c.length=t.length,c.maxLength=u,c}n||(n=""),a.update(n,"raw");for(var f=a.digest(),l="",h=u-t.length,d=0;d<h;d++)l+="\0";var p=f.getBytes()+l+""+t;if(!i)i=Je.random.getBytes(a.digestLength);else if(i.length!==a.digestLength){var c=new Error("Invalid RSAES-OAEP seed. The seed length must match the digest length.");throw c.seedLength=i.length,c.digestLength=a.digestLength,c}var g=Mn(i,o-a.digestLength-1,s),v=Je.util.xorBytes(p,g,p.length),m=Mn(v,a.digestLength,s),S=Je.util.xorBytes(i,m,i.length);return"\0"+S+v};i0.decode_rsa_oaep=function(e,t,r){var n,i,a;typeof r=="string"?(n=r,i=arguments[3]||void 0):r&&(n=r.label||void 0,i=r.md||void 0,r.mgf1&&r.mgf1.md&&(a=r.mgf1.md));var s=Math.ceil(e.n.bitLength()/8);if(t.length!==s){var v=new Error("RSAES-OAEP encoded message length is invalid.");throw v.length=t.length,v.expectedLength=s,v}if(i===void 0?i=Je.md.sha1.create():i.start(),a||(a=i),s<2*i.digestLength+2)throw new Error("RSAES-OAEP key is too short for the hash function.");n||(n=""),i.update(n,"raw");for(var o=i.digest().getBytes(),u=t.charAt(0),c=t.substring(1,i.digestLength+1),f=t.substring(1+i.digestLength),l=Mn(f,i.digestLength,a),h=Je.util.xorBytes(c,l,c.length),d=Mn(h,s-i.digestLength-1,a),p=Je.util.xorBytes(f,d,f.length),g=p.substring(0,i.digestLength),v=u!=="\0",m=0;m<i.digestLength;++m)v|=o.charAt(m)!==g.charAt(m);for(var S=1,C=i.digestLength,k=i.digestLength;k<p.length;k++){var I=p.charCodeAt(k),T=I&1^1,O=S?65534:0;v|=I&O,S=S&T,C+=S}if(v||p.charCodeAt(C)!==1)throw new Error("Invalid RSAES-OAEP padding.");return p.substring(C+1)};function Mn(e,t,r){r||(r=Je.md.sha1.create());for(var n="",i=Math.ceil(t/r.digestLength),a=0;a<i;++a){var s=String.fromCharCode(a>>24&255,a>>16&255,a>>8&255,a&255);r.start(),r.update(e+s),n+=r.digest().getBytes()}return n.substring(0,t)}});var o0=A((p2,ia)=>{var Bt=Y();ue();Fn();Ur();(function(){if(Bt.prime){ia.exports=Bt.prime;return}var e=ia.exports=Bt.prime=Bt.prime||{},t=Bt.jsbn.BigInteger,r=[6,4,2,4,2,4,6,2],n=new t(null);n.fromInt(30);var i=function(l,h){return l|h};e.generateProbablePrime=function(l,h,d){typeof h=="function"&&(d=h,h={}),h=h||{};var p=h.algorithm||"PRIMEINC";typeof p=="string"&&(p={name:p}),p.options=p.options||{};var g=h.prng||Bt.random,v={nextBytes:function(m){for(var S=g.getBytesSync(m.length),C=0;C<m.length;++C)m[C]=S.charCodeAt(C)}};if(p.name==="PRIMEINC")return a(l,v,p.options,d);throw new Error("Invalid prime generation algorithm: "+p.name)};function a(l,h,d,p){return"workers"in d?u(l,h,d,p):s(l,h,d,p)}function s(l,h,d,p){var g=c(l,h),v=0,m=f(g.bitLength());"millerRabinTests"in d&&(m=d.millerRabinTests);var S=10;"maxBlockTime"in d&&(S=d.maxBlockTime),o(g,l,h,v,m,S,p)}function o(l,h,d,p,g,v,m){var S=+new Date;do{if(l.bitLength()>h&&(l=c(h,d)),l.isProbablePrime(g))return m(null,l);l.dAddOffset(r[p++%8],0)}while(v<0||+new Date-S<v);Bt.util.setImmediate(function(){o(l,h,d,p,g,v,m)})}function u(l,h,d,p){if(typeof Worker=="undefined")return s(l,h,d,p);var g=c(l,h),v=d.workers,m=d.workLoad||100,S=m*30/8,C=d.workerScript||"forge/prime.worker.js";if(v===-1)return Bt.util.estimateCores(function(I,T){I&&(T=2),v=T-1,k()});k();function k(){v=Math.max(1,v);for(var I=[],T=0;T<v;++T)I[T]=new Worker(C);for(var O=v,T=0;T<v;++T)I[T].addEventListener("message",ce);var F=!1;function ce(Fe){if(!F){--O;var Ie=Fe.data;if(Ie.found){for(var we=0;we<I.length;++we)I[we].terminate();return F=!0,p(null,new t(Ie.prime,16))}g.bitLength()>l&&(g=c(l,h));var Jt=g.toString(16);Fe.target.postMessage({hex:Jt,workLoad:m}),g.dAddOffset(S,0)}}}}function c(l,h){var d=new t(l,h),p=l-1;return d.testBit(p)||d.bitwiseTo(t.ONE.shiftLeft(p),i,d),d.dAddOffset(31-d.mod(n).byteValue(),0),d}function f(l){return l<=100?27:l<=150?18:l<=200?15:l<=250?12:l<=300?9:l<=350?8:l<=400?7:l<=500?6:l<=600?5:l<=800?4:l<=1250?3:2}})()});var zn=A((d2,d0)=>{var N=Y();qr();Fn();Tn();s0();o0();Ur();ue();typeof M=="undefined"&&(M=N.jsbn.BigInteger);var M,aa=N.util.isNodejs?ur():null,x=N.asn1,Ne=N.util;N.pki=N.pki||{};d0.exports=N.pki.rsa=N.rsa=N.rsa||{};var L=N.pki,xp=[6,4,2,4,2,4,6,2],mp={name:"PrivateKeyInfo",tagClass:x.Class.UNIVERSAL,type:x.Type.SEQUENCE,constructed:!0,value:[{name:"PrivateKeyInfo.version",tagClass:x.Class.UNIVERSAL,type:x.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"PrivateKeyInfo.privateKeyAlgorithm",tagClass:x.Class.UNIVERSAL,type:x.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:x.Class.UNIVERSAL,type:x.Type.OID,constructed:!1,capture:"privateKeyOid"}]},{name:"PrivateKeyInfo",tagClass:x.Class.UNIVERSAL,type:x.Type.OCTETSTRING,constructed:!1,capture:"privateKey"}]},bp={name:"RSAPrivateKey",tagClass:x.Class.UNIVERSAL,type:x.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPrivateKey.version",tagClass:x.Class.UNIVERSAL,type:x.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"RSAPrivateKey.modulus",tagClass:x.Class.UNIVERSAL,type:x.Type.INTEGER,constructed:!1,capture:"privateKeyModulus"},{name:"RSAPrivateKey.publicExponent",tagClass:x.Class.UNIVERSAL,type:x.Type.INTEGER,constructed:!1,capture:"privateKeyPublicExponent"},{name:"RSAPrivateKey.privateExponent",tagClass:x.Class.UNIVERSAL,type:x.Type.INTEGER,constructed:!1,capture:"privateKeyPrivateExponent"},{name:"RSAPrivateKey.prime1",tagClass:x.Class.UNIVERSAL,type:x.Type.INTEGER,constructed:!1,capture:"privateKeyPrime1"},{name:"RSAPrivateKey.prime2",tagClass:x.Class.UNIVERSAL,type:x.Type.INTEGER,constructed:!1,capture:"privateKeyPrime2"},{name:"RSAPrivateKey.exponent1",tagClass:x.Class.UNIVERSAL,type:x.Type.INTEGER,constructed:!1,capture:"privateKeyExponent1"},{name:"RSAPrivateKey.exponent2",tagClass:x.Class.UNIVERSAL,type:x.Type.INTEGER,constructed:!1,capture:"privateKeyExponent2"},{name:"RSAPrivateKey.coefficient",tagClass:x.Class.UNIVERSAL,type:x.Type.INTEGER,constructed:!1,capture:"privateKeyCoefficient"}]},wp={name:"RSAPublicKey",tagClass:x.Class.UNIVERSAL,type:x.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPublicKey.modulus",tagClass:x.Class.UNIVERSAL,type:x.Type.INTEGER,constructed:!1,capture:"publicKeyModulus"},{name:"RSAPublicKey.exponent",tagClass:x.Class.UNIVERSAL,type:x.Type.INTEGER,constructed:!1,capture:"publicKeyExponent"}]},Sp=N.pki.rsa.publicKeyValidator={name:"SubjectPublicKeyInfo",tagClass:x.Class.UNIVERSAL,type:x.Type.SEQUENCE,constructed:!0,captureAsn1:"subjectPublicKeyInfo",value:[{name:"SubjectPublicKeyInfo.AlgorithmIdentifier",tagClass:x.Class.UNIVERSAL,type:x.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:x.Class.UNIVERSAL,type:x.Type.OID,constructed:!1,capture:"publicKeyOid"}]},{name:"SubjectPublicKeyInfo.subjectPublicKey",tagClass:x.Class.UNIVERSAL,type:x.Type.BITSTRING,constructed:!1,value:[{name:"SubjectPublicKeyInfo.subjectPublicKey.RSAPublicKey",tagClass:x.Class.UNIVERSAL,type:x.Type.SEQUENCE,constructed:!0,optional:!0,captureAsn1:"rsaPublicKey"}]}]},Ep=function(e){var t;if(e.algorithm in L.oids)t=L.oids[e.algorithm];else{var r=new Error("Unknown message digest algorithm.");throw r.algorithm=e.algorithm,r}var n=x.oidToDer(t).getBytes(),i=x.create(x.Class.UNIVERSAL,x.Type.SEQUENCE,!0,[]),a=x.create(x.Class.UNIVERSAL,x.Type.SEQUENCE,!0,[]);a.value.push(x.create(x.Class.UNIVERSAL,x.Type.OID,!1,n)),a.value.push(x.create(x.Class.UNIVERSAL,x.Type.NULL,!1,""));var s=x.create(x.Class.UNIVERSAL,x.Type.OCTETSTRING,!1,e.digest().getBytes());return i.value.push(a),i.value.push(s),x.toDer(i).getBytes()},u0=function(e,t,r){if(r)return e.modPow(t.e,t.n);if(!t.p||!t.q)return e.modPow(t.d,t.n);t.dP||(t.dP=t.d.mod(t.p.subtract(M.ONE))),t.dQ||(t.dQ=t.d.mod(t.q.subtract(M.ONE))),t.qInv||(t.qInv=t.q.modInverse(t.p));var n;do n=new M(N.util.bytesToHex(N.random.getBytes(t.n.bitLength()/8)),16);while(n.compareTo(t.n)>=0||!n.gcd(t.n).equals(M.ONE));e=e.multiply(n.modPow(t.e,t.n)).mod(t.n);for(var i=e.mod(t.p).modPow(t.dP,t.p),a=e.mod(t.q).modPow(t.dQ,t.q);i.compareTo(a)<0;)i=i.add(t.p);var s=i.subtract(a).multiply(t.qInv).mod(t.p).multiply(t.q).add(a);return s=s.multiply(n.modInverse(t.n)).mod(t.n),s};L.rsa.encrypt=function(e,t,r){var n=r,i,a=Math.ceil(t.n.bitLength()/8);r!==!1&&r!==!0?(n=r===2,i=c0(e,t,r)):(i=N.util.createBuffer(),i.putBytes(e));for(var s=new M(i.toHex(),16),o=u0(s,t,n),u=o.toString(16),c=N.util.createBuffer(),f=a-Math.ceil(u.length/2);f>0;)c.putByte(0),--f;return c.putBytes(N.util.hexToBytes(u)),c.getBytes()};L.rsa.decrypt=function(e,t,r,n){var i=Math.ceil(t.n.bitLength()/8);if(e.length!==i){var a=new Error("Encrypted message length is invalid.");throw a.length=e.length,a.expected=i,a}var s=new M(N.util.createBuffer(e).toHex(),16);if(s.compareTo(t.n)>=0)throw new Error("Encrypted message is invalid.");for(var o=u0(s,t,r),u=o.toString(16),c=N.util.createBuffer(),f=i-Math.ceil(u.length/2);f>0;)c.putByte(0),--f;return c.putBytes(N.util.hexToBytes(u)),n!==!1?Vn(c.getBytes(),t,r):c.getBytes()};L.rsa.createKeyPairGenerationState=function(e,t,r){typeof e=="string"&&(e=parseInt(e,10)),e=e||2048,r=r||{};var n=r.prng||N.random,i={nextBytes:function(o){for(var u=n.getBytesSync(o.length),c=0;c<o.length;++c)o[c]=u.charCodeAt(c)}},a=r.algorithm||"PRIMEINC",s;if(a==="PRIMEINC")s={algorithm:a,state:0,bits:e,rng:i,eInt:t||65537,e:new M(null),p:null,q:null,qBits:e>>1,pBits:e-(e>>1),pqState:0,num:null,keys:null},s.e.fromInt(s.eInt);else throw new Error("Invalid key generation algorithm: "+a);return s};L.rsa.stepKeyPairGenerationState=function(e,t){"algorithm"in e||(e.algorithm="PRIMEINC");var r=new M(null);r.fromInt(30);for(var n=0,i=function(l,h){return l|h},a=+new Date,s,o=0;e.keys===null&&(t<=0||o<t);){if(e.state===0){var u=e.p===null?e.pBits:e.qBits,c=u-1;e.pqState===0?(e.num=new M(u,e.rng),e.num.testBit(c)||e.num.bitwiseTo(M.ONE.shiftLeft(c),i,e.num),e.num.dAddOffset(31-e.num.mod(r).byteValue(),0),n=0,++e.pqState):e.pqState===1?e.num.bitLength()>u?e.pqState=0:e.num.isProbablePrime(Cp(e.num.bitLength()))?++e.pqState:e.num.dAddOffset(xp[n++%8],0):e.pqState===2?e.pqState=e.num.subtract(M.ONE).gcd(e.e).compareTo(M.ONE)===0?3:0:e.pqState===3&&(e.pqState=0,e.p===null?e.p=e.num:e.q=e.num,e.p!==null&&e.q!==null&&++e.state,e.num=null)}else if(e.state===1)e.p.compareTo(e.q)<0&&(e.num=e.p,e.p=e.q,e.q=e.num),++e.state;else if(e.state===2)e.p1=e.p.subtract(M.ONE),e.q1=e.q.subtract(M.ONE),e.phi=e.p1.multiply(e.q1),++e.state;else if(e.state===3)e.phi.gcd(e.e).compareTo(M.ONE)===0?++e.state:(e.p=null,e.q=null,e.state=0);else if(e.state===4)e.n=e.p.multiply(e.q),e.n.bitLength()===e.bits?++e.state:(e.q=null,e.state=0);else if(e.state===5){var f=e.e.modInverse(e.phi);e.keys={privateKey:L.rsa.setPrivateKey(e.n,e.e,f,e.p,e.q,f.mod(e.p1),f.mod(e.q1),e.q.modInverse(e.p)),publicKey:L.rsa.setPublicKey(e.n,e.e)}}s=+new Date,o+=s-a,a=s}return e.keys!==null};L.rsa.generateKeyPair=function(e,t,r,n){if(arguments.length===1?typeof e=="object"?(r=e,e=void 0):typeof e=="function"&&(n=e,e=void 0):arguments.length===2?typeof e=="number"?typeof t=="function"?(n=t,t=void 0):typeof t!="number"&&(r=t,t=void 0):(r=e,n=t,e=void 0,t=void 0):arguments.length===3&&(typeof t=="number"?typeof r=="function"&&(n=r,r=void 0):(n=r,r=t,t=void 0)),r=r||{},e===void 0&&(e=r.bits||2048),t===void 0&&(t=r.e||65537),!N.options.usePureJavaScript&&!r.prng&&e>=256&&e<=16384&&(t===65537||t===3)){if(n){if(f0("generateKeyPair"))return aa.generateKeyPair("rsa",{modulusLength:e,publicExponent:t,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"pkcs8",format:"pem"}},function(o,u,c){if(o)return n(o);n(null,{privateKey:L.privateKeyFromPem(c),publicKey:L.publicKeyFromPem(u)})});if(l0("generateKey")&&l0("exportKey"))return Ne.globalScope.crypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:e,publicExponent:p0(t),hash:{name:"SHA-256"}},!0,["sign","verify"]).then(function(o){return Ne.globalScope.crypto.subtle.exportKey("pkcs8",o.privateKey)}).then(void 0,function(o){n(o)}).then(function(o){if(o){var u=L.privateKeyFromAsn1(x.fromDer(N.util.createBuffer(o)));n(null,{privateKey:u,publicKey:L.setRsaPublicKey(u.n,u.e)})}});if(h0("generateKey")&&h0("exportKey")){var i=Ne.globalScope.msCrypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:e,publicExponent:p0(t),hash:{name:"SHA-256"}},!0,["sign","verify"]);i.oncomplete=function(o){var u=o.target.result,c=Ne.globalScope.msCrypto.subtle.exportKey("pkcs8",u.privateKey);c.oncomplete=function(f){var l=f.target.result,h=L.privateKeyFromAsn1(x.fromDer(N.util.createBuffer(l)));n(null,{privateKey:h,publicKey:L.setRsaPublicKey(h.n,h.e)})},c.onerror=function(f){n(f)}},i.onerror=function(o){n(o)};return}}else if(f0("generateKeyPairSync")){var a=aa.generateKeyPairSync("rsa",{modulusLength:e,publicExponent:t,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"pkcs8",format:"pem"}});return{privateKey:L.privateKeyFromPem(a.privateKey),publicKey:L.publicKeyFromPem(a.publicKey)}}}var s=L.rsa.createKeyPairGenerationState(e,t,r);if(!n)return L.rsa.stepKeyPairGenerationState(s,0),s.keys;Bp(s,r,n)};L.setRsaPublicKey=L.rsa.setPublicKey=function(e,t){var r={n:e,e:t};return r.encrypt=function(n,i,a){if(typeof i=="string"?i=i.toUpperCase():i===void 0&&(i="RSAES-PKCS1-V1_5"),i==="RSAES-PKCS1-V1_5")i={encode:function(o,u,c){return c0(o,u,2).getBytes()}};else if(i==="RSA-OAEP"||i==="RSAES-OAEP")i={encode:function(o,u){return N.pkcs1.encode_rsa_oaep(u,o,a)}};else if(["RAW","NONE","NULL",null].indexOf(i)!==-1)i={encode:function(o){return o}};else if(typeof i=="string")throw new Error('Unsupported encryption scheme: "'+i+'".');var s=i.encode(n,r,!0);return L.rsa.encrypt(s,r,!0)},r.verify=function(n,i,a){typeof a=="string"?a=a.toUpperCase():a===void 0&&(a="RSASSA-PKCS1-V1_5"),a==="RSASSA-PKCS1-V1_5"?a={verify:function(o,u){u=Vn(u,r,!0);var c=x.fromDer(u);return o===c.value[1].value}}:(a==="NONE"||a==="NULL"||a===null)&&(a={verify:function(o,u){return u=Vn(u,r,!0),o===u}});var s=L.rsa.decrypt(i,r,!0,!1);return a.verify(n,s,r.n.bitLength())},r};L.setRsaPrivateKey=L.rsa.setPrivateKey=function(e,t,r,n,i,a,s,o){var u={n:e,e:t,d:r,p:n,q:i,dP:a,dQ:s,qInv:o};return u.decrypt=function(c,f,l){typeof f=="string"?f=f.toUpperCase():f===void 0&&(f="RSAES-PKCS1-V1_5");var h=L.rsa.decrypt(c,u,!1,!1);if(f==="RSAES-PKCS1-V1_5")f={decode:Vn};else if(f==="RSA-OAEP"||f==="RSAES-OAEP")f={decode:function(d,p){return N.pkcs1.decode_rsa_oaep(p,d,l)}};else if(["RAW","NONE","NULL",null].indexOf(f)!==-1)f={decode:function(d){return d}};else throw new Error('Unsupported encryption scheme: "'+f+'".');return f.decode(h,u,!1)},u.sign=function(c,f){var l=!1;typeof f=="string"&&(f=f.toUpperCase()),f===void 0||f==="RSASSA-PKCS1-V1_5"?(f={encode:Ep},l=1):(f==="NONE"||f==="NULL"||f===null)&&(f={encode:function(){return c}},l=1);var h=f.encode(c,u.n.bitLength());return L.rsa.encrypt(h,u,l)},u};L.wrapRsaPrivateKey=function(e){return x.create(x.Class.UNIVERSAL,x.Type.SEQUENCE,!0,[x.create(x.Class.UNIVERSAL,x.Type.INTEGER,!1,x.integerToDer(0).getBytes()),x.create(x.Class.UNIVERSAL,x.Type.SEQUENCE,!0,[x.create(x.Class.UNIVERSAL,x.Type.OID,!1,x.oidToDer(L.oids.rsaEncryption).getBytes()),x.create(x.Class.UNIVERSAL,x.Type.NULL,!1,"")]),x.create(x.Class.UNIVERSAL,x.Type.OCTETSTRING,!1,x.toDer(e).getBytes())])};L.privateKeyFromAsn1=function(e){var t={},r=[];if(x.validate(e,mp,t,r)&&(e=x.fromDer(N.util.createBuffer(t.privateKey))),t={},r=[],!x.validate(e,bp,t,r)){var n=new Error("Cannot read private key. ASN.1 object does not contain an RSAPrivateKey.");throw n.errors=r,n}var i,a,s,o,u,c,f,l;return i=N.util.createBuffer(t.privateKeyModulus).toHex(),a=N.util.createBuffer(t.privateKeyPublicExponent).toHex(),s=N.util.createBuffer(t.privateKeyPrivateExponent).toHex(),o=N.util.createBuffer(t.privateKeyPrime1).toHex(),u=N.util.createBuffer(t.privateKeyPrime2).toHex(),c=N.util.createBuffer(t.privateKeyExponent1).toHex(),f=N.util.createBuffer(t.privateKeyExponent2).toHex(),l=N.util.createBuffer(t.privateKeyCoefficient).toHex(),L.setRsaPrivateKey(new M(i,16),new M(a,16),new M(s,16),new M(o,16),new M(u,16),new M(c,16),new M(f,16),new M(l,16))};L.privateKeyToAsn1=L.privateKeyToRSAPrivateKey=function(e){return x.create(x.Class.UNIVERSAL,x.Type.SEQUENCE,!0,[x.create(x.Class.UNIVERSAL,x.Type.INTEGER,!1,x.integerToDer(0).getBytes()),x.create(x.Class.UNIVERSAL,x.Type.INTEGER,!1,et(e.n)),x.create(x.Class.UNIVERSAL,x.Type.INTEGER,!1,et(e.e)),x.create(x.Class.UNIVERSAL,x.Type.INTEGER,!1,et(e.d)),x.create(x.Class.UNIVERSAL,x.Type.INTEGER,!1,et(e.p)),x.create(x.Class.UNIVERSAL,x.Type.INTEGER,!1,et(e.q)),x.create(x.Class.UNIVERSAL,x.Type.INTEGER,!1,et(e.dP)),x.create(x.Class.UNIVERSAL,x.Type.INTEGER,!1,et(e.dQ)),x.create(x.Class.UNIVERSAL,x.Type.INTEGER,!1,et(e.qInv))])};L.publicKeyFromAsn1=function(e){var t={},r=[];if(x.validate(e,Sp,t,r)){var n=x.derToOid(t.publicKeyOid);if(n!==L.oids.rsaEncryption){var i=new Error("Cannot read public key. Unknown OID.");throw i.oid=n,i}e=t.rsaPublicKey}if(r=[],!x.validate(e,wp,t,r)){var i=new Error("Cannot read public key. ASN.1 object does not contain an RSAPublicKey.");throw i.errors=r,i}var a=N.util.createBuffer(t.publicKeyModulus).toHex(),s=N.util.createBuffer(t.publicKeyExponent).toHex();return L.setRsaPublicKey(new M(a,16),new M(s,16))};L.publicKeyToAsn1=L.publicKeyToSubjectPublicKeyInfo=function(e){return x.create(x.Class.UNIVERSAL,x.Type.SEQUENCE,!0,[x.create(x.Class.UNIVERSAL,x.Type.SEQUENCE,!0,[x.create(x.Class.UNIVERSAL,x.Type.OID,!1,x.oidToDer(L.oids.rsaEncryption).getBytes()),x.create(x.Class.UNIVERSAL,x.Type.NULL,!1,"")]),x.create(x.Class.UNIVERSAL,x.Type.BITSTRING,!1,[L.publicKeyToRSAPublicKey(e)])])};L.publicKeyToRSAPublicKey=function(e){return x.create(x.Class.UNIVERSAL,x.Type.SEQUENCE,!0,[x.create(x.Class.UNIVERSAL,x.Type.INTEGER,!1,et(e.n)),x.create(x.Class.UNIVERSAL,x.Type.INTEGER,!1,et(e.e))])};function c0(e,t,r){var n=N.util.createBuffer(),i=Math.ceil(t.n.bitLength()/8);if(e.length>i-11){var a=new Error("Message is too long for PKCS#1 v1.5 padding.");throw a.length=e.length,a.max=i-11,a}n.putByte(0),n.putByte(r);var s=i-3-e.length,o;if(r===0||r===1){o=r===0?0:255;for(var u=0;u<s;++u)n.putByte(o)}else for(;s>0;){for(var c=0,f=N.random.getBytes(s),u=0;u<s;++u)o=f.charCodeAt(u),o===0?++c:n.putByte(o);s=c}return n.putByte(0),n.putBytes(e),n}function Vn(e,t,r,n){var i=Math.ceil(t.n.bitLength()/8),a=N.util.createBuffer(e),s=a.getByte(),o=a.getByte();if(s!==0||r&&o!==0&&o!==1||!r&&o!=2||r&&o===0&&typeof n=="undefined")throw new Error("Encryption block is invalid.");var u=0;if(o===0){u=i-3-n;for(var c=0;c<u;++c)if(a.getByte()!==0)throw new Error("Encryption block is invalid.")}else if(o===1)for(u=0;a.length()>1;){if(a.getByte()!==255){--a.read;break}++u}else if(o===2)for(u=0;a.length()>1;){if(a.getByte()===0){--a.read;break}++u}var f=a.getByte();if(f!==0||u!==i-3-a.length())throw new Error("Encryption block is invalid.");return a.getBytes()}function Bp(e,t,r){typeof t=="function"&&(r=t,t={}),t=t||{};var n={algorithm:{name:t.algorithm||"PRIMEINC",options:{workers:t.workers||2,workLoad:t.workLoad||100,workerScript:t.workerScript}}};"prng"in t&&(n.prng=t.prng),i();function i(){a(e.pBits,function(o,u){if(o)return r(o);if(e.p=u,e.q!==null)return s(o,e.q);a(e.qBits,s)})}function a(o,u){N.prime.generateProbablePrime(o,n,u)}function s(o,u){if(o)return r(o);if(e.q=u,e.p.compareTo(e.q)<0){var c=e.p;e.p=e.q,e.q=c}if(e.p.subtract(M.ONE).gcd(e.e).compareTo(M.ONE)!==0){e.p=null,i();return}if(e.q.subtract(M.ONE).gcd(e.e).compareTo(M.ONE)!==0){e.q=null,a(e.qBits,s);return}if(e.p1=e.p.subtract(M.ONE),e.q1=e.q.subtract(M.ONE),e.phi=e.p1.multiply(e.q1),e.phi.gcd(e.e).compareTo(M.ONE)!==0){e.p=e.q=null,i();return}if(e.n=e.p.multiply(e.q),e.n.bitLength()!==e.bits){e.q=null,a(e.qBits,s);return}var f=e.e.modInverse(e.phi);e.keys={privateKey:L.rsa.setPrivateKey(e.n,e.e,f,e.p,e.q,f.mod(e.p1),f.mod(e.q1),e.q.modInverse(e.p)),publicKey:L.rsa.setPublicKey(e.n,e.e)},r(null,e.keys)}}function et(e){var t=e.toString(16);t[0]>="8"&&(t="00"+t);var r=N.util.hexToBytes(t);return r.length>1&&(r.charCodeAt(0)===0&&(r.charCodeAt(1)&128)==0||r.charCodeAt(0)===255&&(r.charCodeAt(1)&128)==128)?r.substr(1):r}function Cp(e){return e<=100?27:e<=150?18:e<=200?15:e<=250?12:e<=300?9:e<=350?8:e<=400?7:e<=500?6:e<=600?5:e<=800?4:e<=1250?3:2}function f0(e){return N.util.isNodejs&&typeof aa[e]=="function"}function l0(e){return typeof Ne.globalScope!="undefined"&&typeof Ne.globalScope.crypto=="object"&&typeof Ne.globalScope.crypto.subtle=="object"&&typeof Ne.globalScope.crypto.subtle[e]=="function"}function h0(e){return typeof Ne.globalScope!="undefined"&&typeof Ne.globalScope.msCrypto=="object"&&typeof Ne.globalScope.msCrypto.subtle=="object"&&typeof Ne.globalScope.msCrypto.subtle[e]=="function"}function p0(e){for(var t=N.util.hexToBytes(e.toString(16)),r=new Uint8Array(t.length),n=0;n<t.length;++n)r[n]=t.charCodeAt(n);return r}});var b0=A((y2,m0)=>{var P=Y();Yi();qr();Bo();Ht();Tn();Io();Do();Ur();Ho();zn();ue();typeof y0=="undefined"&&(y0=P.jsbn.BigInteger);var y0,b=P.asn1,q=P.pki=P.pki||{};m0.exports=q.pbe=P.pbe=P.pbe||{};var jt=q.oids,Ap={name:"EncryptedPrivateKeyInfo",tagClass:b.Class.UNIVERSAL,type:b.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedPrivateKeyInfo.encryptionAlgorithm",tagClass:b.Class.UNIVERSAL,type:b.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:b.Class.UNIVERSAL,type:b.Type.OID,constructed:!1,capture:"encryptionOid"},{name:"AlgorithmIdentifier.parameters",tagClass:b.Class.UNIVERSAL,type:b.Type.SEQUENCE,constructed:!0,captureAsn1:"encryptionParams"}]},{name:"EncryptedPrivateKeyInfo.encryptedData",tagClass:b.Class.UNIVERSAL,type:b.Type.OCTETSTRING,constructed:!1,capture:"encryptedData"}]},_p={name:"PBES2Algorithms",tagClass:b.Class.UNIVERSAL,type:b.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc",tagClass:b.Class.UNIVERSAL,type:b.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc.oid",tagClass:b.Class.UNIVERSAL,type:b.Type.OID,constructed:!1,capture:"kdfOid"},{name:"PBES2Algorithms.params",tagClass:b.Class.UNIVERSAL,type:b.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.params.salt",tagClass:b.Class.UNIVERSAL,type:b.Type.OCTETSTRING,constructed:!1,capture:"kdfSalt"},{name:"PBES2Algorithms.params.iterationCount",tagClass:b.Class.UNIVERSAL,type:b.Type.INTEGER,constructed:!1,capture:"kdfIterationCount"},{name:"PBES2Algorithms.params.keyLength",tagClass:b.Class.UNIVERSAL,type:b.Type.INTEGER,constructed:!1,optional:!0,capture:"keyLength"},{name:"PBES2Algorithms.params.prf",tagClass:b.Class.UNIVERSAL,type:b.Type.SEQUENCE,constructed:!0,optional:!0,value:[{name:"PBES2Algorithms.params.prf.algorithm",tagClass:b.Class.UNIVERSAL,type:b.Type.OID,constructed:!1,capture:"prfOid"}]}]}]},{name:"PBES2Algorithms.encryptionScheme",tagClass:b.Class.UNIVERSAL,type:b.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.encryptionScheme.oid",tagClass:b.Class.UNIVERSAL,type:b.Type.OID,constructed:!1,capture:"encOid"},{name:"PBES2Algorithms.encryptionScheme.iv",tagClass:b.Class.UNIVERSAL,type:b.Type.OCTETSTRING,constructed:!1,capture:"encIv"}]}]},Tp={name:"pkcs-12PbeParams",tagClass:b.Class.UNIVERSAL,type:b.Type.SEQUENCE,constructed:!0,value:[{name:"pkcs-12PbeParams.salt",tagClass:b.Class.UNIVERSAL,type:b.Type.OCTETSTRING,constructed:!1,capture:"salt"},{name:"pkcs-12PbeParams.iterations",tagClass:b.Class.UNIVERSAL,type:b.Type.INTEGER,constructed:!1,capture:"iterations"}]};q.encryptPrivateKeyInfo=function(e,t,r){r=r||{},r.saltSize=r.saltSize||8,r.count=r.count||2048,r.algorithm=r.algorithm||"aes128",r.prfAlgorithm=r.prfAlgorithm||"sha1";var n=P.random.getBytesSync(r.saltSize),i=r.count,a=b.integerToDer(i),s,o,u;if(r.algorithm.indexOf("aes")===0||r.algorithm==="des"){var c,f,l;switch(r.algorithm){case"aes128":s=16,c=16,f=jt["aes128-CBC"],l=P.aes.createEncryptionCipher;break;case"aes192":s=24,c=16,f=jt["aes192-CBC"],l=P.aes.createEncryptionCipher;break;case"aes256":s=32,c=16,f=jt["aes256-CBC"],l=P.aes.createEncryptionCipher;break;case"des":s=8,c=8,f=jt.desCBC,l=P.des.createEncryptionCipher;break;default:var h=new Error("Cannot encrypt private key. Unknown encryption algorithm.");throw h.algorithm=r.algorithm,h}var d="hmacWith"+r.prfAlgorithm.toUpperCase(),p=x0(d),g=P.pkcs5.pbkdf2(t,n,i,s,p),v=P.random.getBytesSync(c),m=l(g);m.start(v),m.update(b.toDer(e)),m.finish(),u=m.output.getBytes();var S=Ip(n,a,s,d);o=b.create(b.Class.UNIVERSAL,b.Type.SEQUENCE,!0,[b.create(b.Class.UNIVERSAL,b.Type.OID,!1,b.oidToDer(jt.pkcs5PBES2).getBytes()),b.create(b.Class.UNIVERSAL,b.Type.SEQUENCE,!0,[b.create(b.Class.UNIVERSAL,b.Type.SEQUENCE,!0,[b.create(b.Class.UNIVERSAL,b.Type.OID,!1,b.oidToDer(jt.pkcs5PBKDF2).getBytes()),S]),b.create(b.Class.UNIVERSAL,b.Type.SEQUENCE,!0,[b.create(b.Class.UNIVERSAL,b.Type.OID,!1,b.oidToDer(f).getBytes()),b.create(b.Class.UNIVERSAL,b.Type.OCTETSTRING,!1,v)])])])}else if(r.algorithm==="3des"){s=24;var C=new P.util.ByteBuffer(n),g=q.pbe.generatePkcs12Key(t,C,1,i,s),v=q.pbe.generatePkcs12Key(t,C,2,i,s),m=P.des.createEncryptionCipher(g);m.start(v),m.update(b.toDer(e)),m.finish(),u=m.output.getBytes(),o=b.create(b.Class.UNIVERSAL,b.Type.SEQUENCE,!0,[b.create(b.Class.UNIVERSAL,b.Type.OID,!1,b.oidToDer(jt["pbeWithSHAAnd3-KeyTripleDES-CBC"]).getBytes()),b.create(b.Class.UNIVERSAL,b.Type.SEQUENCE,!0,[b.create(b.Class.UNIVERSAL,b.Type.OCTETSTRING,!1,n),b.create(b.Class.UNIVERSAL,b.Type.INTEGER,!1,a.getBytes())])])}else{var h=new Error("Cannot encrypt private key. Unknown encryption algorithm.");throw h.algorithm=r.algorithm,h}var k=b.create(b.Class.UNIVERSAL,b.Type.SEQUENCE,!0,[o,b.create(b.Class.UNIVERSAL,b.Type.OCTETSTRING,!1,u)]);return k};q.decryptPrivateKeyInfo=function(e,t){var r=null,n={},i=[];if(!b.validate(e,Ap,n,i)){var a=new Error("Cannot read encrypted private key. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw a.errors=i,a}var s=b.derToOid(n.encryptionOid),o=q.pbe.getCipher(s,n.encryptionParams,t),u=P.util.createBuffer(n.encryptedData);return o.update(u),o.finish()&&(r=b.fromDer(o.output)),r};q.encryptedPrivateKeyToPem=function(e,t){var r={type:"ENCRYPTED PRIVATE KEY",body:b.toDer(e).getBytes()};return P.pem.encode(r,{maxline:t})};q.encryptedPrivateKeyFromPem=function(e){var t=P.pem.decode(e)[0];if(t.type!=="ENCRYPTED PRIVATE KEY"){var r=new Error('Could not convert encrypted private key from PEM; PEM header type is "ENCRYPTED PRIVATE KEY".');throw r.headerType=t.type,r}if(t.procType&&t.procType.type==="ENCRYPTED")throw new Error("Could not convert encrypted private key from PEM; PEM is encrypted.");return b.fromDer(t.body)};q.encryptRsaPrivateKey=function(e,t,r){if(r=r||{},!r.legacy){var n=q.wrapRsaPrivateKey(q.privateKeyToAsn1(e));return n=q.encryptPrivateKeyInfo(n,t,r),q.encryptedPrivateKeyToPem(n)}var i,a,s,o;switch(r.algorithm){case"aes128":i="AES-128-CBC",s=16,a=P.random.getBytesSync(16),o=P.aes.createEncryptionCipher;break;case"aes192":i="AES-192-CBC",s=24,a=P.random.getBytesSync(16),o=P.aes.createEncryptionCipher;break;case"aes256":i="AES-256-CBC",s=32,a=P.random.getBytesSync(16),o=P.aes.createEncryptionCipher;break;case"3des":i="DES-EDE3-CBC",s=24,a=P.random.getBytesSync(8),o=P.des.createEncryptionCipher;break;case"des":i="DES-CBC",s=8,a=P.random.getBytesSync(8),o=P.des.createEncryptionCipher;break;default:var u=new Error('Could not encrypt RSA private key; unsupported encryption algorithm "'+r.algorithm+'".');throw u.algorithm=r.algorithm,u}var c=P.pbe.opensslDeriveBytes(t,a.substr(0,8),s),f=o(c);f.start(a),f.update(b.toDer(q.privateKeyToAsn1(e))),f.finish();var l={type:"RSA PRIVATE KEY",procType:{version:"4",type:"ENCRYPTED"},dekInfo:{algorithm:i,parameters:P.util.bytesToHex(a).toUpperCase()},body:f.output.getBytes()};return P.pem.encode(l)};q.decryptRsaPrivateKey=function(e,t){var r=null,n=P.pem.decode(e)[0];if(n.type!=="ENCRYPTED PRIVATE KEY"&&n.type!=="PRIVATE KEY"&&n.type!=="RSA PRIVATE KEY"){var i=new Error('Could not convert private key from PEM; PEM header type is not "ENCRYPTED PRIVATE KEY", "PRIVATE KEY", or "RSA PRIVATE KEY".');throw i.headerType=i,i}if(n.procType&&n.procType.type==="ENCRYPTED"){var a,s;switch(n.dekInfo.algorithm){case"DES-CBC":a=8,s=P.des.createDecryptionCipher;break;case"DES-EDE3-CBC":a=24,s=P.des.createDecryptionCipher;break;case"AES-128-CBC":a=16,s=P.aes.createDecryptionCipher;break;case"AES-192-CBC":a=24,s=P.aes.createDecryptionCipher;break;case"AES-256-CBC":a=32,s=P.aes.createDecryptionCipher;break;case"RC2-40-CBC":a=5,s=function(l){return P.rc2.createDecryptionCipher(l,40)};break;case"RC2-64-CBC":a=8,s=function(l){return P.rc2.createDecryptionCipher(l,64)};break;case"RC2-128-CBC":a=16,s=function(l){return P.rc2.createDecryptionCipher(l,128)};break;default:var i=new Error('Could not decrypt private key; unsupported encryption algorithm "'+n.dekInfo.algorithm+'".');throw i.algorithm=n.dekInfo.algorithm,i}var o=P.util.hexToBytes(n.dekInfo.parameters),u=P.pbe.opensslDeriveBytes(t,o.substr(0,8),a),c=s(u);if(c.start(o),c.update(P.util.createBuffer(n.body)),c.finish())r=c.output.getBytes();else return r}else r=n.body;return n.type==="ENCRYPTED PRIVATE KEY"?r=q.decryptPrivateKeyInfo(b.fromDer(r),t):r=b.fromDer(r),r!==null&&(r=q.privateKeyFromAsn1(r)),r};q.pbe.generatePkcs12Key=function(e,t,r,n,i,a){var s,o;if(typeof a=="undefined"||a===null){if(!("sha1"in P.md))throw new Error('"sha1" hash algorithm unavailable.');a=P.md.sha1.create()}var u=a.digestLength,c=a.blockLength,f=new P.util.ByteBuffer,l=new P.util.ByteBuffer;if(e!=null){for(o=0;o<e.length;o++)l.putInt16(e.charCodeAt(o));l.putInt16(0)}var h=l.length(),d=t.length(),p=new P.util.ByteBuffer;p.fillWithByte(r,c);var g=c*Math.ceil(d/c),v=new P.util.ByteBuffer;for(o=0;o<g;o++)v.putByte(t.at(o%d));var m=c*Math.ceil(h/c),S=new P.util.ByteBuffer;for(o=0;o<m;o++)S.putByte(l.at(o%h));var C=v;C.putBuffer(S);for(var k=Math.ceil(i/u),I=1;I<=k;I++){var T=new P.util.ByteBuffer;T.putBytes(p.bytes()),T.putBytes(C.bytes());for(var O=0;O<n;O++)a.start(),a.update(T.getBytes()),T=a.digest();var F=new P.util.ByteBuffer;for(o=0;o<c;o++)F.putByte(T.at(o%u));var ce=Math.ceil(d/c)+Math.ceil(h/c),Fe=new P.util.ByteBuffer;for(s=0;s<ce;s++){var Ie=new P.util.ByteBuffer(C.getBytes(c)),we=511;for(o=F.length()-1;o>=0;o--)we=we>>8,we+=F.at(o)+Ie.at(o),Ie.setAt(o,we&255);Fe.putBuffer(Ie)}C=Fe,f.putBuffer(T)}return f.truncate(f.length()-i),f};q.pbe.getCipher=function(e,t,r){switch(e){case q.oids.pkcs5PBES2:return q.pbe.getCipherForPBES2(e,t,r);case q.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:case q.oids["pbewithSHAAnd40BitRC2-CBC"]:return q.pbe.getCipherForPKCS12PBE(e,t,r);default:var n=new Error("Cannot read encrypted PBE data block. Unsupported OID.");throw n.oid=e,n.supportedOids=["pkcs5PBES2","pbeWithSHAAnd3-KeyTripleDES-CBC","pbewithSHAAnd40BitRC2-CBC"],n}};q.pbe.getCipherForPBES2=function(e,t,r){var n={},i=[];if(!b.validate(t,_p,n,i)){var a=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw a.errors=i,a}if(e=b.derToOid(n.kdfOid),e!==q.oids.pkcs5PBKDF2){var a=new Error("Cannot read encrypted private key. Unsupported key derivation function OID.");throw a.oid=e,a.supportedOids=["pkcs5PBKDF2"],a}if(e=b.derToOid(n.encOid),e!==q.oids["aes128-CBC"]&&e!==q.oids["aes192-CBC"]&&e!==q.oids["aes256-CBC"]&&e!==q.oids["des-EDE3-CBC"]&&e!==q.oids.desCBC){var a=new Error("Cannot read encrypted private key. Unsupported encryption scheme OID.");throw a.oid=e,a.supportedOids=["aes128-CBC","aes192-CBC","aes256-CBC","des-EDE3-CBC","desCBC"],a}var s=n.kdfSalt,o=P.util.createBuffer(n.kdfIterationCount);o=o.getInt(o.length()<<3);var u,c;switch(q.oids[e]){case"aes128-CBC":u=16,c=P.aes.createDecryptionCipher;break;case"aes192-CBC":u=24,c=P.aes.createDecryptionCipher;break;case"aes256-CBC":u=32,c=P.aes.createDecryptionCipher;break;case"des-EDE3-CBC":u=24,c=P.des.createDecryptionCipher;break;case"desCBC":u=8,c=P.des.createDecryptionCipher;break}var f=v0(n.prfOid),l=P.pkcs5.pbkdf2(r,s,o,u,f),h=n.encIv,d=c(l);return d.start(h),d};q.pbe.getCipherForPKCS12PBE=function(e,t,r){var n={},i=[];if(!b.validate(t,Tp,n,i)){var a=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw a.errors=i,a}var s=P.util.createBuffer(n.salt),o=P.util.createBuffer(n.iterations);o=o.getInt(o.length()<<3);var u,c,f;switch(e){case q.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:u=24,c=8,f=P.des.startDecrypting;break;case q.oids["pbewithSHAAnd40BitRC2-CBC"]:u=5,c=8,f=function(g,v){var m=P.rc2.createDecryptionCipher(g,40);return m.start(v,null),m};break;default:var a=new Error("Cannot read PKCS #12 PBE data block. Unsupported OID.");throw a.oid=e,a}var l=v0(n.prfOid),h=q.pbe.generatePkcs12Key(r,s,1,o,u,l);l.start();var d=q.pbe.generatePkcs12Key(r,s,2,o,c,l);return f(h,d)};q.pbe.opensslDeriveBytes=function(e,t,r,n){if(typeof n=="undefined"||n===null){if(!("md5"in P.md))throw new Error('"md5" hash algorithm unavailable.');n=P.md.md5.create()}t===null&&(t="");for(var i=[g0(n,e+t)],a=16,s=1;a<r;++s,a+=16)i.push(g0(n,i[s-1]+e+t));return i.join("").substr(0,r)};function g0(e,t){return e.start().update(t).digest().getBytes()}function v0(e){var t;if(!e)t="hmacWithSHA1";else if(t=q.oids[b.derToOid(e)],!t){var r=new Error("Unsupported PRF OID.");throw r.oid=e,r.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],r}return x0(t)}function x0(e){var t=P.md;switch(e){case"hmacWithSHA224":t=P.md.sha512;case"hmacWithSHA1":case"hmacWithSHA256":case"hmacWithSHA384":case"hmacWithSHA512":e=e.substr(8).toLowerCase();break;default:var r=new Error("Unsupported PRF algorithm.");throw r.algorithm=e,r.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],r}if(!t||!(e in t))throw new Error("Unknown hash algorithm: "+e);return t[e].create()}function Ip(e,t,r,n){var i=b.create(b.Class.UNIVERSAL,b.Type.SEQUENCE,!0,[b.create(b.Class.UNIVERSAL,b.Type.OCTETSTRING,!1,e),b.create(b.Class.UNIVERSAL,b.Type.INTEGER,!1,t.getBytes())]);return n!=="hmacWithSHA1"&&i.value.push(b.create(b.Class.UNIVERSAL,b.Type.INTEGER,!1,P.util.hexToBytes(r.toString(16))),b.create(b.Class.UNIVERSAL,b.Type.SEQUENCE,!0,[b.create(b.Class.UNIVERSAL,b.Type.OID,!1,b.oidToDer(q.oids[n]).getBytes()),b.create(b.Class.UNIVERSAL,b.Type.NULL,!1,"")])),i}});var tt=A((g2,S0)=>{"use strict";function w0(e,t){for(let r in t)Object.defineProperty(e,r,{value:t[r],enumerable:!0,configurable:!0});return e}function Pp(e,t,r){if(!e||typeof e=="string")throw new TypeError("Please pass an Error to err-code");r||(r={}),typeof t=="object"&&(r=t,t=""),t&&(r.code=t);try{return w0(e,r)}catch(n){r.message=e.message,r.stack=e.stack;let i=function(){};return i.prototype=Object.create(Object.getPrototypeOf(e)),w0(new i,r)}}S0.exports=Pp});var sa={};ge(sa,{identity:()=>Rp});var Rp,E0=Q(()=>{Ge();gt();Rp=yn({prefix:"\0",name:"identity",encode:e=>$a(e),decode:e=>ja(e)})});var oa={};ge(oa,{base2:()=>Dp});var Dp,B0=Q(()=>{Ge();Dp=ae({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1})});var ua={};ge(ua,{base8:()=>kp});var kp,C0=Q(()=>{Ge();kp=ae({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3})});var ca={};ge(ca,{base10:()=>Kp});var Kp,A0=Q(()=>{Ge();Kp=vt({prefix:"9",name:"base10",alphabet:"0123456789"})});var Fr,_0,Hn=Q(()=>{Ar();Fr=({name:e,code:t,encode:r})=>new _0(e,t,r),_0=class{constructor(t,r,n){this.name=t,this.code=r,this.encode=n}async digest(t){if(t instanceof Uint8Array){let r=await this.encode(t);return Cr(this.code,r)}else throw Error("Unknown type, must be binary type")}}});var $t={};ge($t,{sha256:()=>Np,sha512:()=>Lp});var I0,Np,Lp,lr=Q(()=>{Hn();I0=e=>async t=>new Uint8Array(await crypto.subtle.digest(e,t)),Np=Fr({name:"sha2-256",code:18,encode:I0("SHA-256")}),Lp=Fr({name:"sha2-512",code:19,encode:I0("SHA-512")})});var Mr={};ge(Mr,{identity:()=>qp});var qp,Gn=Q(()=>{Hn();gt();qp=Fr({name:"identity",code:0,encode:e=>ut(e)})});var P0=Q(()=>{gt()});var _2,T2,R0=Q(()=>{_2=new TextEncoder,T2=new TextDecoder});var D0=Q(()=>{wi();pn();gt();Hn();Ar()});var fa,D2,k0=Q(()=>{E0();B0();C0();A0();Ei();Tr();Si();Ot();Pr();lr();Gn();P0();R0();D0();fa={...sa,...oa,...ua,...ca,...mn,..._r,...xn,...Ut,...ir},D2={...$t,...Mr}});function K0(e,t,r,n){return{name:e,prefix:t,encoder:{name:e,prefix:t,encode:r},decoder:{decode:n}}}var N0,la,Fp,Wn,ha=Q(()=>{k0();N0=K0("utf8","u",e=>{let t=new TextDecoder("utf8");return"u"+t.decode(e)},e=>new TextEncoder().encode(e.substring(1))),la=K0("ascii","a",e=>{let t="a";for(let r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return t},e=>{e=e.substring(1);let t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}),Fp={utf8:N0,"utf-8":N0,hex:fa.base16,latin1:la,ascii:la,binary:la,...fa},Wn=Fp});var Ct={};ge(Ct,{fromString:()=>Mp});function Mp(e,t="utf8"){let r=Wn[t];if(!r)throw new Error(`Unsupported encoding "${t}"`);return r.decoder.decode(`${r.prefix}${e}`)}var At=Q(()=>{ha()});var Vr={};ge(Vr,{concat:()=>Vp});function Vp(e,t){t||(t=e.reduce((i,a)=>i+a.length,0));let r=new Uint8Array(t),n=0;for(let i of e)r.set(i,n),n+=i.length;return r}var zr=Q(()=>{});var Hr=A(L0=>{"use strict";L0.get=(e=globalThis)=>{let t=e.crypto;if(!t||!t.subtle)throw Object.assign(new Error("Missing Web Crypto API. The most likely cause of this error is that this page is being accessed from an insecure context (i.e. not HTTPS). For more information and possible resolutions see https://github.com/libp2p/js-libp2p-crypto/blob/master/README.md#web-crypto-api"),{code:"ERR_MISSING_WEB_CRYPTO"});return t}});var pa=A((U2,U0)=>{"use strict";var{concat:zp}=(zr(),Vr),{fromString:q0}=(At(),Ct),Hp=Hr();function Gp({algorithm:e="AES-GCM",nonceLength:t=12,keyLength:r=16,digest:n="SHA-256",saltLength:i=16,iterations:a=32767}={}){let s=Hp.get();r*=8;async function o(c,f){let l=s.getRandomValues(new Uint8Array(i)),h=s.getRandomValues(new Uint8Array(t)),d={name:e,iv:h},p={name:"PBKDF2",salt:l,iterations:a,hash:{name:n}},g=await s.subtle.importKey("raw",q0(f),{name:"PBKDF2"},!1,["deriveKey","deriveBits"]),v=await s.subtle.deriveKey(p,g,{name:e,length:r},!0,["encrypt"]),m=await s.subtle.encrypt(d,v,c);return zp([l,d.iv,new Uint8Array(m)])}async function u(c,f){let l=c.slice(0,i),h=c.slice(i,i+t),d=c.slice(i+t),p={name:e,iv:h},g={name:"PBKDF2",salt:l,iterations:a,hash:{name:n}},v=await s.subtle.importKey("raw",q0(f),{name:"PBKDF2"},!1,["deriveKey","deriveBits"]),m=await s.subtle.deriveKey(g,v,{name:e,length:r},!0,["decrypt"]),S=await s.subtle.decrypt(p,m,d);return new Uint8Array(S)}return{encrypt:o,decrypt:u}}U0.exports={create:Gp}});var F0=A((O2,O0)=>{"use strict";var{base64:Wp}=(Pr(),ir),jp=pa();O0.exports={import:async function(e,t){let r=Wp.decode(e);return await jp.create().decrypt(r,t)}}});var hr={};ge(hr,{equals:()=>$p});function $p(e,t){if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;for(let r=0;r<e.byteLength;r++)if(e[r]!==t[r])return!1;return!0}var pr=Q(()=>{});var _t={};ge(_t,{toString:()=>Qp});function Qp(e,t="utf8"){let r=Wn[t];if(!r)throw new Error(`Unsupported encoding "${t}"`);return r.encoder.encode(e).substring(1)}var Tt=Q(()=>{ha()});var G0=A((M2,H0)=>{var J=Y();Ht();ue();var Gr=H0.exports=J.sha512=J.sha512||{};J.md.sha512=J.md.algorithms.sha512=Gr;var M0=J.sha384=J.sha512.sha384=J.sha512.sha384||{};M0.create=function(){return Gr.create("SHA-384")};J.md.sha384=J.md.algorithms.sha384=M0;J.sha512.sha256=J.sha512.sha256||{create:function(){return Gr.create("SHA-512/256")}};J.md["sha512/256"]=J.md.algorithms["sha512/256"]=J.sha512.sha256;J.sha512.sha224=J.sha512.sha224||{create:function(){return Gr.create("SHA-512/224")}};J.md["sha512/224"]=J.md.algorithms["sha512/224"]=J.sha512.sha224;Gr.create=function(e){if(V0||Yp(),typeof e=="undefined"&&(e="SHA-512"),!(e in Qt))throw new Error("Invalid SHA-512 algorithm: "+e);for(var t=Qt[e],r=null,n=J.util.createBuffer(),i=new Array(80),a=0;a<80;++a)i[a]=new Array(2);var s=64;switch(e){case"SHA-384":s=48;break;case"SHA-512/256":s=32;break;case"SHA-512/224":s=28;break}var o={algorithm:e.replace("-","").toLowerCase(),blockLength:128,digestLength:s,messageLength:0,fullMessageLength:null,messageLengthSize:16};return o.start=function(){o.messageLength=0,o.fullMessageLength=o.messageLength128=[];for(var u=o.messageLengthSize/4,c=0;c<u;++c)o.fullMessageLength.push(0);n=J.util.createBuffer(),r=new Array(t.length);for(var c=0;c<t.length;++c)r[c]=t[c].slice(0);return o},o.start(),o.update=function(u,c){c==="utf8"&&(u=J.util.encodeUtf8(u));var f=u.length;o.messageLength+=f,f=[f/4294967296>>>0,f>>>0];for(var l=o.fullMessageLength.length-1;l>=0;--l)o.fullMessageLength[l]+=f[1],f[1]=f[0]+(o.fullMessageLength[l]/4294967296>>>0),o.fullMessageLength[l]=o.fullMessageLength[l]>>>0,f[0]=f[1]/4294967296>>>0;return n.putBytes(u),z0(r,i,n),(n.read>2048||n.length()===0)&&n.compact(),o},o.digest=function(){var u=J.util.createBuffer();u.putBytes(n.bytes());var c=o.fullMessageLength[o.fullMessageLength.length-1]+o.messageLengthSize,f=c&o.blockLength-1;u.putBytes(da.substr(0,o.blockLength-f));for(var l,h,d=o.fullMessageLength[0]*8,p=0;p<o.fullMessageLength.length-1;++p)l=o.fullMessageLength[p+1]*8,h=l/4294967296>>>0,d+=h,u.putInt32(d>>>0),d=l>>>0;u.putInt32(d);for(var g=new Array(r.length),p=0;p<r.length;++p)g[p]=r[p].slice(0);z0(g,i,u);var v=J.util.createBuffer(),m;e==="SHA-512"?m=g.length:e==="SHA-384"?m=g.length-2:m=g.length-4;for(var p=0;p<m;++p)v.putInt32(g[p][0]),(p!==m-1||e!=="SHA-512/224")&&v.putInt32(g[p][1]);return v},o};var da=null,V0=!1,ya=null,Qt=null;function Yp(){da=String.fromCharCode(128),da+=J.util.fillString(String.fromCharCode(0),128),ya=[[1116352408,3609767458],[1899447441,602891725],[3049323471,3964484399],[3921009573,2173295548],[961987163,4081628472],[1508970993,3053834265],[2453635748,2937671579],[2870763221,3664609560],[3624381080,2734883394],[310598401,1164996542],[607225278,1323610764],[1426881987,3590304994],[1925078388,4068182383],[2162078206,991336113],[2614888103,633803317],[3248222580,3479774868],[3835390401,2666613458],[4022224774,944711139],[264347078,2341262773],[604807628,2007800933],[770255983,1495990901],[1249150122,1856431235],[1555081692,3175218132],[1996064986,2198950837],[2554220882,3999719339],[2821834349,766784016],[2952996808,2566594879],[3210313671,3203337956],[3336571891,1034457026],[3584528711,2466948901],[113926993,3758326383],[338241895,168717936],[666307205,1188179964],[773529912,1546045734],[1294757372,1522805485],[1396182291,2643833823],[1695183700,2343527390],[1986661051,1014477480],[2177026350,1206759142],[2456956037,344077627],[2730485921,1290863460],[2820302411,3158454273],[3259730800,3505952657],[3345764771,106217008],[3516065817,3606008344],[3600352804,1432725776],[4094571909,1467031594],[275423344,851169720],[430227734,3100823752],[506948616,1363258195],[659060556,3750685593],[883997877,3785050280],[958139571,3318307427],[1322822218,3812723403],[1537002063,2003034995],[1747873779,3602036899],[1955562222,1575990012],[2024104815,1125592928],[2227730452,2716904306],[2361852424,442776044],[2428436474,593698344],[2756734187,3733110249],[3204031479,2999351573],[3329325298,3815920427],[3391569614,3928383900],[3515267271,566280711],[3940187606,3454069534],[4118630271,4000239992],[116418474,1914138554],[174292421,2731055270],[289380356,3203993006],[460393269,320620315],[685471733,587496836],[852142971,1086792851],[1017036298,365543100],[1126000580,2618297676],[1288033470,3409855158],[1501505948,4234509866],[1607167915,987167468],[1816402316,1246189591]],Qt={},Qt["SHA-512"]=[[1779033703,4089235720],[3144134277,2227873595],[1013904242,4271175723],[2773480762,1595750129],[1359893119,2917565137],[2600822924,725511199],[528734635,4215389547],[1541459225,327033209]],Qt["SHA-384"]=[[3418070365,3238371032],[1654270250,914150663],[2438529370,812702999],[355462360,4144912697],[1731405415,4290775857],[2394180231,1750603025],[3675008525,1694076839],[1203062813,3204075428]],Qt["SHA-512/256"]=[[573645204,4230739756],[2673172387,3360449730],[596883563,1867755857],[2520282905,1497426621],[2519219938,2827943907],[3193839141,1401305490],[721525244,746961066],[246885852,2177182882]],Qt["SHA-512/224"]=[[2352822216,424955298],[1944164710,2312950998],[502970286,855612546],[1738396948,1479516111],[258812777,2077511080],[2011393907,79989058],[1067287976,1780299464],[286451373,2446758561]],V0=!0}function z0(e,t,r){for(var n,i,a,s,o,u,c,f,l,h,d,p,g,v,m,S,C,k,I,T,O,F,ce,Fe,Ie,we,Jt,ln,oe,Ae,K,di,yi,gi,vi,Oa=r.length();Oa>=128;){for(oe=0;oe<16;++oe)t[oe][0]=r.getInt32()>>>0,t[oe][1]=r.getInt32()>>>0;for(;oe<80;++oe)di=t[oe-2],Ae=di[0],K=di[1],n=((Ae>>>19|K<<13)^(K>>>29|Ae<<3)^Ae>>>6)>>>0,i=((Ae<<13|K>>>19)^(K<<3|Ae>>>29)^(Ae<<26|K>>>6))>>>0,gi=t[oe-15],Ae=gi[0],K=gi[1],a=((Ae>>>1|K<<31)^(Ae>>>8|K<<24)^Ae>>>7)>>>0,s=((Ae<<31|K>>>1)^(Ae<<24|K>>>8)^(Ae<<25|K>>>7))>>>0,yi=t[oe-7],vi=t[oe-16],K=i+yi[1]+s+vi[1],t[oe][0]=n+yi[0]+a+vi[0]+(K/4294967296>>>0)>>>0,t[oe][1]=K>>>0;for(g=e[0][0],v=e[0][1],m=e[1][0],S=e[1][1],C=e[2][0],k=e[2][1],I=e[3][0],T=e[3][1],O=e[4][0],F=e[4][1],ce=e[5][0],Fe=e[5][1],Ie=e[6][0],we=e[6][1],Jt=e[7][0],ln=e[7][1],oe=0;oe<80;++oe)c=((O>>>14|F<<18)^(O>>>18|F<<14)^(F>>>9|O<<23))>>>0,f=((O<<18|F>>>14)^(O<<14|F>>>18)^(F<<23|O>>>9))>>>0,l=(Ie^O&(ce^Ie))>>>0,h=(we^F&(Fe^we))>>>0,o=((g>>>28|v<<4)^(v>>>2|g<<30)^(v>>>7|g<<25))>>>0,u=((g<<4|v>>>28)^(v<<30|g>>>2)^(v<<25|g>>>7))>>>0,d=(g&m|C&(g^m))>>>0,p=(v&S|k&(v^S))>>>0,K=ln+f+h+ya[oe][1]+t[oe][1],n=Jt+c+l+ya[oe][0]+t[oe][0]+(K/4294967296>>>0)>>>0,i=K>>>0,K=u+p,a=o+d+(K/4294967296>>>0)>>>0,s=K>>>0,Jt=Ie,ln=we,Ie=ce,we=Fe,ce=O,Fe=F,K=T+i,O=I+n+(K/4294967296>>>0)>>>0,F=K>>>0,I=C,T=k,C=m,k=S,m=g,S=v,K=i+s,g=n+a+(K/4294967296>>>0)>>>0,v=K>>>0;K=e[0][1]+v,e[0][0]=e[0][0]+g+(K/4294967296>>>0)>>>0,e[0][1]=K>>>0,K=e[1][1]+S,e[1][0]=e[1][0]+m+(K/4294967296>>>0)>>>0,e[1][1]=K>>>0,K=e[2][1]+k,e[2][0]=e[2][0]+C+(K/4294967296>>>0)>>>0,e[2][1]=K>>>0,K=e[3][1]+T,e[3][0]=e[3][0]+I+(K/4294967296>>>0)>>>0,e[3][1]=K>>>0,K=e[4][1]+F,e[4][0]=e[4][0]+O+(K/4294967296>>>0)>>>0,e[4][1]=K>>>0,K=e[5][1]+Fe,e[5][0]=e[5][0]+ce+(K/4294967296>>>0)>>>0,e[5][1]=K>>>0,K=e[6][1]+we,e[6][0]=e[6][0]+Ie+(K/4294967296>>>0)>>>0,e[6][1]=K>>>0,K=e[7][1]+ln,e[7][0]=e[7][0]+Jt+(K/4294967296>>>0)>>>0,e[7][1]=K>>>0,Oa-=128}}});var j0=A((V2,W0)=>{"use strict";var jn=65536;function Zp(e){let t=new Uint8Array(e),r=0;if(e>0)if(e>jn)for(;r<e;)r+jn>e?(crypto.getRandomValues(t.subarray(r,r+(e-r))),r+=e-r):(crypto.getRandomValues(t.subarray(r,r+jn)),r+=jn);else crypto.getRandomValues(t);return t}W0.exports=Zp});var ga=A((z2,$0)=>{"use strict";var Xp=j0(),Jp=tt();$0.exports=function(e){if(isNaN(e)||e<=0)throw Jp(new Error("random bytes length must be a Number bigger than 0"),"ERR_INVALID_LENGTH");return Xp(e)}});var $n=A(Wr=>{"use strict";ue();Fn();var ed=Y(),{fromString:td}=(At(),Ct),{toString:Q0}=(Tt(),_t),{concat:Y0}=(zr(),Vr);Wr.bigIntegerToUintBase64url=(e,t)=>{let r=Uint8Array.from(e.abs().toByteArray());if(r=r[0]===0?r.slice(1):r,t!=null){if(r.length>t)throw new Error("byte array longer than desired length");r=Y0([new Uint8Array(t-r.length),r])}return Q0(r,"base64url")};Wr.base64urlToBigInteger=e=>{let t=Wr.base64urlToBuffer(e);return new ed.jsbn.BigInteger(Q0(t,"base16"),16)};Wr.base64urlToBuffer=(e,t)=>{let r=td(e,"base64urlpad");if(t!=null){if(r.length>t)throw new Error("byte array longer than desired length");r=Y0([new Uint8Array(t-r.length),r])}return r}});var J0=A(jr=>{"use strict";qr();zn();var It=Y(),{bigIntegerToUintBase64url:rt,base64urlToBigInteger:nt}=$n(),{fromString:Z0}=(At(),Ct),{toString:X0}=(Tt(),_t);jr.pkcs1ToJwk=function(e){let t=It.asn1.fromDer(X0(e,"ascii")),r=It.pki.privateKeyFromAsn1(t);return{kty:"RSA",n:rt(r.n),e:rt(r.e),d:rt(r.d),p:rt(r.p),q:rt(r.q),dp:rt(r.dP),dq:rt(r.dQ),qi:rt(r.qInv),alg:"RS256",kid:"2011-04-29"}};jr.jwkToPkcs1=function(e){let t=It.pki.privateKeyToAsn1({n:nt(e.n),e:nt(e.e),d:nt(e.d),p:nt(e.p),q:nt(e.q),dP:nt(e.dp),dQ:nt(e.dq),qInv:nt(e.qi)});return Z0(It.asn1.toDer(t).getBytes(),"ascii")};jr.pkixToJwk=function(e){let t=It.asn1.fromDer(X0(e,"ascii")),r=It.pki.publicKeyFromAsn1(t);return{kty:"RSA",n:rt(r.n),e:rt(r.e),alg:"RS256",kid:"2011-04-29"}};jr.jwkToPkix=function(e){let t=It.pki.publicKeyToAsn1({n:nt(e.n),e:nt(e.e)});return Z0(It.asn1.toDer(t).getBytes(),"ascii")}});var nu=A((W2,ru)=>{"use strict";zn();var eu=Y(),{base64urlToBigInteger:rd}=$n();function tu(e,t){return t.map(r=>rd(e[r]))}function nd(e){return eu.pki.setRsaPrivateKey(...tu(e,["n","e","d","p","q","dp","dq","qi"]))}function id(e){return eu.pki.setRsaPublicKey(...tu(e,["n","e"]))}ru.exports={jwk2pub:id,jwk2priv:nd}});var su=A(pt=>{"use strict";var ht=Hr(),ad=ga(),{toString:sd}=(Tt(),_t),{fromString:od}=(At(),Ct);pt.utils=J0();pt.generateKey=async function(e){let t=await ht.get().subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:e,publicExponent:new Uint8Array([1,0,1]),hash:{name:"SHA-256"}},!0,["sign","verify"]),r=await iu(t);return{privateKey:r[0],publicKey:r[1]}};pt.unmarshalPrivateKey=async function(e){let r=[await ht.get().subtle.importKey("jwk",e,{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!0,["sign"]),await ud(e)],n=await iu({privateKey:r[0],publicKey:r[1]});return{privateKey:n[0],publicKey:n[1]}};pt.getRandomValues=ad;pt.hashAndSign=async function(e,t){let r=await ht.get().subtle.importKey("jwk",e,{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!1,["sign"]),n=await ht.get().subtle.sign({name:"RSASSA-PKCS1-v1_5"},r,Uint8Array.from(t));return new Uint8Array(n,n.byteOffset,n.byteLength)};pt.hashAndVerify=async function(e,t,r){let n=await ht.get().subtle.importKey("jwk",e,{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!1,["verify"]);return ht.get().subtle.verify({name:"RSASSA-PKCS1-v1_5"},n,t,r)};function iu(e){return Promise.all([ht.get().subtle.exportKey("jwk",e.privateKey),ht.get().subtle.exportKey("jwk",e.publicKey)])}function ud(e){return ht.get().subtle.importKey("jwk",{kty:e.kty,n:e.n,e:e.e},{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!0,["verify"])}var{jwk2pub:cd,jwk2priv:fd}=nu();function au(e,t,r,n){let i=t?cd(e):fd(e),a=sd(Uint8Array.from(r),"ascii"),s=n(a,i);return od(s,"ascii")}pt.encrypt=function(e,t){return au(e,!0,t,(r,n)=>n.encrypt(r))};pt.decrypt=function(e,t){return au(e,!1,t,(r,n)=>n.decrypt(r))}});var Qn=A(($2,ou)=>{"use strict";var{base64:ld}=(Pr(),ir),hd=pa();ou.exports={export:async function(e,t){let n=await hd.create().encrypt(e,t);return ld.encode(n)}}});var hu=A((Q2,lu)=>{"use strict";var{sha256:uu}=(lr(),$t),cu=tt(),{equals:fu}=(pr(),hr),{toString:pd}=(Tt(),_t);G0();var Yn=Y(),Le=su(),Zn=Cn(),dd=Qn(),Xn=class{constructor(t){this._key=t}async verify(t,r){return Le.hashAndVerify(this._key,r,t)}marshal(){return Le.utils.jwkToPkix(this._key)}get bytes(){return Zn.PublicKey.encode({Type:Zn.KeyType.RSA,Data:this.marshal()}).finish()}encrypt(t){return Le.encrypt(this._key,t)}equals(t){return fu(this.bytes,t.bytes)}async hash(){let{bytes:t}=await uu.digest(this.bytes);return t}},$r=class{constructor(t,r){this._key=t,this._publicKey=r}genSecret(){return Le.getRandomValues(16)}async sign(t){return Le.hashAndSign(this._key,t)}get public(){if(!this._publicKey)throw cu(new Error("public key not provided"),"ERR_PUBKEY_NOT_PROVIDED");return new Xn(this._publicKey)}decrypt(t){return Le.decrypt(this._key,t)}marshal(){return Le.utils.jwkToPkcs1(this._key)}get bytes(){return Zn.PrivateKey.encode({Type:Zn.KeyType.RSA,Data:this.marshal()}).finish()}equals(t){return fu(this.bytes,t.bytes)}async hash(){let{bytes:t}=await uu.digest(this.bytes);return t}async id(){let t=await this.public.hash();return pd(t,"base58btc")}async export(t,r="pkcs-8"){if(r==="pkcs-8"){let n=new Yn.util.ByteBuffer(this.marshal()),i=Yn.asn1.fromDer(n),a=Yn.pki.privateKeyFromAsn1(i),s={algorithm:"aes256",count:1e4,saltSize:128/8,prfAlgorithm:"sha512"};return Yn.pki.encryptRsaPrivateKey(a,t,s)}else{if(r==="libp2p-key")return dd.export(this.bytes,t);throw cu(new Error(`export format '${r}' is not supported`),"ERR_INVALID_EXPORT_FORMAT")}}};async function yd(e){let t=Le.utils.pkcs1ToJwk(e),r=await Le.unmarshalPrivateKey(t);return new $r(r.privateKey,r.publicKey)}function gd(e){let t=Le.utils.pkixToJwk(e);return new Xn(t)}async function vd(e){let t=await Le.unmarshalPrivateKey(e);return new $r(t.privateKey,t.publicKey)}async function xd(e){let t=await Le.generateKey(e);return new $r(t.privateKey,t.publicKey)}lu.exports={RsaPublicKey:Xn,RsaPrivateKey:$r,unmarshalRsaPublicKey:gd,unmarshalRsaPrivateKey:yd,generateKeyPair:xd,fromJwk:vd}});var bu=A((ne,mu)=>{"use strict";Object.defineProperty(ne,"__esModule",{value:!0});ne.utils=ne.verify=ne.sign=ne.getPublicKey=ne.SignResult=ne.Signature=ne.Point=ne.ExtendedPoint=ne.CURVE=void 0;var ie={a:-1n,d:37095705934669439343138083508754565189542113879843219016388785533085940283555n,P:2n**255n-19n,n:2n**252n+27742317777372353535851937790883648493n,h:8n,Gx:15112221349535400772501151409588531511454012693041857206046113283949847762202n,Gy:46316835694926478169428394003475163141307993866256225615783033603165251855960n};ne.CURVE=ie;var Be=32,Qr=19681161376707505956807079304988542015446066515923890162744021073123829784752n,md=25063068953384623474111414158702152701244531502492656460079210482610430750235n,bd=54469307008909316920995813868745141605393597292927456921205312896311721017578n,wd=1159843021668779879193775521855586647937357759715417654439879720876111806838n,Sd=40440834346308536858101042469323190826248399146238708352240133220865137265952n,Z=class{constructor(t,r,n,i){this.x=t,this.y=r,this.z=n,this.t=i}static fromAffine(t){if(!(t instanceof re))throw new TypeError("ExtendedPoint#fromAffine: expected Point");return t.equals(re.ZERO)?Z.ZERO:new Z(t.x,t.y,1n,E(t.x*t.y))}static toAffineBatch(t){let r=Bd(t.map(n=>n.z));return t.map((n,i)=>n.toAffine(r[i]))}static normalizeZ(t){return this.toAffineBatch(t).map(this.fromAffine)}static fromRistrettoHash(t){let r=ma(t.slice(0,Be)),n=this.calcElligatorRistrettoMap(r),i=ma(t.slice(Be,Be*2)),a=this.calcElligatorRistrettoMap(i);return n.add(a)}static calcElligatorRistrettoMap(t){let{d:r}=ie,n=E(Qr*t*t),i=E((n+1n)*wd),a=-1n,s=E((a-r*n)*E(n+r)),{isValid:o,value:u}=wa(i,s),c=E(u*t);Rt(c)||(c=E(-c)),o||(u=c),o||(a=n);let f=E(a*(n-1n)*Sd-s),l=u*u,h=E((u+u)*s),d=E(f*md),p=E(1n-l),g=E(1n+l);return new Z(E(h*g),E(p*d),E(d*g),E(h*p))}static fromRistrettoBytes(t){let{a:r,d:n}=ie,i="ExtendedPoint.fromRistrettoBytes: Cannot convert bytes to Ristretto Point",a=ma(t);if(!_d(du(a,Be),t)||Rt(a))throw new Error(i);let s=E(a*a),o=E(1n+r*s),u=E(1n-r*s),c=E(o*o),f=E(u*u),l=E(r*n*c-f),{isValid:h,value:d}=gu(E(l*f)),p=E(d*u),g=E(d*p*l),v=E((a+a)*p);Rt(v)&&(v=E(-v));let m=E(o*g),S=E(v*m);if(!h||Rt(S)||m===0n)throw new Error(i);return new Z(v,m,1n,S)}toRistrettoBytes(){let{x:t,y:r,z:n,t:i}=this,a=E((n+r)*(n-r)),s=E(t*r),{value:o}=gu(E(a*s**2n)),u=E(o*a),c=E(o*s),f=E(u*c*i),l;Rt(i*f)?([t,r]=[E(r*Qr),E(t*Qr)],l=E(u*bd)):l=c,Rt(t*f)&&(r=E(-r));let h=E((n-r)*l);return Rt(h)&&(h=E(-h)),du(h,Be)}equals(t){let r=this,n=t,[i,a,s,o]=[r.t,n.t,r.z,n.z];return E(i*o)===E(a*s)}negate(){return new Z(E(-this.x),this.y,this.z,E(-this.t))}double(){let t=this.x,r=this.y,n=this.z,{a:i}=ie,a=E(t**2n),s=E(r**2n),o=E(2n*n**2n),u=E(i*a),c=E((t+r)**2n-a-s),f=E(u+s),l=E(f-o),h=E(u-s),d=E(c*l),p=E(f*h),g=E(c*h),v=E(l*f);return new Z(d,p,v,g)}add(t){let r=this.x,n=this.y,i=this.z,a=this.t,s=t.x,o=t.y,u=t.z,c=t.t,f=E((n-r)*(o+s)),l=E((n+r)*(o-s)),h=E(l-f);if(h===0n)return this.double();let d=E(i*2n*c),p=E(a*2n*u),g=E(p+d),v=E(l+f),m=E(p-d),S=E(g*h),C=E(v*m),k=E(g*m),I=E(h*v);return new Z(S,C,I,k)}subtract(t){return this.add(t.negate())}multiplyUnsafe(t){if(!yu(t))throw new TypeError("Point#multiply: expected number or bigint");let r=E(BigInt(t),ie.n);if(r===1n)return this;let n=Z.ZERO,i=this;for(;r>0n;)r&1n&&(n=n.add(i)),i=i.double(),r>>=1n;return n}precomputeWindow(t){let r=256/t+1,n=[],i=this,a=i;for(let s=0;s<r;s++){a=i,n.push(a);for(let o=1;o<2**(t-1);o++)a=a.add(i),n.push(a);i=a.double()}return n}wNAF(t,r){!r&&this.equals(Z.BASE)&&(r=re.BASE);let n=r&&r._WINDOW_SIZE||1;if(256%n)throw new Error("Point#wNAF: Invalid precomputation window, must be power of 2");let i=r&&va.get(r);i||(i=this.precomputeWindow(n),r&&n!==1&&(i=Z.normalizeZ(i),va.set(r,i)));let a=Z.ZERO,s=Z.ZERO,o=256/n+1,u=2**(n-1),c=BigInt(2**n-1),f=2**n,l=BigInt(n);for(let h=0;h<o;h++){let d=h*u,p=Number(t&c);if(t>>=l,p>u&&(p-=f,t+=1n),p===0)s=s.add(h%2?i[d].negate():i[d]);else{let g=i[d+Math.abs(p)-1];a=a.add(p<0?g.negate():g)}}return[a,s]}multiply(t,r){if(!yu(t))throw new TypeError("Point#multiply: expected number or bigint");let n=E(BigInt(t),ie.n);return Z.normalizeZ(this.wNAF(n,r))[0]}toAffine(t=ba(this.z)){let r=E(this.x*t),n=E(this.y*t);return new re(r,n)}};ne.ExtendedPoint=Z;Z.BASE=new Z(ie.Gx,ie.Gy,1n,E(ie.Gx*ie.Gy));Z.ZERO=new Z(0n,1n,1n,0n);var va=new WeakMap,re=class{constructor(t,r){this.x=t,this.y=r}_setWindowSize(t){this._WINDOW_SIZE=t,va.delete(this)}static fromHex(t){let{d:r,P:n}=ie,i=t instanceof Uint8Array?t:Yr(t);if(i.length!==32)throw new Error("Point.fromHex: expected 32 bytes");let a=i[31],s=a&~128,o=(a&128)!=0,u=Uint8Array.from(Array.from(i.slice(0,31)).concat(s)),c=dr(u);if(c>=n)throw new Error("Point.fromHex expects hex <= Fp");let f=E(c*c),l=E(f-1n),h=E(r*f+1n),{isValid:d,value:p}=wa(l,h);if(!d)throw new Error("Point.fromHex: invalid y coordinate");let g=(p&1n)===1n;return o!==g&&(p=E(-p)),new re(p,c)}static async fromPrivateKey(t){let r=await ne.utils.sha512(xu(t));return re.BASE.multiply(vu(r))}toRawBytes(){let t=xa(this.y),r=new Uint8Array(Be);for(let i=t.length-2,a=0;a<Be&&i>=0;i-=2,a++)r[a]=Number.parseInt(t[i]+t[i+1],16);let n=this.x&1n?128:0;return r[Be-1]|=n,r}toHex(){return pu(this.toRawBytes())}toX25519(){return E((1n+this.y)*ba(1n-this.y))}equals(t){return this.x===t.x&&this.y===t.y}negate(){return new re(E(-this.x),this.y)}add(t){return Z.fromAffine(this).add(Z.fromAffine(t)).toAffine()}subtract(t){return this.add(t.negate())}multiply(t){return Z.fromAffine(this).multiply(t,this).toAffine()}};ne.Point=re;re.BASE=new re(ie.Gx,ie.Gy);re.ZERO=new re(0n,1n);var Pt=class{constructor(t,r){this.r=t,this.s=r}static fromHex(t){t=Ea(t);let r=re.fromHex(t.slice(0,32)),n=dr(t.slice(32));if(!Td(n))throw new Error("Signature.fromHex expects s <= CURVE.n");return new Pt(r,n)}toRawBytes(){let t=Yr(xa(this.s)).reverse(),r=new Uint8Array(Be);r.set(t);let n=new Uint8Array(Be*2);return n.set(this.r.toRawBytes()),n.set(r,32),n}toHex(){return pu(this.toRawBytes())}};ne.Signature=Pt;ne.SignResult=Pt;function Ed(...e){if(e.length===1)return e[0];let t=e.reduce((n,i)=>n+i.length,0),r=new Uint8Array(t);for(let n=0,i=0;n<e.length;n++){let a=e[n];r.set(a,i),i+=a.length}return r}function pu(e){let t="";for(let r=0;r<e.length;r++)t+=e[r].toString(16).padStart(2,"0");return t}function Yr(e){if(typeof e!="string")throw new TypeError("hexToBytes: expected string, got "+typeof e);if(e.length%2)throw new Error("hexToBytes: received invalid unpadded hex");let t=new Uint8Array(e.length/2);for(let r=0;r<t.length;r++){let n=r*2;t[r]=Number.parseInt(e.slice(n,n+2),16)}return t}function xa(e){let t=e.toString(16);return t.length&1?`0${t}`:t}function du(e,t=Be){let r=xa(e).padStart(t*2,"0");return Yr(r).reverse()}function Rt(e){return(E(e)&1n)===1n}function yu(e){return!!(typeof e=="bigint"&&e>0n||typeof e=="number"&&e>0&&Number.isSafeInteger(e))}function dr(e){let t=0n;for(let r=0;r<e.length;r++)t+=BigInt(e[r])<<8n*BigInt(r);return t}function ma(e){return E(dr(e)&2n**255n-1n)}function E(e,t=ie.P){let r=e%t;return r>=0n?r:t+r}function ba(e,t=ie.P){if(e===0n||t<=0n)throw new Error(`invert: expected positive integers, got n=${e} mod=${t}`);let r=E(e,t),n=t,[i,a,s,o]=[0n,1n,1n,0n];for(;r!==0n;){let c=n/r,f=n%r,l=i-s*c,h=a-o*c;[n,r]=[r,f],[i,a]=[s,o],[s,o]=[l,h]}if(n!==1n)throw new Error("invert: does not exist");return E(i,t)}function Bd(e,t=ie.P){let r=e.length,n=new Array(r),i=1n;for(let a=0;a<r;a++)e[a]!==0n&&(n[a]=i,i=E(i*e[a],t));i=ba(i,t);for(let a=r-1;a>=0;a--){if(e[a]===0n)continue;let s=E(i*e[a],t);e[a]=E(i*n[a],t),i=s}return e}function it(e,t){let{P:r}=ie,n=e;for(;t-- >0n;)n*=n,n%=r;return n}function Cd(e){let{P:t}=ie,n=e*e%t*e%t,i=it(n,2n)*n%t,a=it(i,1n)*e%t,s=it(a,5n)*a%t,o=it(s,10n)*s%t,u=it(o,20n)*o%t,c=it(u,40n)*u%t,f=it(c,80n)*c%t,l=it(f,80n)*c%t,h=it(l,10n)*s%t;return it(h,2n)*e%t}function wa(e,t){let r=E(t*t*t),n=E(r*r*t),i=E(e*r*Cd(e*n)),a=E(t*i*i),s=i,o=E(i*Qr),u=a===e,c=a===E(-e),f=a===E(-e*Qr);return u&&(i=s),(c||f)&&(i=o),Rt(i)&&(i=E(-i)),{isValid:u||c,value:i}}function gu(e){return wa(1n,e)}async function Sa(...e){let t=Ed(...e),r=await ne.utils.sha512(t),n=dr(r);return E(n,ie.n)}function Ad(e){return e.slice(Be)}function vu(e){let t=Be-1,r=e.slice(0,Be);return r[0]&=248,r[t]&=127,r[t]|=64,E(dr(r),ie.n)}function _d(e,t){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}function Ea(e){return e instanceof Uint8Array?e:Yr(e)}function Td(e){return 0<e&&e<ie.n}function xu(e){let t;if(typeof e=="bigint"||typeof e=="number"&&Number.isSafeInteger(e)){if(t=BigInt(e),t<0n||t>2n**256n)throw new Error("Expected 32 bytes of private key");e=t.toString(16).padStart(Be*2,"0")}if(typeof e=="string"){if(e.length!==64)throw new Error("Expected 32 bytes of private key");return Yr(e)}else if(e instanceof Uint8Array){if(e.length!==32)throw new Error("Expected 32 bytes of private key");return e}else throw new TypeError("Expected valid private key")}async function Id(e){let t=await re.fromPrivateKey(e);return typeof e=="string"?t.toHex():t.toRawBytes()}ne.getPublicKey=Id;async function Pd(e,t){let r=await ne.utils.sha512(xu(t)),n=vu(r),i=re.BASE.multiply(n),a=Ea(e),s=await Sa(Ad(r),a),o=re.BASE.multiply(s),u=await Sa(o.toRawBytes(),i.toRawBytes(),a),c=E(s+u*n,ie.n),f=new Pt(o,c);return typeof e=="string"?f.toHex():f.toRawBytes()}ne.sign=Pd;async function Rd(e,t,r){t=Ea(t),r instanceof re||(r=re.fromHex(r)),e instanceof Pt||(e=Pt.fromHex(e));let n=await Sa(e.r.toRawBytes(),r.toRawBytes(),t),i=Z.fromAffine(r).multiplyUnsafe(n),a=Z.BASE.multiply(e.s);return Z.fromAffine(e.r).add(i).subtract(a).multiplyUnsafe(8n).equals(Z.ZERO)}ne.verify=Rd;re.BASE._setWindowSize(8);var Dt=(()=>{let e=typeof self=="object"&&"crypto"in self?self.crypto:void 0;return{node:typeof mu!="undefined"&&typeof hn=="function"&&!e?ur():void 0,web:e}})();ne.utils={TORSION_SUBGROUP:["0100000000000000000000000000000000000000000000000000000000000000","c7176a703d4dd84fba3c0b760d10670f2a2053fa2c39ccc64ec7fd7792ac037a","0000000000000000000000000000000000000000000000000000000000000080","26e8958fc2b227b045c3f489f2ef98f0d5dfac05d3c63339b13802886d53fc05","ecffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff7f","26e8958fc2b227b045c3f489f2ef98f0d5dfac05d3c63339b13802886d53fc85","0000000000000000000000000000000000000000000000000000000000000000","c7176a703d4dd84fba3c0b760d10670f2a2053fa2c39ccc64ec7fd7792ac03fa"],randomBytes:(e=32)=>{if(Dt.web)return Dt.web.getRandomValues(new Uint8Array(e));if(Dt.node){let{randomBytes:t}=Dt.node;return new Uint8Array(t(e).buffer)}else throw new Error("The environment doesn't have randomBytes function")},randomPrivateKey:()=>{let e=1024;for(;e--;){let t=ne.utils.randomBytes(32),r=dr(t);if(r>1n&&r<ie.n)return t}throw new Error("Valid private key was not found in 1024 iterations. PRNG is broken")},sha512:async e=>{if(Dt.web){let t=await Dt.web.subtle.digest("SHA-512",e.buffer);return new Uint8Array(t)}else{if(Dt.node)return Uint8Array.from(Dt.node.createHash("sha512").update(e).digest());throw new Error("The environment doesn't have sha512 function")}},precompute(e=8,t=re.BASE){let r=t.equals(re.BASE)?t:new re(t.x,t.y);return r._setWindowSize(e),r.multiply(1n),r}}});var Su=A(kt=>{"use strict";var Zr=bu(),Dd=32,kd=64,Jn=32;kt.publicKeyLength=Dd;kt.privateKeyLength=kd;kt.generateKey=async function(){let e=Zr.utils.randomPrivateKey(),t=await Zr.getPublicKey(e);return{privateKey:wu(e,t),publicKey:t}};kt.generateKeyFromSeed=async function(e){if(e.length!==Jn)throw new TypeError('"seed" must be 32 bytes in length.');if(!(e instanceof Uint8Array))throw new TypeError('"seed" must be a node.js Buffer, or Uint8Array.');let t=e,r=await Zr.getPublicKey(t);return{privateKey:wu(t,r),publicKey:r}};kt.hashAndSign=function(e,t){let r=e.slice(0,Jn);return Zr.sign(t,r)};kt.hashAndVerify=function(e,t,r){return Zr.verify(t,r,e)};function wu(e,t){let r=new Uint8Array(kt.privateKeyLength);for(let n=0;n<Jn;n++)r[n]=e[n],r[Jn+n]=t[n];return r}});var _u=A((Z2,Au)=>{"use strict";var Eu=tt(),{equals:Bu}=(pr(),hr),{sha256:Cu}=(lr(),$t),{base58btc:Kd}=(Ot(),Ut),{identity:Nd}=(Gn(),Mr),xe=Su(),ei=Cn(),Ld=Qn(),ti=class{constructor(t){this._key=gr(t,xe.publicKeyLength)}async verify(t,r){return xe.hashAndVerify(this._key,r,t)}marshal(){return this._key}get bytes(){return ei.PublicKey.encode({Type:ei.KeyType.Ed25519,Data:this.marshal()}).finish()}equals(t){return Bu(this.bytes,t.bytes)}async hash(){let{bytes:t}=await Cu.digest(this.bytes);return t}},yr=class{constructor(t,r){this._key=gr(t,xe.privateKeyLength),this._publicKey=gr(r,xe.publicKeyLength)}async sign(t){return xe.hashAndSign(this._key,t)}get public(){return new ti(this._publicKey)}marshal(){return this._key}get bytes(){return ei.PrivateKey.encode({Type:ei.KeyType.Ed25519,Data:this.marshal()}).finish()}equals(t){return Bu(this.bytes,t.bytes)}async hash(){let{bytes:t}=await Cu.digest(this.bytes);return t}async id(){let t=await Nd.digest(this.public.bytes);return Kd.encode(t.bytes).substring(1)}async export(t,r="libp2p-key"){if(r==="libp2p-key")return Ld.export(this.bytes,t);throw Eu(new Error(`export format '${r}' is not supported`),"ERR_INVALID_EXPORT_FORMAT")}};function qd(e){if(e.length>xe.privateKeyLength){e=gr(e,xe.privateKeyLength+xe.publicKeyLength);let n=e.slice(0,xe.privateKeyLength),i=e.slice(xe.privateKeyLength,e.length);return new yr(n,i)}e=gr(e,xe.privateKeyLength);let t=e.slice(0,xe.privateKeyLength),r=e.slice(xe.publicKeyLength);return new yr(t,r)}function Ud(e){return e=gr(e,xe.publicKeyLength),new ti(e)}async function Od(){let{privateKey:e,publicKey:t}=await xe.generateKey();return new yr(e,t)}async function Fd(e){let{privateKey:t,publicKey:r}=await xe.generateKeyFromSeed(e);return new yr(t,r)}function gr(e,t){if(e=Uint8Array.from(e||[]),e.length!==t)throw Eu(new Error(`Key must be a Uint8Array of length ${t}, got ${e.length}`),"ERR_INVALID_KEY_TYPE");return e}Au.exports={Ed25519PublicKey:ti,Ed25519PrivateKey:yr,unmarshalEd25519PrivateKey:qd,unmarshalEd25519PublicKey:Ud,generateKeyPair:Od,generateKeyPairFromSeed:Fd}});var Vu=A((G,Mu)=>{"use strict";Object.defineProperty(G,"__esModule",{value:!0});G.utils=G.schnorr=G.verify=G.signSync=G.sign=G.getSharedSecret=G.recoverPublicKey=G.getPublicKey=G.SignResult=G.Signature=G.Point=G.CURVE=void 0;var j={a:0n,b:7n,P:2n**256n-2n**32n-977n,n:2n**256n-432420386565659656852420866394968145599n,h:1n,Gx:55066263022277343669578718895168534326250603453777594175500187360389116729240n,Gy:32670510020758816978083085130507043184471273380659243275938904335757337482424n,beta:0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501een};G.CURVE=j;function Tu(e){let{a:t,b:r}=j;return R(e**3n+t*e+r)}var ri=j.a===0n,H=class{constructor(t,r,n){this.x=t,this.y=r,this.z=n}static fromAffine(t){if(!(t instanceof $))throw new TypeError("JacobianPoint#fromAffine: expected Point");return new H(t.x,t.y,1n)}static toAffineBatch(t){let r=Vd(t.map(n=>n.z));return t.map((n,i)=>n.toAffine(r[i]))}static normalizeZ(t){return H.toAffineBatch(t).map(H.fromAffine)}equals(t){let r=this,n=t,i=R(r.z*r.z),a=R(r.z*i),s=R(n.z*n.z),o=R(n.z*s);return R(r.x*s)===R(i*n.x)&&R(r.y*o)===R(a*n.y)}negate(){return new H(this.x,R(-this.y),this.z)}double(){let t=this.x,r=this.y,n=this.z,i=R(t**2n),a=R(r**2n),s=R(a**2n),o=R(2n*(R(R((t+a)**2n))-i-s)),u=R(3n*i),c=R(u**2n),f=R(c-2n*o),l=R(u*(o-f)-8n*s),h=R(2n*r*n);return new H(f,l,h)}add(t){if(!(t instanceof H))throw new TypeError("JacobianPoint#add: expected JacobianPoint");let r=this.x,n=this.y,i=this.z,a=t.x,s=t.y,o=t.z;if(a===0n||s===0n)return this;if(r===0n||n===0n)return t;let u=R(i**2n),c=R(o**2n),f=R(r*c),l=R(a*u),h=R(n*o*c),d=R(R(s*i)*u),p=R(l-f),g=R(d-h);if(p===0n)return g===0n?this.double():H.ZERO;let v=R(p**2n),m=R(p*v),S=R(f*v),C=R(g**2n-m-2n*S),k=R(g*(S-C)-h*m),I=R(i*o*p);return new H(C,k,I)}subtract(t){return this.add(t.negate())}multiplyUnsafe(t){if(!Ru(t))throw new TypeError("Point#multiply: expected valid scalar");let r=R(BigInt(t),j.n);if(!ri){let f=H.ZERO,l=this;for(;r>0n;)r&1n&&(f=f.add(l)),l=l.double(),r>>=1n;return f}let[n,i,a,s]=ku(r),o=H.ZERO,u=H.ZERO,c=this;for(;i>0n||s>0n;)i&1n&&(o=o.add(c)),s&1n&&(u=u.add(c)),c=c.double(),i>>=1n,s>>=1n;return n&&(o=o.negate()),a&&(u=u.negate()),u=new H(R(u.x*j.beta),u.y,u.z),o.add(u)}precomputeWindow(t){let r=ri?128/t+1:256/t+1,n=[],i=this,a=i;for(let s=0;s<r;s++){a=i,n.push(a);for(let o=1;o<2**(t-1);o++)a=a.add(i),n.push(a);i=a.double()}return n}wNAF(t,r){!r&&this.equals(H.BASE)&&(r=$.BASE);let n=r&&r._WINDOW_SIZE||1;if(256%n)throw new Error("Point#wNAF: Invalid precomputation window, must be power of 2");let i=r&&Ba.get(r);i||(i=this.precomputeWindow(n),r&&n!==1&&(i=H.normalizeZ(i),Ba.set(r,i)));let a=H.ZERO,s=H.ZERO,o=ri?128/n+1:256/n+1,u=2**(n-1),c=BigInt(2**n-1),f=2**n,l=BigInt(n);for(let h=0;h<o;h++){let d=h*u,p=Number(t&c);if(t>>=l,p>u&&(p-=f,t+=1n),p===0)s=s.add(h%2?i[d].negate():i[d]);else{let g=i[d+Math.abs(p)-1];a=a.add(p<0?g.negate():g)}}return[a,s]}multiply(t,r){if(!Ru(t))throw new TypeError("Point#multiply: expected valid scalar");let n=R(BigInt(t),j.n),i,a;if(ri){let[s,o,u,c]=ku(n),f,l,h,d;[f,h]=this.wNAF(o,r),[l,d]=this.wNAF(c,r),s&&(f=f.negate()),u&&(l=l.negate()),l=new H(R(l.x*j.beta),l.y,l.z),[i,a]=[f.add(l),h.add(d)]}else[i,a]=this.wNAF(n,r);return H.normalizeZ([i,a])[0]}toAffine(t=en(this.z)){let r=t**2n,n=R(this.x*r),i=R(this.y*r*t);return new $(n,i)}};H.BASE=new H(j.Gx,j.Gy,1n);H.ZERO=new H(0n,1n,0n);var Ba=new WeakMap,$=class{constructor(t,r){this.x=t,this.y=r}_setWindowSize(t){this._WINDOW_SIZE=t,Ba.delete(this)}static fromCompressedHex(t){let r=t.length===32,n=qe(r?t:t.slice(1)),i=Tu(n),a=Md(i),s=(a&1n)===1n;r?s&&(a=R(-a)):(t[0]&1)==1!==s&&(a=R(-a));let o=new $(n,a);return o.assertValidity(),o}static fromUncompressedHex(t){let r=qe(t.slice(1,33)),n=qe(t.slice(33)),i=new $(r,n);return i.assertValidity(),i}static fromHex(t){let r=ai(t),n=r[0];if(r.length===32||r.length===33&&(n===2||n===3))return this.fromCompressedHex(r);if(r.length===65&&n===4)return this.fromUncompressedHex(r);throw new Error(`Point.fromHex: received invalid point. Expected 32-33 compressed bytes or 65 uncompressed bytes, not ${r.length}`)}static fromPrivateKey(t){return $.BASE.multiply(vr(t))}static fromSignature(t,r,n){let i=t instanceof Uint8Array?qe(t):yt(t),a=Lu(r),{r:s,s:o}=a;if(n!==0&&n!==1)throw new Error("Cannot recover signature: invalid yParity bit");let u=2+(n&1),c=$.fromHex(`0${u}${Kt(s)}`),f=H.fromAffine(c).multiplyUnsafe(o),l=H.BASE.multiply(i),h=en(s,j.n),p=f.subtract(l).multiplyUnsafe(h).toAffine();return p.assertValidity(),p}toRawBytes(t=!1){return Nt(this.toHex(t))}toHex(t=!1){let r=Kt(this.x);return t?`${this.y&1n?"03":"02"}${r}`:`04${r}${Kt(this.y)}`}toHexX(){return this.toHex(!0).slice(2)}toRawX(){return this.toRawBytes(!0).slice(1)}assertValidity(){let t="Point is not on elliptic curve",{P:r}=j,{x:n,y:i}=this;if(n===0n||i===0n||n>=r||i>=r)throw new Error(t);let a=R(i*i),s=Tu(n);if((a-s)%r!==0n)throw new Error(t)}equals(t){return this.x===t.x&&this.y===t.y}negate(){return new $(this.x,R(-this.y))}double(){return H.fromAffine(this).double().toAffine()}add(t){return H.fromAffine(this).add(H.fromAffine(t)).toAffine()}subtract(t){return this.add(t.negate())}multiply(t){return H.fromAffine(this).multiply(t,this).toAffine()}};G.Point=$;$.BASE=new $(j.Gx,j.Gy);$.ZERO=new $(0n,0n);function Iu(e){return Number.parseInt(e[0],16)>=8?"00"+e:e}var dt=class{constructor(t,r){this.r=t,this.s=r}static fromCompact(t){if(typeof t!="string"&&!(t instanceof Uint8Array))throw new TypeError("Signature.fromCompact: Expected string or Uint8Array");let r=t instanceof Uint8Array?ni(t):t;if(r.length!==128)throw new Error("Signature.fromCompact: Expected 64-byte hex");let n=new dt(yt(r.slice(0,64)),yt(r.slice(64,128)));return n.assertValidity(),n}static fromDER(t){let r="Signature.fromDER";if(typeof t!="string"&&!(t instanceof Uint8Array))throw new TypeError(`${r}: Expected string or Uint8Array`);let n=t instanceof Uint8Array?ni(t):t,i=Jr(n.slice(2,4));if(n.slice(0,2)!=="30"||i!==n.length-4||n.slice(4,6)!=="02")throw new Error(`${r}: Invalid signature ${n}`);let a=Jr(n.slice(6,8)),s=8+a,o=n.slice(8,s);if(o.startsWith("00")&&Jr(o.slice(2,4))<=127)throw new Error(`${r}: Invalid r with trailing length`);let u=yt(o);if(n.slice(s,s+2)!=="02")throw new Error(`${r}: Invalid r-s separator`);let f=Jr(n.slice(s+2,s+4)),l=i-f-a-10;if(l>0||l===-4)throw new Error(`${r}: Invalid total length`);if(f>i-a-4)throw new Error(`${r}: Invalid s`);let h=s+4,d=n.slice(h,h+f);if(d.startsWith("00")&&Jr(d.slice(2,4))<=127)throw new Error(`${r}: Invalid s with trailing length`);let p=yt(d),g=new dt(u,p);return g.assertValidity(),g}static fromHex(t){return this.fromDER(t)}assertValidity(){let{r:t,s:r}=this;if(!tn(t))throw new Error("Invalid Signature: r must be 0 < r < n");if(!tn(r))throw new Error("Invalid Signature: s must be 0 < s < n")}toDERRawBytes(t=!1){return Nt(this.toDERHex(t))}toDERHex(t=!1){let r=Iu(Xr(this.s));if(t)return r;let n=Iu(Xr(this.r)),i=Xr(n.length/2),a=Xr(r.length/2);return`30${Xr(n.length/2+r.length/2+4)}02${i}${n}02${a}${r}`}toRawBytes(){return this.toDERRawBytes()}toHex(){return this.toDERHex()}toCompactRawBytes(){return Nt(this.toCompactHex())}toCompactHex(){return Kt(this.r)+Kt(this.s)}};G.Signature=dt;G.SignResult=dt;function Pu(...e){if(e.length===1)return e[0];let t=e.reduce((n,i)=>n+i.length,0),r=new Uint8Array(t);for(let n=0,i=0;n<e.length;n++){let a=e[n];r.set(a,i),i+=a.length}return r}function ni(e){let t="";for(let r=0;r<e.length;r++)t+=e[r].toString(16).padStart(2,"0");return t}function Kt(e){return e.toString(16).padStart(64,"0")}function ii(e){return Nt(Kt(e))}function Xr(e){let t=e.toString(16);return t.length&1?`0${t}`:t}function yt(e){if(typeof e!="string")throw new TypeError("hexToNumber: expected string, got "+typeof e);return BigInt(`0x${e}`)}function Nt(e){if(typeof e!="string")throw new TypeError("hexToBytes: expected string, got "+typeof e);if(e.length%2)throw new Error("hexToBytes: received invalid unpadded hex");let t=new Uint8Array(e.length/2);for(let r=0;r<t.length;r++){let n=r*2;t[r]=Number.parseInt(e.slice(n,n+2),16)}return t}function ai(e){return e instanceof Uint8Array?e:Nt(e)}function qe(e){return yt(ni(e))}function Jr(e){return Number.parseInt(e,16)*2}function Ru(e){return!!(typeof e=="bigint"&&e>0n||typeof e=="number"&&e>0&&Number.isSafeInteger(e))}function R(e,t=j.P){let r=e%t;return r>=0?r:t+r}function Ue(e,t){let{P:r}=j,n=e;for(;t-- >0n;)n*=n,n%=r;return n}function Md(e){let{P:t}=j,r=e*e*e%t,n=r*r*e%t,i=Ue(n,3n)*n%t,a=Ue(i,3n)*n%t,s=Ue(a,2n)*r%t,o=Ue(s,11n)*s%t,u=Ue(o,22n)*o%t,c=Ue(u,44n)*u%t,f=Ue(c,88n)*c%t,l=Ue(f,44n)*u%t,h=Ue(l,3n)*n%t,d=Ue(h,23n)*o%t,p=Ue(d,6n)*r%t;return Ue(p,2n)}function en(e,t=j.P){if(e===0n||t<=0n)throw new Error(`invert: expected positive integers, got n=${e} mod=${t}`);let r=R(e,t),n=t,[i,a,s,o]=[0n,1n,1n,0n];for(;r!==0n;){let c=n/r,f=n%r,l=i-s*c,h=a-o*c;[n,r]=[r,f],[i,a]=[s,o],[s,o]=[l,h]}if(n!==1n)throw new Error("invert: does not exist");return R(i,t)}function Vd(e,t=j.P){let r=e.length,n=new Array(r),i=1n;for(let a=0;a<r;a++)e[a]!==0n&&(n[a]=i,i=R(i*e[a],t));i=en(i,t);for(let a=r-1;a>=0;a--){if(e[a]===0n)continue;let s=R(i*e[a],t);e[a]=R(i*n[a],t),i=s}return e}var Du=(e,t)=>(e+t/2n)/t,si=2n**128n;function ku(e){let{n:t}=j,r=0x3086d221a7d46bcde86c90e49284eb15n,n=-0xe4437ed6010e88286f547fa90abfe4c3n,i=0x114ca50f7a8e2f3f657c1108d9d44cfd8n,a=r,s=Du(a*e,t),o=Du(-n*e,t),u=R(e-s*r-o*i,t),c=R(-s*n-o*a,t),f=u>si,l=c>si;if(f&&(u=t-u),l&&(c=t-c),u>si||c>si)throw new Error("splitScalarEndo: Endomorphism failed");return[f,u,l,c]}function zd(e){typeof e!="string"&&(e=ni(e));let t=yt(e||"0"),n=e.length/2*8-256;return n>0&&(t=t>>BigInt(n)),t>=j.n&&(t-=j.n),t}function Ku(e,t){if(e==null)throw new Error(`sign: expected valid msgHash, not "${e}"`);let r=typeof e=="string"?yt(e):qe(e),n=ii(r),i=qe(n),a=ii(t),s=new Uint8Array(32).fill(1),o=new Uint8Array(32).fill(0),u=Uint8Array.from([0]),c=Uint8Array.from([1]);return[n,i,a,s,o,u,c]}async function Hd(e,t){let r=vr(t),[n,i,a,s,o,u,c]=Ku(e,r),f=G.utils.hmacSha256;o=await f(o,s,u,a,n),s=await f(o,s),o=await f(o,s,c,a,n),s=await f(o,s);for(let l=0;l<1e3;l++){s=await f(o,s);let h=Nu(s,i,r);if(h)return h;o=await f(o,s,u),s=await f(o,s)}throw new TypeError("secp256k1: Tried 1,000 k values for sign(), all were invalid")}function Gd(e,t){let r=vr(t),[n,i,a,s,o,u,c]=Ku(e,r),f=G.utils.hmacSha256Sync;if(!f)throw new Error("utils.hmacSha256Sync is undefined, you need to set it");if(o=f(o,s,u,a,n),o instanceof Promise)throw new Error("To use sync sign(), ensure utils.hmacSha256 is sync");s=f(o,s),o=f(o,s,c,a,n),s=f(o,s);for(let l=0;l<1e3;l++){s=f(o,s);let h=Nu(s,i,r);if(h)return h;o=f(o,s,u),s=f(o,s)}throw new TypeError("secp256k1: Tried 1,000 k values for sign(), all were invalid")}function tn(e){return 0<e&&e<j.n}function Nu(e,t,r){let n=qe(e);if(!tn(n))return;let i=j.n,a=$.BASE.multiply(n),s=R(a.x,i),o=R(en(n,i)*(t+s*r),i);if(!(s===0n||o===0n))return[a,s,o]}function vr(e){let t;if(typeof e=="bigint")t=e;else if(typeof e=="number"&&Number.isSafeInteger(e)&&e>0)t=BigInt(e);else if(typeof e=="string"){if(e.length!==64)throw new Error("Expected 32 bytes of private key");t=yt(e)}else if(e instanceof Uint8Array){if(e.length!==32)throw new Error("Expected 32 bytes of private key");t=qe(e)}else throw new TypeError("Expected valid private key");if(!tn(t))throw new Error("Expected private key: 0 < key < n");return t}function Ca(e){return e instanceof $?(e.assertValidity(),e):$.fromHex(e)}function Lu(e){return e instanceof dt?(e.assertValidity(),e):dt.fromDER(e)}function Wd(e,t=!1){let r=$.fromPrivateKey(e);return typeof e=="string"?r.toHex(t):r.toRawBytes(t)}G.getPublicKey=Wd;function jd(e,t,r){let n=$.fromSignature(e,t,r);return typeof e=="string"?n.toHex():n.toRawBytes()}G.recoverPublicKey=jd;function qu(e){let t=e instanceof Uint8Array,r=typeof e=="string",n=(t||r)&&e.length;return t?n===33||n===65:r?n===66||n===130:e instanceof $}function $d(e,t,r=!1){if(qu(e))throw new TypeError("getSharedSecret: first arg must be private key");if(!qu(t))throw new TypeError("getSharedSecret: second arg must be public key");let n=Ca(t);n.assertValidity();let i=n.multiply(vr(e));return typeof e=="string"?i.toHex(r):i.toRawBytes(r)}G.getSharedSecret=$d;function Uu(e,t,r=!1){let[n,i,a]=e,{canonical:s,der:o,recovered:u}=t,c=(n.x===i?0:2)|Number(n.y&1n),f=a,l=j.n>>1n;a>l&&s&&(f=j.n-a,c^=1);let h=new dt(i,f);h.assertValidity();let d=o===!1?h.toCompactHex():h.toDERHex(),p=r?d:Nt(d);return u?[p,c]:p}async function Qd(e,t,r={}){return Uu(await Hd(e,t),r,typeof e=="string")}G.sign=Qd;function Yd(e,t,r={}){return Uu(Gd(e,t),r,typeof e=="string")}G.signSync=Yd;function Zd(e,t,r){let{n}=j,i;try{i=Lu(e)}catch(v){return!1}let{r:a,s}=i,o=zd(t);if(o===0n)return!1;let u=H.fromAffine(Ca(r)),c=en(s,n),f=R(o*c,n),l=R(a*c,n),h=H.BASE.multiply(f),d=u.multiplyUnsafe(l),p=h.add(d).toAffine();return R(p.x,n)===a}G.verify=Zd;async function Aa(e,...t){let r=new Uint8Array(e.split("").map(a=>a.charCodeAt(0))),n=await G.utils.sha256(r),i=await G.utils.sha256(Pu(n,n,...t));return qe(i)}async function Ou(e,t,r){let n=ii(e),i=await Aa("BIP0340/challenge",n,t.toRawX(),r);return R(i,j.n)}function _a(e){return R(e.y,2n)===0n}var Yt=class{constructor(t,r){if(this.r=t,this.s=r,t<=0n||r<=0n||t>=j.P||r>=j.n)throw new Error("Invalid signature")}static fromHex(t){let r=ai(t);if(r.length!==64)throw new TypeError(`SchnorrSignature.fromHex: expected 64 bytes, not ${r.length}`);let n=qe(r.slice(0,32)),i=qe(r.slice(32));return new Yt(n,i)}toHex(){return Kt(this.r)+Kt(this.s)}toRawBytes(){return Nt(this.toHex())}};function Xd(e){let t=$.fromPrivateKey(e);return typeof e=="string"?t.toHexX():t.toRawX()}async function Jd(e,t,r=G.utils.randomBytes()){if(e==null)throw new TypeError(`sign: Expected valid message, not "${e}"`);t||(t=0n);let{n}=j,i=ai(e),a=vr(t),s=ai(r);if(s.length!==32)throw new TypeError("sign: Expected 32 bytes of aux randomness");let o=$.fromPrivateKey(a),u=_a(o)?a:n-a,c=await Aa("BIP0340/aux",s),f=u^c,l=await Aa("BIP0340/nonce",ii(f),o.toRawX(),i),h=R(l,n);if(h===0n)throw new Error("sign: Creation of signature failed. k is zero");let d=$.fromPrivateKey(h),p=_a(d)?h:n-h,g=await Ou(d.x,o,i),v=new Yt(d.x,R(p+g*u,n));if(!await Fu(v.toRawBytes(),i,o.toRawX()))throw new Error("sign: Invalid signature produced");return typeof e=="string"?v.toHex():v.toRawBytes()}async function Fu(e,t,r){let n=e instanceof Yt?e:Yt.fromHex(e),i=typeof t=="string"?Nt(t):t,a=Ca(r),s=await Ou(n.r,a,i),o=$.fromPrivateKey(n.s),u=a.multiply(s),c=o.subtract(u);return!(c.equals($.BASE)||!_a(c)||c.x!==n.r)}G.schnorr={Signature:Yt,getPublicKey:Xd,sign:Jd,verify:Fu};$.BASE._setWindowSize(8);var Pe=(()=>{let e=typeof self=="object"&&"crypto"in self?self.crypto:void 0;return{node:typeof Mu!="undefined"&&typeof hn=="function"&&!e?ur():void 0,web:e}})();G.utils={isValidPrivateKey(e){try{return vr(e),!0}catch(t){return!1}},randomBytes:(e=32)=>{if(Pe.web)return Pe.web.getRandomValues(new Uint8Array(e));if(Pe.node){let{randomBytes:t}=Pe.node;return new Uint8Array(t(e).buffer)}else throw new Error("The environment doesn't have randomBytes function")},randomPrivateKey:()=>{let e=8;for(;e--;){let t=G.utils.randomBytes(32),r=qe(t);if(tn(r)&&r!==1n)return t}throw new Error("Valid private key was not found in 8 iterations. PRNG is broken")},sha256:async e=>{if(Pe.web){let t=await Pe.web.subtle.digest("SHA-256",e.buffer);return new Uint8Array(t)}else if(Pe.node){let{createHash:t}=Pe.node;return Uint8Array.from(t("sha256").update(e).digest())}else throw new Error("The environment doesn't have sha256 function")},hmacSha256:async(e,...t)=>{if(Pe.web){let r=await Pe.web.subtle.importKey("raw",e,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]),n=Pu(...t),i=await Pe.web.subtle.sign("HMAC",r,n);return new Uint8Array(i)}else if(Pe.node){let{createHmac:r}=Pe.node,n=r("sha256",e);for(let i of t)n.update(i);return Uint8Array.from(n.digest())}else throw new Error("The environment doesn't have hmac-sha256 function")},sha256Sync:void 0,hmacSha256Sync:void 0,precompute(e=8,t=$.BASE){let r=t===$.BASE?t:new $(t.x,t.y);return r._setWindowSize(e),r.multiply(3n),r}}});var Gu=A((X2,Hu)=>{"use strict";var rn=tt(),Lt=Vu(),{sha256:zu}=(lr(),$t);Hu.exports=()=>{let e=32;function t(){return Lt.utils.randomPrivateKey()}async function r(c,f){let{digest:l}=await zu.digest(f);try{return await Lt.sign(l,c)}catch(h){throw rn(h,"ERR_INVALID_INPUT")}}async function n(c,f,l){try{let{digest:h}=await zu.digest(l);return Lt.verify(f,h,c)}catch(h){throw rn(h,"ERR_INVALID_INPUT")}}function i(c){return Lt.Point.fromHex(c).toRawBytes(!0)}function a(c){return Lt.Point.fromHex(c).toRawBytes(!1)}function s(c){try{Lt.getPublicKey(c,!0)}catch(f){throw rn(f,"ERR_INVALID_PRIVATE_KEY")}}function o(c){try{Lt.Point.fromHex(c)}catch(f){throw rn(f,"ERR_INVALID_PUBLIC_KEY")}}function u(c){try{return Lt.getPublicKey(c,!0)}catch(f){throw rn(f,"ERR_INVALID_PRIVATE_KEY")}}return{generateKey:t,privateKeyLength:e,hashAndSign:r,hashAndVerify:n,compressPublicKey:i,decompressPublicKey:a,validatePrivateKey:s,validatePublicKey:o,computePublicKey:u}}});var Qu=A((J2,$u)=>{"use strict";var{sha256:Wu}=(lr(),$t),ey=tt(),{equals:ju}=(pr(),hr),{toString:ty}=(Tt(),_t),ry=Qn();$u.exports=(e,t,r)=>{r=r||Gu()();class n{constructor(c){r.validatePublicKey(c),this._key=c}verify(c,f){return r.hashAndVerify(this._key,f,c)}marshal(){return r.compressPublicKey(this._key)}get bytes(){return e.PublicKey.encode({Type:e.KeyType.Secp256k1,Data:this.marshal()}).finish()}equals(c){return ju(this.bytes,c.bytes)}async hash(){let{bytes:c}=await Wu.digest(this.bytes);return c}}class i{constructor(c,f){this._key=c,this._publicKey=f||r.computePublicKey(c),r.validatePrivateKey(this._key),r.validatePublicKey(this._publicKey)}sign(c){return r.hashAndSign(this._key,c)}get public(){return new n(this._publicKey)}marshal(){return this._key}get bytes(){return e.PrivateKey.encode({Type:e.KeyType.Secp256k1,Data:this.marshal()}).finish()}equals(c){return ju(this.bytes,c.bytes)}async hash(){let{bytes:c}=await Wu.digest(this.bytes);return c}async id(){let c=await this.public.hash();return ty(c,"base58btc")}async export(c,f="libp2p-key"){if(f==="libp2p-key")return ry.export(this.bytes,c);throw ey(new Error(`export format '${f}' is not supported`),"ERR_INVALID_EXPORT_FORMAT")}}function a(u){return new i(u)}function s(u){return new n(u)}async function o(){let u=await r.generateKey();return new i(u)}return{Secp256k1PublicKey:n,Secp256k1PrivateKey:i,unmarshalSecp256k1PrivateKey:a,unmarshalSecp256k1PublicKey:s,generateKeyPair:o}}});var Zu=A((eg,Yu)=>{"use strict";Yu.exports={SHA1:20,SHA256:32,SHA512:64}});var ec=A(Ju=>{"use strict";var Xu=Hr(),ny=Zu(),iy={SHA1:"SHA-1",SHA256:"SHA-256",SHA512:"SHA-512"},ay=async(e,t)=>{let r=await Xu.get().subtle.sign({name:"HMAC"},e,t);return new Uint8Array(r,r.byteOffset,r.byteLength)};Ju.create=async function(e,t){let r=iy[e],n=await Xu.get().subtle.importKey("raw",t,{name:"HMAC",hash:{name:r}},!1,["sign"]);return{async digest(i){return ay(n,i)},length:ny[e]}}});var ac=A((rg,ic)=>{"use strict";var tc=tt(),{concat:rc}=(zr(),Vr),{fromString:sy}=(At(),Ct),oy=ec(),nc={"AES-128":{ivSize:16,keySize:16},"AES-256":{ivSize:16,keySize:32},Blowfish:{ivSize:8,cipherKeySize:32}};ic.exports=async(e,t,r)=>{let n=nc[e];if(!n){let S=Object.keys(nc).join(" / ");throw tc(new Error(`unknown cipher type '${e}'. Must be ${S}`),"ERR_INVALID_CIPHER_TYPE")}if(!t)throw tc(new Error("missing hash type"),"ERR_MISSING_HASH_TYPE");let i=n.keySize,a=n.ivSize,s=20,o=sy("key expansion"),u=2*(a+i+s),c=await oy.create(t,r),f=await c.digest(o),l=[],h=0;for(;h<u;){let S=await c.digest(rc([f,o])),C=S.length;h+C>u&&(C=u-h),l.push(S),h+=C,f=await c.digest(f)}let d=u/2,p=rc(l),g=p.slice(0,d),v=p.slice(d,u),m=S=>({iv:S.slice(0,a),cipherKey:S.slice(a,a+i),macKey:S.slice(a+i)});return{k1:m(g),k2:m(v)}}});var oc=A((ng,sc)=>{"use strict";var uy=tt();sc.exports=function(e,t){if(!e.includes(t)){let r=e.join(" / ");throw uy(new Error(`Unknown curve: ${t}. Must be ${r}`),"ERR_INVALID_CURVE")}}});var pc=A(hc=>{"use strict";var cy=tt(),nn=Hr(),{base64urlToBuffer:uc}=$n(),fy=oc(),{toString:Ta}=(Tt(),_t),{concat:ly}=(zr(),Vr),{equals:hy}=(pr(),hr),cc={"P-256":256,"P-384":384,"P-521":521};hc.generateEphmeralKeyPair=async function(e){fy(Object.keys(cc),e);let t=await nn.get().subtle.generateKey({name:"ECDH",namedCurve:e},!0,["deriveBits"]),r=async(i,a)=>{let s;a?s=await nn.get().subtle.importKey("jwk",dy(e,a),{name:"ECDH",namedCurve:e},!1,["deriveBits"]):s=t.privateKey;let o=[await nn.get().subtle.importKey("jwk",lc(e,i),{name:"ECDH",namedCurve:e},!1,[]),s],u=await nn.get().subtle.deriveBits({name:"ECDH",namedCurve:e,public:o[0]},o[1],cc[e]);return new Uint8Array(u,u.byteOffset,u.byteLength)},n=await nn.get().subtle.exportKey("jwk",t.publicKey);return{key:py(n),genSharedKey:r}};var fc={"P-256":32,"P-384":48,"P-521":66};function py(e){let t=fc[e.crv];return ly([Uint8Array.from([4]),uc(e.x,t),uc(e.y,t)],1+t*2)}function lc(e,t){let r=fc[e];if(hy(!t.slice(0,1),Uint8Array.from([4])))throw cy(new Error("Cannot unmarshal public key - invalid key format"),"ERR_INVALID_KEY_FORMAT");return{kty:"EC",crv:e,x:Ta(t.slice(1,r+1),"base64url"),y:Ta(t.slice(1+r),"base64url"),ext:!0}}var dy=(e,t)=>({...lc(e,t.public),d:Ta(t.private,"base64url")})});var yc=A((ag,dc)=>{"use strict";var yy=pc();dc.exports=async e=>yy.generateEphmeralKeyPair(e)});var xc=A((sg,vc)=>{"use strict";var at=Cn();qr();b0();var Ia=Y(),an=tt(),{fromString:gy}=(At(),Ct),vy=F0(),Oe={rsa:hu(),ed25519:_u(),secp256k1:Qu()(at,ga())},oi={message:"secp256k1 support requires libp2p-crypto-secp256k1 package",code:"ERR_MISSING_PACKAGE"};function xr(e){let t=Oe[e.toLowerCase()];if(!t){let r=Object.keys(Oe).join(" / ");throw an(new Error(`invalid or unsupported key type ${e}. Must be ${r}`),"ERR_UNSUPPORTED_KEY_TYPE")}return t}var xy=async(e,t)=>xr(e).generateKeyPair(t),my=async(e,t,r)=>{let n=xr(e);if(e.toLowerCase()!=="ed25519")throw an(new Error("Seed key derivation is unimplemented for RSA or secp256k1"),"ERR_UNSUPPORTED_KEY_DERIVATION_TYPE");return n.generateKeyPairFromSeed(t,r)},by=e=>{let t=at.PublicKey.decode(e),r=t.Data;switch(t.Type){case at.KeyType.RSA:return Oe.rsa.unmarshalRsaPublicKey(r);case at.KeyType.Ed25519:return Oe.ed25519.unmarshalEd25519PublicKey(r);case at.KeyType.Secp256k1:if(Oe.secp256k1)return Oe.secp256k1.unmarshalSecp256k1PublicKey(r);throw an(new Error(oi.message),oi.code);default:xr(t.Type)}},wy=(e,t)=>(t=(t||"rsa").toLowerCase(),xr(t),e.bytes),gc=async e=>{let t=at.PrivateKey.decode(e),r=t.Data;switch(t.Type){case at.KeyType.RSA:return Oe.rsa.unmarshalRsaPrivateKey(r);case at.KeyType.Ed25519:return Oe.ed25519.unmarshalEd25519PrivateKey(r);case at.KeyType.Secp256k1:if(Oe.secp256k1)return Oe.secp256k1.unmarshalSecp256k1PrivateKey(r);throw an(new Error(oi.message),oi.code);default:xr(t.Type)}},Sy=(e,t)=>(t=(t||"rsa").toLowerCase(),xr(t),e.bytes),Ey=async(e,t)=>{try{let i=await vy.import(e,t);return gc(i)}catch(i){}let r=Ia.pki.decryptRsaPrivateKey(e,t);if(r===null)throw an(new Error("Cannot read the key, most likely the password is wrong or not a RSA key"),"ERR_CANNOT_DECRYPT_PEM");let n=Ia.asn1.toDer(Ia.pki.privateKeyToAsn1(r));return n=gy(n.getBytes(),"ascii"),Oe.rsa.unmarshalRsaPrivateKey(n)};vc.exports={supportedKeys:Oe,keysPBM:at,keyStretcher:ac(),generateEphemeralKeyPair:yc(),generateKeyPair:xy,generateKeyPairFromSeed:my,unmarshalPublicKey:by,marshalPublicKey:wy,unmarshalPrivateKey:gc,marshalPrivateKey:Sy,import:Ey}});var mc=A((og,Pa)=>{"use strict";function By(e,{className:t,symbolName:r}){let n=Symbol.for(r),i={[t]:class extends e{constructor(...a){super(...a);Object.defineProperty(this,n,{value:!0})}get[Symbol.toStringTag](){return t}}}[t];return i[`is${t}`]=a=>!!(a&&a[n]),i}function Cy(e,{className:t,symbolName:r,withoutNew:n}){let i=Symbol.for(r),a={[t]:function(...s){if(n&&!(this instanceof a))return new a(...s);let o=e.call(this,...s)||this;return o&&!o[i]&&Object.defineProperty(o,i,{value:!0}),o}}[t];return a.prototype=Object.create(e.prototype),a.prototype.constructor=a,Object.defineProperty(a.prototype,Symbol.toStringTag,{get(){return t}}),a[`is${t}`]=s=>!!(s&&s[i]),a}Pa.exports=By;Pa.exports.proto=Cy});var Sc=A((ug,wc)=>{"use strict";var mr=qi(),bc=mr.Reader,Ay=mr.Writer,le=mr.util,sn=mr.roots["libp2p-peer-id"]||(mr.roots["libp2p-peer-id"]={});sn.PeerIdProto=function(){function e(t){if(t)for(var r=Object.keys(t),n=0;n<r.length;++n)t[r[n]]!=null&&(this[r[n]]=t[r[n]])}return e.prototype.id=le.newBuffer([]),e.prototype.pubKey=le.newBuffer([]),e.prototype.privKey=le.newBuffer([]),e.encode=function(r,n){return n||(n=Ay.create()),n.uint32(10).bytes(r.id),r.pubKey!=null&&Object.hasOwnProperty.call(r,"pubKey")&&n.uint32(18).bytes(r.pubKey),r.privKey!=null&&Object.hasOwnProperty.call(r,"privKey")&&n.uint32(26).bytes(r.privKey),n},e.decode=function(r,n){r instanceof bc||(r=bc.create(r));for(var i=n===void 0?r.len:r.pos+n,a=new sn.PeerIdProto;r.pos<i;){var s=r.uint32();switch(s>>>3){case 1:a.id=r.bytes();break;case 2:a.pubKey=r.bytes();break;case 3:a.privKey=r.bytes();break;default:r.skipType(s&7);break}}if(!a.hasOwnProperty("id"))throw le.ProtocolError("missing required 'id'",{instance:a});return a},e.fromObject=function(r){if(r instanceof sn.PeerIdProto)return r;var n=new sn.PeerIdProto;return r.id!=null&&(typeof r.id=="string"?le.base64.decode(r.id,n.id=le.newBuffer(le.base64.length(r.id)),0):r.id.length&&(n.id=r.id)),r.pubKey!=null&&(typeof r.pubKey=="string"?le.base64.decode(r.pubKey,n.pubKey=le.newBuffer(le.base64.length(r.pubKey)),0):r.pubKey.length&&(n.pubKey=r.pubKey)),r.privKey!=null&&(typeof r.privKey=="string"?le.base64.decode(r.privKey,n.privKey=le.newBuffer(le.base64.length(r.privKey)),0):r.privKey.length&&(n.privKey=r.privKey)),n},e.toObject=function(r,n){n||(n={});var i={};return n.defaults&&(n.bytes===String?i.id="":(i.id=[],n.bytes!==Array&&(i.id=le.newBuffer(i.id))),n.bytes===String?i.pubKey="":(i.pubKey=[],n.bytes!==Array&&(i.pubKey=le.newBuffer(i.pubKey))),n.bytes===String?i.privKey="":(i.privKey=[],n.bytes!==Array&&(i.privKey=le.newBuffer(i.privKey)))),r.id!=null&&r.hasOwnProperty("id")&&(i.id=n.bytes===String?le.base64.encode(r.id,0,r.id.length):n.bytes===Array?Array.prototype.slice.call(r.id):r.id),r.pubKey!=null&&r.hasOwnProperty("pubKey")&&(i.pubKey=n.bytes===String?le.base64.encode(r.pubKey,0,r.pubKey.length):n.bytes===Array?Array.prototype.slice.call(r.pubKey):r.pubKey),r.privKey!=null&&r.hasOwnProperty("privKey")&&(i.privKey=n.bytes===String?le.base64.encode(r.privKey,0,r.privKey.length):n.bytes===Array?Array.prototype.slice.call(r.privKey):r.privKey),i},e.prototype.toJSON=function(){return this.constructor.toObject(this,mr.util.toJSONOptions)},e}();wc.exports=sn});var Rc=A((me,Pc)=>{"use strict";var{CID:Ra}=(wi(),as),_y=(Tr(),_r),Ty=(Si(),xn),Iy=(Ot(),Ut),Py=(Pr(),ir),{base58btc:Da}=(Ot(),Ut),{base32:Ry}=(Tr(),_r),{base16:Ec}=(Ei(),mn),on=(Ar(),dn),st=xc(),Dy=mc(),{PeerIdProto:Bc}=Sc(),{equals:Zt}=(pr(),hr),{fromString:un}=(At(),Ct),{toString:ky}=(Tt(),_t),{identity:ui}=(Gn(),Mr),Cc={..._y,...Ty,...Iy,...Py},Ky=Object.keys(Cc).reduce((e,t)=>e.or(Cc[t]),Ry.decoder),Ny=112,Ac=114,_c=class{constructor(t,r,n){if(!(t instanceof Uint8Array))throw new Error("invalid id provided");if(r&&n&&!Zt(r.public.bytes,n.bytes))throw new Error("inconsistent arguments");this._id=t,this._idB58String=Da.encode(this.id).substring(1),this._privKey=r,this._pubKey=n}get id(){return this._id}set id(t){throw new Error("Id is immutable")}get privKey(){return this._privKey}set privKey(t){this._privKey=t}get pubKey(){if(this._pubKey)return this._pubKey;if(this._privKey)return this._privKey.public;try{let t=on.decode(this.id);t.code===ui.code&&(this._pubKey=st.unmarshalPublicKey(t.digest))}catch(t){}return this._pubKey}set pubKey(t){this._pubKey=t}marshalPubKey(){if(this.pubKey)return st.marshalPublicKey(this.pubKey)}marshalPrivKey(){if(this.privKey)return st.marshalPrivateKey(this.privKey)}marshal(t){return Bc.encode({id:this.toBytes(),pubKey:this.marshalPubKey(),privKey:t?null:this.marshalPrivKey()}).finish()}toPrint(){let t=this.toB58String();t.startsWith("Qm")&&(t=t.slice(2));let r=6;return t.length<r&&(r=t.length),"<peer.ID "+t.substr(0,r)+">"}toJSON(){return{id:this.toB58String(),privKey:Ic(this.marshalPrivKey()),pubKey:Ic(this.marshalPubKey())}}toHexString(){return Ec.encode(this.id).substring(1)}toBytes(){return this.id}toB58String(){return this._idB58String}toString(){if(!this._idCIDString){let t=Ra.createV1(Ac,on.decode(this.id));Object.defineProperty(this,"_idCIDString",{value:t.toString(),enumerable:!1})}return this._idCIDString}equals(t){if(t instanceof Uint8Array)return Zt(this.id,t);if(t.id)return Zt(this.id,t.id);throw new Error("not valid Id")}isEqual(t){return this.equals(t)}isValid(){return Boolean(this.privKey&&this.privKey.public&&this.privKey.public.bytes&&this.pubKey.bytes instanceof Uint8Array&&Zt(this.privKey.public.bytes,this.pubKey.bytes))}hasInlinePublicKey(){try{if(on.decode(this.id).code===ui.code)return!0}catch(t){}return!1}},ot=Dy(_c,{className:"PeerId",symbolName:"@libp2p/js-peer-id/PeerId"});me=Pc.exports=ot;var cn=e=>e.bytes.length<=42?on.create(ui.code,e.bytes).bytes:e.hash(),ka=async(e,t)=>{let r=await cn(t);return new ot(r,e,t)};me.create=async e=>{e=e||{},e.bits=e.bits||2048,e.keyType=e.keyType||"RSA";let t=await st.generateKeyPair(e.keyType,e.bits);return ka(t,t.public)};me.createFromHexString=e=>new ot(Ec.decode("f"+e));me.createFromBytes=e=>{try{let t=Ra.decode(e);if(!Tc(t))throw new Error("Supplied PeerID CID is invalid");return me.createFromCID(t)}catch{if(on.decode(e).code!==ui.code)throw new Error("Supplied PeerID CID is invalid");return new ot(e)}};me.createFromB58String=e=>me.createFromBytes(Da.decode("z"+e));var Tc=e=>e.code===Ac||e.code===Ny;me.createFromCID=e=>{if(e=Ra.asCID(e),!e||!Tc(e))throw new Error("Supplied PeerID CID is invalid");return new ot(e.multihash.bytes)};me.createFromPubKey=async e=>{let t=e;if(typeof t=="string"&&(t=un(e,"base64pad")),!(t instanceof Uint8Array))throw new Error("Supplied key is neither a base64 string nor a Uint8Array");let r=await st.unmarshalPublicKey(t);return ka(void 0,r)};me.createFromPrivKey=async e=>{if(typeof e=="string"&&(e=un(e,"base64pad")),!(e instanceof Uint8Array))throw new Error("Supplied key is neither a base64 string nor a Uint8Array");let t=await st.unmarshalPrivateKey(e);return ka(t,t.public)};me.createFromJSON=async e=>{let t=Da.decode("z"+e.id),r=e.privKey&&un(e.privKey,"base64pad"),n=e.pubKey&&un(e.pubKey,"base64pad"),i=n&&await st.unmarshalPublicKey(n);if(!r)return new ot(t,void 0,i);let a=await st.unmarshalPrivateKey(r),s=await cn(a.public),o;if(i&&(o=await cn(i)),i&&!Zt(s,o))throw new Error("Public and private key do not match");if(t&&!Zt(s,t))throw new Error("Id and private key do not match");return new ot(t,a,i)};me.createFromProtobuf=async e=>{typeof e=="string"&&(e=un(e,"base16"));let{id:t,privKey:r,pubKey:n}=Bc.decode(e);r=r?await st.unmarshalPrivateKey(r):!1,n=n?await st.unmarshalPublicKey(n):!1;let i,a;if(r&&(a=await cn(r.public)),n&&(i=await cn(n)),r){if(n&&!Zt(a,i))throw new Error("Public and private key do not match");return new ot(a,r,r.public)}if(n)return new ot(i,void 0,n);if(t)return new ot(t);throw new Error("Protobuf did not contain any usable key material")};me.parse=e=>((e.charAt(0)==="1"||e.charAt(0)==="Q")&&(e=`z${e}`),me.createFromBytes(Ky.decode(e)));me.isPeerId=e=>Boolean(typeof e=="object"&&e._id&&e._idB58String);function Ic(e){if(e)return ky(e,"base64pad")}});var kc=A((cg,Ka)=>{"use strict";var Ly=Object.prototype.hasOwnProperty,Ce="~";function fn(){}Object.create&&(fn.prototype=Object.create(null),new fn().__proto__||(Ce=!1));function qy(e,t,r){this.fn=e,this.context=t,this.once=r||!1}function Dc(e,t,r,n,i){if(typeof r!="function")throw new TypeError("The listener must be a function");var a=new qy(r,n||e,i),s=Ce?Ce+t:t;return e._events[s]?e._events[s].fn?e._events[s]=[e._events[s],a]:e._events[s].push(a):(e._events[s]=a,e._eventsCount++),e}function ci(e,t){--e._eventsCount==0?e._events=new fn:delete e._events[t]}function be(){this._events=new fn,this._eventsCount=0}be.prototype.eventNames=function(){var t=[],r,n;if(this._eventsCount===0)return t;for(n in r=this._events)Ly.call(r,n)&&t.push(Ce?n.slice(1):n);return Object.getOwnPropertySymbols?t.concat(Object.getOwnPropertySymbols(r)):t};be.prototype.listeners=function(t){var r=Ce?Ce+t:t,n=this._events[r];if(!n)return[];if(n.fn)return[n.fn];for(var i=0,a=n.length,s=new Array(a);i<a;i++)s[i]=n[i].fn;return s};be.prototype.listenerCount=function(t){var r=Ce?Ce+t:t,n=this._events[r];return n?n.fn?1:n.length:0};be.prototype.emit=function(t,r,n,i,a,s){var o=Ce?Ce+t:t;if(!this._events[o])return!1;var u=this._events[o],c=arguments.length,f,l;if(u.fn){switch(u.once&&this.removeListener(t,u.fn,void 0,!0),c){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,r),!0;case 3:return u.fn.call(u.context,r,n),!0;case 4:return u.fn.call(u.context,r,n,i),!0;case 5:return u.fn.call(u.context,r,n,i,a),!0;case 6:return u.fn.call(u.context,r,n,i,a,s),!0}for(l=1,f=new Array(c-1);l<c;l++)f[l-1]=arguments[l];u.fn.apply(u.context,f)}else{var h=u.length,d;for(l=0;l<h;l++)switch(u[l].once&&this.removeListener(t,u[l].fn,void 0,!0),c){case 1:u[l].fn.call(u[l].context);break;case 2:u[l].fn.call(u[l].context,r);break;case 3:u[l].fn.call(u[l].context,r,n);break;case 4:u[l].fn.call(u[l].context,r,n,i);break;default:if(!f)for(d=1,f=new Array(c-1);d<c;d++)f[d-1]=arguments[d];u[l].fn.apply(u[l].context,f)}}return!0};be.prototype.on=function(t,r,n){return Dc(this,t,r,n,!1)};be.prototype.once=function(t,r,n){return Dc(this,t,r,n,!0)};be.prototype.removeListener=function(t,r,n,i){var a=Ce?Ce+t:t;if(!this._events[a])return this;if(!r)return ci(this,a),this;var s=this._events[a];if(s.fn)s.fn===r&&(!i||s.once)&&(!n||s.context===n)&&ci(this,a);else{for(var o=0,u=[],c=s.length;o<c;o++)(s[o].fn!==r||i&&!s[o].once||n&&s[o].context!==n)&&u.push(s[o]);u.length?this._events[a]=u.length===1?u[0]:u:ci(this,a)}return this};be.prototype.removeAllListeners=function(t){var r;return t?(r=Ce?Ce+t:t,this._events[r]&&ci(this,r)):(this._events=new fn,this._eventsCount=0),this};be.prototype.off=be.prototype.removeListener;be.prototype.addListener=be.prototype.on;be.prefixed=Ce;be.EventEmitter=be;typeof Ka!="undefined"&&(Ka.exports=be)});var Nc=A((fg,Kc)=>{"use strict";Kc.exports=(e,t)=>(t=t||(()=>{}),e.then(r=>new Promise(n=>{n(t())}).then(()=>r),r=>new Promise(n=>{n(t())}).then(()=>{throw r})))});var qc=A((lg,fi)=>{"use strict";var Uy=Nc(),Na=class extends Error{constructor(t){super(t);this.name="TimeoutError"}},Lc=(e,t,r)=>new Promise((n,i)=>{if(typeof t!="number"||t<0)throw new TypeError("Expected `milliseconds` to be a positive number");if(t===1/0){n(e);return}let a=setTimeout(()=>{if(typeof r=="function"){try{n(r())}catch(u){i(u)}return}let s=typeof r=="string"?r:`Promise timed out after ${t} milliseconds`,o=r instanceof Error?r:new Na(s);typeof e.cancel=="function"&&e.cancel(),i(o)},t);Uy(e.then(n,i),()=>{clearTimeout(a)})});fi.exports=Lc;fi.exports.default=Lc;fi.exports.TimeoutError=Na});var Uc=A(La=>{"use strict";Object.defineProperty(La,"__esModule",{value:!0});function Oy(e,t,r){let n=0,i=e.length;for(;i>0;){let a=i/2|0,s=n+a;r(e[s],t)<=0?(n=++s,i-=a+1):i=a}return n}La.default=Oy});var Fc=A(qa=>{"use strict";Object.defineProperty(qa,"__esModule",{value:!0});var Fy=Uc(),Oc=class{constructor(){this._queue=[]}enqueue(t,r){r=Object.assign({priority:0},r);let n={priority:r.priority,run:t};if(this.size&&this._queue[this.size-1].priority>=r.priority){this._queue.push(n);return}let i=Fy.default(this._queue,n,(a,s)=>s.priority-a.priority);this._queue.splice(i,0,n)}dequeue(){let t=this._queue.shift();return t==null?void 0:t.run}filter(t){return this._queue.filter(r=>r.priority===t.priority).map(r=>r.run)}get size(){return this._queue.length}};qa.default=Oc});var zc=A(Ua=>{"use strict";Object.defineProperty(Ua,"__esModule",{value:!0});var My=kc(),Mc=qc(),Vy=Fc(),li=()=>{},zy=new Mc.TimeoutError,Vc=class extends My{constructor(t){var r,n,i,a;super();if(this._intervalCount=0,this._intervalEnd=0,this._pendingCount=0,this._resolveEmpty=li,this._resolveIdle=li,t=Object.assign({carryoverConcurrencyCount:!1,intervalCap:1/0,interval:0,concurrency:1/0,autoStart:!0,queueClass:Vy.default},t),!(typeof t.intervalCap=="number"&&t.intervalCap>=1))throw new TypeError(`Expected \`intervalCap\` to be a number from 1 and up, got \`${(n=(r=t.intervalCap)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:""}\` (${typeof t.intervalCap})`);if(t.interval===void 0||!(Number.isFinite(t.interval)&&t.interval>=0))throw new TypeError(`Expected \`interval\` to be a finite number >= 0, got \`${(a=(i=t.interval)===null||i===void 0?void 0:i.toString())!==null&&a!==void 0?a:""}\` (${typeof t.interval})`);this._carryoverConcurrencyCount=t.carryoverConcurrencyCount,this._isIntervalIgnored=t.intervalCap===1/0||t.interval===0,this._intervalCap=t.intervalCap,this._interval=t.interval,this._queue=new t.queueClass,this._queueClass=t.queueClass,this.concurrency=t.concurrency,this._timeout=t.timeout,this._throwOnTimeout=t.throwOnTimeout===!0,this._isPaused=t.autoStart===!1}get _doesIntervalAllowAnother(){return this._isIntervalIgnored||this._intervalCount<this._intervalCap}get _doesConcurrentAllowAnother(){return this._pendingCount<this._concurrency}_next(){this._pendingCount--,this._tryToStartAnother(),this.emit("next")}_resolvePromises(){this._resolveEmpty(),this._resolveEmpty=li,this._pendingCount===0&&(this._resolveIdle(),this._resolveIdle=li,this.emit("idle"))}_onResumeInterval(){this._onInterval(),this._initializeIntervalIfNeeded(),this._timeoutId=void 0}_isIntervalPaused(){let t=Date.now();if(this._intervalId===void 0){let r=this._intervalEnd-t;if(r<0)this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0;else return this._timeoutId===void 0&&(this._timeoutId=setTimeout(()=>{this._onResumeInterval()},r)),!0}return!1}_tryToStartAnother(){if(this._queue.size===0)return this._intervalId&&clearInterval(this._intervalId),this._intervalId=void 0,this._resolvePromises(),!1;if(!this._isPaused){let t=!this._isIntervalPaused();if(this._doesIntervalAllowAnother&&this._doesConcurrentAllowAnother){let r=this._queue.dequeue();return r?(this.emit("active"),r(),t&&this._initializeIntervalIfNeeded(),!0):!1}}return!1}_initializeIntervalIfNeeded(){this._isIntervalIgnored||this._intervalId!==void 0||(this._intervalId=setInterval(()=>{this._onInterval()},this._interval),this._intervalEnd=Date.now()+this._interval)}_onInterval(){this._intervalCount===0&&this._pendingCount===0&&this._intervalId&&(clearInterval(this._intervalId),this._intervalId=void 0),this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0,this._processQueue()}_processQueue(){for(;this._tryToStartAnother(););}get concurrency(){return this._concurrency}set concurrency(t){if(!(typeof t=="number"&&t>=1))throw new TypeError(`Expected \`concurrency\` to be a number from 1 and up, got \`${t}\` (${typeof t})`);this._concurrency=t,this._processQueue()}async add(t,r={}){return new Promise((n,i)=>{let a=async()=>{this._pendingCount++,this._intervalCount++;try{let s=this._timeout===void 0&&r.timeout===void 0?t():Mc.default(Promise.resolve(t()),r.timeout===void 0?this._timeout:r.timeout,()=>{(r.throwOnTimeout===void 0?this._throwOnTimeout:r.throwOnTimeout)&&i(zy)});n(await s)}catch(s){i(s)}this._next()};this._queue.enqueue(a,r),this._tryToStartAnother(),this.emit("add")})}async addAll(t,r){return Promise.all(t.map(async n=>this.add(n,r)))}start(){return this._isPaused?(this._isPaused=!1,this._processQueue(),this):this}pause(){this._isPaused=!0}clear(){this._queue=new this._queueClass}async onEmpty(){if(this._queue.size!==0)return new Promise(t=>{let r=this._resolveEmpty;this._resolveEmpty=()=>{r(),t()}})}async onIdle(){if(!(this._pendingCount===0&&this._queue.size===0))return new Promise(t=>{let r=this._resolveIdle;this._resolveIdle=()=>{r(),t()}})}get size(){return this._queue.size}sizeBy(t){return this._queue.filter(t).length}get pending(){return this._pendingCount}get isPaused(){return this._isPaused}get timeout(){return this._timeout}set timeout(t){this._timeout=t}};Ua.default=Vc});var Gc=A((yg,Hc)=>{"use strict";var Hy=()=>{let e={};return e.promise=new Promise((t,r)=>{e.resolve=t,e.reject=r}),e};Hc.exports=Hy});var jc=A((gg,Wc)=>{var br=1e3,wr=br*60,Sr=wr*60,Xt=Sr*24,Gy=Xt*7,Wy=Xt*365.25;Wc.exports=function(e,t){t=t||{};var r=typeof e;if(r==="string"&&e.length>0)return jy(e);if(r==="number"&&isFinite(e))return t.long?Qy(e):$y(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))};function jy(e){if(e=String(e),!(e.length>100)){var t=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(!!t){var r=parseFloat(t[1]),n=(t[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return r*Wy;case"weeks":case"week":case"w":return r*Gy;case"days":case"day":case"d":return r*Xt;case"hours":case"hour":case"hrs":case"hr":case"h":return r*Sr;case"minutes":case"minute":case"mins":case"min":case"m":return r*wr;case"seconds":case"second":case"secs":case"sec":case"s":return r*br;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}function $y(e){var t=Math.abs(e);return t>=Xt?Math.round(e/Xt)+"d":t>=Sr?Math.round(e/Sr)+"h":t>=wr?Math.round(e/wr)+"m":t>=br?Math.round(e/br)+"s":e+"ms"}function Qy(e){var t=Math.abs(e);return t>=Xt?hi(e,t,Xt,"day"):t>=Sr?hi(e,t,Sr,"hour"):t>=wr?hi(e,t,wr,"minute"):t>=br?hi(e,t,br,"second"):e+" ms"}function hi(e,t,r,n){var i=t>=r*1.5;return Math.round(e/r)+" "+n+(i?"s":"")}});var Qc=A((vg,$c)=>{function Yy(e){r.debug=r,r.default=r,r.coerce=u,r.disable=a,r.enable=i,r.enabled=s,r.humanize=jc(),r.destroy=c,Object.keys(e).forEach(f=>{r[f]=e[f]}),r.names=[],r.skips=[],r.formatters={};function t(f){let l=0;for(let h=0;h<f.length;h++)l=(l<<5)-l+f.charCodeAt(h),l|=0;return r.colors[Math.abs(l)%r.colors.length]}r.selectColor=t;function r(f){let l,h=null,d,p;function g(...v){if(!g.enabled)return;let m=g,S=Number(new Date),C=S-(l||S);m.diff=C,m.prev=l,m.curr=S,l=S,v[0]=r.coerce(v[0]),typeof v[0]!="string"&&v.unshift("%O");let k=0;v[0]=v[0].replace(/%([a-zA-Z%])/g,(T,O)=>{if(T==="%%")return"%";k++;let F=r.formatters[O];if(typeof F=="function"){let ce=v[k];T=F.call(m,ce),v.splice(k,1),k--}return T}),r.formatArgs.call(m,v),(m.log||r.log).apply(m,v)}return g.namespace=f,g.useColors=r.useColors(),g.color=r.selectColor(f),g.extend=n,g.destroy=r.destroy,Object.defineProperty(g,"enabled",{enumerable:!0,configurable:!1,get:()=>h!==null?h:(d!==r.namespaces&&(d=r.namespaces,p=r.enabled(f)),p),set:v=>{h=v}}),typeof r.init=="function"&&r.init(g),g}function n(f,l){let h=r(this.namespace+(typeof l=="undefined"?":":l)+f);return h.log=this.log,h}function i(f){r.save(f),r.namespaces=f,r.names=[],r.skips=[];let l,h=(typeof f=="string"?f:"").split(/[\s,]+/),d=h.length;for(l=0;l<d;l++)!h[l]||(f=h[l].replace(/\*/g,".*?"),f[0]==="-"?r.skips.push(new RegExp("^"+f.substr(1)+"$")):r.names.push(new RegExp("^"+f+"$")))}function a(){let f=[...r.names.map(o),...r.skips.map(o).map(l=>"-"+l)].join(",");return r.enable(""),f}function s(f){if(f[f.length-1]==="*")return!0;let l,h;for(l=0,h=r.skips.length;l<h;l++)if(r.skips[l].test(f))return!1;for(l=0,h=r.names.length;l<h;l++)if(r.names[l].test(f))return!0;return!1}function o(f){return f.toString().substring(2,f.toString().length-2).replace(/\.\*\?$/,"*")}function u(f){return f instanceof Error?f.stack||f.message:f}function c(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return r.enable(r.load()),r}$c.exports=Yy});var Yc=A((Re,pi)=>{Re.formatArgs=Xy;Re.save=Jy;Re.load=e1;Re.useColors=Zy;Re.storage=t1();Re.destroy=(()=>{let e=!1;return()=>{e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();Re.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function Zy(){return typeof window!="undefined"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document!="undefined"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window!="undefined"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function Xy(e){if(e[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+e[0]+(this.useColors?"%c ":" ")+"+"+pi.exports.humanize(this.diff),!this.useColors)return;let t="color: "+this.color;e.splice(1,0,t,"color: inherit");let r=0,n=0;e[0].replace(/%[a-zA-Z%]/g,i=>{i!=="%%"&&(r++,i==="%c"&&(n=r))}),e.splice(n,0,t)}Re.log=console.debug||console.log||(()=>{});function Jy(e){try{e?Re.storage.setItem("debug",e):Re.storage.removeItem("debug")}catch(t){}}function e1(){let e;try{e=Re.storage.getItem("debug")}catch(t){}return!e&&typeof process!="undefined"&&"env"in process&&(e=process.env.DEBUG),e}function t1(){try{return localStorage}catch(e){}}pi.exports=Qc()(Re);var{formatters:r1}=pi.exports;r1.j=function(e){try{return JSON.stringify(e)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}}});var s1=A((xg,rf)=>{"use strict";var Zc=Rc(),{base58btc:n1}=(Ot(),Ut),{default:i1}=zc(),Xc=Gc(),Jc=Yc(),qt=Jc("libp2p-delegated-peer-routing");qt.error=Jc("libp2p-delegated-peer-routing:error");var ef=3e4,a1=4,tf=class{constructor(t){if(t==null)throw new Error("missing ipfs http client");this._client=t,this._httpQueue=new i1({concurrency:a1});let{protocol:r,host:n,port:i}=t.getEndpointConfig();qt(`enabled DelegatedPeerRouting via ${r}://${n}:${i}`)}async findPeer(t,r={}){let n=t;Zc.isPeerId(n)&&(n=t.toB58String()),qt("findPeer starts: "+t),r.timeout=r.timeout||ef;try{return await this._httpQueue.add(async()=>{let{addrs:i}=await this._client.dht.findPeer(n,{timeout:r.timeout});return{id:t,multiaddrs:i}})}catch(i){if(i.message.includes("not found"))return;throw i}finally{qt("findPeer finished: "+t)}}async*getClosestPeers(t,r={}){let n=n1.encode(t).substring(1);qt("getClosestPeers starts:",n),r.timeout=r.timeout||ef;let i=Xc(),a=Xc();this._httpQueue.add(()=>(i.resolve(),a.promise));try{await i.promise;for await(let s of this._client.dht.query(n,{timeout:r.timeout}))switch(s.type){case 1:for(let o of s.responses)yield{id:Zc.parse(o.id),multiaddrs:o.addrs};break;default:qt("getClosestPeers unhandled response",s)}}catch(s){throw qt.error("getClosestPeers errored:",s),s}finally{a.resolve(),qt("getClosestPeers finished:",n)}}};rf.exports=tf});return s1();})();
/*! noble-ed25519 - MIT License (c) Paul Miller (paulmillr.com) */
/*! noble-secp256k1 - MIT License (c) Paul Miller (paulmillr.com) */
return Libp2pDelegatedPeerRouting}));
