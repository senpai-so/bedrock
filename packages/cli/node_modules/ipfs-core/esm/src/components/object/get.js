import * as dagPB from '@ipld/dag-pb';
import { withTimeoutOption } from 'ipfs-core-utils/with-timeout-option';
export function createGet({repo, preload}) {
  async function get(cid, options = {}) {
    if (options.preload !== false) {
      preload(cid);
    }
    const block = await repo.blocks.get(cid, options);
    return dagPB.decode(block);
  }
  return withTimeoutOption(get);
}