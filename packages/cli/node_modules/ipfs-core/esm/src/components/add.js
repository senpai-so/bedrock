import last from 'it-last';
import { normaliseInput } from 'ipfs-core-utils/files/normalise-input-single';
export function createAdd({addAll}) {
  async function add(entry, options = {}) {
    const result = await last(addAll(normaliseInput(entry), options));
    if (result == null) {
      throw Error('Failed to add a file, if you see this please report a bug');
    }
    return result;
  }
  return add;
}