import { resolveDnslink } from 'ipfs-core-config/dns';
import { withTimeoutOption } from 'ipfs-core-utils/with-timeout-option';
function fqdnFixups(domain) {
  if (domain.endsWith('.eth')) {
    domain = domain.replace(/.eth$/, '.eth.link');
  }
  return domain;
}
export function createDns() {
  const resolveDNS = async (domain, options = { recursive: true }) => {
    if (typeof domain !== 'string') {
      throw new Error('Invalid arguments, domain must be a string');
    }
    domain = fqdnFixups(domain);
    return resolveDnslink(domain, options);
  };
  return withTimeoutOption(resolveDNS);
}