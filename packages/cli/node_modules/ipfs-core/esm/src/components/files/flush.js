import { createStat } from './stat.js';
import { withTimeoutOption } from 'ipfs-core-utils/with-timeout-option';
import mergeOpts from 'merge-options';
const mergeOptions = mergeOpts.bind({ ignoreUndefined: true });
const defaultOptions = {};
export function createFlush(context) {
  async function mfsFlush(path, options = {}) {
    options = mergeOptions(defaultOptions, options);
    const {cid} = await createStat(context)(path, options);
    return cid;
  }
  return withTimeoutOption(mfsFlush);
}