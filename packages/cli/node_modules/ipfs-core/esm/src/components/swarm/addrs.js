import { withTimeoutOption } from 'ipfs-core-utils/with-timeout-option';
export function createAddrs({network}) {
  async function addrs(options = {}) {
    const peers = [];
    const {libp2p} = await network.use(options);
    for (const [peerId, peer] of libp2p.peerStore.peers.entries()) {
      peers.push({
        id: peerId,
        addrs: peer.addresses.map(mi => mi.multiaddr)
      });
    }
    return peers;
  }
  return withTimeoutOption(addrs);
}