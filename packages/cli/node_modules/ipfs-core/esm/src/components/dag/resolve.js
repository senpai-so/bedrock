import { withTimeoutOption } from 'ipfs-core-utils/with-timeout-option';
import { toCidAndPath } from 'ipfs-core-utils/to-cid-and-path';
import { resolvePath } from '../../utils.js';
export function createResolve({repo, codecs, preload}) {
  async function dagResolve(ipfsPath, options = {}) {
    const {cid} = toCidAndPath(ipfsPath);
    if (options.preload !== false) {
      preload(cid);
    }
    return resolvePath(repo, codecs, ipfsPath, options);
  }
  return withTimeoutOption(dagResolve);
}