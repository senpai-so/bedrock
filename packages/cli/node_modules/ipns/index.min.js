(function (root, factory) {(typeof module === 'object' && module.exports) ? module.exports = factory() : root.Ipns = factory()}(typeof self !== 'undefined' ? self : this, function () {
var Ipns=(()=>{var Ip=Object.create;var Ki=Object.defineProperty;var _p=Object.getOwnPropertyDescriptor;var Rp=Object.getOwnPropertyNames;var Np=Object.getPrototypeOf,Dp=Object.prototype.hasOwnProperty;var Vo=e=>Ki(e,"__esModule",{value:!0});var Ui=(e=>typeof require!="undefined"?require:typeof Proxy!="undefined"?new Proxy(e,{get:(t,r)=>(typeof require!="undefined"?require:t)[r]}):e)(function(e){if(typeof require!="undefined")return require.apply(this,arguments);throw new Error('Dynamic require of "'+e+'" is not supported')});var se=(e,t)=>()=>(e&&(t=e(e=0)),t);var T=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),Ne=(e,t)=>{Vo(e);for(var r in t)Ki(e,r,{get:t[r],enumerable:!0})},kp=(e,t,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of Rp(t))!Dp.call(e,n)&&n!=="default"&&Ki(e,n,{get:()=>t[n],enumerable:!(r=_p(t,n))||r.enumerable});return e},Dr=e=>kp(Vo(Ki(e!=null?Ip(Np(e)):{},"default",e&&e.__esModule&&"default"in e?{get:()=>e.default,enumerable:!0}:{value:e,enumerable:!0})),e);var zo=T((gm,ts)=>{var ym=function(){typeof ts!="undefined"&&(ts.exports=x);var e=24*3600,t=3200,r=(365*400+97)*t/400,n=e*r,i=n*1e3,a=1e3*1e4*1e4*e,s=16777216,o=65536*65536,u=1e3*1e3,c=1e3*1e3*1e3,f="000000000",l=Math.trunc||Fn,h=x.prototype;x.fromDate=Ee,x.fromInt64BE=Le(0,1,2,3,0,4),x.fromInt64LE=Le(3,2,1,0,4,0),x.fromString=Y,x.fromTimeT=Xe,h.year=0,h.time=0,h.nano=0,h.addNano=R,h.getNano=$,h.getTimeT=Fe,h.getYear=S,h.toDate=L,h.toJSON=lr,h.toString=Jr,h.writeInt64BE=me(0,1,2,3,0,4),h.writeInt64LE=me(3,2,1,0,4,0);var d="%Y-%m-%dT%H:%M:%S.%NZ",p=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],g=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],v={"%":"%",F:"%Y-%m-%d",n:`
`,R:"%H:%M",T:"%H:%M:%S",t:"	",X:"%T",Z:"GMT",z:"+0000"};return x;function x(K,G,H){var ue=this;if(!(ue instanceof x))return new x(K,G,H);ue.time=+K||0,ue.nano=+G||0,ue.year=+H||0,C(ue)}function S(){var K=this.toDate().getUTCFullYear();return K+this.year}function C(K){var G=K.year,H=K.time,ue=K.nano,Ae,Ce;if(ue<0||u<=ue){var Ge=Math.floor(ue/u);ue-=Ge*u,H+=Ge,Ae=1}var bt=G%t;if(H<-a||a<H||bt){Ce=l(H/i),Ce&&(G+=Ce*t,H-=Ce*i);var ce=D(H);ce.setUTCFullYear(bt+ce.getUTCFullYear()),G-=bt,H=+ce,Ce=l(G/t);var xe=H+Ce*i;Ce&&-a<=xe&&xe<=a&&(G-=Ce*t,H=xe),Ae=1}return Ae&&(K.year=G,K.time=H,K.nano=ue),K}function L(){var K=C(this);return D(K.time)}function D(K){var G=new Date(0);return G.setTime(K),G}function R(K){return this.nano+=+K||0,this}function $(){var K=C(this);return(K.time%1e3*u+ +K.nano+c)%c}function Y(K){var G,H=new x;K+="";var ue=K.replace(/^\s*[+\-]?\d+/,function(Ae){var Ce=+Ae,Ge=1970+(Ce-1970)%400;return H.year=Ce-Ge,Ge}).replace(/(?:Z|([+\-]\d{2}):?(\d{2}))$/,function(Ae,Ce,Ge){return Ce<0&&(Ge*=-1),G=(+Ce*60+ +Ge)*6e4,""}).replace(/\.\d+$/,function(Ae){return H.nano=+(Ae+f).substr(1,9),""}).split(/\D+/);if(ue.length>1?ue[1]--:ue[1]=0,H.time=G=Date.UTC.apply(Date,ue)-(G||0),isNaN(G))throw new TypeError("Invalid Date");return C(H)}function Ee(K){return new x(+K)}function Xe(K){return Oe(K,0)}function Oe(K,G){G|=0,G*=o,K=+K||0;var H=l(G/n)+l(K/n),ue=G%n+K%n,Ae=l(ue/n);return Ae&&(H+=Ae,ue-=Ae*n),new x(ue*1e3,0,H*t)}function Fe(){var K=C(this),G=Math.floor(K.time/1e3),H=K.year;return H&&(G+=H*r*e/t),G}function lr(){return this.toString().replace(/0{1,6}Z$/,"Z")}function Jr(K){var G=this,H=G.toDate(),ue={H:xe,L:ki,M:wt,N:Pi,S:en,Y:Ce,a:On,b:qn,d:bt,e:ce,m:Ge};return Ae(K||d);function Ae(Et){return Et.replace(/%./g,function(Lo){var Oo=Lo[1],qo=v[Oo],Mo=ue[Oo];return qo?Ae(qo):Mo?Mo():Lo})}function Ce(){var Et=G.getYear();return Et>999999?"+"+Et:Et>9999?"+"+Xt(Et,6):Et>=0?Xt(Et,4):Et>=-999999?"-"+Xt(-Et,6):Et}function Ge(){return Qt(H.getUTCMonth()+1)}function bt(){return Qt(H.getUTCDate())}function ce(){return Ln(H.getUTCDate())}function xe(){return Qt(H.getUTCHours())}function wt(){return Qt(H.getUTCMinutes())}function en(){return Qt(H.getUTCSeconds())}function ki(){return Xt(H.getUTCMilliseconds(),3)}function Pi(){return Xt(G.getNano(),9)}function On(){return g[H.getUTCDay()]}function qn(){return p[H.getUTCMonth()]}}function me(K,G,H,ue,Ae,Ce){return Ge;function Ge(ce,xe){var wt=C(this);ce||(ce=new Array(8)),O(ce,xe|=0);var en=Math.floor(wt.time/1e3),ki=wt.year*(r*e/t),Pi=l(ki/o)+l(en/o),On=ki%o+en%o,qn=Math.floor(On/o);return qn&&(Pi+=qn,On-=qn*o),bt(ce,xe+Ae,Pi),bt(ce,xe+Ce,On),ce}function bt(ce,xe,wt){ce[xe+K]=wt>>24&255,ce[xe+G]=wt>>16&255,ce[xe+H]=wt>>8&255,ce[xe+ue]=wt&255}}function Le(K,G,H,ue,Ae,Ce){return Ge;function Ge(ce,xe){O(ce,xe|=0);var wt=bt(ce,xe+Ae),en=bt(ce,xe+Ce);return Oe(en,wt)}function bt(ce,xe){return ce[xe+K]*s+(ce[xe+G]<<16|ce[xe+H]<<8|ce[xe+ue])}}function O(K,G){var H=K&&K.length;if(H==null)throw new TypeError("Invalid Buffer");if(H<G+8)throw new RangeError("Out of range")}function Fn(K){var G=K-K%1;return G===0&&(K<0||K===0&&1/K!=1/0)?-0:G}function Ln(K){return(K>9?"":" ")+(K|0)}function Qt(K){return(K>9?"":"0")+(K|0)}function Xt(K,G){return(f+(K|0)).substr(-G)}}()});function Pp(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var i=0;i<e.length;i++){var a=e.charAt(i),s=a.charCodeAt(0);if(r[s]!==255)throw new TypeError(a+" is ambiguous");r[s]=i}var o=e.length,u=e.charAt(0),c=Math.log(o)/Math.log(256),f=Math.log(256)/Math.log(o);function l(p){if(p instanceof Uint8Array||(ArrayBuffer.isView(p)?p=new Uint8Array(p.buffer,p.byteOffset,p.byteLength):Array.isArray(p)&&(p=Uint8Array.from(p))),!(p instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(p.length===0)return"";for(var g=0,v=0,x=0,S=p.length;x!==S&&p[x]===0;)x++,g++;for(var C=(S-x)*f+1>>>0,L=new Uint8Array(C);x!==S;){for(var D=p[x],R=0,$=C-1;(D!==0||R<v)&&$!==-1;$--,R++)D+=256*L[$]>>>0,L[$]=D%o>>>0,D=D/o>>>0;if(D!==0)throw new Error("Non-zero carry");v=R,x++}for(var Y=C-v;Y!==C&&L[Y]===0;)Y++;for(var Ee=u.repeat(g);Y<C;++Y)Ee+=e.charAt(L[Y]);return Ee}function h(p){if(typeof p!="string")throw new TypeError("Expected String");if(p.length===0)return new Uint8Array;var g=0;if(p[g]!==" "){for(var v=0,x=0;p[g]===u;)v++,g++;for(var S=(p.length-g)*c+1>>>0,C=new Uint8Array(S);p[g];){var L=r[p.charCodeAt(g)];if(L===255)return;for(var D=0,R=S-1;(L!==0||D<x)&&R!==-1;R--,D++)L+=o*C[R]>>>0,C[R]=L%256>>>0,L=L/256>>>0;if(L!==0)throw new Error("Non-zero carry");x=D,g++}if(p[g]!==" "){for(var $=S-x;$!==S&&C[$]===0;)$++;for(var Y=new Uint8Array(v+(S-$)),Ee=v;$!==S;)Y[Ee++]=C[$++];return Y}}}function d(p){var g=h(p);if(g)return g;throw new Error(`Non-${t} character`)}return{encode:l,decodeUnsafe:h,decode:d}}var Kp,Up,jo,Go=se(()=>{Kp=Pp,Up=Kp,jo=Up});var Em,$o,Jt,Wo,Yo,hr=se(()=>{Em=new Uint8Array(0),$o=(e,t)=>{if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;for(let r=0;r<e.byteLength;r++)if(e[r]!==t[r])return!1;return!0},Jt=e=>{if(e instanceof Uint8Array&&e.constructor.name==="Uint8Array")return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")},Wo=e=>new TextEncoder().encode(e),Yo=e=>new TextDecoder().decode(e)});var Qo,Xo,Jo,e0,t0,Fi,pr,Fp,Lp,we,Dt=se(()=>{Go();hr();Qo=class{constructor(t,r,n){this.name=t,this.prefix=r,this.baseEncode=n}encode(t){if(t instanceof Uint8Array)return`${this.prefix}${this.baseEncode(t)}`;throw Error("Unknown type, must be binary type")}},Xo=class{constructor(t,r,n){this.name=t,this.prefix=r,this.baseDecode=n}decode(t){if(typeof t=="string")switch(t[0]){case this.prefix:return this.baseDecode(t.slice(1));default:throw Error(`Unable to decode multibase string ${JSON.stringify(t)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`)}else throw Error("Can only multibase decode strings")}or(t){return e0(this,t)}},Jo=class{constructor(t){this.decoders=t}or(t){return e0(this,t)}decode(t){let r=t[0],n=this.decoders[r];if(n)return n.decode(t);throw RangeError(`Unable to decode multibase string ${JSON.stringify(t)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}},e0=(e,t)=>new Jo({...e.decoders||{[e.prefix]:e},...t.decoders||{[t.prefix]:t}}),t0=class{constructor(t,r,n,i){this.name=t,this.prefix=r,this.baseEncode=n,this.baseDecode=i,this.encoder=new Qo(t,r,n),this.decoder=new Xo(t,r,i)}encode(t){return this.encoder.encode(t)}decode(t){return this.decoder.decode(t)}},Fi=({name:e,prefix:t,encode:r,decode:n})=>new t0(e,t,r,n),pr=({prefix:e,name:t,alphabet:r})=>{let{encode:n,decode:i}=jo(r,t);return Fi({prefix:e,name:t,encode:n,decode:a=>Jt(i(a))})},Fp=(e,t,r,n)=>{let i={};for(let f=0;f<t.length;++f)i[t[f]]=f;let a=e.length;for(;e[a-1]==="=";)--a;let s=new Uint8Array(a*r/8|0),o=0,u=0,c=0;for(let f=0;f<a;++f){let l=i[e[f]];if(l===void 0)throw new SyntaxError(`Non-${n} character`);u=u<<r|l,o+=r,o>=8&&(o-=8,s[c++]=255&u>>o)}if(o>=r||255&u<<8-o)throw new SyntaxError("Unexpected end of data");return s},Lp=(e,t,r)=>{let n=t[t.length-1]==="=",i=(1<<r)-1,a="",s=0,o=0;for(let u=0;u<e.length;++u)for(o=o<<8|e[u],s+=8;s>r;)s-=r,a+=t[i&o>>s];if(s&&(a+=t[i&o<<r-s]),n)for(;a.length*r&7;)a+="=";return a},we=({name:e,prefix:t,bitsPerChar:r,alphabet:n})=>Fi({prefix:t,name:e,encode(i){return Lp(i,n,r)},decode(i){return Fp(i,n,r,e)}})});var rs={};Ne(rs,{identity:()=>Op});var Op,r0=se(()=>{Dt();hr();Op=Fi({prefix:"\0",name:"identity",encode:e=>Yo(e),decode:e=>Wo(e)})});var ns={};Ne(ns,{base2:()=>qp});var qp,n0=se(()=>{Dt();qp=we({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1})});var is={};Ne(is,{base8:()=>Mp});var Mp,i0=se(()=>{Dt();Mp=we({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3})});var as={};Ne(as,{base10:()=>Vp});var Vp,a0=se(()=>{Dt();Vp=pr({prefix:"9",name:"base10",alphabet:"0123456789"})});var Li={};Ne(Li,{base16:()=>zp,base16upper:()=>Hp});var zp,Hp,ss=se(()=>{Dt();zp=we({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),Hp=we({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4})});var Mn={};Ne(Mn,{base32:()=>tn,base32hex:()=>$p,base32hexpad:()=>Yp,base32hexpadupper:()=>Zp,base32hexupper:()=>Wp,base32pad:()=>jp,base32padupper:()=>Gp,base32upper:()=>os,base32z:()=>Qp});var tn,os,jp,Gp,$p,Wp,Yp,Zp,Qp,rn=se(()=>{Dt();tn=we({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),os=we({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),jp=we({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),Gp=we({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),$p=we({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),Wp=we({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),Yp=we({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),Zp=we({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),Qp=we({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5})});var Oi={};Ne(Oi,{base36:()=>Xp,base36upper:()=>Jp});var Xp,Jp,us=se(()=>{Dt();Xp=pr({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),Jp=pr({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"})});var nn={};Ne(nn,{base58btc:()=>kt,base58flickr:()=>ed});var kt,ed,an=se(()=>{Dt();kt=pr({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),ed=pr({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"})});var sn={};Ne(sn,{base64:()=>td,base64pad:()=>rd,base64url:()=>nd,base64urlpad:()=>id});var td,rd,nd,id,Vn=se(()=>{Dt();td=we({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),rd=we({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),nd=we({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),id=we({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6})});function o0(e,t,r){t=t||[],r=r||0;for(var n=r;e>=ud;)t[r++]=e&255|s0,e/=128;for(;e&od;)t[r++]=e&255|s0,e>>>=7;return t[r]=e|0,o0.bytes=r-n+1,t}function cs(e,t){var r=0,t=t||0,n=0,i=t,a,s=e.length;do{if(i>=s)throw cs.bytes=0,new RangeError("Could not decode varint");a=e[i++],r+=n<28?(a&u0)<<n:(a&u0)*Math.pow(2,n),n+=7}while(a>=fd);return cs.bytes=i-t,r}var ad,s0,sd,od,ud,cd,fd,u0,ld,hd,pd,dd,yd,gd,vd,md,xd,bd,wd,Ed,zn,c0=se(()=>{ad=o0,s0=128,sd=127,od=~sd,ud=Math.pow(2,31);cd=cs,fd=128,u0=127;ld=Math.pow(2,7),hd=Math.pow(2,14),pd=Math.pow(2,21),dd=Math.pow(2,28),yd=Math.pow(2,35),gd=Math.pow(2,42),vd=Math.pow(2,49),md=Math.pow(2,56),xd=Math.pow(2,63),bd=function(e){return e<ld?1:e<hd?2:e<pd?3:e<dd?4:e<yd?5:e<gd?6:e<vd?7:e<md?8:e<xd?9:10},wd={encode:ad,decode:cd,encodingLength:bd},Ed=wd,zn=Ed});var Hn,on,un,qi=se(()=>{c0();Hn=e=>[zn.decode(e),zn.decode.bytes],on=(e,t,r=0)=>(zn.encode(e,t,r),t),un=e=>zn.encodingLength(e)});var Mi={};Ne(Mi,{Digest:()=>cn,create:()=>jn,decode:()=>Gn,equals:()=>fs});var jn,Gn,fs,cn,fn=se(()=>{hr();qi();jn=(e,t)=>{let r=t.byteLength,n=un(e),i=n+un(r),a=new Uint8Array(i+r);return on(e,a,0),on(r,a,n),a.set(t,i),new cn(e,r,t,a)},Gn=e=>{let t=Jt(e),[r,n]=Hn(t),[i,a]=Hn(t.subarray(n)),s=t.subarray(n+a);if(s.byteLength!==i)throw new Error("Incorrect length");return new cn(r,i,s,t)},fs=(e,t)=>e===t?!0:e.code===t.code&&e.size===t.size&&$o(e.bytes,t.bytes),cn=class{constructor(t,r,n,i){this.code=t,this.size=r,this.digest=n,this.bytes=i}}});var $n,l0,Vi=se(()=>{fn();$n=({name:e,code:t,encode:r})=>new l0(e,t,r),l0=class{constructor(t,r,n){this.name=t,this.code=r,this.encode=n}async digest(t){if(t instanceof Uint8Array){let r=await this.encode(t);return jn(this.code,r)}else throw Error("Unknown type, must be binary type")}}});var kr={};Ne(kr,{sha256:()=>Sd,sha512:()=>Bd});var p0,Sd,Bd,ln=se(()=>{Vi();p0=e=>async t=>new Uint8Array(await crypto.subtle.digest(e,t)),Sd=$n({name:"sha2-256",code:18,encode:p0("SHA-256")}),Bd=$n({name:"sha2-512",code:19,encode:p0("SHA-512")})});var Wn={};Ne(Wn,{identity:()=>ls});var ls,Yn=se(()=>{Vi();hr();ls=$n({name:"identity",code:0,encode:e=>Jt(e)})});var d0=se(()=>{hr()});var jm,Gm,y0=se(()=>{jm=new TextEncoder,Gm=new TextDecoder});var m0={};Ne(m0,{CID:()=>Te});var Te,Td,Id,_d,Zn,Rd,g0,v0,zi,Hi,Nd,Dd,kd,hs=se(()=>{qi();fn();an();rn();hr();Te=class{constructor(t,r,n,i){this.code=r,this.version=t,this.multihash=n,this.bytes=i,this.byteOffset=i.byteOffset,this.byteLength=i.byteLength,this.asCID=this,this._baseCache=new Map,Object.defineProperties(this,{byteOffset:Hi,byteLength:Hi,code:zi,version:zi,multihash:zi,bytes:zi,_baseCache:Hi,asCID:Hi})}toV0(){switch(this.version){case 0:return this;default:{let{code:t,multihash:r}=this;if(t!==Zn)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(r.code!==Rd)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return Te.createV0(r)}}}toV1(){switch(this.version){case 0:{let{code:t,digest:r}=this.multihash,n=jn(t,r);return Te.createV1(this.code,n)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}equals(t){return t&&this.code===t.code&&this.version===t.version&&fs(this.multihash,t.multihash)}toString(t){let{bytes:r,version:n,_baseCache:i}=this;switch(n){case 0:return Id(r,i,t||kt.encoder);default:return _d(r,i,t||tn.encoder)}}toJSON(){return{code:this.code,version:this.version,hash:this.multihash.bytes}}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return"CID("+this.toString()+")"}static isCID(t){return Dd(/^0\.0/,kd),!!(t&&(t[v0]||t.asCID===t))}get toBaseEncodedString(){throw new Error("Deprecated, use .toString()")}get codec(){throw new Error('"codec" property is deprecated, use integer "code" property instead')}get buffer(){throw new Error("Deprecated .buffer property, use .bytes to get Uint8Array instead")}get multibaseName(){throw new Error('"multibaseName" property is deprecated')}get prefix(){throw new Error('"prefix" property is deprecated')}static asCID(t){if(t instanceof Te)return t;if(t!=null&&t.asCID===t){let{version:r,code:n,multihash:i,bytes:a}=t;return new Te(r,n,i,a||g0(r,n,i.bytes))}else if(t!=null&&t[v0]===!0){let{version:r,multihash:n,code:i}=t,a=Gn(n);return Te.create(r,i,a)}else return null}static create(t,r,n){if(typeof r!="number")throw new Error("String codecs are no longer supported");switch(t){case 0:{if(r!==Zn)throw new Error(`Version 0 CID must use dag-pb (code: ${Zn}) block encoding`);return new Te(t,r,n,n.bytes)}case 1:{let i=g0(t,r,n.bytes);return new Te(t,r,n,i)}default:throw new Error("Invalid version")}}static createV0(t){return Te.create(0,Zn,t)}static createV1(t,r){return Te.create(1,t,r)}static decode(t){let[r,n]=Te.decodeFirst(t);if(n.length)throw new Error("Incorrect length");return r}static decodeFirst(t){let r=Te.inspectBytes(t),n=r.size-r.multihashSize,i=Jt(t.subarray(n,n+r.multihashSize));if(i.byteLength!==r.multihashSize)throw new Error("Incorrect length");let a=i.subarray(r.multihashSize-r.digestSize),s=new cn(r.multihashCode,r.digestSize,a,i);return[r.version===0?Te.createV0(s):Te.createV1(r.codec,s),t.subarray(r.size)]}static inspectBytes(t){let r=0,n=()=>{let[l,h]=Hn(t.subarray(r));return r+=h,l},i=n(),a=Zn;if(i===18?(i=0,r=0):i===1&&(a=n()),i!==0&&i!==1)throw new RangeError(`Invalid CID version ${i}`);let s=r,o=n(),u=n(),c=r+u,f=c-s;return{version:i,codec:a,multihashCode:o,digestSize:u,multihashSize:f,size:c}}static parse(t,r){let[n,i]=Td(t,r),a=Te.decode(i);return a._baseCache.set(n,t),a}},Td=(e,t)=>{switch(e[0]){case"Q":{let r=t||kt;return[kt.prefix,r.decode(`${kt.prefix}${e}`)]}case kt.prefix:{let r=t||kt;return[kt.prefix,r.decode(e)]}case tn.prefix:{let r=t||tn;return[tn.prefix,r.decode(e)]}default:{if(t==null)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[e[0],t.decode(e)]}}},Id=(e,t,r)=>{let{prefix:n}=r;if(n!==kt.prefix)throw Error(`Cannot string encode V0 in ${r.name} encoding`);let i=t.get(n);if(i==null){let a=r.encode(e).slice(1);return t.set(n,a),a}else return i},_d=(e,t,r)=>{let{prefix:n}=r,i=t.get(n);if(i==null){let a=r.encode(e);return t.set(n,a),a}else return i},Zn=112,Rd=18,g0=(e,t,r)=>{let n=un(e),i=n+un(t),a=new Uint8Array(i+r.byteLength);return on(e,a,0),on(t,a,n),a.set(r,i),a},v0=Symbol.for("@ipld/js-cid/CID"),zi={writable:!1,configurable:!1,enumerable:!0},Hi={writable:!1,enumerable:!1,configurable:!1},Nd="0.0.0-dev",Dd=(e,t)=>{if(e.test(Nd))console.warn(t);else throw new Error(t)},kd=`CID.isCID(v) is deprecated and will be removed in the next major release.
Following code pattern:

if (CID.isCID(value)) {
  doSomethingWithCID(value)
}

Is replaced with:

const cid = CID.asCID(value)
if (cid) {
  // Make sure to use cid instead of value
  doSomethingWithCID(cid)
}
`});var x0=se(()=>{hs();qi();hr();Vi();fn()});var ps,tx,b0=se(()=>{r0();n0();i0();a0();ss();rn();us();an();Vn();ln();Yn();d0();y0();x0();ps={...rs,...ns,...is,...as,...Li,...Mn,...Oi,...nn,...sn},tx={...kr,...Wn}});function w0(e,t,r,n){return{name:e,prefix:t,encoder:{name:e,prefix:t,encode:r},decoder:{decode:n}}}var E0,ds,Pd,ji,ys=se(()=>{b0();E0=w0("utf8","u",e=>{let t=new TextDecoder("utf8");return"u"+t.decode(e)},e=>new TextEncoder().encode(e.substring(1))),ds=w0("ascii","a",e=>{let t="a";for(let r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return t},e=>{e=e.substring(1);let t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}),Pd={utf8:E0,"utf-8":E0,hex:ps.base16,latin1:ds,ascii:ds,binary:ds,...ps},ji=Pd});var er={};Ne(er,{toString:()=>Pr});function Pr(e,t="utf8"){let r=ji[t];if(!r)throw new Error(`Unsupported encoding "${t}"`);return r.encoder.encode(e).substring(1)}var St=se(()=>{ys()});var tr={};Ne(tr,{fromString:()=>Pt});function Pt(e,t="utf8"){let r=ji[t];if(!r)throw new Error(`Unsupported encoding "${t}"`);return r.decoder.decode(`${r.prefix}${e}`)}var Bt=se(()=>{ys()});var Qn=T(B0=>{"use strict";B0.get=(e=globalThis)=>{let t=e.crypto;if(!t||!t.subtle)throw Object.assign(new Error("Missing Web Crypto API. The most likely cause of this error is that this page is being accessed from an insecure context (i.e. not HTTPS). For more information and possible resolutions see https://github.com/libp2p/js-libp2p-crypto/blob/master/README.md#web-crypto-api"),{code:"ERR_MISSING_WEB_CRYPTO"});return t}});var A0=T((hx,C0)=>{"use strict";C0.exports={SHA1:20,SHA256:32,SHA512:64}});var gs=T(I0=>{"use strict";var T0=Qn(),Ld=A0(),Od={SHA1:"SHA-1",SHA256:"SHA-256",SHA512:"SHA-512"},qd=async(e,t)=>{let r=await T0.get().subtle.sign({name:"HMAC"},e,t);return new Uint8Array(r,r.byteOffset,r.byteLength)};I0.create=async function(e,t){let r=Od[e],n=await T0.get().subtle.importKey("raw",t,{name:"HMAC",hash:{name:r}},!1,["sign"]);return{async digest(i){return qd(n,i)},length:Ld[e]}}});var ae=T((dx,_0)=>{_0.exports={options:{usePureJavaScript:!1}}});var D0=T((yx,N0)=>{var vs={};N0.exports=vs;var R0={};vs.encode=function(e,t,r){if(typeof t!="string")throw new TypeError('"alphabet" must be a string.');if(r!==void 0&&typeof r!="number")throw new TypeError('"maxline" must be a number.');var n="";if(!(e instanceof Uint8Array))n=Md(e,t);else{var i=0,a=t.length,s=t.charAt(0),o=[0];for(i=0;i<e.length;++i){for(var u=0,c=e[i];u<o.length;++u)c+=o[u]<<8,o[u]=c%a,c=c/a|0;for(;c>0;)o.push(c%a),c=c/a|0}for(i=0;e[i]===0&&i<e.length-1;++i)n+=s;for(i=o.length-1;i>=0;--i)n+=t[o[i]]}if(r){var f=new RegExp(".{1,"+r+"}","g");n=n.match(f).join(`\r
`)}return n};vs.decode=function(e,t){if(typeof e!="string")throw new TypeError('"input" must be a string.');if(typeof t!="string")throw new TypeError('"alphabet" must be a string.');var r=R0[t];if(!r){r=R0[t]=[];for(var n=0;n<t.length;++n)r[t.charCodeAt(n)]=n}e=e.replace(/\s/g,"");for(var i=t.length,a=t.charAt(0),s=[0],n=0;n<e.length;n++){var o=r[e.charCodeAt(n)];if(o===void 0)return;for(var u=0,c=o;u<s.length;++u)c+=s[u]*i,s[u]=c&255,c>>=8;for(;c>0;)s.push(c&255),c>>=8}for(var f=0;e[f]===a&&f<e.length-1;++f)s.push(0);return typeof Buffer!="undefined"?Buffer.from(s.reverse()):new Uint8Array(s.reverse())};function Md(e,t){var r=0,n=t.length,i=t.charAt(0),a=[0];for(r=0;r<e.length();++r){for(var s=0,o=e.at(r);s<a.length;++s)o+=a[s]<<8,a[s]=o%n,o=o/n|0;for(;o>0;)a.push(o%n),o=o/n|0}var u="";for(r=0;e.at(r)===0&&r<e.length()-1;++r)u+=i;for(r=a.length-1;r>=0;--r)u+=t[a[r]];return u}});var Se=T((gx,U0)=>{var k0=ae(),P0=D0(),y=U0.exports=k0.util=k0.util||{};(function(){if(typeof process!="undefined"&&process.nextTick&&!process.browser){y.nextTick=process.nextTick,typeof setImmediate=="function"?y.setImmediate=setImmediate:y.setImmediate=y.nextTick;return}if(typeof setImmediate=="function"){y.setImmediate=function(){return setImmediate.apply(void 0,arguments)},y.nextTick=function(o){return setImmediate(o)};return}if(y.setImmediate=function(o){setTimeout(o,0)},typeof window!="undefined"&&typeof window.postMessage=="function"){let o=function(u){if(u.source===window&&u.data===e){u.stopPropagation();var c=t.slice();t.length=0,c.forEach(function(f){f()})}};var s=o,e="forge.setImmediate",t=[];y.setImmediate=function(u){t.push(u),t.length===1&&window.postMessage(e,"*")},window.addEventListener("message",o,!0)}if(typeof MutationObserver!="undefined"){var r=Date.now(),n=!0,i=document.createElement("div"),t=[];new MutationObserver(function(){var u=t.slice();t.length=0,u.forEach(function(c){c()})}).observe(i,{attributes:!0});var a=y.setImmediate;y.setImmediate=function(u){Date.now()-r>15?(r=Date.now(),a(u)):(t.push(u),t.length===1&&i.setAttribute("a",n=!n))}}y.nextTick=y.setImmediate})();y.isNodejs=typeof process!="undefined"&&process.versions&&process.versions.node;y.globalScope=function(){return y.isNodejs?globalThis:typeof self=="undefined"?window:self}();y.isArray=Array.isArray||function(e){return Object.prototype.toString.call(e)==="[object Array]"};y.isArrayBuffer=function(e){return typeof ArrayBuffer!="undefined"&&e instanceof ArrayBuffer};y.isArrayBufferView=function(e){return e&&y.isArrayBuffer(e.buffer)&&e.byteLength!==void 0};function Xn(e){if(!(e===8||e===16||e===24||e===32))throw new Error("Only 8, 16, 24, or 32 bits supported: "+e)}y.ByteBuffer=ms;function ms(e){if(this.data="",this.read=0,typeof e=="string")this.data=e;else if(y.isArrayBuffer(e)||y.isArrayBufferView(e))if(typeof Buffer!="undefined"&&e instanceof Buffer)this.data=e.toString("binary");else{var t=new Uint8Array(e);try{this.data=String.fromCharCode.apply(null,t)}catch(n){for(var r=0;r<t.length;++r)this.putByte(t[r])}}else(e instanceof ms||typeof e=="object"&&typeof e.data=="string"&&typeof e.read=="number")&&(this.data=e.data,this.read=e.read);this._constructedStringLength=0}y.ByteStringBuffer=ms;var Vd=4096;y.ByteStringBuffer.prototype._optimizeConstructedString=function(e){this._constructedStringLength+=e,this._constructedStringLength>Vd&&(this.data.substr(0,1),this._constructedStringLength=0)};y.ByteStringBuffer.prototype.length=function(){return this.data.length-this.read};y.ByteStringBuffer.prototype.isEmpty=function(){return this.length()<=0};y.ByteStringBuffer.prototype.putByte=function(e){return this.putBytes(String.fromCharCode(e))};y.ByteStringBuffer.prototype.fillWithByte=function(e,t){e=String.fromCharCode(e);for(var r=this.data;t>0;)t&1&&(r+=e),t>>>=1,t>0&&(e+=e);return this.data=r,this._optimizeConstructedString(t),this};y.ByteStringBuffer.prototype.putBytes=function(e){return this.data+=e,this._optimizeConstructedString(e.length),this};y.ByteStringBuffer.prototype.putString=function(e){return this.putBytes(y.encodeUtf8(e))};y.ByteStringBuffer.prototype.putInt16=function(e){return this.putBytes(String.fromCharCode(e>>8&255)+String.fromCharCode(e&255))};y.ByteStringBuffer.prototype.putInt24=function(e){return this.putBytes(String.fromCharCode(e>>16&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(e&255))};y.ByteStringBuffer.prototype.putInt32=function(e){return this.putBytes(String.fromCharCode(e>>24&255)+String.fromCharCode(e>>16&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(e&255))};y.ByteStringBuffer.prototype.putInt16Le=function(e){return this.putBytes(String.fromCharCode(e&255)+String.fromCharCode(e>>8&255))};y.ByteStringBuffer.prototype.putInt24Le=function(e){return this.putBytes(String.fromCharCode(e&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(e>>16&255))};y.ByteStringBuffer.prototype.putInt32Le=function(e){return this.putBytes(String.fromCharCode(e&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(e>>16&255)+String.fromCharCode(e>>24&255))};y.ByteStringBuffer.prototype.putInt=function(e,t){Xn(t);var r="";do t-=8,r+=String.fromCharCode(e>>t&255);while(t>0);return this.putBytes(r)};y.ByteStringBuffer.prototype.putSignedInt=function(e,t){return e<0&&(e+=2<<t-1),this.putInt(e,t)};y.ByteStringBuffer.prototype.putBuffer=function(e){return this.putBytes(e.getBytes())};y.ByteStringBuffer.prototype.getByte=function(){return this.data.charCodeAt(this.read++)};y.ByteStringBuffer.prototype.getInt16=function(){var e=this.data.charCodeAt(this.read)<<8^this.data.charCodeAt(this.read+1);return this.read+=2,e};y.ByteStringBuffer.prototype.getInt24=function(){var e=this.data.charCodeAt(this.read)<<16^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2);return this.read+=3,e};y.ByteStringBuffer.prototype.getInt32=function(){var e=this.data.charCodeAt(this.read)<<24^this.data.charCodeAt(this.read+1)<<16^this.data.charCodeAt(this.read+2)<<8^this.data.charCodeAt(this.read+3);return this.read+=4,e};y.ByteStringBuffer.prototype.getInt16Le=function(){var e=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8;return this.read+=2,e};y.ByteStringBuffer.prototype.getInt24Le=function(){var e=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16;return this.read+=3,e};y.ByteStringBuffer.prototype.getInt32Le=function(){var e=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16^this.data.charCodeAt(this.read+3)<<24;return this.read+=4,e};y.ByteStringBuffer.prototype.getInt=function(e){Xn(e);var t=0;do t=(t<<8)+this.data.charCodeAt(this.read++),e-=8;while(e>0);return t};y.ByteStringBuffer.prototype.getSignedInt=function(e){var t=this.getInt(e),r=2<<e-2;return t>=r&&(t-=r<<1),t};y.ByteStringBuffer.prototype.getBytes=function(e){var t;return e?(e=Math.min(this.length(),e),t=this.data.slice(this.read,this.read+e),this.read+=e):e===0?t="":(t=this.read===0?this.data:this.data.slice(this.read),this.clear()),t};y.ByteStringBuffer.prototype.bytes=function(e){return typeof e=="undefined"?this.data.slice(this.read):this.data.slice(this.read,this.read+e)};y.ByteStringBuffer.prototype.at=function(e){return this.data.charCodeAt(this.read+e)};y.ByteStringBuffer.prototype.setAt=function(e,t){return this.data=this.data.substr(0,this.read+e)+String.fromCharCode(t)+this.data.substr(this.read+e+1),this};y.ByteStringBuffer.prototype.last=function(){return this.data.charCodeAt(this.data.length-1)};y.ByteStringBuffer.prototype.copy=function(){var e=y.createBuffer(this.data);return e.read=this.read,e};y.ByteStringBuffer.prototype.compact=function(){return this.read>0&&(this.data=this.data.slice(this.read),this.read=0),this};y.ByteStringBuffer.prototype.clear=function(){return this.data="",this.read=0,this};y.ByteStringBuffer.prototype.truncate=function(e){var t=Math.max(0,this.length()-e);return this.data=this.data.substr(this.read,t),this.read=0,this};y.ByteStringBuffer.prototype.toHex=function(){for(var e="",t=this.read;t<this.data.length;++t){var r=this.data.charCodeAt(t);r<16&&(e+="0"),e+=r.toString(16)}return e};y.ByteStringBuffer.prototype.toString=function(){return y.decodeUtf8(this.bytes())};function zd(e,t){t=t||{},this.read=t.readOffset||0,this.growSize=t.growSize||1024;var r=y.isArrayBuffer(e),n=y.isArrayBufferView(e);if(r||n){r?this.data=new DataView(e):this.data=new DataView(e.buffer,e.byteOffset,e.byteLength),this.write="writeOffset"in t?t.writeOffset:this.data.byteLength;return}this.data=new DataView(new ArrayBuffer(0)),this.write=0,e!=null&&this.putBytes(e),"writeOffset"in t&&(this.write=t.writeOffset)}y.DataBuffer=zd;y.DataBuffer.prototype.length=function(){return this.write-this.read};y.DataBuffer.prototype.isEmpty=function(){return this.length()<=0};y.DataBuffer.prototype.accommodate=function(e,t){if(this.length()>=e)return this;t=Math.max(t||this.growSize,e);var r=new Uint8Array(this.data.buffer,this.data.byteOffset,this.data.byteLength),n=new Uint8Array(this.length()+t);return n.set(r),this.data=new DataView(n.buffer),this};y.DataBuffer.prototype.putByte=function(e){return this.accommodate(1),this.data.setUint8(this.write++,e),this};y.DataBuffer.prototype.fillWithByte=function(e,t){this.accommodate(t);for(var r=0;r<t;++r)this.data.setUint8(e);return this};y.DataBuffer.prototype.putBytes=function(e,t){if(y.isArrayBufferView(e)){var r=new Uint8Array(e.buffer,e.byteOffset,e.byteLength),n=r.byteLength-r.byteOffset;this.accommodate(n);var i=new Uint8Array(this.data.buffer,this.write);return i.set(r),this.write+=n,this}if(y.isArrayBuffer(e)){var r=new Uint8Array(e);this.accommodate(r.byteLength);var i=new Uint8Array(this.data.buffer);return i.set(r,this.write),this.write+=r.byteLength,this}if(e instanceof y.DataBuffer||typeof e=="object"&&typeof e.read=="number"&&typeof e.write=="number"&&y.isArrayBufferView(e.data)){var r=new Uint8Array(e.data.byteLength,e.read,e.length());this.accommodate(r.byteLength);var i=new Uint8Array(e.data.byteLength,this.write);return i.set(r),this.write+=r.byteLength,this}if(e instanceof y.ByteStringBuffer&&(e=e.data,t="binary"),t=t||"binary",typeof e=="string"){var a;if(t==="hex")return this.accommodate(Math.ceil(e.length/2)),a=new Uint8Array(this.data.buffer,this.write),this.write+=y.binary.hex.decode(e,a,this.write),this;if(t==="base64")return this.accommodate(Math.ceil(e.length/4)*3),a=new Uint8Array(this.data.buffer,this.write),this.write+=y.binary.base64.decode(e,a,this.write),this;if(t==="utf8"&&(e=y.encodeUtf8(e),t="binary"),t==="binary"||t==="raw")return this.accommodate(e.length),a=new Uint8Array(this.data.buffer,this.write),this.write+=y.binary.raw.decode(a),this;if(t==="utf16")return this.accommodate(e.length*2),a=new Uint16Array(this.data.buffer,this.write),this.write+=y.text.utf16.encode(a),this;throw new Error("Invalid encoding: "+t)}throw Error("Invalid parameter: "+e)};y.DataBuffer.prototype.putBuffer=function(e){return this.putBytes(e),e.clear(),this};y.DataBuffer.prototype.putString=function(e){return this.putBytes(e,"utf16")};y.DataBuffer.prototype.putInt16=function(e){return this.accommodate(2),this.data.setInt16(this.write,e),this.write+=2,this};y.DataBuffer.prototype.putInt24=function(e){return this.accommodate(3),this.data.setInt16(this.write,e>>8&65535),this.data.setInt8(this.write,e>>16&255),this.write+=3,this};y.DataBuffer.prototype.putInt32=function(e){return this.accommodate(4),this.data.setInt32(this.write,e),this.write+=4,this};y.DataBuffer.prototype.putInt16Le=function(e){return this.accommodate(2),this.data.setInt16(this.write,e,!0),this.write+=2,this};y.DataBuffer.prototype.putInt24Le=function(e){return this.accommodate(3),this.data.setInt8(this.write,e>>16&255),this.data.setInt16(this.write,e>>8&65535,!0),this.write+=3,this};y.DataBuffer.prototype.putInt32Le=function(e){return this.accommodate(4),this.data.setInt32(this.write,e,!0),this.write+=4,this};y.DataBuffer.prototype.putInt=function(e,t){Xn(t),this.accommodate(t/8);do t-=8,this.data.setInt8(this.write++,e>>t&255);while(t>0);return this};y.DataBuffer.prototype.putSignedInt=function(e,t){return Xn(t),this.accommodate(t/8),e<0&&(e+=2<<t-1),this.putInt(e,t)};y.DataBuffer.prototype.getByte=function(){return this.data.getInt8(this.read++)};y.DataBuffer.prototype.getInt16=function(){var e=this.data.getInt16(this.read);return this.read+=2,e};y.DataBuffer.prototype.getInt24=function(){var e=this.data.getInt16(this.read)<<8^this.data.getInt8(this.read+2);return this.read+=3,e};y.DataBuffer.prototype.getInt32=function(){var e=this.data.getInt32(this.read);return this.read+=4,e};y.DataBuffer.prototype.getInt16Le=function(){var e=this.data.getInt16(this.read,!0);return this.read+=2,e};y.DataBuffer.prototype.getInt24Le=function(){var e=this.data.getInt8(this.read)^this.data.getInt16(this.read+1,!0)<<8;return this.read+=3,e};y.DataBuffer.prototype.getInt32Le=function(){var e=this.data.getInt32(this.read,!0);return this.read+=4,e};y.DataBuffer.prototype.getInt=function(e){Xn(e);var t=0;do t=(t<<8)+this.data.getInt8(this.read++),e-=8;while(e>0);return t};y.DataBuffer.prototype.getSignedInt=function(e){var t=this.getInt(e),r=2<<e-2;return t>=r&&(t-=r<<1),t};y.DataBuffer.prototype.getBytes=function(e){var t;return e?(e=Math.min(this.length(),e),t=this.data.slice(this.read,this.read+e),this.read+=e):e===0?t="":(t=this.read===0?this.data:this.data.slice(this.read),this.clear()),t};y.DataBuffer.prototype.bytes=function(e){return typeof e=="undefined"?this.data.slice(this.read):this.data.slice(this.read,this.read+e)};y.DataBuffer.prototype.at=function(e){return this.data.getUint8(this.read+e)};y.DataBuffer.prototype.setAt=function(e,t){return this.data.setUint8(e,t),this};y.DataBuffer.prototype.last=function(){return this.data.getUint8(this.write-1)};y.DataBuffer.prototype.copy=function(){return new y.DataBuffer(this)};y.DataBuffer.prototype.compact=function(){if(this.read>0){var e=new Uint8Array(this.data.buffer,this.read),t=new Uint8Array(e.byteLength);t.set(e),this.data=new DataView(t),this.write-=this.read,this.read=0}return this};y.DataBuffer.prototype.clear=function(){return this.data=new DataView(new ArrayBuffer(0)),this.read=this.write=0,this};y.DataBuffer.prototype.truncate=function(e){return this.write=Math.max(0,this.length()-e),this.read=Math.min(this.read,this.write),this};y.DataBuffer.prototype.toHex=function(){for(var e="",t=this.read;t<this.data.byteLength;++t){var r=this.data.getUint8(t);r<16&&(e+="0"),e+=r.toString(16)}return e};y.DataBuffer.prototype.toString=function(e){var t=new Uint8Array(this.data,this.read,this.length());if(e=e||"utf8",e==="binary"||e==="raw")return y.binary.raw.encode(t);if(e==="hex")return y.binary.hex.encode(t);if(e==="base64")return y.binary.base64.encode(t);if(e==="utf8")return y.text.utf8.decode(t);if(e==="utf16")return y.text.utf16.decode(t);throw new Error("Invalid encoding: "+e)};y.createBuffer=function(e,t){return t=t||"raw",e!==void 0&&t==="utf8"&&(e=y.encodeUtf8(e)),new y.ByteBuffer(e)};y.fillString=function(e,t){for(var r="";t>0;)t&1&&(r+=e),t>>>=1,t>0&&(e+=e);return r};y.xorBytes=function(e,t,r){for(var n="",i="",a="",s=0,o=0;r>0;--r,++s)i=e.charCodeAt(s)^t.charCodeAt(s),o>=10&&(n+=a,a="",o=0),a+=String.fromCharCode(i),++o;return n+=a,n};y.hexToBytes=function(e){var t="",r=0;for(e.length&!0&&(r=1,t+=String.fromCharCode(parseInt(e[0],16)));r<e.length;r+=2)t+=String.fromCharCode(parseInt(e.substr(r,2),16));return t};y.bytesToHex=function(e){return y.createBuffer(e).toHex()};y.int32ToBytes=function(e){return String.fromCharCode(e>>24&255)+String.fromCharCode(e>>16&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(e&255)};var dr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",yr=[62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,64,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51],K0="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";y.encode64=function(e,t){for(var r="",n="",i,a,s,o=0;o<e.length;)i=e.charCodeAt(o++),a=e.charCodeAt(o++),s=e.charCodeAt(o++),r+=dr.charAt(i>>2),r+=dr.charAt((i&3)<<4|a>>4),isNaN(a)?r+="==":(r+=dr.charAt((a&15)<<2|s>>6),r+=isNaN(s)?"=":dr.charAt(s&63)),t&&r.length>t&&(n+=r.substr(0,t)+`\r
`,r=r.substr(t));return n+=r,n};y.decode64=function(e){e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");for(var t="",r,n,i,a,s=0;s<e.length;)r=yr[e.charCodeAt(s++)-43],n=yr[e.charCodeAt(s++)-43],i=yr[e.charCodeAt(s++)-43],a=yr[e.charCodeAt(s++)-43],t+=String.fromCharCode(r<<2|n>>4),i!==64&&(t+=String.fromCharCode((n&15)<<4|i>>2),a!==64&&(t+=String.fromCharCode((i&3)<<6|a)));return t};y.encodeUtf8=function(e){return unescape(encodeURIComponent(e))};y.decodeUtf8=function(e){return decodeURIComponent(escape(e))};y.binary={raw:{},hex:{},base64:{},base58:{},baseN:{encode:P0.encode,decode:P0.decode}};y.binary.raw.encode=function(e){return String.fromCharCode.apply(null,e)};y.binary.raw.decode=function(e,t,r){var n=t;n||(n=new Uint8Array(e.length)),r=r||0;for(var i=r,a=0;a<e.length;++a)n[i++]=e.charCodeAt(a);return t?i-r:n};y.binary.hex.encode=y.bytesToHex;y.binary.hex.decode=function(e,t,r){var n=t;n||(n=new Uint8Array(Math.ceil(e.length/2))),r=r||0;var i=0,a=r;for(e.length&1&&(i=1,n[a++]=parseInt(e[0],16));i<e.length;i+=2)n[a++]=parseInt(e.substr(i,2),16);return t?a-r:n};y.binary.base64.encode=function(e,t){for(var r="",n="",i,a,s,o=0;o<e.byteLength;)i=e[o++],a=e[o++],s=e[o++],r+=dr.charAt(i>>2),r+=dr.charAt((i&3)<<4|a>>4),isNaN(a)?r+="==":(r+=dr.charAt((a&15)<<2|s>>6),r+=isNaN(s)?"=":dr.charAt(s&63)),t&&r.length>t&&(n+=r.substr(0,t)+`\r
`,r=r.substr(t));return n+=r,n};y.binary.base64.decode=function(e,t,r){var n=t;n||(n=new Uint8Array(Math.ceil(e.length/4)*3)),e=e.replace(/[^A-Za-z0-9\+\/\=]/g,""),r=r||0;for(var i,a,s,o,u=0,c=r;u<e.length;)i=yr[e.charCodeAt(u++)-43],a=yr[e.charCodeAt(u++)-43],s=yr[e.charCodeAt(u++)-43],o=yr[e.charCodeAt(u++)-43],n[c++]=i<<2|a>>4,s!==64&&(n[c++]=(a&15)<<4|s>>2,o!==64&&(n[c++]=(s&3)<<6|o));return t?c-r:n.subarray(0,c)};y.binary.base58.encode=function(e,t){return y.binary.baseN.encode(e,K0,t)};y.binary.base58.decode=function(e,t){return y.binary.baseN.decode(e,K0,t)};y.text={utf8:{},utf16:{}};y.text.utf8.encode=function(e,t,r){e=y.encodeUtf8(e);var n=t;n||(n=new Uint8Array(e.length)),r=r||0;for(var i=r,a=0;a<e.length;++a)n[i++]=e.charCodeAt(a);return t?i-r:n};y.text.utf8.decode=function(e){return y.decodeUtf8(String.fromCharCode.apply(null,e))};y.text.utf16.encode=function(e,t,r){var n=t;n||(n=new Uint8Array(e.length*2));var i=new Uint16Array(n.buffer);r=r||0;for(var a=r,s=r,o=0;o<e.length;++o)i[s++]=e.charCodeAt(o),a+=2;return t?a-r:n};y.text.utf16.decode=function(e){return String.fromCharCode.apply(null,new Uint16Array(e.buffer))};y.deflate=function(e,t,r){if(t=y.decode64(e.deflate(y.encode64(t)).rval),r){var n=2,i=t.charCodeAt(1);i&32&&(n=6),t=t.substring(n,t.length-4)}return t};y.inflate=function(e,t,r){var n=e.inflate(y.encode64(t)).rval;return n===null?null:y.decode64(n)};var xs=function(e,t,r){if(!e)throw new Error("WebStorage not available.");var n;if(r===null?n=e.removeItem(t):(r=y.encode64(JSON.stringify(r)),n=e.setItem(t,r)),typeof n!="undefined"&&n.rval!==!0){var i=new Error(n.error.message);throw i.id=n.error.id,i.name=n.error.name,i}},bs=function(e,t){if(!e)throw new Error("WebStorage not available.");var r=e.getItem(t);if(e.init)if(r.rval===null){if(r.error){var n=new Error(r.error.message);throw n.id=r.error.id,n.name=r.error.name,n}r=null}else r=r.rval;return r!==null&&(r=JSON.parse(y.decode64(r))),r},Hd=function(e,t,r,n){var i=bs(e,t);i===null&&(i={}),i[r]=n,xs(e,t,i)},jd=function(e,t,r){var n=bs(e,t);return n!==null&&(n=r in n?n[r]:null),n},Gd=function(e,t,r){var n=bs(e,t);if(n!==null&&r in n){delete n[r];var i=!0;for(var a in n){i=!1;break}i&&(n=null),xs(e,t,n)}},$d=function(e,t){xs(e,t,null)},$i=function(e,t,r){var n=null;typeof r=="undefined"&&(r=["web","flash"]);var i,a=!1,s=null;for(var o in r){i=r[o];try{if(i==="flash"||i==="both"){if(t[0]===null)throw new Error("Flash local storage not available.");n=e.apply(this,t),a=i==="flash"}(i==="web"||i==="both")&&(t[0]=localStorage,n=e.apply(this,t),a=!0)}catch(u){s=u}if(a)break}if(!a)throw s;return n};y.setItem=function(e,t,r,n,i){$i(Hd,arguments,i)};y.getItem=function(e,t,r,n){return $i(jd,arguments,n)};y.removeItem=function(e,t,r,n){$i(Gd,arguments,n)};y.clearItems=function(e,t,r){$i($d,arguments,r)};y.parseUrl=function(e){var t=/^(https?):\/\/([^:&^\/]*):?(\d*)(.*)$/g;t.lastIndex=0;var r=t.exec(e),n=r===null?null:{full:e,scheme:r[1],host:r[2],port:r[3],path:r[4]};return n&&(n.fullHost=n.host,n.port?(n.port!==80&&n.scheme==="http"||n.port!==443&&n.scheme==="https")&&(n.fullHost+=":"+n.port):n.scheme==="http"?n.port=80:n.scheme==="https"&&(n.port=443),n.full=n.scheme+"://"+n.fullHost),n};var Wi=null;y.getQueryVariables=function(e){var t=function(n){for(var i={},a=n.split("&"),s=0;s<a.length;s++){var o=a[s].indexOf("="),u,c;o>0?(u=a[s].substring(0,o),c=a[s].substring(o+1)):(u=a[s],c=null),u in i||(i[u]=[]),!(u in Object.prototype)&&c!==null&&i[u].push(unescape(c))}return i},r;return typeof e=="undefined"?(Wi===null&&(typeof window!="undefined"&&window.location&&window.location.search?Wi=t(window.location.search.substring(1)):Wi={}),r=Wi):r=t(e),r};y.parseFragment=function(e){var t=e,r="",n=e.indexOf("?");n>0&&(t=e.substring(0,n),r=e.substring(n+1));var i=t.split("/");i.length>0&&i[0]===""&&i.shift();var a=r===""?{}:y.getQueryVariables(r);return{pathString:t,queryString:r,path:i,query:a}};y.makeRequest=function(e){var t=y.parseFragment(e),r={path:t.pathString,query:t.queryString,getPath:function(n){return typeof n=="undefined"?t.path:t.path[n]},getQuery:function(n,i){var a;return typeof n=="undefined"?a=t.query:(a=t.query[n],a&&typeof i!="undefined"&&(a=a[i])),a},getQueryLast:function(n,i){var a,s=r.getQuery(n);return s?a=s[s.length-1]:a=i,a}};return r};y.makeLink=function(e,t,r){e=jQuery.isArray(e)?e.join("/"):e;var n=jQuery.param(t||{});return r=r||"",e+(n.length>0?"?"+n:"")+(r.length>0?"#"+r:"")};y.isEmpty=function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0};y.format=function(e){for(var t=/%./g,r,n,i=0,a=[],s=0;r=t.exec(e);){n=e.substring(s,t.lastIndex-2),n.length>0&&a.push(n),s=t.lastIndex;var o=r[0][1];switch(o){case"s":case"o":i<arguments.length?a.push(arguments[i+++1]):a.push("<?>");break;case"%":a.push("%");break;default:a.push("<%"+o+"?>")}}return a.push(e.substring(s)),a.join("")};y.formatNumber=function(e,t,r,n){var i=e,a=isNaN(t=Math.abs(t))?2:t,s=r===void 0?",":r,o=n===void 0?".":n,u=i<0?"-":"",c=parseInt(i=Math.abs(+i||0).toFixed(a),10)+"",f=c.length>3?c.length%3:0;return u+(f?c.substr(0,f)+o:"")+c.substr(f).replace(/(\d{3})(?=\d)/g,"$1"+o)+(a?s+Math.abs(i-c).toFixed(a).slice(2):"")};y.formatSize=function(e){return e>=1073741824?e=y.formatNumber(e/1073741824,2,".","")+" GiB":e>=1048576?e=y.formatNumber(e/1048576,2,".","")+" MiB":e>=1024?e=y.formatNumber(e/1024,0)+" KiB":e=y.formatNumber(e,0)+" bytes",e};y.bytesFromIP=function(e){return e.indexOf(".")!==-1?y.bytesFromIPv4(e):e.indexOf(":")!==-1?y.bytesFromIPv6(e):null};y.bytesFromIPv4=function(e){if(e=e.split("."),e.length!==4)return null;for(var t=y.createBuffer(),r=0;r<e.length;++r){var n=parseInt(e[r],10);if(isNaN(n))return null;t.putByte(n)}return t.getBytes()};y.bytesFromIPv6=function(e){var t=0;e=e.split(":").filter(function(s){return s.length===0&&++t,!0});for(var r=(8-e.length+t)*2,n=y.createBuffer(),i=0;i<8;++i){if(!e[i]||e[i].length===0){n.fillWithByte(0,r),r=0;continue}var a=y.hexToBytes(e[i]);a.length<2&&n.putByte(0),n.putBytes(a)}return n.getBytes()};y.bytesToIP=function(e){return e.length===4?y.bytesToIPv4(e):e.length===16?y.bytesToIPv6(e):null};y.bytesToIPv4=function(e){if(e.length!==4)return null;for(var t=[],r=0;r<e.length;++r)t.push(e.charCodeAt(r));return t.join(".")};y.bytesToIPv6=function(e){if(e.length!==16)return null;for(var t=[],r=[],n=0,i=0;i<e.length;i+=2){for(var a=y.bytesToHex(e[i]+e[i+1]);a[0]==="0"&&a!=="0";)a=a.substr(1);if(a==="0"){var s=r[r.length-1],o=t.length;!s||o!==s.end+1?r.push({start:o,end:o}):(s.end=o,s.end-s.start>r[n].end-r[n].start&&(n=r.length-1))}t.push(a)}if(r.length>0){var u=r[n];u.end-u.start>0&&(t.splice(u.start,u.end-u.start+1,""),u.start===0&&t.unshift(""),u.end===7&&t.push(""))}return t.join(":")};y.estimateCores=function(e,t){if(typeof e=="function"&&(t=e,e={}),e=e||{},"cores"in y&&!e.update)return t(null,y.cores);if(typeof navigator!="undefined"&&"hardwareConcurrency"in navigator&&navigator.hardwareConcurrency>0)return y.cores=navigator.hardwareConcurrency,t(null,y.cores);if(typeof Worker=="undefined")return y.cores=1,t(null,y.cores);if(typeof Blob=="undefined")return y.cores=2,t(null,y.cores);var r=URL.createObjectURL(new Blob(["(",function(){self.addEventListener("message",function(s){for(var o=Date.now(),u=o+4;Date.now()<u;);self.postMessage({st:o,et:u})})}.toString(),")()"],{type:"application/javascript"}));n([],5,16);function n(s,o,u){if(o===0){var c=Math.floor(s.reduce(function(f,l){return f+l},0)/s.length);return y.cores=Math.max(1,c),URL.revokeObjectURL(r),t(null,y.cores)}i(u,function(f,l){s.push(a(u,l)),n(s,o-1,u)})}function i(s,o){for(var u=[],c=[],f=0;f<s;++f){var l=new Worker(r);l.addEventListener("message",function(h){if(c.push(h.data),c.length===s){for(var d=0;d<s;++d)u[d].terminate();o(null,c)}}),u.push(l)}for(var f=0;f<s;++f)u[f].postMessage(f)}function a(s,o){for(var u=[],c=0;c<s;++c)for(var f=o[c],l=u[c]=[],h=0;h<s;++h)if(c!==h){var d=o[h];(f.st>d.st&&f.st<d.et||d.st>f.st&&d.st<f.et)&&l.push(h)}return u.reduce(function(p,g){return Math.max(p,g.length)},0)}}});var Es=T((vx,F0)=>{var De=ae();Se();F0.exports=De.cipher=De.cipher||{};De.cipher.algorithms=De.cipher.algorithms||{};De.cipher.createCipher=function(e,t){var r=e;if(typeof r=="string"&&(r=De.cipher.getAlgorithm(r),r&&(r=r())),!r)throw new Error("Unsupported algorithm: "+e);return new De.cipher.BlockCipher({algorithm:r,key:t,decrypt:!1})};De.cipher.createDecipher=function(e,t){var r=e;if(typeof r=="string"&&(r=De.cipher.getAlgorithm(r),r&&(r=r())),!r)throw new Error("Unsupported algorithm: "+e);return new De.cipher.BlockCipher({algorithm:r,key:t,decrypt:!0})};De.cipher.registerAlgorithm=function(e,t){e=e.toUpperCase(),De.cipher.algorithms[e]=t};De.cipher.getAlgorithm=function(e){return e=e.toUpperCase(),e in De.cipher.algorithms?De.cipher.algorithms[e]:null};var ws=De.cipher.BlockCipher=function(e){this.algorithm=e.algorithm,this.mode=this.algorithm.mode,this.blockSize=this.mode.blockSize,this._finish=!1,this._input=null,this.output=null,this._op=e.decrypt?this.mode.decrypt:this.mode.encrypt,this._decrypt=e.decrypt,this.algorithm.initialize(e)};ws.prototype.start=function(e){e=e||{};var t={};for(var r in e)t[r]=e[r];t.decrypt=this._decrypt,this._finish=!1,this._input=De.util.createBuffer(),this.output=e.output||De.util.createBuffer(),this.mode.start(t)};ws.prototype.update=function(e){for(e&&this._input.putBuffer(e);!this._op.call(this.mode,this._input,this.output,this._finish)&&!this._finish;);this._input.compact()};ws.prototype.finish=function(e){e&&(this.mode.name==="ECB"||this.mode.name==="CBC")&&(this.mode.pad=function(r){return e(this.blockSize,r,!1)},this.mode.unpad=function(r){return e(this.blockSize,r,!0)});var t={};return t.decrypt=this._decrypt,t.overflow=this._input.length()%this.blockSize,!(!this._decrypt&&this.mode.pad&&!this.mode.pad(this._input,t)||(this._finish=!0,this.update(),this._decrypt&&this.mode.unpad&&!this.mode.unpad(this.output,t))||this.mode.afterFinish&&!this.mode.afterFinish(this.output,t))}});var Bs=T((mx,L0)=>{var ke=ae();Se();ke.cipher=ke.cipher||{};var W=L0.exports=ke.cipher.modes=ke.cipher.modes||{};W.ecb=function(e){e=e||{},this.name="ECB",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)};W.ecb.prototype.start=function(e){};W.ecb.prototype.encrypt=function(e,t,r){if(e.length()<this.blockSize&&!(r&&e.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=e.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(var n=0;n<this._ints;++n)t.putInt32(this._outBlock[n])};W.ecb.prototype.decrypt=function(e,t,r){if(e.length()<this.blockSize&&!(r&&e.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=e.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(var n=0;n<this._ints;++n)t.putInt32(this._outBlock[n])};W.ecb.prototype.pad=function(e,t){var r=e.length()===this.blockSize?this.blockSize:this.blockSize-e.length();return e.fillWithByte(r,r),!0};W.ecb.prototype.unpad=function(e,t){if(t.overflow>0)return!1;var r=e.length(),n=e.at(r-1);return n>this.blockSize<<2?!1:(e.truncate(n),!0)};W.cbc=function(e){e=e||{},this.name="CBC",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)};W.cbc.prototype.start=function(e){if(e.iv===null){if(!this._prev)throw new Error("Invalid IV parameter.");this._iv=this._prev.slice(0)}else if("iv"in e)this._iv=Yi(e.iv,this.blockSize),this._prev=this._iv.slice(0);else throw new Error("Invalid IV parameter.")};W.cbc.prototype.encrypt=function(e,t,r){if(e.length()<this.blockSize&&!(r&&e.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=this._prev[n]^e.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(var n=0;n<this._ints;++n)t.putInt32(this._outBlock[n]);this._prev=this._outBlock};W.cbc.prototype.decrypt=function(e,t,r){if(e.length()<this.blockSize&&!(r&&e.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=e.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(var n=0;n<this._ints;++n)t.putInt32(this._prev[n]^this._outBlock[n]);this._prev=this._inBlock.slice(0)};W.cbc.prototype.pad=function(e,t){var r=e.length()===this.blockSize?this.blockSize:this.blockSize-e.length();return e.fillWithByte(r,r),!0};W.cbc.prototype.unpad=function(e,t){if(t.overflow>0)return!1;var r=e.length(),n=e.at(r-1);return n>this.blockSize<<2?!1:(e.truncate(n),!0)};W.cfb=function(e){e=e||{},this.name="CFB",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialBlock=new Array(this._ints),this._partialOutput=ke.util.createBuffer(),this._partialBytes=0};W.cfb.prototype.start=function(e){if(!("iv"in e))throw new Error("Invalid IV parameter.");this._iv=Yi(e.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0};W.cfb.prototype.encrypt=function(e,t,r){var n=e.length();if(n===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize){for(var i=0;i<this._ints;++i)this._inBlock[i]=e.getInt32()^this._outBlock[i],t.putInt32(this._inBlock[i]);return}var a=(this.blockSize-n)%this.blockSize;a>0&&(a=this.blockSize-a),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialBlock[i]=e.getInt32()^this._outBlock[i],this._partialOutput.putInt32(this._partialBlock[i]);if(a>0)e.read-=this.blockSize;else for(var i=0;i<this._ints;++i)this._inBlock[i]=this._partialBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),a>0&&!r)return t.putBytes(this._partialOutput.getBytes(a-this._partialBytes)),this._partialBytes=a,!0;t.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0};W.cfb.prototype.decrypt=function(e,t,r){var n=e.length();if(n===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize){for(var i=0;i<this._ints;++i)this._inBlock[i]=e.getInt32(),t.putInt32(this._inBlock[i]^this._outBlock[i]);return}var a=(this.blockSize-n)%this.blockSize;a>0&&(a=this.blockSize-a),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialBlock[i]=e.getInt32(),this._partialOutput.putInt32(this._partialBlock[i]^this._outBlock[i]);if(a>0)e.read-=this.blockSize;else for(var i=0;i<this._ints;++i)this._inBlock[i]=this._partialBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),a>0&&!r)return t.putBytes(this._partialOutput.getBytes(a-this._partialBytes)),this._partialBytes=a,!0;t.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0};W.ofb=function(e){e=e||{},this.name="OFB",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=ke.util.createBuffer(),this._partialBytes=0};W.ofb.prototype.start=function(e){if(!("iv"in e))throw new Error("Invalid IV parameter.");this._iv=Yi(e.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0};W.ofb.prototype.encrypt=function(e,t,r){var n=e.length();if(e.length()===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize){for(var i=0;i<this._ints;++i)t.putInt32(e.getInt32()^this._outBlock[i]),this._inBlock[i]=this._outBlock[i];return}var a=(this.blockSize-n)%this.blockSize;a>0&&(a=this.blockSize-a),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialOutput.putInt32(e.getInt32()^this._outBlock[i]);if(a>0)e.read-=this.blockSize;else for(var i=0;i<this._ints;++i)this._inBlock[i]=this._outBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),a>0&&!r)return t.putBytes(this._partialOutput.getBytes(a-this._partialBytes)),this._partialBytes=a,!0;t.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0};W.ofb.prototype.decrypt=W.ofb.prototype.encrypt;W.ctr=function(e){e=e||{},this.name="CTR",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=ke.util.createBuffer(),this._partialBytes=0};W.ctr.prototype.start=function(e){if(!("iv"in e))throw new Error("Invalid IV parameter.");this._iv=Yi(e.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0};W.ctr.prototype.encrypt=function(e,t,r){var n=e.length();if(n===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize)for(var i=0;i<this._ints;++i)t.putInt32(e.getInt32()^this._outBlock[i]);else{var a=(this.blockSize-n)%this.blockSize;a>0&&(a=this.blockSize-a),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialOutput.putInt32(e.getInt32()^this._outBlock[i]);if(a>0&&(e.read-=this.blockSize),this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),a>0&&!r)return t.putBytes(this._partialOutput.getBytes(a-this._partialBytes)),this._partialBytes=a,!0;t.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}Zi(this._inBlock)};W.ctr.prototype.decrypt=W.ctr.prototype.encrypt;W.gcm=function(e){e=e||{},this.name="GCM",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints),this._partialOutput=ke.util.createBuffer(),this._partialBytes=0,this._R=3774873600};W.gcm.prototype.start=function(e){if(!("iv"in e))throw new Error("Invalid IV parameter.");var t=ke.util.createBuffer(e.iv);this._cipherLength=0;var r;if("additionalData"in e?r=ke.util.createBuffer(e.additionalData):r=ke.util.createBuffer(),"tagLength"in e?this._tagLength=e.tagLength:this._tagLength=128,this._tag=null,e.decrypt&&(this._tag=ke.util.createBuffer(e.tag).getBytes(),this._tag.length!==this._tagLength/8))throw new Error("Authentication tag does not match tag length.");this._hashBlock=new Array(this._ints),this.tag=null,this._hashSubkey=new Array(this._ints),this.cipher.encrypt([0,0,0,0],this._hashSubkey),this.componentBits=4,this._m=this.generateHashTable(this._hashSubkey,this.componentBits);var n=t.length();if(n===12)this._j0=[t.getInt32(),t.getInt32(),t.getInt32(),1];else{for(this._j0=[0,0,0,0];t.length()>0;)this._j0=this.ghash(this._hashSubkey,this._j0,[t.getInt32(),t.getInt32(),t.getInt32(),t.getInt32()]);this._j0=this.ghash(this._hashSubkey,this._j0,[0,0].concat(Ss(n*8)))}this._inBlock=this._j0.slice(0),Zi(this._inBlock),this._partialBytes=0,r=ke.util.createBuffer(r),this._aDataLength=Ss(r.length()*8);var i=r.length()%this.blockSize;for(i&&r.fillWithByte(0,this.blockSize-i),this._s=[0,0,0,0];r.length()>0;)this._s=this.ghash(this._hashSubkey,this._s,[r.getInt32(),r.getInt32(),r.getInt32(),r.getInt32()])};W.gcm.prototype.encrypt=function(e,t,r){var n=e.length();if(n===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize){for(var i=0;i<this._ints;++i)t.putInt32(this._outBlock[i]^=e.getInt32());this._cipherLength+=this.blockSize}else{var a=(this.blockSize-n)%this.blockSize;a>0&&(a=this.blockSize-a),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialOutput.putInt32(e.getInt32()^this._outBlock[i]);if(a<=0||r){if(r){var s=n%this.blockSize;this._cipherLength+=s,this._partialOutput.truncate(this.blockSize-s)}else this._cipherLength+=this.blockSize;for(var i=0;i<this._ints;++i)this._outBlock[i]=this._partialOutput.getInt32();this._partialOutput.read-=this.blockSize}if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),a>0&&!r)return e.read-=this.blockSize,t.putBytes(this._partialOutput.getBytes(a-this._partialBytes)),this._partialBytes=a,!0;t.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}this._s=this.ghash(this._hashSubkey,this._s,this._outBlock),Zi(this._inBlock)};W.gcm.prototype.decrypt=function(e,t,r){var n=e.length();if(n<this.blockSize&&!(r&&n>0))return!0;this.cipher.encrypt(this._inBlock,this._outBlock),Zi(this._inBlock),this._hashBlock[0]=e.getInt32(),this._hashBlock[1]=e.getInt32(),this._hashBlock[2]=e.getInt32(),this._hashBlock[3]=e.getInt32(),this._s=this.ghash(this._hashSubkey,this._s,this._hashBlock);for(var i=0;i<this._ints;++i)t.putInt32(this._outBlock[i]^this._hashBlock[i]);n<this.blockSize?this._cipherLength+=n%this.blockSize:this._cipherLength+=this.blockSize};W.gcm.prototype.afterFinish=function(e,t){var r=!0;t.decrypt&&t.overflow&&e.truncate(this.blockSize-t.overflow),this.tag=ke.util.createBuffer();var n=this._aDataLength.concat(Ss(this._cipherLength*8));this._s=this.ghash(this._hashSubkey,this._s,n);var i=[];this.cipher.encrypt(this._j0,i);for(var a=0;a<this._ints;++a)this.tag.putInt32(this._s[a]^i[a]);return this.tag.truncate(this.tag.length()%(this._tagLength/8)),t.decrypt&&this.tag.bytes()!==this._tag&&(r=!1),r};W.gcm.prototype.multiply=function(e,t){for(var r=[0,0,0,0],n=t.slice(0),i=0;i<128;++i){var a=e[i/32|0]&1<<31-i%32;a&&(r[0]^=n[0],r[1]^=n[1],r[2]^=n[2],r[3]^=n[3]),this.pow(n,n)}return r};W.gcm.prototype.pow=function(e,t){for(var r=e[3]&1,n=3;n>0;--n)t[n]=e[n]>>>1|(e[n-1]&1)<<31;t[0]=e[0]>>>1,r&&(t[0]^=this._R)};W.gcm.prototype.tableMultiply=function(e){for(var t=[0,0,0,0],r=0;r<32;++r){var n=r/8|0,i=e[n]>>>(7-r%8)*4&15,a=this._m[r][i];t[0]^=a[0],t[1]^=a[1],t[2]^=a[2],t[3]^=a[3]}return t};W.gcm.prototype.ghash=function(e,t,r){return t[0]^=r[0],t[1]^=r[1],t[2]^=r[2],t[3]^=r[3],this.tableMultiply(t)};W.gcm.prototype.generateHashTable=function(e,t){for(var r=8/t,n=4*r,i=16*r,a=new Array(i),s=0;s<i;++s){var o=[0,0,0,0],u=s/n|0,c=(n-1-s%n)*t;o[u]=1<<t-1<<c,a[s]=this.generateSubHashTable(this.multiply(o,e),t)}return a};W.gcm.prototype.generateSubHashTable=function(e,t){var r=1<<t,n=r>>>1,i=new Array(r);i[n]=e.slice(0);for(var a=n>>>1;a>0;)this.pow(i[2*a],i[a]=[]),a>>=1;for(a=2;a<n;){for(var s=1;s<a;++s){var o=i[a],u=i[s];i[a+s]=[o[0]^u[0],o[1]^u[1],o[2]^u[2],o[3]^u[3]]}a*=2}for(i[0]=[0,0,0,0],a=n+1;a<r;++a){var c=i[a^n];i[a]=[e[0]^c[0],e[1]^c[1],e[2]^c[2],e[3]^c[3]]}return i};function Yi(e,t){if(typeof e=="string"&&(e=ke.util.createBuffer(e)),ke.util.isArray(e)&&e.length>4){var r=e;e=ke.util.createBuffer();for(var n=0;n<r.length;++n)e.putByte(r[n])}if(e.length()<t)throw new Error("Invalid IV length; got "+e.length()+" bytes and expected "+t+" bytes.");if(!ke.util.isArray(e)){for(var i=[],a=t/4,n=0;n<a;++n)i.push(e.getInt32());e=i}return e}function Zi(e){e[e.length-1]=e[e.length-1]+1&4294967295}function Ss(e){return[e/4294967296|0,e&4294967295]}});var Xi=T((xx,V0)=>{var fe=ae();Es();Bs();Se();V0.exports=fe.aes=fe.aes||{};fe.aes.startEncrypting=function(e,t,r,n){var i=Qi({key:e,output:r,decrypt:!1,mode:n});return i.start(t),i};fe.aes.createEncryptionCipher=function(e,t){return Qi({key:e,output:null,decrypt:!1,mode:t})};fe.aes.startDecrypting=function(e,t,r,n){var i=Qi({key:e,output:r,decrypt:!0,mode:n});return i.start(t),i};fe.aes.createDecryptionCipher=function(e,t){return Qi({key:e,output:null,decrypt:!0,mode:t})};fe.aes.Algorithm=function(e,t){Cs||q0();var r=this;r.name=e,r.mode=new t({blockSize:16,cipher:{encrypt:function(n,i){return Ts(r._w,n,i,!1)},decrypt:function(n,i){return Ts(r._w,n,i,!0)}}}),r._init=!1};fe.aes.Algorithm.prototype.initialize=function(e){if(!this._init){var t=e.key,r;if(typeof t=="string"&&(t.length===16||t.length===24||t.length===32))t=fe.util.createBuffer(t);else if(fe.util.isArray(t)&&(t.length===16||t.length===24||t.length===32)){r=t,t=fe.util.createBuffer();for(var n=0;n<r.length;++n)t.putByte(r[n])}if(!fe.util.isArray(t)){r=t,t=[];var i=r.length();if(i===16||i===24||i===32){i=i>>>2;for(var n=0;n<i;++n)t.push(r.getInt32())}}if(!fe.util.isArray(t)||!(t.length===4||t.length===6||t.length===8))throw new Error("Invalid key parameter.");var a=this.mode.name,s=["CFB","OFB","CTR","GCM"].indexOf(a)!==-1;this._w=M0(t,e.decrypt&&!s),this._init=!0}};fe.aes._expandKey=function(e,t){return Cs||q0(),M0(e,t)};fe.aes._updateBlock=Ts;hn("AES-ECB",fe.cipher.modes.ecb);hn("AES-CBC",fe.cipher.modes.cbc);hn("AES-CFB",fe.cipher.modes.cfb);hn("AES-OFB",fe.cipher.modes.ofb);hn("AES-CTR",fe.cipher.modes.ctr);hn("AES-GCM",fe.cipher.modes.gcm);function hn(e,t){var r=function(){return new fe.aes.Algorithm(e,t)};fe.cipher.registerAlgorithm(e,r)}var Cs=!1,pn=4,ze,As,O0,Kr,Ct;function q0(){Cs=!0,O0=[0,1,2,4,8,16,32,64,128,27,54];for(var e=new Array(256),t=0;t<128;++t)e[t]=t<<1,e[t+128]=t+128<<1^283;ze=new Array(256),As=new Array(256),Kr=new Array(4),Ct=new Array(4);for(var t=0;t<4;++t)Kr[t]=new Array(256),Ct[t]=new Array(256);for(var r=0,n=0,i,a,s,o,u,c,f,t=0;t<256;++t){o=n^n<<1^n<<2^n<<3^n<<4,o=o>>8^o&255^99,ze[r]=o,As[o]=r,u=e[o],i=e[r],a=e[i],s=e[a],c=u<<24^o<<16^o<<8^(o^u),f=(i^a^s)<<24^(r^s)<<16^(r^a^s)<<8^(r^i^s);for(var l=0;l<4;++l)Kr[l][r]=c,Ct[l][o]=f,c=c<<24|c>>>8,f=f<<24|f>>>8;r===0?r=n=1:(r=i^e[e[e[i^s]]],n^=e[e[n]])}}function M0(e,t){for(var r=e.slice(0),n,i=1,a=r.length,s=a+6+1,o=pn*s,u=a;u<o;++u)n=r[u-1],u%a==0?(n=ze[n>>>16&255]<<24^ze[n>>>8&255]<<16^ze[n&255]<<8^ze[n>>>24]^O0[i]<<24,i++):a>6&&u%a==4&&(n=ze[n>>>24]<<24^ze[n>>>16&255]<<16^ze[n>>>8&255]<<8^ze[n&255]),r[u]=r[u-a]^n;if(t){var c,f=Ct[0],l=Ct[1],h=Ct[2],d=Ct[3],p=r.slice(0);o=r.length;for(var u=0,g=o-pn;u<o;u+=pn,g-=pn)if(u===0||u===o-pn)p[u]=r[g],p[u+1]=r[g+3],p[u+2]=r[g+2],p[u+3]=r[g+1];else for(var v=0;v<pn;++v)c=r[g+v],p[u+(3&-v)]=f[ze[c>>>24]]^l[ze[c>>>16&255]]^h[ze[c>>>8&255]]^d[ze[c&255]];r=p}return r}function Ts(e,t,r,n){var i=e.length/4-1,a,s,o,u,c;n?(a=Ct[0],s=Ct[1],o=Ct[2],u=Ct[3],c=As):(a=Kr[0],s=Kr[1],o=Kr[2],u=Kr[3],c=ze);var f,l,h,d,p,g,v;f=t[0]^e[0],l=t[n?3:1]^e[1],h=t[2]^e[2],d=t[n?1:3]^e[3];for(var x=3,S=1;S<i;++S)p=a[f>>>24]^s[l>>>16&255]^o[h>>>8&255]^u[d&255]^e[++x],g=a[l>>>24]^s[h>>>16&255]^o[d>>>8&255]^u[f&255]^e[++x],v=a[h>>>24]^s[d>>>16&255]^o[f>>>8&255]^u[l&255]^e[++x],d=a[d>>>24]^s[f>>>16&255]^o[l>>>8&255]^u[h&255]^e[++x],f=p,l=g,h=v;r[0]=c[f>>>24]<<24^c[l>>>16&255]<<16^c[h>>>8&255]<<8^c[d&255]^e[++x],r[n?3:1]=c[l>>>24]<<24^c[h>>>16&255]<<16^c[d>>>8&255]<<8^c[f&255]^e[++x],r[2]=c[h>>>24]<<24^c[d>>>16&255]<<16^c[f>>>8&255]<<8^c[l&255]^e[++x],r[n?1:3]=c[d>>>24]<<24^c[f>>>16&255]<<16^c[l>>>8&255]<<8^c[h&255]^e[++x]}function Qi(e){e=e||{};var t=(e.mode||"CBC").toUpperCase(),r="AES-"+t,n;e.decrypt?n=fe.cipher.createDecipher(r,e.key):n=fe.cipher.createCipher(r,e.key);var i=n.start;return n.start=function(a,s){var o=null;s instanceof fe.util.ByteBuffer&&(o=s,s={}),s=s||{},s.output=o,s.iv=a,i.call(n,s)},n}});var j0=T((bx,H0)=>{"use strict";Xi();var Ji=ae(),{toString:dn}=(St(),er),{fromString:z0}=(Bt(),tr);H0.exports={createCipheriv:(e,t,r)=>{let n=Ji.cipher.createCipher("AES-CTR",dn(t,"ascii"));return n.start({iv:dn(r,"ascii")}),{update:i=>(n.update(Ji.util.createBuffer(dn(i,"ascii"))),z0(n.output.getBytes(),"ascii"))}},createDecipheriv:(e,t,r)=>{let n=Ji.cipher.createDecipher("AES-CTR",dn(t,"ascii"));return n.start({iv:dn(r,"ascii")}),{update:i=>(n.update(Ji.util.createBuffer(dn(i,"ascii"))),z0(n.output.getBytes(),"ascii"))}}}});var Je=T((wx,$0)=>{"use strict";function G0(e,t){for(let r in t)Object.defineProperty(e,r,{value:t[r],enumerable:!0,configurable:!0});return e}function Wd(e,t,r){if(!e||typeof e=="string")throw new TypeError("Please pass an Error to err-code");r||(r={}),typeof t=="object"&&(r=t,t=""),t&&(r.code=t);try{return G0(e,r)}catch(n){r.message=e.message,r.stack=e.stack;let i=function(){};return i.prototype=Object.create(Object.getPrototypeOf(e)),G0(new i,r)}}$0.exports=Wd});var Z0=T((Ex,Y0)=>{"use strict";var Yd=Je(),W0={16:"aes-128-ctr",32:"aes-256-ctr"};Y0.exports=function(e){let t=W0[e.length];if(!t){let r=Object.entries(W0).map(([n,i])=>`${n} (${i})`).join(" / ");throw Yd(new Error(`Invalid key length ${e.length} bytes. Must be ${r}`),"ERR_INVALID_KEY_LENGTH")}return t}});var J0=T(X0=>{"use strict";var Q0=j0(),Zd=Z0();X0.create=async function(e,t){let r=Zd(e),n=Q0.createCipheriv(r,e,t),i=Q0.createDecipheriv(r,e,t);return{async encrypt(s){return n.update(s)},async decrypt(s){return i.update(s)}}}});var tu=T((Bx,eu)=>{"use strict";eu.exports=Qd;function Qd(e,t){for(var r=new Array(arguments.length-1),n=0,i=2,a=!0;i<arguments.length;)r[n++]=arguments[i++];return new Promise(function(o,u){r[n]=function(f){if(a)if(a=!1,f)u(f);else{for(var l=new Array(arguments.length-1),h=0;h<l.length;)l[h++]=arguments[h];o.apply(null,l)}};try{e.apply(t||null,r)}catch(c){a&&(a=!1,u(c))}})}});var au=T(iu=>{"use strict";var ea=iu;ea.length=function(t){var r=t.length;if(!r)return 0;for(var n=0;--r%4>1&&t.charAt(r)==="=";)++n;return Math.ceil(t.length*3)/4-n};var yn=new Array(64),ru=new Array(123);for(At=0;At<64;)ru[yn[At]=At<26?At+65:At<52?At+71:At<62?At-4:At-59|43]=At++;var At;ea.encode=function(t,r,n){for(var i=null,a=[],s=0,o=0,u;r<n;){var c=t[r++];switch(o){case 0:a[s++]=yn[c>>2],u=(c&3)<<4,o=1;break;case 1:a[s++]=yn[u|c>>4],u=(c&15)<<2,o=2;break;case 2:a[s++]=yn[u|c>>6],a[s++]=yn[c&63],o=0;break}s>8191&&((i||(i=[])).push(String.fromCharCode.apply(String,a)),s=0)}return o&&(a[s++]=yn[u],a[s++]=61,o===1&&(a[s++]=61)),i?(s&&i.push(String.fromCharCode.apply(String,a.slice(0,s))),i.join("")):String.fromCharCode.apply(String,a.slice(0,s))};var nu="invalid encoding";ea.decode=function(t,r,n){for(var i=n,a=0,s,o=0;o<t.length;){var u=t.charCodeAt(o++);if(u===61&&a>1)break;if((u=ru[u])===void 0)throw Error(nu);switch(a){case 0:s=u,a=1;break;case 1:r[n++]=s<<2|(u&48)>>4,s=u,a=2;break;case 2:r[n++]=(s&15)<<4|(u&60)>>2,s=u,a=3;break;case 3:r[n++]=(s&3)<<6|u,a=0;break}}if(a===1)throw Error(nu);return n-i};ea.test=function(t){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(t)}});var ou=T((Ax,su)=>{"use strict";su.exports=ta;function ta(){this._listeners={}}ta.prototype.on=function(t,r,n){return(this._listeners[t]||(this._listeners[t]=[])).push({fn:r,ctx:n||this}),this};ta.prototype.off=function(t,r){if(t===void 0)this._listeners={};else if(r===void 0)this._listeners[t]=[];else for(var n=this._listeners[t],i=0;i<n.length;)n[i].fn===r?n.splice(i,1):++i;return this};ta.prototype.emit=function(t){var r=this._listeners[t];if(r){for(var n=[],i=1;i<arguments.length;)n.push(arguments[i++]);for(i=0;i<r.length;)r[i].fn.apply(r[i++].ctx,n)}return this}});var du=T((Tx,pu)=>{"use strict";pu.exports=uu(uu);function uu(e){return typeof Float32Array!="undefined"?function(){var t=new Float32Array([-0]),r=new Uint8Array(t.buffer),n=r[3]===128;function i(u,c,f){t[0]=u,c[f]=r[0],c[f+1]=r[1],c[f+2]=r[2],c[f+3]=r[3]}function a(u,c,f){t[0]=u,c[f]=r[3],c[f+1]=r[2],c[f+2]=r[1],c[f+3]=r[0]}e.writeFloatLE=n?i:a,e.writeFloatBE=n?a:i;function s(u,c){return r[0]=u[c],r[1]=u[c+1],r[2]=u[c+2],r[3]=u[c+3],t[0]}function o(u,c){return r[3]=u[c],r[2]=u[c+1],r[1]=u[c+2],r[0]=u[c+3],t[0]}e.readFloatLE=n?s:o,e.readFloatBE=n?o:s}():function(){function t(n,i,a,s){var o=i<0?1:0;if(o&&(i=-i),i===0)n(1/i>0?0:2147483648,a,s);else if(isNaN(i))n(2143289344,a,s);else if(i>34028234663852886e22)n((o<<31|2139095040)>>>0,a,s);else if(i<11754943508222875e-54)n((o<<31|Math.round(i/1401298464324817e-60))>>>0,a,s);else{var u=Math.floor(Math.log(i)/Math.LN2),c=Math.round(i*Math.pow(2,-u)*8388608)&8388607;n((o<<31|u+127<<23|c)>>>0,a,s)}}e.writeFloatLE=t.bind(null,cu),e.writeFloatBE=t.bind(null,fu);function r(n,i,a){var s=n(i,a),o=(s>>31)*2+1,u=s>>>23&255,c=s&8388607;return u===255?c?NaN:o*(1/0):u===0?o*1401298464324817e-60*c:o*Math.pow(2,u-150)*(c+8388608)}e.readFloatLE=r.bind(null,lu),e.readFloatBE=r.bind(null,hu)}(),typeof Float64Array!="undefined"?function(){var t=new Float64Array([-0]),r=new Uint8Array(t.buffer),n=r[7]===128;function i(u,c,f){t[0]=u,c[f]=r[0],c[f+1]=r[1],c[f+2]=r[2],c[f+3]=r[3],c[f+4]=r[4],c[f+5]=r[5],c[f+6]=r[6],c[f+7]=r[7]}function a(u,c,f){t[0]=u,c[f]=r[7],c[f+1]=r[6],c[f+2]=r[5],c[f+3]=r[4],c[f+4]=r[3],c[f+5]=r[2],c[f+6]=r[1],c[f+7]=r[0]}e.writeDoubleLE=n?i:a,e.writeDoubleBE=n?a:i;function s(u,c){return r[0]=u[c],r[1]=u[c+1],r[2]=u[c+2],r[3]=u[c+3],r[4]=u[c+4],r[5]=u[c+5],r[6]=u[c+6],r[7]=u[c+7],t[0]}function o(u,c){return r[7]=u[c],r[6]=u[c+1],r[5]=u[c+2],r[4]=u[c+3],r[3]=u[c+4],r[2]=u[c+5],r[1]=u[c+6],r[0]=u[c+7],t[0]}e.readDoubleLE=n?s:o,e.readDoubleBE=n?o:s}():function(){function t(n,i,a,s,o,u){var c=s<0?1:0;if(c&&(s=-s),s===0)n(0,o,u+i),n(1/s>0?0:2147483648,o,u+a);else if(isNaN(s))n(0,o,u+i),n(2146959360,o,u+a);else if(s>17976931348623157e292)n(0,o,u+i),n((c<<31|2146435072)>>>0,o,u+a);else{var f;if(s<22250738585072014e-324)f=s/5e-324,n(f>>>0,o,u+i),n((c<<31|f/4294967296)>>>0,o,u+a);else{var l=Math.floor(Math.log(s)/Math.LN2);l===1024&&(l=1023),f=s*Math.pow(2,-l),n(f*4503599627370496>>>0,o,u+i),n((c<<31|l+1023<<20|f*1048576&1048575)>>>0,o,u+a)}}}e.writeDoubleLE=t.bind(null,cu,0,4),e.writeDoubleBE=t.bind(null,fu,4,0);function r(n,i,a,s,o){var u=n(s,o+i),c=n(s,o+a),f=(c>>31)*2+1,l=c>>>20&2047,h=4294967296*(c&1048575)+u;return l===2047?h?NaN:f*(1/0):l===0?f*5e-324*h:f*Math.pow(2,l-1075)*(h+4503599627370496)}e.readDoubleLE=r.bind(null,lu,0,4),e.readDoubleBE=r.bind(null,hu,4,0)}(),e}function cu(e,t,r){t[r]=e&255,t[r+1]=e>>>8&255,t[r+2]=e>>>16&255,t[r+3]=e>>>24}function fu(e,t,r){t[r]=e>>>24,t[r+1]=e>>>16&255,t[r+2]=e>>>8&255,t[r+3]=e&255}function lu(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24)>>>0}function hu(e,t){return(e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3])>>>0}});var yu=T((exports,module)=>{"use strict";module.exports=inquire;function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(e){}return null}});var vu=T(gu=>{"use strict";var Is=gu;Is.length=function(t){for(var r=0,n=0,i=0;i<t.length;++i)n=t.charCodeAt(i),n<128?r+=1:n<2048?r+=2:(n&64512)==55296&&(t.charCodeAt(i+1)&64512)==56320?(++i,r+=4):r+=3;return r};Is.read=function(t,r,n){var i=n-r;if(i<1)return"";for(var a=null,s=[],o=0,u;r<n;)u=t[r++],u<128?s[o++]=u:u>191&&u<224?s[o++]=(u&31)<<6|t[r++]&63:u>239&&u<365?(u=((u&7)<<18|(t[r++]&63)<<12|(t[r++]&63)<<6|t[r++]&63)-65536,s[o++]=55296+(u>>10),s[o++]=56320+(u&1023)):s[o++]=(u&15)<<12|(t[r++]&63)<<6|t[r++]&63,o>8191&&((a||(a=[])).push(String.fromCharCode.apply(String,s)),o=0);return a?(o&&a.push(String.fromCharCode.apply(String,s.slice(0,o))),a.join("")):String.fromCharCode.apply(String,s.slice(0,o))};Is.write=function(t,r,n){for(var i=n,a,s,o=0;o<t.length;++o)a=t.charCodeAt(o),a<128?r[n++]=a:a<2048?(r[n++]=a>>6|192,r[n++]=a&63|128):(a&64512)==55296&&((s=t.charCodeAt(o+1))&64512)==56320?(a=65536+((a&1023)<<10)+(s&1023),++o,r[n++]=a>>18|240,r[n++]=a>>12&63|128,r[n++]=a>>6&63|128,r[n++]=a&63|128):(r[n++]=a>>12|224,r[n++]=a>>6&63|128,r[n++]=a&63|128);return n-i}});var xu=T((_x,mu)=>{"use strict";mu.exports=Xd;function Xd(e,t,r){var n=r||8192,i=n>>>1,a=null,s=n;return function(u){if(u<1||u>i)return e(u);s+u>n&&(a=e(n),s=0);var c=t.call(a,s,s+=u);return s&7&&(s=(s|7)+1),c}}});var wu=T((Rx,bu)=>{"use strict";bu.exports=Pe;var Jn=vr();function Pe(e,t){this.lo=e>>>0,this.hi=t>>>0}var Ur=Pe.zero=new Pe(0,0);Ur.toNumber=function(){return 0};Ur.zzEncode=Ur.zzDecode=function(){return this};Ur.length=function(){return 1};var Jd=Pe.zeroHash="\0\0\0\0\0\0\0\0";Pe.fromNumber=function(t){if(t===0)return Ur;var r=t<0;r&&(t=-t);var n=t>>>0,i=(t-n)/4294967296>>>0;return r&&(i=~i>>>0,n=~n>>>0,++n>4294967295&&(n=0,++i>4294967295&&(i=0))),new Pe(n,i)};Pe.from=function(t){if(typeof t=="number")return Pe.fromNumber(t);if(Jn.isString(t))if(Jn.Long)t=Jn.Long.fromString(t);else return Pe.fromNumber(parseInt(t,10));return t.low||t.high?new Pe(t.low>>>0,t.high>>>0):Ur};Pe.prototype.toNumber=function(t){if(!t&&this.hi>>>31){var r=~this.lo+1>>>0,n=~this.hi>>>0;return r||(n=n+1>>>0),-(r+n*4294967296)}return this.lo+this.hi*4294967296};Pe.prototype.toLong=function(t){return Jn.Long?new Jn.Long(this.lo|0,this.hi|0,Boolean(t)):{low:this.lo|0,high:this.hi|0,unsigned:Boolean(t)}};var gr=String.prototype.charCodeAt;Pe.fromHash=function(t){return t===Jd?Ur:new Pe((gr.call(t,0)|gr.call(t,1)<<8|gr.call(t,2)<<16|gr.call(t,3)<<24)>>>0,(gr.call(t,4)|gr.call(t,5)<<8|gr.call(t,6)<<16|gr.call(t,7)<<24)>>>0)};Pe.prototype.toHash=function(){return String.fromCharCode(this.lo&255,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,this.hi&255,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)};Pe.prototype.zzEncode=function(){var t=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^t)>>>0,this.lo=(this.lo<<1^t)>>>0,this};Pe.prototype.zzDecode=function(){var t=-(this.lo&1);return this.lo=((this.lo>>>1|this.hi<<31)^t)>>>0,this.hi=(this.hi>>>1^t)>>>0,this};Pe.prototype.length=function(){var t=this.lo,r=(this.lo>>>28|this.hi<<4)>>>0,n=this.hi>>>24;return n===0?r===0?t<16384?t<128?1:2:t<2097152?3:4:r<16384?r<128?5:6:r<2097152?7:8:n<128?9:10}});var vr=T(_s=>{"use strict";var F=_s;F.asPromise=tu();F.base64=au();F.EventEmitter=ou();F.float=du();F.inquire=yu();F.utf8=vu();F.pool=xu();F.LongBits=wu();F.isNode=Boolean(typeof globalThis!="undefined"&&globalThis&&globalThis.process&&globalThis.process.versions&&globalThis.process.versions.node);F.global=F.isNode&&globalThis||typeof window!="undefined"&&window||typeof self!="undefined"&&self||_s;F.emptyArray=Object.freeze?Object.freeze([]):[];F.emptyObject=Object.freeze?Object.freeze({}):{};F.isInteger=Number.isInteger||function(t){return typeof t=="number"&&isFinite(t)&&Math.floor(t)===t};F.isString=function(t){return typeof t=="string"||t instanceof String};F.isObject=function(t){return t&&typeof t=="object"};F.isset=F.isSet=function(t,r){var n=t[r];return n!=null&&t.hasOwnProperty(r)?typeof n!="object"||(Array.isArray(n)?n.length:Object.keys(n).length)>0:!1};F.Buffer=function(){try{var e=F.inquire("buffer").Buffer;return e.prototype.utf8Write?e:null}catch(t){return null}}();F._Buffer_from=null;F._Buffer_allocUnsafe=null;F.newBuffer=function(t){return typeof t=="number"?F.Buffer?F._Buffer_allocUnsafe(t):new F.Array(t):F.Buffer?F._Buffer_from(t):typeof Uint8Array=="undefined"?t:new Uint8Array(t)};F.Array=typeof Uint8Array!="undefined"?Uint8Array:Array;F.Long=F.global.dcodeIO&&F.global.dcodeIO.Long||F.global.Long||F.inquire("long");F.key2Re=/^true|false|0|1$/;F.key32Re=/^-?(?:0|[1-9][0-9]*)$/;F.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/;F.longToHash=function(t){return t?F.LongBits.from(t).toHash():F.LongBits.zeroHash};F.longFromHash=function(t,r){var n=F.LongBits.fromHash(t);return F.Long?F.Long.fromBits(n.lo,n.hi,r):n.toNumber(Boolean(r))};function Eu(e,t,r){for(var n=Object.keys(t),i=0;i<n.length;++i)(e[n[i]]===void 0||!r)&&(e[n[i]]=t[n[i]]);return e}F.merge=Eu;F.lcFirst=function(t){return t.charAt(0).toLowerCase()+t.substring(1)};function Su(e){function t(r,n){if(!(this instanceof t))return new t(r,n);Object.defineProperty(this,"message",{get:function(){return r}}),Error.captureStackTrace?Error.captureStackTrace(this,t):Object.defineProperty(this,"stack",{value:new Error().stack||""}),n&&Eu(this,n)}return(t.prototype=Object.create(Error.prototype)).constructor=t,Object.defineProperty(t.prototype,"name",{get:function(){return e}}),t.prototype.toString=function(){return this.name+": "+this.message},t}F.newError=Su;F.ProtocolError=Su("ProtocolError");F.oneOfGetter=function(t){for(var r={},n=0;n<t.length;++n)r[t[n]]=1;return function(){for(var i=Object.keys(this),a=i.length-1;a>-1;--a)if(r[i[a]]===1&&this[i[a]]!==void 0&&this[i[a]]!==null)return i[a]}};F.oneOfSetter=function(t){return function(r){for(var n=0;n<t.length;++n)t[n]!==r&&delete this[t[n]]}};F.toJSONOptions={longs:String,enums:String,bytes:String,json:!0};F._configure=function(){var e=F.Buffer;if(!e){F._Buffer_from=F._Buffer_allocUnsafe=null;return}F._Buffer_from=e.from!==Uint8Array.from&&e.from||function(r,n){return new e(r,n)},F._Buffer_allocUnsafe=e.allocUnsafe||function(r){return new e(r)}}});var Us=T((Dx,Tu)=>{"use strict";Tu.exports=Q;var ot=vr(),Rs,ra=ot.LongBits,Bu=ot.base64,Cu=ot.utf8;function ei(e,t,r){this.fn=e,this.len=t,this.next=void 0,this.val=r}function Ns(){}function ey(e){this.head=e.head,this.tail=e.tail,this.len=e.len,this.next=e.states}function Q(){this.len=0,this.head=new ei(Ns,0,0),this.tail=this.head,this.states=null}var Au=function(){return ot.Buffer?function(){return(Q.create=function(){return new Rs})()}:function(){return new Q}};Q.create=Au();Q.alloc=function(t){return new ot.Array(t)};ot.Array!==Array&&(Q.alloc=ot.pool(Q.alloc,ot.Array.prototype.subarray));Q.prototype._push=function(t,r,n){return this.tail=this.tail.next=new ei(t,r,n),this.len+=r,this};function Ds(e,t,r){t[r]=e&255}function ty(e,t,r){for(;e>127;)t[r++]=e&127|128,e>>>=7;t[r]=e}function ks(e,t){this.len=e,this.next=void 0,this.val=t}ks.prototype=Object.create(ei.prototype);ks.prototype.fn=ty;Q.prototype.uint32=function(t){return this.len+=(this.tail=this.tail.next=new ks((t=t>>>0)<128?1:t<16384?2:t<2097152?3:t<268435456?4:5,t)).len,this};Q.prototype.int32=function(t){return t<0?this._push(Ps,10,ra.fromNumber(t)):this.uint32(t)};Q.prototype.sint32=function(t){return this.uint32((t<<1^t>>31)>>>0)};function Ps(e,t,r){for(;e.hi;)t[r++]=e.lo&127|128,e.lo=(e.lo>>>7|e.hi<<25)>>>0,e.hi>>>=7;for(;e.lo>127;)t[r++]=e.lo&127|128,e.lo=e.lo>>>7;t[r++]=e.lo}Q.prototype.uint64=function(t){var r=ra.from(t);return this._push(Ps,r.length(),r)};Q.prototype.int64=Q.prototype.uint64;Q.prototype.sint64=function(t){var r=ra.from(t).zzEncode();return this._push(Ps,r.length(),r)};Q.prototype.bool=function(t){return this._push(Ds,1,t?1:0)};function Ks(e,t,r){t[r]=e&255,t[r+1]=e>>>8&255,t[r+2]=e>>>16&255,t[r+3]=e>>>24}Q.prototype.fixed32=function(t){return this._push(Ks,4,t>>>0)};Q.prototype.sfixed32=Q.prototype.fixed32;Q.prototype.fixed64=function(t){var r=ra.from(t);return this._push(Ks,4,r.lo)._push(Ks,4,r.hi)};Q.prototype.sfixed64=Q.prototype.fixed64;Q.prototype.float=function(t){return this._push(ot.float.writeFloatLE,4,t)};Q.prototype.double=function(t){return this._push(ot.float.writeDoubleLE,8,t)};var ry=ot.Array.prototype.set?function(t,r,n){r.set(t,n)}:function(t,r,n){for(var i=0;i<t.length;++i)r[n+i]=t[i]};Q.prototype.bytes=function(t){var r=t.length>>>0;if(!r)return this._push(Ds,1,0);if(ot.isString(t)){var n=Q.alloc(r=Bu.length(t));Bu.decode(t,n,0),t=n}return this.uint32(r)._push(ry,r,t)};Q.prototype.string=function(t){var r=Cu.length(t);return r?this.uint32(r)._push(Cu.write,r,t):this._push(Ds,1,0)};Q.prototype.fork=function(){return this.states=new ey(this),this.head=this.tail=new ei(Ns,0,0),this.len=0,this};Q.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new ei(Ns,0,0),this.len=0),this};Q.prototype.ldelim=function(){var t=this.head,r=this.tail,n=this.len;return this.reset().uint32(n),n&&(this.tail.next=t.next,this.tail=r,this.len+=n),this};Q.prototype.finish=function(){for(var t=this.head.next,r=this.constructor.alloc(this.len),n=0;t;)t.fn(t.val,r,n),n+=t.len,t=t.next;return r};Q._configure=function(e){Rs=e,Q.create=Au(),Rs._configure()}});var Ru=T((kx,_u)=>{"use strict";_u.exports=Kt;var Iu=Us();(Kt.prototype=Object.create(Iu.prototype)).constructor=Kt;var mr=vr();function Kt(){Iu.call(this)}Kt._configure=function(){Kt.alloc=mr._Buffer_allocUnsafe,Kt.writeBytesBuffer=mr.Buffer&&mr.Buffer.prototype instanceof Uint8Array&&mr.Buffer.prototype.set.name==="set"?function(t,r,n){r.set(t,n)}:function(t,r,n){if(t.copy)t.copy(r,n,0,t.length);else for(var i=0;i<t.length;)r[n++]=t[i++]}};Kt.prototype.bytes=function(t){mr.isString(t)&&(t=mr._Buffer_from(t,"base64"));var r=t.length>>>0;return this.uint32(r),r&&this._push(Kt.writeBytesBuffer,r,t),this};function ny(e,t,r){e.length<40?mr.utf8.write(e,t,r):t.utf8Write?t.utf8Write(e,r):t.write(e,r)}Kt.prototype.string=function(t){var r=mr.Buffer.byteLength(t);return this.uint32(r),r&&this._push(ny,r,t),this};Kt._configure()});var Os=T((Px,Ku)=>{"use strict";Ku.exports=Be;var Ut=vr(),Fs,Nu=Ut.LongBits,iy=Ut.utf8;function Tt(e,t){return RangeError("index out of range: "+e.pos+" + "+(t||1)+" > "+e.len)}function Be(e){this.buf=e,this.pos=0,this.len=e.length}var Du=typeof Uint8Array!="undefined"?function(t){if(t instanceof Uint8Array||Array.isArray(t))return new Be(t);throw Error("illegal buffer")}:function(t){if(Array.isArray(t))return new Be(t);throw Error("illegal buffer")},ku=function(){return Ut.Buffer?function(r){return(Be.create=function(i){return Ut.Buffer.isBuffer(i)?new Fs(i):Du(i)})(r)}:Du};Be.create=ku();Be.prototype._slice=Ut.Array.prototype.subarray||Ut.Array.prototype.slice;Be.prototype.uint32=function(){var t=4294967295;return function(){if(t=(this.buf[this.pos]&127)>>>0,this.buf[this.pos++]<128||(t=(t|(this.buf[this.pos]&127)<<7)>>>0,this.buf[this.pos++]<128)||(t=(t|(this.buf[this.pos]&127)<<14)>>>0,this.buf[this.pos++]<128)||(t=(t|(this.buf[this.pos]&127)<<21)>>>0,this.buf[this.pos++]<128)||(t=(t|(this.buf[this.pos]&15)<<28)>>>0,this.buf[this.pos++]<128))return t;if((this.pos+=5)>this.len)throw this.pos=this.len,Tt(this,10);return t}}();Be.prototype.int32=function(){return this.uint32()|0};Be.prototype.sint32=function(){var t=this.uint32();return t>>>1^-(t&1)|0};function Ls(){var e=new Nu(0,0),t=0;if(this.len-this.pos>4){for(;t<4;++t)if(e.lo=(e.lo|(this.buf[this.pos]&127)<<t*7)>>>0,this.buf[this.pos++]<128)return e;if(e.lo=(e.lo|(this.buf[this.pos]&127)<<28)>>>0,e.hi=(e.hi|(this.buf[this.pos]&127)>>4)>>>0,this.buf[this.pos++]<128)return e;t=0}else{for(;t<3;++t){if(this.pos>=this.len)throw Tt(this);if(e.lo=(e.lo|(this.buf[this.pos]&127)<<t*7)>>>0,this.buf[this.pos++]<128)return e}return e.lo=(e.lo|(this.buf[this.pos++]&127)<<t*7)>>>0,e}if(this.len-this.pos>4){for(;t<5;++t)if(e.hi=(e.hi|(this.buf[this.pos]&127)<<t*7+3)>>>0,this.buf[this.pos++]<128)return e}else for(;t<5;++t){if(this.pos>=this.len)throw Tt(this);if(e.hi=(e.hi|(this.buf[this.pos]&127)<<t*7+3)>>>0,this.buf[this.pos++]<128)return e}throw Error("invalid varint encoding")}Be.prototype.bool=function(){return this.uint32()!==0};function na(e,t){return(e[t-4]|e[t-3]<<8|e[t-2]<<16|e[t-1]<<24)>>>0}Be.prototype.fixed32=function(){if(this.pos+4>this.len)throw Tt(this,4);return na(this.buf,this.pos+=4)};Be.prototype.sfixed32=function(){if(this.pos+4>this.len)throw Tt(this,4);return na(this.buf,this.pos+=4)|0};function Pu(){if(this.pos+8>this.len)throw Tt(this,8);return new Nu(na(this.buf,this.pos+=4),na(this.buf,this.pos+=4))}Be.prototype.float=function(){if(this.pos+4>this.len)throw Tt(this,4);var t=Ut.float.readFloatLE(this.buf,this.pos);return this.pos+=4,t};Be.prototype.double=function(){if(this.pos+8>this.len)throw Tt(this,4);var t=Ut.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,t};Be.prototype.bytes=function(){var t=this.uint32(),r=this.pos,n=this.pos+t;if(n>this.len)throw Tt(this,t);return this.pos+=t,Array.isArray(this.buf)?this.buf.slice(r,n):r===n?new this.buf.constructor(0):this._slice.call(this.buf,r,n)};Be.prototype.string=function(){var t=this.bytes();return iy.read(t,0,t.length)};Be.prototype.skip=function(t){if(typeof t=="number"){if(this.pos+t>this.len)throw Tt(this,t);this.pos+=t}else do if(this.pos>=this.len)throw Tt(this);while(this.buf[this.pos++]&128);return this};Be.prototype.skipType=function(e){switch(e){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(e=this.uint32()&7)!=4;)this.skipType(e);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+e+" at offset "+this.pos)}return this};Be._configure=function(e){Fs=e,Be.create=ku(),Fs._configure();var t=Ut.Long?"toLong":"toNumber";Ut.merge(Be.prototype,{int64:function(){return Ls.call(this)[t](!1)},uint64:function(){return Ls.call(this)[t](!0)},sint64:function(){return Ls.call(this).zzDecode()[t](!1)},fixed64:function(){return Pu.call(this)[t](!0)},sfixed64:function(){return Pu.call(this)[t](!1)}})}});var Ou=T((Kx,Lu)=>{"use strict";Lu.exports=Fr;var Uu=Os();(Fr.prototype=Object.create(Uu.prototype)).constructor=Fr;var Fu=vr();function Fr(e){Uu.call(this,e)}Fr._configure=function(){Fu.Buffer&&(Fr.prototype._slice=Fu.Buffer.prototype.slice)};Fr.prototype.string=function(){var t=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+t,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+t,this.len))};Fr._configure()});var Mu=T((Ux,qu)=>{"use strict";qu.exports=ti;var qs=vr();(ti.prototype=Object.create(qs.EventEmitter.prototype)).constructor=ti;function ti(e,t,r){if(typeof e!="function")throw TypeError("rpcImpl must be a function");qs.EventEmitter.call(this),this.rpcImpl=e,this.requestDelimited=Boolean(t),this.responseDelimited=Boolean(r)}ti.prototype.rpcCall=function e(t,r,n,i,a){if(!i)throw TypeError("request must be specified");var s=this;if(!a)return qs.asPromise(e,s,t,r,n,i);if(!s.rpcImpl){setTimeout(function(){a(Error("already ended"))},0);return}try{return s.rpcImpl(t,r[s.requestDelimited?"encodeDelimited":"encode"](i).finish(),function(u,c){if(u)return s.emit("error",u,t),a(u);if(c===null){s.end(!0);return}if(!(c instanceof n))try{c=n[s.responseDelimited?"decodeDelimited":"decode"](c)}catch(f){return s.emit("error",f,t),a(f)}return s.emit("data",c,t),a(null,c)})}catch(o){s.emit("error",o,t),setTimeout(function(){a(o)},0);return}};ti.prototype.end=function(t){return this.rpcImpl&&(t||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}});var zu=T(Vu=>{"use strict";var ay=Vu;ay.Service=Mu()});var ju=T((Lx,Hu)=>{"use strict";Hu.exports={}});var Wu=T($u=>{"use strict";var $e=$u;$e.build="minimal";$e.Writer=Us();$e.BufferWriter=Ru();$e.Reader=Os();$e.BufferReader=Ou();$e.util=vr();$e.rpc=zu();$e.roots=ju();$e.configure=Gu;function Gu(){$e.util._configure(),$e.Writer._configure($e.BufferWriter),$e.Reader._configure($e.BufferReader)}Gu()});var ia=T((qx,Yu)=>{"use strict";Yu.exports=Wu()});var sa=T((Mx,Qu)=>{"use strict";var Lr=ia(),aa=Lr.Reader,Zu=Lr.Writer,qe=Lr.util,ut=Lr.roots["libp2p-crypto-keys"]||(Lr.roots["libp2p-crypto-keys"]={});ut.KeyType=function(){var e={},t=Object.create(e);return t[e[0]="RSA"]=0,t[e[1]="Ed25519"]=1,t[e[2]="Secp256k1"]=2,t}();ut.PublicKey=function(){function e(t){if(t)for(var r=Object.keys(t),n=0;n<r.length;++n)t[r[n]]!=null&&(this[r[n]]=t[r[n]])}return e.prototype.Type=0,e.prototype.Data=qe.newBuffer([]),e.encode=function(r,n){return n||(n=Zu.create()),n.uint32(8).int32(r.Type),n.uint32(18).bytes(r.Data),n},e.decode=function(r,n){r instanceof aa||(r=aa.create(r));for(var i=n===void 0?r.len:r.pos+n,a=new ut.PublicKey;r.pos<i;){var s=r.uint32();switch(s>>>3){case 1:a.Type=r.int32();break;case 2:a.Data=r.bytes();break;default:r.skipType(s&7);break}}if(!a.hasOwnProperty("Type"))throw qe.ProtocolError("missing required 'Type'",{instance:a});if(!a.hasOwnProperty("Data"))throw qe.ProtocolError("missing required 'Data'",{instance:a});return a},e.fromObject=function(r){if(r instanceof ut.PublicKey)return r;var n=new ut.PublicKey;switch(r.Type){case"RSA":case 0:n.Type=0;break;case"Ed25519":case 1:n.Type=1;break;case"Secp256k1":case 2:n.Type=2;break}return r.Data!=null&&(typeof r.Data=="string"?qe.base64.decode(r.Data,n.Data=qe.newBuffer(qe.base64.length(r.Data)),0):r.Data.length&&(n.Data=r.Data)),n},e.toObject=function(r,n){n||(n={});var i={};return n.defaults&&(i.Type=n.enums===String?"RSA":0,n.bytes===String?i.Data="":(i.Data=[],n.bytes!==Array&&(i.Data=qe.newBuffer(i.Data)))),r.Type!=null&&r.hasOwnProperty("Type")&&(i.Type=n.enums===String?ut.KeyType[r.Type]:r.Type),r.Data!=null&&r.hasOwnProperty("Data")&&(i.Data=n.bytes===String?qe.base64.encode(r.Data,0,r.Data.length):n.bytes===Array?Array.prototype.slice.call(r.Data):r.Data),i},e.prototype.toJSON=function(){return this.constructor.toObject(this,Lr.util.toJSONOptions)},e}();ut.PrivateKey=function(){function e(t){if(t)for(var r=Object.keys(t),n=0;n<r.length;++n)t[r[n]]!=null&&(this[r[n]]=t[r[n]])}return e.prototype.Type=0,e.prototype.Data=qe.newBuffer([]),e.encode=function(r,n){return n||(n=Zu.create()),n.uint32(8).int32(r.Type),n.uint32(18).bytes(r.Data),n},e.decode=function(r,n){r instanceof aa||(r=aa.create(r));for(var i=n===void 0?r.len:r.pos+n,a=new ut.PrivateKey;r.pos<i;){var s=r.uint32();switch(s>>>3){case 1:a.Type=r.int32();break;case 2:a.Data=r.bytes();break;default:r.skipType(s&7);break}}if(!a.hasOwnProperty("Type"))throw qe.ProtocolError("missing required 'Type'",{instance:a});if(!a.hasOwnProperty("Data"))throw qe.ProtocolError("missing required 'Data'",{instance:a});return a},e.fromObject=function(r){if(r instanceof ut.PrivateKey)return r;var n=new ut.PrivateKey;switch(r.Type){case"RSA":case 0:n.Type=0;break;case"Ed25519":case 1:n.Type=1;break;case"Secp256k1":case 2:n.Type=2;break}return r.Data!=null&&(typeof r.Data=="string"?qe.base64.decode(r.Data,n.Data=qe.newBuffer(qe.base64.length(r.Data)),0):r.Data.length&&(n.Data=r.Data)),n},e.toObject=function(r,n){n||(n={});var i={};return n.defaults&&(i.Type=n.enums===String?"RSA":0,n.bytes===String?i.Data="":(i.Data=[],n.bytes!==Array&&(i.Data=qe.newBuffer(i.Data)))),r.Type!=null&&r.hasOwnProperty("Type")&&(i.Type=n.enums===String?ut.KeyType[r.Type]:r.Type),r.Data!=null&&r.hasOwnProperty("Data")&&(i.Data=n.bytes===String?qe.base64.encode(r.Data,0,r.Data.length):n.bytes===Array?Array.prototype.slice.call(r.Data):r.Data),i},e.prototype.toJSON=function(){return this.constructor.toObject(this,Lr.util.toJSONOptions)},e}();Qu.exports=ut});var oa=T((Vx,Xu)=>{var ri=ae();ri.pki=ri.pki||{};var Ms=Xu.exports=ri.pki.oids=ri.oids=ri.oids||{};function A(e,t){Ms[e]=t,Ms[t]=e}function re(e,t){Ms[e]=t}A("1.2.840.113549.1.1.1","rsaEncryption");A("1.2.840.113549.1.1.4","md5WithRSAEncryption");A("1.2.840.113549.1.1.5","sha1WithRSAEncryption");A("1.2.840.113549.1.1.7","RSAES-OAEP");A("1.2.840.113549.1.1.8","mgf1");A("1.2.840.113549.1.1.9","pSpecified");A("1.2.840.113549.1.1.10","RSASSA-PSS");A("1.2.840.113549.1.1.11","sha256WithRSAEncryption");A("1.2.840.113549.1.1.12","sha384WithRSAEncryption");A("1.2.840.113549.1.1.13","sha512WithRSAEncryption");A("1.3.101.112","EdDSA25519");A("1.2.840.10040.4.3","dsa-with-sha1");A("1.3.14.3.2.7","desCBC");A("1.3.14.3.2.26","sha1");A("2.16.840.1.101.3.4.2.1","sha256");A("2.16.840.1.101.3.4.2.2","sha384");A("2.16.840.1.101.3.4.2.3","sha512");A("1.2.840.113549.2.5","md5");A("1.2.840.113549.1.7.1","data");A("1.2.840.113549.1.7.2","signedData");A("1.2.840.113549.1.7.3","envelopedData");A("1.2.840.113549.1.7.4","signedAndEnvelopedData");A("1.2.840.113549.1.7.5","digestedData");A("1.2.840.113549.1.7.6","encryptedData");A("1.2.840.113549.1.9.1","emailAddress");A("1.2.840.113549.1.9.2","unstructuredName");A("1.2.840.113549.1.9.3","contentType");A("1.2.840.113549.1.9.4","messageDigest");A("1.2.840.113549.1.9.5","signingTime");A("1.2.840.113549.1.9.6","counterSignature");A("1.2.840.113549.1.9.7","challengePassword");A("1.2.840.113549.1.9.8","unstructuredAddress");A("1.2.840.113549.1.9.14","extensionRequest");A("1.2.840.113549.1.9.20","friendlyName");A("1.2.840.113549.1.9.21","localKeyId");A("1.2.840.113549.1.9.22.1","x509Certificate");A("1.2.840.113549.1.12.10.1.1","keyBag");A("1.2.840.113549.1.12.10.1.2","pkcs8ShroudedKeyBag");A("1.2.840.113549.1.12.10.1.3","certBag");A("1.2.840.113549.1.12.10.1.4","crlBag");A("1.2.840.113549.1.12.10.1.5","secretBag");A("1.2.840.113549.1.12.10.1.6","safeContentsBag");A("1.2.840.113549.1.5.13","pkcs5PBES2");A("1.2.840.113549.1.5.12","pkcs5PBKDF2");A("1.2.840.113549.1.12.1.1","pbeWithSHAAnd128BitRC4");A("1.2.840.113549.1.12.1.2","pbeWithSHAAnd40BitRC4");A("1.2.840.113549.1.12.1.3","pbeWithSHAAnd3-KeyTripleDES-CBC");A("1.2.840.113549.1.12.1.4","pbeWithSHAAnd2-KeyTripleDES-CBC");A("1.2.840.113549.1.12.1.5","pbeWithSHAAnd128BitRC2-CBC");A("1.2.840.113549.1.12.1.6","pbewithSHAAnd40BitRC2-CBC");A("1.2.840.113549.2.7","hmacWithSHA1");A("1.2.840.113549.2.8","hmacWithSHA224");A("1.2.840.113549.2.9","hmacWithSHA256");A("1.2.840.113549.2.10","hmacWithSHA384");A("1.2.840.113549.2.11","hmacWithSHA512");A("1.2.840.113549.3.7","des-EDE3-CBC");A("2.16.840.1.101.3.4.1.2","aes128-CBC");A("2.16.840.1.101.3.4.1.22","aes192-CBC");A("2.16.840.1.101.3.4.1.42","aes256-CBC");A("2.5.4.3","commonName");A("2.5.4.5","serialName");A("2.5.4.6","countryName");A("2.5.4.7","localityName");A("2.5.4.8","stateOrProvinceName");A("2.5.4.9","streetAddress");A("2.5.4.10","organizationName");A("2.5.4.11","organizationalUnitName");A("2.5.4.13","description");A("2.5.4.15","businessCategory");A("2.5.4.17","postalCode");A("1.3.6.1.4.1.311.60.2.1.2","jurisdictionOfIncorporationStateOrProvinceName");A("1.3.6.1.4.1.311.60.2.1.3","jurisdictionOfIncorporationCountryName");A("2.16.840.1.113730.1.1","nsCertType");A("2.16.840.1.113730.1.13","nsComment");re("2.5.29.1","authorityKeyIdentifier");re("2.5.29.2","keyAttributes");re("2.5.29.3","certificatePolicies");re("2.5.29.4","keyUsageRestriction");re("2.5.29.5","policyMapping");re("2.5.29.6","subtreesConstraint");re("2.5.29.7","subjectAltName");re("2.5.29.8","issuerAltName");re("2.5.29.9","subjectDirectoryAttributes");re("2.5.29.10","basicConstraints");re("2.5.29.11","nameConstraints");re("2.5.29.12","policyConstraints");re("2.5.29.13","basicConstraints");A("2.5.29.14","subjectKeyIdentifier");A("2.5.29.15","keyUsage");re("2.5.29.16","privateKeyUsagePeriod");A("2.5.29.17","subjectAltName");A("2.5.29.18","issuerAltName");A("2.5.29.19","basicConstraints");re("2.5.29.20","cRLNumber");re("2.5.29.21","cRLReason");re("2.5.29.22","expirationDate");re("2.5.29.23","instructionCode");re("2.5.29.24","invalidityDate");re("2.5.29.25","cRLDistributionPoints");re("2.5.29.26","issuingDistributionPoint");re("2.5.29.27","deltaCRLIndicator");re("2.5.29.28","issuingDistributionPoint");re("2.5.29.29","certificateIssuer");re("2.5.29.30","nameConstraints");A("2.5.29.31","cRLDistributionPoints");A("2.5.29.32","certificatePolicies");re("2.5.29.33","policyMappings");re("2.5.29.34","policyConstraints");A("2.5.29.35","authorityKeyIdentifier");re("2.5.29.36","policyConstraints");A("2.5.29.37","extKeyUsage");re("2.5.29.46","freshestCRL");re("2.5.29.54","inhibitAnyPolicy");A("1.3.6.1.4.1.11129.2.4.2","timestampList");A("1.3.6.1.5.5.7.1.1","authorityInfoAccess");A("1.3.6.1.5.5.7.3.1","serverAuth");A("1.3.6.1.5.5.7.3.2","clientAuth");A("1.3.6.1.5.5.7.3.3","codeSigning");A("1.3.6.1.5.5.7.3.4","emailProtection");A("1.3.6.1.5.5.7.3.8","timeStamping")});var ii=T((zx,ec)=>{var de=ae();Se();oa();var N=ec.exports=de.asn1=de.asn1||{};N.Class={UNIVERSAL:0,APPLICATION:64,CONTEXT_SPECIFIC:128,PRIVATE:192};N.Type={NONE:0,BOOLEAN:1,INTEGER:2,BITSTRING:3,OCTETSTRING:4,NULL:5,OID:6,ODESC:7,EXTERNAL:8,REAL:9,ENUMERATED:10,EMBEDDED:11,UTF8:12,ROID:13,SEQUENCE:16,SET:17,PRINTABLESTRING:19,IA5STRING:22,UTCTIME:23,GENERALIZEDTIME:24,BMPSTRING:30};N.create=function(e,t,r,n,i){if(de.util.isArray(n)){for(var a=[],s=0;s<n.length;++s)n[s]!==void 0&&a.push(n[s]);n=a}var o={tagClass:e,type:t,constructed:r,composed:r||de.util.isArray(n),value:n};return i&&"bitStringContents"in i&&(o.bitStringContents=i.bitStringContents,o.original=N.copy(o)),o};N.copy=function(e,t){var r;if(de.util.isArray(e)){r=[];for(var n=0;n<e.length;++n)r.push(N.copy(e[n],t));return r}return typeof e=="string"?e:(r={tagClass:e.tagClass,type:e.type,constructed:e.constructed,composed:e.composed,value:N.copy(e.value,t)},t&&!t.excludeBitStringContents&&(r.bitStringContents=e.bitStringContents),r)};N.equals=function(e,t,r){if(de.util.isArray(e)){if(!de.util.isArray(t)||e.length!==t.length)return!1;for(var n=0;n<e.length;++n)if(!N.equals(e[n],t[n]))return!1;return!0}if(typeof e!=typeof t)return!1;if(typeof e=="string")return e===t;var i=e.tagClass===t.tagClass&&e.type===t.type&&e.constructed===t.constructed&&e.composed===t.composed&&N.equals(e.value,t.value);return r&&r.includeBitStringContents&&(i=i&&e.bitStringContents===t.bitStringContents),i};N.getBerValueLength=function(e){var t=e.getByte();if(t!==128){var r,n=t&128;return n?r=e.getInt((t&127)<<3):r=t,r}};function ni(e,t,r){if(r>t){var n=new Error("Too few bytes to parse DER.");throw n.available=e.length(),n.remaining=t,n.requested=r,n}}var sy=function(e,t){var r=e.getByte();if(t--,r!==128){var n,i=r&128;if(!i)n=r;else{var a=r&127;ni(e,t,a),n=e.getInt(a<<3)}if(n<0)throw new Error("Negative length: "+n);return n}};N.fromDer=function(e,t){return t===void 0&&(t={strict:!0,decodeBitStrings:!0}),typeof t=="boolean"&&(t={strict:t,decodeBitStrings:!0}),"strict"in t||(t.strict=!0),"decodeBitStrings"in t||(t.decodeBitStrings=!0),typeof e=="string"&&(e=de.util.createBuffer(e)),ua(e,e.length(),0,t)};function ua(e,t,r,n){var i;ni(e,t,2);var a=e.getByte();t--;var s=a&192,o=a&31;i=e.length();var u=sy(e,t);if(t-=i-e.length(),u!==void 0&&u>t){if(n.strict){var c=new Error("Too few bytes to read ASN.1 value.");throw c.available=e.length(),c.remaining=t,c.requested=u,c}u=t}var f,l,h=(a&32)==32;if(h)if(f=[],u===void 0)for(;;){if(ni(e,t,2),e.bytes(2)===String.fromCharCode(0,0)){e.getBytes(2),t-=2;break}i=e.length(),f.push(ua(e,t,r+1,n)),t-=i-e.length()}else for(;u>0;)i=e.length(),f.push(ua(e,u,r+1,n)),t-=i-e.length(),u-=i-e.length();if(f===void 0&&s===N.Class.UNIVERSAL&&o===N.Type.BITSTRING&&(l=e.bytes(u)),f===void 0&&n.decodeBitStrings&&s===N.Class.UNIVERSAL&&o===N.Type.BITSTRING&&u>1){var d=e.read,p=t,g=0;if(o===N.Type.BITSTRING&&(ni(e,t,1),g=e.getByte(),t--),g===0)try{i=e.length();var v={verbose:n.verbose,strict:!0,decodeBitStrings:!0},x=ua(e,t,r+1,v),S=i-e.length();t-=S,o==N.Type.BITSTRING&&S++;var C=x.tagClass;S===u&&(C===N.Class.UNIVERSAL||C===N.Class.CONTEXT_SPECIFIC)&&(f=[x])}catch(D){}f===void 0&&(e.read=d,t=p)}if(f===void 0){if(u===void 0){if(n.strict)throw new Error("Non-constructed ASN.1 object of indefinite length.");u=t}if(o===N.Type.BMPSTRING)for(f="";u>0;u-=2)ni(e,t,2),f+=String.fromCharCode(e.getInt16()),t-=2;else f=e.getBytes(u)}var L=l===void 0?null:{bitStringContents:l};return N.create(s,o,h,f,L)}N.toDer=function(e){var t=de.util.createBuffer(),r=e.tagClass|e.type,n=de.util.createBuffer(),i=!1;if("bitStringContents"in e&&(i=!0,e.original&&(i=N.equals(e,e.original))),i)n.putBytes(e.bitStringContents);else if(e.composed){e.constructed?r|=32:n.putByte(0);for(var a=0;a<e.value.length;++a)e.value[a]!==void 0&&n.putBuffer(N.toDer(e.value[a]))}else if(e.type===N.Type.BMPSTRING)for(var a=0;a<e.value.length;++a)n.putInt16(e.value.charCodeAt(a));else e.type===N.Type.INTEGER&&e.value.length>1&&(e.value.charCodeAt(0)===0&&(e.value.charCodeAt(1)&128)==0||e.value.charCodeAt(0)===255&&(e.value.charCodeAt(1)&128)==128)?n.putBytes(e.value.substr(1)):n.putBytes(e.value);if(t.putByte(r),n.length()<=127)t.putByte(n.length()&127);else{var s=n.length(),o="";do o+=String.fromCharCode(s&255),s=s>>>8;while(s>0);t.putByte(o.length|128);for(var a=o.length-1;a>=0;--a)t.putByte(o.charCodeAt(a))}return t.putBuffer(n),t};N.oidToDer=function(e){var t=e.split("."),r=de.util.createBuffer();r.putByte(40*parseInt(t[0],10)+parseInt(t[1],10));for(var n,i,a,s,o=2;o<t.length;++o){n=!0,i=[],a=parseInt(t[o],10);do s=a&127,a=a>>>7,n||(s|=128),i.push(s),n=!1;while(a>0);for(var u=i.length-1;u>=0;--u)r.putByte(i[u])}return r};N.derToOid=function(e){var t;typeof e=="string"&&(e=de.util.createBuffer(e));var r=e.getByte();t=Math.floor(r/40)+"."+r%40;for(var n=0;e.length()>0;)r=e.getByte(),n=n<<7,r&128?n+=r&127:(t+="."+(n+r),n=0);return t};N.utcTimeToDate=function(e){var t=new Date,r=parseInt(e.substr(0,2),10);r=r>=50?1900+r:2e3+r;var n=parseInt(e.substr(2,2),10)-1,i=parseInt(e.substr(4,2),10),a=parseInt(e.substr(6,2),10),s=parseInt(e.substr(8,2),10),o=0;if(e.length>11){var u=e.charAt(10),c=10;u!=="+"&&u!=="-"&&(o=parseInt(e.substr(10,2),10),c+=2)}if(t.setUTCFullYear(r,n,i),t.setUTCHours(a,s,o,0),c&&(u=e.charAt(c),u==="+"||u==="-")){var f=parseInt(e.substr(c+1,2),10),l=parseInt(e.substr(c+4,2),10),h=f*60+l;h*=6e4,u==="+"?t.setTime(+t-h):t.setTime(+t+h)}return t};N.generalizedTimeToDate=function(e){var t=new Date,r=parseInt(e.substr(0,4),10),n=parseInt(e.substr(4,2),10)-1,i=parseInt(e.substr(6,2),10),a=parseInt(e.substr(8,2),10),s=parseInt(e.substr(10,2),10),o=parseInt(e.substr(12,2),10),u=0,c=0,f=!1;e.charAt(e.length-1)==="Z"&&(f=!0);var l=e.length-5,h=e.charAt(l);if(h==="+"||h==="-"){var d=parseInt(e.substr(l+1,2),10),p=parseInt(e.substr(l+4,2),10);c=d*60+p,c*=6e4,h==="+"&&(c*=-1),f=!0}return e.charAt(14)==="."&&(u=parseFloat(e.substr(14),10)*1e3),f?(t.setUTCFullYear(r,n,i),t.setUTCHours(a,s,o,u),t.setTime(+t+c)):(t.setFullYear(r,n,i),t.setHours(a,s,o,u)),t};N.dateToUtcTime=function(e){if(typeof e=="string")return e;var t="",r=[];r.push((""+e.getUTCFullYear()).substr(2)),r.push(""+(e.getUTCMonth()+1)),r.push(""+e.getUTCDate()),r.push(""+e.getUTCHours()),r.push(""+e.getUTCMinutes()),r.push(""+e.getUTCSeconds());for(var n=0;n<r.length;++n)r[n].length<2&&(t+="0"),t+=r[n];return t+="Z",t};N.dateToGeneralizedTime=function(e){if(typeof e=="string")return e;var t="",r=[];r.push(""+e.getUTCFullYear()),r.push(""+(e.getUTCMonth()+1)),r.push(""+e.getUTCDate()),r.push(""+e.getUTCHours()),r.push(""+e.getUTCMinutes()),r.push(""+e.getUTCSeconds());for(var n=0;n<r.length;++n)r[n].length<2&&(t+="0"),t+=r[n];return t+="Z",t};N.integerToDer=function(e){var t=de.util.createBuffer();if(e>=-128&&e<128)return t.putSignedInt(e,8);if(e>=-32768&&e<32768)return t.putSignedInt(e,16);if(e>=-8388608&&e<8388608)return t.putSignedInt(e,24);if(e>=-2147483648&&e<2147483648)return t.putSignedInt(e,32);var r=new Error("Integer too large; max is 32-bits.");throw r.integer=e,r};N.derToInteger=function(e){typeof e=="string"&&(e=de.util.createBuffer(e));var t=e.length()*8;if(t>32)throw new Error("Integer too large; max is 32-bits.");return e.getSignedInt(t)};N.validate=function(e,t,r,n){var i=!1;if((e.tagClass===t.tagClass||typeof t.tagClass=="undefined")&&(e.type===t.type||typeof t.type=="undefined"))if(e.constructed===t.constructed||typeof t.constructed=="undefined"){if(i=!0,t.value&&de.util.isArray(t.value))for(var a=0,s=0;i&&s<t.value.length;++s)i=t.value[s].optional||!1,e.value[a]&&(i=N.validate(e.value[a],t.value[s],r,n),i?++a:t.value[s].optional&&(i=!0)),!i&&n&&n.push("["+t.name+'] Tag class "'+t.tagClass+'", type "'+t.type+'" expected value length "'+t.value.length+'", got "'+e.value.length+'"');if(i&&r&&(t.capture&&(r[t.capture]=e.value),t.captureAsn1&&(r[t.captureAsn1]=e),t.captureBitStringContents&&"bitStringContents"in e&&(r[t.captureBitStringContents]=e.bitStringContents),t.captureBitStringValue&&"bitStringContents"in e)){var o;if(e.bitStringContents.length<2)r[t.captureBitStringValue]="";else{var u=e.bitStringContents.charCodeAt(0);if(u!==0)throw new Error("captureBitStringValue only supported for zero unused bits");r[t.captureBitStringValue]=e.bitStringContents.slice(1)}}}else n&&n.push("["+t.name+'] Expected constructed "'+t.constructed+'", got "'+e.constructed+'"');else n&&(e.tagClass!==t.tagClass&&n.push("["+t.name+'] Expected tag class "'+t.tagClass+'", got "'+e.tagClass+'"'),e.type!==t.type&&n.push("["+t.name+'] Expected type "'+t.type+'", got "'+e.type+'"'));return i};var Ju=/[^\\u0000-\\u00ff]/;N.prettyPrint=function(e,t,r){var n="";t=t||0,r=r||2,t>0&&(n+=`
`);for(var i="",a=0;a<t*r;++a)i+=" ";switch(n+=i+"Tag: ",e.tagClass){case N.Class.UNIVERSAL:n+="Universal:";break;case N.Class.APPLICATION:n+="Application:";break;case N.Class.CONTEXT_SPECIFIC:n+="Context-Specific:";break;case N.Class.PRIVATE:n+="Private:";break}if(e.tagClass===N.Class.UNIVERSAL)switch(n+=e.type,e.type){case N.Type.NONE:n+=" (None)";break;case N.Type.BOOLEAN:n+=" (Boolean)";break;case N.Type.INTEGER:n+=" (Integer)";break;case N.Type.BITSTRING:n+=" (Bit string)";break;case N.Type.OCTETSTRING:n+=" (Octet string)";break;case N.Type.NULL:n+=" (Null)";break;case N.Type.OID:n+=" (Object Identifier)";break;case N.Type.ODESC:n+=" (Object Descriptor)";break;case N.Type.EXTERNAL:n+=" (External or Instance of)";break;case N.Type.REAL:n+=" (Real)";break;case N.Type.ENUMERATED:n+=" (Enumerated)";break;case N.Type.EMBEDDED:n+=" (Embedded PDV)";break;case N.Type.UTF8:n+=" (UTF8)";break;case N.Type.ROID:n+=" (Relative Object Identifier)";break;case N.Type.SEQUENCE:n+=" (Sequence)";break;case N.Type.SET:n+=" (Set)";break;case N.Type.PRINTABLESTRING:n+=" (Printable String)";break;case N.Type.IA5String:n+=" (IA5String (ASCII))";break;case N.Type.UTCTIME:n+=" (UTC time)";break;case N.Type.GENERALIZEDTIME:n+=" (Generalized time)";break;case N.Type.BMPSTRING:n+=" (BMP String)";break}else n+=e.type;if(n+=`
`,n+=i+"Constructed: "+e.constructed+`
`,e.composed){for(var s=0,o="",a=0;a<e.value.length;++a)e.value[a]!==void 0&&(s+=1,o+=N.prettyPrint(e.value[a],t+1,r),a+1<e.value.length&&(o+=","));n+=i+"Sub values: "+s+o}else{if(n+=i+"Value: ",e.type===N.Type.OID){var u=N.derToOid(e.value);n+=u,de.pki&&de.pki.oids&&u in de.pki.oids&&(n+=" ("+de.pki.oids[u]+") ")}if(e.type===N.Type.INTEGER)try{n+=N.derToInteger(e.value)}catch(f){n+="0x"+de.util.bytesToHex(e.value)}else if(e.type===N.Type.BITSTRING){if(e.value.length>1?n+="0x"+de.util.bytesToHex(e.value.slice(1)):n+="(none)",e.value.length>0){var c=e.value.charCodeAt(0);c==1?n+=" (1 unused bit shown)":c>1&&(n+=" ("+c+" unused bits shown)")}}else e.type===N.Type.OCTETSTRING?(Ju.test(e.value)||(n+="("+e.value+") "),n+="0x"+de.util.bytesToHex(e.value)):e.type===N.Type.UTF8?n+=de.util.decodeUtf8(e.value):e.type===N.Type.PRINTABLESTRING||e.type===N.Type.IA5String?n+=e.value:Ju.test(e.value)?n+="0x"+de.util.bytesToHex(e.value):e.value.length===0?n+="[null]":n+=e.value}return n}});var nc=T((Hx,rc)=>{var ye=ae();Es();Bs();Se();rc.exports=ye.des=ye.des||{};ye.des.startEncrypting=function(e,t,r,n){var i=ca({key:e,output:r,decrypt:!1,mode:n||(t===null?"ECB":"CBC")});return i.start(t),i};ye.des.createEncryptionCipher=function(e,t){return ca({key:e,output:null,decrypt:!1,mode:t})};ye.des.startDecrypting=function(e,t,r,n){var i=ca({key:e,output:r,decrypt:!0,mode:n||(t===null?"ECB":"CBC")});return i.start(t),i};ye.des.createDecryptionCipher=function(e,t){return ca({key:e,output:null,decrypt:!0,mode:t})};ye.des.Algorithm=function(e,t){var r=this;r.name=e,r.mode=new t({blockSize:8,cipher:{encrypt:function(n,i){return tc(r._keys,n,i,!1)},decrypt:function(n,i){return tc(r._keys,n,i,!0)}}}),r._init=!1};ye.des.Algorithm.prototype.initialize=function(e){if(!this._init){var t=ye.util.createBuffer(e.key);if(this.name.indexOf("3DES")===0&&t.length()!==24)throw new Error("Invalid Triple-DES key size: "+t.length()*8);this._keys=yy(t),this._init=!0}};Ft("DES-ECB",ye.cipher.modes.ecb);Ft("DES-CBC",ye.cipher.modes.cbc);Ft("DES-CFB",ye.cipher.modes.cfb);Ft("DES-OFB",ye.cipher.modes.ofb);Ft("DES-CTR",ye.cipher.modes.ctr);Ft("3DES-ECB",ye.cipher.modes.ecb);Ft("3DES-CBC",ye.cipher.modes.cbc);Ft("3DES-CFB",ye.cipher.modes.cfb);Ft("3DES-OFB",ye.cipher.modes.ofb);Ft("3DES-CTR",ye.cipher.modes.ctr);function Ft(e,t){var r=function(){return new ye.des.Algorithm(e,t)};ye.cipher.registerAlgorithm(e,r)}var oy=[16843776,0,65536,16843780,16842756,66564,4,65536,1024,16843776,16843780,1024,16778244,16842756,16777216,4,1028,16778240,16778240,66560,66560,16842752,16842752,16778244,65540,16777220,16777220,65540,0,1028,66564,16777216,65536,16843780,4,16842752,16843776,16777216,16777216,1024,16842756,65536,66560,16777220,1024,4,16778244,66564,16843780,65540,16842752,16778244,16777220,1028,66564,16843776,1028,16778240,16778240,0,65540,66560,0,16842756],uy=[-2146402272,-2147450880,32768,1081376,1048576,32,-2146435040,-2147450848,-2147483616,-2146402272,-2146402304,-2147483648,-2147450880,1048576,32,-2146435040,1081344,1048608,-2147450848,0,-2147483648,32768,1081376,-2146435072,1048608,-2147483616,0,1081344,32800,-2146402304,-2146435072,32800,0,1081376,-2146435040,1048576,-2147450848,-2146435072,-2146402304,32768,-2146435072,-2147450880,32,-2146402272,1081376,32,32768,-2147483648,32800,-2146402304,1048576,-2147483616,1048608,-2147450848,-2147483616,1048608,1081344,0,-2147450880,32800,-2147483648,-2146435040,-2146402272,1081344],cy=[520,134349312,0,134348808,134218240,0,131592,134218240,131080,134217736,134217736,131072,134349320,131080,134348800,520,134217728,8,134349312,512,131584,134348800,134348808,131592,134218248,131584,131072,134218248,8,134349320,512,134217728,134349312,134217728,131080,520,131072,134349312,134218240,0,512,131080,134349320,134218240,134217736,512,0,134348808,134218248,131072,134217728,134349320,8,131592,131584,134217736,134348800,134218248,520,134348800,131592,8,134348808,131584],fy=[8396801,8321,8321,128,8396928,8388737,8388609,8193,0,8396800,8396800,8396929,129,0,8388736,8388609,1,8192,8388608,8396801,128,8388608,8193,8320,8388737,1,8320,8388736,8192,8396928,8396929,129,8388736,8388609,8396800,8396929,129,0,0,8396800,8320,8388736,8388737,1,8396801,8321,8321,128,8396929,129,1,8192,8388609,8193,8396928,8388737,8193,8320,8388608,8396801,128,8388608,8192,8396928],ly=[256,34078976,34078720,1107296512,524288,256,1073741824,34078720,1074266368,524288,33554688,1074266368,1107296512,1107820544,524544,1073741824,33554432,1074266112,1074266112,0,1073742080,1107820800,1107820800,33554688,1107820544,1073742080,0,1107296256,34078976,33554432,1107296256,524544,524288,1107296512,256,33554432,1073741824,34078720,1107296512,1074266368,33554688,1073741824,1107820544,34078976,1074266368,256,33554432,1107820544,1107820800,524544,1107296256,1107820800,34078720,0,1074266112,1107296256,524544,33554688,1073742080,524288,0,1074266112,34078976,1073742080],hy=[536870928,541065216,16384,541081616,541065216,16,541081616,4194304,536887296,4210704,4194304,536870928,4194320,536887296,536870912,16400,0,4194320,536887312,16384,4210688,536887312,16,541065232,541065232,0,4210704,541081600,16400,4210688,541081600,536870912,536887296,16,541065232,4210688,541081616,4194304,16400,536870928,4194304,536887296,536870912,16400,536870928,541081616,4210688,541065216,4210704,541081600,0,541065232,16,16384,541065216,4210704,16384,4194320,536887312,0,541081600,536870912,4194320,536887312],py=[2097152,69206018,67110914,0,2048,67110914,2099202,69208064,69208066,2097152,0,67108866,2,67108864,69206018,2050,67110912,2099202,2097154,67110912,67108866,69206016,69208064,2097154,69206016,2048,2050,69208066,2099200,2,67108864,2099200,67108864,2099200,2097152,67110914,67110914,69206018,69206018,2,2097154,67108864,67110912,2097152,69208064,2050,2099202,69208064,2050,67108866,69208066,69206016,2099200,0,2,69208066,0,2099202,69206016,2048,67108866,67110912,2048,2097154],dy=[268439616,4096,262144,268701760,268435456,268439616,64,268435456,262208,268697600,268701760,266240,268701696,266304,4096,64,268697600,268435520,268439552,4160,266240,262208,268697664,268701696,4160,0,0,268697664,268435520,268439552,266304,262144,266304,262144,268701696,4096,64,268697664,4096,266304,268439552,64,268435520,268697600,268697664,268435456,262144,268439616,0,268701760,262208,268435520,268697600,268439552,268439616,0,268701760,266240,266240,4160,4160,262208,268435456,268701696];function yy(e){for(var t=[0,4,536870912,536870916,65536,65540,536936448,536936452,512,516,536871424,536871428,66048,66052,536936960,536936964],r=[0,1,1048576,1048577,67108864,67108865,68157440,68157441,256,257,1048832,1048833,67109120,67109121,68157696,68157697],n=[0,8,2048,2056,16777216,16777224,16779264,16779272,0,8,2048,2056,16777216,16777224,16779264,16779272],i=[0,2097152,134217728,136314880,8192,2105344,134225920,136323072,131072,2228224,134348800,136445952,139264,2236416,134356992,136454144],a=[0,262144,16,262160,0,262144,16,262160,4096,266240,4112,266256,4096,266240,4112,266256],s=[0,1024,32,1056,0,1024,32,1056,33554432,33555456,33554464,33555488,33554432,33555456,33554464,33555488],o=[0,268435456,524288,268959744,2,268435458,524290,268959746,0,268435456,524288,268959744,2,268435458,524290,268959746],u=[0,65536,2048,67584,536870912,536936448,536872960,536938496,131072,196608,133120,198656,537001984,537067520,537004032,537069568],c=[0,262144,0,262144,2,262146,2,262146,33554432,33816576,33554432,33816576,33554434,33816578,33554434,33816578],f=[0,268435456,8,268435464,0,268435456,8,268435464,1024,268436480,1032,268436488,1024,268436480,1032,268436488],l=[0,32,0,32,1048576,1048608,1048576,1048608,8192,8224,8192,8224,1056768,1056800,1056768,1056800],h=[0,16777216,512,16777728,2097152,18874368,2097664,18874880,67108864,83886080,67109376,83886592,69206016,85983232,69206528,85983744],d=[0,4096,134217728,134221824,524288,528384,134742016,134746112,16,4112,134217744,134221840,524304,528400,134742032,134746128],p=[0,4,256,260,0,4,256,260,1,5,257,261,1,5,257,261],g=e.length()>8?3:1,v=[],x=[0,0,1,1,1,1,1,1,0,1,1,1,1,1,1,0],S=0,C,L=0;L<g;L++){var D=e.getInt32(),R=e.getInt32();C=(D>>>4^R)&252645135,R^=C,D^=C<<4,C=(R>>>-16^D)&65535,D^=C,R^=C<<-16,C=(D>>>2^R)&858993459,R^=C,D^=C<<2,C=(R>>>-16^D)&65535,D^=C,R^=C<<-16,C=(D>>>1^R)&1431655765,R^=C,D^=C<<1,C=(R>>>8^D)&16711935,D^=C,R^=C<<8,C=(D>>>1^R)&1431655765,R^=C,D^=C<<1,C=D<<8|R>>>20&240,D=R<<24|R<<8&16711680|R>>>8&65280|R>>>24&240,R=C;for(var $=0;$<x.length;++$){x[$]?(D=D<<2|D>>>26,R=R<<2|R>>>26):(D=D<<1|D>>>27,R=R<<1|R>>>27),D&=-15,R&=-15;var Y=t[D>>>28]|r[D>>>24&15]|n[D>>>20&15]|i[D>>>16&15]|a[D>>>12&15]|s[D>>>8&15]|o[D>>>4&15],Ee=u[R>>>28]|c[R>>>24&15]|f[R>>>20&15]|l[R>>>16&15]|h[R>>>12&15]|d[R>>>8&15]|p[R>>>4&15];C=(Ee>>>16^Y)&65535,v[S++]=Y^C,v[S++]=Ee^C<<16}}return v}function tc(e,t,r,n){var i=e.length===32?3:9,a;i===3?a=n?[30,-2,-2]:[0,32,2]:a=n?[94,62,-2,32,64,2,30,-2,-2]:[0,32,2,62,30,-2,64,96,2];var s,o=t[0],u=t[1];s=(o>>>4^u)&252645135,u^=s,o^=s<<4,s=(o>>>16^u)&65535,u^=s,o^=s<<16,s=(u>>>2^o)&858993459,o^=s,u^=s<<2,s=(u>>>8^o)&16711935,o^=s,u^=s<<8,s=(o>>>1^u)&1431655765,u^=s,o^=s<<1,o=o<<1|o>>>31,u=u<<1|u>>>31;for(var c=0;c<i;c+=3){for(var f=a[c+1],l=a[c+2],h=a[c];h!=f;h+=l){var d=u^e[h],p=(u>>>4|u<<28)^e[h+1];s=o,o=u,u=s^(uy[d>>>24&63]|fy[d>>>16&63]|hy[d>>>8&63]|dy[d&63]|oy[p>>>24&63]|cy[p>>>16&63]|ly[p>>>8&63]|py[p&63])}s=o,o=u,u=s}o=o>>>1|o<<31,u=u>>>1|u<<31,s=(o>>>1^u)&1431655765,u^=s,o^=s<<1,s=(u>>>8^o)&16711935,o^=s,u^=s<<8,s=(u>>>2^o)&858993459,o^=s,u^=s<<2,s=(o>>>16^u)&65535,u^=s,o^=s<<16,s=(o>>>4^u)&252645135,u^=s,o^=s<<4,r[0]=o,r[1]=u}function ca(e){e=e||{};var t=(e.mode||"CBC").toUpperCase(),r="DES-"+t,n;e.decrypt?n=ye.cipher.createDecipher(r,e.key):n=ye.cipher.createCipher(r,e.key);var i=n.start;return n.start=function(a,s){var o=null;s instanceof ye.util.ByteBuffer&&(o=s,s={}),s=s||{},s.output=o,s.iv=a,i.call(n,s)},n}});var Or=T((jx,ic)=>{var fa=ae();ic.exports=fa.md=fa.md||{};fa.md.algorithms=fa.md.algorithms||{}});var sc=T((Gx,ac)=>{var nr=ae();Or();Se();var gy=ac.exports=nr.hmac=nr.hmac||{};gy.create=function(){var e=null,t=null,r=null,n=null,i={};return i.start=function(a,s){if(a!==null)if(typeof a=="string")if(a=a.toLowerCase(),a in nr.md.algorithms)t=nr.md.algorithms[a].create();else throw new Error('Unknown hash algorithm "'+a+'"');else t=a;if(s===null)s=e;else{if(typeof s=="string")s=nr.util.createBuffer(s);else if(nr.util.isArray(s)){var o=s;s=nr.util.createBuffer();for(var u=0;u<o.length;++u)s.putByte(o[u])}var c=s.length();c>t.blockLength&&(t.start(),t.update(s.bytes()),s=t.digest()),r=nr.util.createBuffer(),n=nr.util.createBuffer(),c=s.length();for(var u=0;u<c;++u){var o=s.at(u);r.putByte(54^o),n.putByte(92^o)}if(c<t.blockLength)for(var o=t.blockLength-c,u=0;u<o;++u)r.putByte(54),n.putByte(92);e=s,r=r.bytes(),n=n.bytes()}t.start(),t.update(r)},i.update=function(a){t.update(a)},i.getMac=function(){var a=t.digest().bytes();return t.start(),t.update(n),t.update(a),t.digest()},i.digest=i.getMac,i}});var gn=T(()=>{});var Vs=T((Yx,oc)=>{var He=ae();sc();Or();Se();var vy=He.pkcs5=He.pkcs5||{},ir;He.util.isNodejs&&!He.options.usePureJavaScript&&(ir=gn());oc.exports=He.pbkdf2=vy.pbkdf2=function(e,t,r,n,i,a){if(typeof i=="function"&&(a=i,i=null),He.util.isNodejs&&!He.options.usePureJavaScript&&ir.pbkdf2&&(i===null||typeof i!="object")&&(ir.pbkdf2Sync.length>4||!i||i==="sha1"))return typeof i!="string"&&(i="sha1"),e=Buffer.from(e,"binary"),t=Buffer.from(t,"binary"),a?ir.pbkdf2Sync.length===4?ir.pbkdf2(e,t,r,n,function(C,L){if(C)return a(C);a(null,L.toString("binary"))}):ir.pbkdf2(e,t,r,n,i,function(C,L){if(C)return a(C);a(null,L.toString("binary"))}):ir.pbkdf2Sync.length===4?ir.pbkdf2Sync(e,t,r,n).toString("binary"):ir.pbkdf2Sync(e,t,r,n,i).toString("binary");if((typeof i=="undefined"||i===null)&&(i="sha1"),typeof i=="string"){if(!(i in He.md.algorithms))throw new Error("Unknown hash algorithm: "+i);i=He.md[i].create()}var s=i.digestLength;if(n>4294967295*s){var o=new Error("Derived key is too long.");if(a)return a(o);throw o}var u=Math.ceil(n/s),c=n-(u-1)*s,f=He.hmac.create();f.start(i,e);var l="",h,d,p;if(!a){for(var g=1;g<=u;++g){f.start(null,null),f.update(t),f.update(He.util.int32ToBytes(g)),h=p=f.digest().getBytes();for(var v=2;v<=r;++v)f.start(null,null),f.update(p),d=f.digest().getBytes(),h=He.util.xorBytes(h,d,s),p=d;l+=g<u?h:h.substr(0,c)}return l}var g=1,v;function x(){if(g>u)return a(null,l);f.start(null,null),f.update(t),f.update(He.util.int32ToBytes(g)),h=p=f.digest().getBytes(),v=2,S()}function S(){if(v<=r)return f.start(null,null),f.update(p),d=f.digest().getBytes(),h=He.util.xorBytes(h,d,s),p=d,++v,He.util.setImmediate(S);l+=g<u?h:h.substr(0,c),++g,x()}x()}});var fc=T((Zx,cc)=>{var la=ae();Se();var uc=cc.exports=la.pem=la.pem||{};uc.encode=function(e,t){t=t||{};var r="-----BEGIN "+e.type+`-----\r
`,n;if(e.procType&&(n={name:"Proc-Type",values:[String(e.procType.version),e.procType.type]},r+=ha(n)),e.contentDomain&&(n={name:"Content-Domain",values:[e.contentDomain]},r+=ha(n)),e.dekInfo&&(n={name:"DEK-Info",values:[e.dekInfo.algorithm]},e.dekInfo.parameters&&n.values.push(e.dekInfo.parameters),r+=ha(n)),e.headers)for(var i=0;i<e.headers.length;++i)r+=ha(e.headers[i]);return e.procType&&(r+=`\r
`),r+=la.util.encode64(e.body,t.maxline||64)+`\r
`,r+="-----END "+e.type+`-----\r
`,r};uc.decode=function(e){for(var t=[],r=/\s*-----BEGIN ([A-Z0-9- ]+)-----\r?\n?([\x21-\x7e\s]+?(?:\r?\n\r?\n))?([:A-Za-z0-9+\/=\s]+?)-----END \1-----/g,n=/([\x21-\x7e]+):\s*([\x21-\x7e\s^:]+)/,i=/\r?\n/,a;a=r.exec(e),!!a;){var s={type:a[1],procType:null,contentDomain:null,dekInfo:null,headers:[],body:la.util.decode64(a[3])};if(t.push(s),!!a[2]){for(var o=a[2].split(i),u=0;a&&u<o.length;){for(var c=o[u].replace(/\s+$/,""),f=u+1;f<o.length;++f){var l=o[f];if(!/\s/.test(l[0]))break;c+=l,u=f}if(a=c.match(n),a){for(var h={name:a[1],values:[]},d=a[2].split(","),p=0;p<d.length;++p)h.values.push(my(d[p]));if(s.procType)if(!s.contentDomain&&h.name==="Content-Domain")s.contentDomain=d[0]||"";else if(!s.dekInfo&&h.name==="DEK-Info"){if(h.values.length===0)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must have at least one subfield.');s.dekInfo={algorithm:d[0],parameters:d[1]||null}}else s.headers.push(h);else{if(h.name!=="Proc-Type")throw new Error('Invalid PEM formatted message. The first encapsulated header must be "Proc-Type".');if(h.values.length!==2)throw new Error('Invalid PEM formatted message. The "Proc-Type" header must have two subfields.');s.procType={version:d[0],type:d[1]}}}++u}if(s.procType==="ENCRYPTED"&&!s.dekInfo)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must be present if "Proc-Type" is "ENCRYPTED".')}}if(t.length===0)throw new Error("Invalid PEM formatted message.");return t};function ha(e){for(var t=e.name+": ",r=[],n=function(u,c){return" "+c},i=0;i<e.values.length;++i)r.push(e.values[i].replace(/^(\S+\r\n)/,n));t+=r.join(",")+`\r
`;for(var a=0,s=-1,i=0;i<t.length;++i,++a)if(a>65&&s!==-1){var o=t[s];o===","?(++s,t=t.substr(0,s)+`\r
 `+t.substr(s)):t=t.substr(0,s)+`\r
`+o+t.substr(s+1),a=i-s-1,s=-1,++i}else(t[i]===" "||t[i]==="	"||t[i]===",")&&(s=i);return t}function my(e){return e.replace(/^\s+/,"")}});var gc=T((Qx,yc)=>{var Lt=ae();Or();Se();var lc=yc.exports=Lt.sha256=Lt.sha256||{};Lt.md.sha256=Lt.md.algorithms.sha256=lc;lc.create=function(){hc||xy();var e=null,t=Lt.util.createBuffer(),r=new Array(64),n={algorithm:"sha256",blockLength:64,digestLength:32,messageLength:0,fullMessageLength:null,messageLengthSize:8};return n.start=function(){n.messageLength=0,n.fullMessageLength=n.messageLength64=[];for(var i=n.messageLengthSize/4,a=0;a<i;++a)n.fullMessageLength.push(0);return t=Lt.util.createBuffer(),e={h0:1779033703,h1:3144134277,h2:1013904242,h3:2773480762,h4:1359893119,h5:2600822924,h6:528734635,h7:1541459225},n},n.start(),n.update=function(i,a){a==="utf8"&&(i=Lt.util.encodeUtf8(i));var s=i.length;n.messageLength+=s,s=[s/4294967296>>>0,s>>>0];for(var o=n.fullMessageLength.length-1;o>=0;--o)n.fullMessageLength[o]+=s[1],s[1]=s[0]+(n.fullMessageLength[o]/4294967296>>>0),n.fullMessageLength[o]=n.fullMessageLength[o]>>>0,s[0]=s[1]/4294967296>>>0;return t.putBytes(i),dc(e,r,t),(t.read>2048||t.length()===0)&&t.compact(),n},n.digest=function(){var i=Lt.util.createBuffer();i.putBytes(t.bytes());var a=n.fullMessageLength[n.fullMessageLength.length-1]+n.messageLengthSize,s=a&n.blockLength-1;i.putBytes(zs.substr(0,n.blockLength-s));for(var o,u,c=n.fullMessageLength[0]*8,f=0;f<n.fullMessageLength.length-1;++f)o=n.fullMessageLength[f+1]*8,u=o/4294967296>>>0,c+=u,i.putInt32(c>>>0),c=o>>>0;i.putInt32(c);var l={h0:e.h0,h1:e.h1,h2:e.h2,h3:e.h3,h4:e.h4,h5:e.h5,h6:e.h6,h7:e.h7};dc(l,r,i);var h=Lt.util.createBuffer();return h.putInt32(l.h0),h.putInt32(l.h1),h.putInt32(l.h2),h.putInt32(l.h3),h.putInt32(l.h4),h.putInt32(l.h5),h.putInt32(l.h6),h.putInt32(l.h7),h},n};var zs=null,hc=!1,pc=null;function xy(){zs=String.fromCharCode(128),zs+=Lt.util.fillString(String.fromCharCode(0),64),pc=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],hc=!0}function dc(e,t,r){for(var n,i,a,s,o,u,c,f,l,h,d,p,g,v,x,S=r.length();S>=64;){for(c=0;c<16;++c)t[c]=r.getInt32();for(;c<64;++c)n=t[c-2],n=(n>>>17|n<<15)^(n>>>19|n<<13)^n>>>10,i=t[c-15],i=(i>>>7|i<<25)^(i>>>18|i<<14)^i>>>3,t[c]=n+t[c-7]+i+t[c-16]|0;for(f=e.h0,l=e.h1,h=e.h2,d=e.h3,p=e.h4,g=e.h5,v=e.h6,x=e.h7,c=0;c<64;++c)s=(p>>>6|p<<26)^(p>>>11|p<<21)^(p>>>25|p<<7),o=v^p&(g^v),a=(f>>>2|f<<30)^(f>>>13|f<<19)^(f>>>22|f<<10),u=f&l|h&(f^l),n=x+s+o+pc[c]+t[c],i=a+u,x=v,v=g,g=p,p=d+n>>>0,d=h,h=l,l=f,f=n+i>>>0;e.h0=e.h0+f|0,e.h1=e.h1+l|0,e.h2=e.h2+h|0,e.h3=e.h3+d|0,e.h4=e.h4+p|0,e.h5=e.h5+g|0,e.h6=e.h6+v|0,e.h7=e.h7+x|0,S-=64}}});var mc=T((Xx,vc)=>{var Ot=ae();Se();var pa=null;Ot.util.isNodejs&&!Ot.options.usePureJavaScript&&!process.versions["node-webkit"]&&(pa=gn());var by=vc.exports=Ot.prng=Ot.prng||{};by.create=function(e){for(var t={plugin:e,key:null,seed:null,time:null,reseeds:0,generated:0,keyBytes:""},r=e.md,n=new Array(32),i=0;i<32;++i)n[i]=r.create();t.pools=n,t.pool=0,t.generate=function(c,f){if(!f)return t.generateSync(c);var l=t.plugin.cipher,h=t.plugin.increment,d=t.plugin.formatKey,p=t.plugin.formatSeed,g=Ot.util.createBuffer();t.key=null,v();function v(x){if(x)return f(x);if(g.length()>=c)return f(null,g.getBytes(c));if(t.generated>1048575&&(t.key=null),t.key===null)return Ot.util.nextTick(function(){a(v)});var S=l(t.key,t.seed);t.generated+=S.length,g.putBytes(S),t.key=d(l(t.key,h(t.seed))),t.seed=p(l(t.key,t.seed)),Ot.util.setImmediate(v)}},t.generateSync=function(c){var f=t.plugin.cipher,l=t.plugin.increment,h=t.plugin.formatKey,d=t.plugin.formatSeed;t.key=null;for(var p=Ot.util.createBuffer();p.length()<c;){t.generated>1048575&&(t.key=null),t.key===null&&s();var g=f(t.key,t.seed);t.generated+=g.length,p.putBytes(g),t.key=h(f(t.key,l(t.seed))),t.seed=d(f(t.key,t.seed))}return p.getBytes(c)};function a(c){if(t.pools[0].messageLength>=32)return o(),c();var f=32-t.pools[0].messageLength<<5;t.seedFile(f,function(l,h){if(l)return c(l);t.collect(h),o(),c()})}function s(){if(t.pools[0].messageLength>=32)return o();var c=32-t.pools[0].messageLength<<5;t.collect(t.seedFileSync(c)),o()}function o(){t.reseeds=t.reseeds===4294967295?0:t.reseeds+1;var c=t.plugin.md.create();c.update(t.keyBytes);for(var f=1,l=0;l<32;++l)t.reseeds%f==0&&(c.update(t.pools[l].digest().getBytes()),t.pools[l].start()),f=f<<1;t.keyBytes=c.digest().getBytes(),c.start(),c.update(t.keyBytes);var h=c.digest().getBytes();t.key=t.plugin.formatKey(t.keyBytes),t.seed=t.plugin.formatSeed(h),t.generated=0}function u(c){var f=null,l=Ot.util.globalScope,h=l.crypto||l.msCrypto;h&&h.getRandomValues&&(f=function(D){return h.getRandomValues(D)});var d=Ot.util.createBuffer();if(f)for(;d.length()<c;){var p=Math.max(1,Math.min(c-d.length(),65536)/4),g=new Uint32Array(Math.floor(p));try{f(g);for(var v=0;v<g.length;++v)d.putInt32(g[v])}catch(D){if(!(typeof QuotaExceededError!="undefined"&&D instanceof QuotaExceededError))throw D}}if(d.length()<c)for(var x,S,C,L=Math.floor(Math.random()*65536);d.length()<c;){S=16807*(L&65535),x=16807*(L>>16),S+=(x&32767)<<16,S+=x>>15,S=(S&2147483647)+(S>>31),L=S&4294967295;for(var v=0;v<3;++v)C=L>>>(v<<3),C^=Math.floor(Math.random()*256),d.putByte(String.fromCharCode(C&255))}return d.getBytes(c)}return pa?(t.seedFile=function(c,f){pa.randomBytes(c,function(l,h){if(l)return f(l);f(null,h.toString())})},t.seedFileSync=function(c){return pa.randomBytes(c).toString()}):(t.seedFile=function(c,f){try{f(null,u(c))}catch(l){f(l)}},t.seedFileSync=u),t.collect=function(c){for(var f=c.length,l=0;l<f;++l)t.pools[t.pool].update(c.substr(l,1)),t.pool=t.pool===31?0:t.pool+1},t.collectInt=function(c,f){for(var l="",h=0;h<f;h+=8)l+=String.fromCharCode(c>>h&255);t.collect(l)},t.registerWorker=function(c){if(c===self)t.seedFile=function(l,h){function d(p){var g=p.data;g.forge&&g.forge.prng&&(self.removeEventListener("message",d),h(g.forge.prng.err,g.forge.prng.bytes))}self.addEventListener("message",d),self.postMessage({forge:{prng:{needed:l}}})};else{var f=function(l){var h=l.data;h.forge&&h.forge.prng&&t.seedFile(h.forge.prng.needed,function(d,p){c.postMessage({forge:{prng:{err:d,bytes:p}}})})};c.addEventListener("message",f)}},t}});var ai=T((Jx,Hs)=>{var Ke=ae();Xi();gc();mc();Se();(function(){if(Ke.random&&Ke.random.getBytes){Hs.exports=Ke.random;return}(function(e){var t={},r=new Array(4),n=Ke.util.createBuffer();t.formatKey=function(l){var h=Ke.util.createBuffer(l);return l=new Array(4),l[0]=h.getInt32(),l[1]=h.getInt32(),l[2]=h.getInt32(),l[3]=h.getInt32(),Ke.aes._expandKey(l,!1)},t.formatSeed=function(l){var h=Ke.util.createBuffer(l);return l=new Array(4),l[0]=h.getInt32(),l[1]=h.getInt32(),l[2]=h.getInt32(),l[3]=h.getInt32(),l},t.cipher=function(l,h){return Ke.aes._updateBlock(l,h,r,!1),n.putInt32(r[0]),n.putInt32(r[1]),n.putInt32(r[2]),n.putInt32(r[3]),n.getBytes()},t.increment=function(l){return++l[3],l},t.md=Ke.md.sha256;function i(){var l=Ke.prng.create(t);return l.getBytes=function(h,d){return l.generate(h,d)},l.getBytesSync=function(h){return l.generate(h)},l}var a=i(),s=null,o=Ke.util.globalScope,u=o.crypto||o.msCrypto;if(u&&u.getRandomValues&&(s=function(l){return u.getRandomValues(l)}),Ke.options.usePureJavaScript||!Ke.util.isNodejs&&!s){if(typeof window=="undefined"||window.document===void 0,a.collectInt(+new Date,32),typeof navigator!="undefined"){var c="";for(var f in navigator)try{typeof navigator[f]=="string"&&(c+=navigator[f])}catch(l){}a.collect(c),c=null}e&&(e().mousemove(function(l){a.collectInt(l.clientX,16),a.collectInt(l.clientY,16)}),e().keypress(function(l){a.collectInt(l.charCode,8)}))}if(!Ke.random)Ke.random=a;else for(var f in a)Ke.random[f]=a[f];Ke.random.createInstance=i,Hs.exports=Ke.random})(typeof jQuery!="undefined"?jQuery:null)})()});var Ec=T((eb,wc)=>{var We=ae();Se();var js=[217,120,249,196,25,221,181,237,40,233,253,121,74,160,216,157,198,126,55,131,43,118,83,142,98,76,100,136,68,139,251,162,23,154,89,245,135,179,79,19,97,69,109,141,9,129,125,50,189,143,64,235,134,183,123,11,240,149,33,34,92,107,78,130,84,214,101,147,206,96,178,28,115,86,192,20,167,140,241,220,18,117,202,31,59,190,228,209,66,61,212,48,163,60,182,38,111,191,14,218,70,105,7,87,39,242,29,155,188,148,67,3,248,17,199,246,144,239,62,231,6,195,213,47,200,102,30,215,8,232,234,222,128,82,238,247,132,170,114,172,53,77,106,42,150,26,210,113,90,21,73,116,75,159,208,94,4,24,164,236,194,224,65,110,15,81,203,204,36,145,175,80,161,244,112,57,153,124,58,133,35,184,180,122,252,2,54,91,37,85,151,49,45,93,250,152,227,138,146,174,5,223,41,16,103,108,186,201,211,0,230,207,225,158,168,44,99,22,1,63,88,226,137,169,13,56,52,27,171,51,255,176,187,72,12,95,185,177,205,46,197,243,219,71,229,165,156,119,10,166,32,104,254,127,193,173],xc=[1,2,3,5],wy=function(e,t){return e<<t&65535|(e&65535)>>16-t},Ey=function(e,t){return(e&65535)>>t|e<<16-t&65535};wc.exports=We.rc2=We.rc2||{};We.rc2.expandKey=function(e,t){typeof e=="string"&&(e=We.util.createBuffer(e)),t=t||128;var r=e,n=e.length(),i=t,a=Math.ceil(i/8),s=255>>(i&7),o;for(o=n;o<128;o++)r.putByte(js[r.at(o-1)+r.at(o-n)&255]);for(r.setAt(128-a,js[r.at(128-a)&s]),o=127-a;o>=0;o--)r.setAt(o,js[r.at(o+1)^r.at(o+a)]);return r};var bc=function(e,t,r){var n=!1,i=null,a=null,s=null,o,u,c,f,l=[];for(e=We.rc2.expandKey(e,t),c=0;c<64;c++)l.push(e.getInt16Le());r?(o=function(p){for(c=0;c<4;c++)p[c]+=l[f]+(p[(c+3)%4]&p[(c+2)%4])+(~p[(c+3)%4]&p[(c+1)%4]),p[c]=wy(p[c],xc[c]),f++},u=function(p){for(c=0;c<4;c++)p[c]+=l[p[(c+3)%4]&63]}):(o=function(p){for(c=3;c>=0;c--)p[c]=Ey(p[c],xc[c]),p[c]-=l[f]+(p[(c+3)%4]&p[(c+2)%4])+(~p[(c+3)%4]&p[(c+1)%4]),f--},u=function(p){for(c=3;c>=0;c--)p[c]-=l[p[(c+3)%4]&63]});var h=function(p){var g=[];for(c=0;c<4;c++){var v=i.getInt16Le();s!==null&&(r?v^=s.getInt16Le():s.putInt16Le(v)),g.push(v&65535)}f=r?0:63;for(var x=0;x<p.length;x++)for(var S=0;S<p[x][0];S++)p[x][1](g);for(c=0;c<4;c++)s!==null&&(r?s.putInt16Le(g[c]):g[c]^=s.getInt16Le()),a.putInt16Le(g[c])},d=null;return d={start:function(p,g){p&&typeof p=="string"&&(p=We.util.createBuffer(p)),n=!1,i=We.util.createBuffer(),a=g||new We.util.createBuffer,s=p,d.output=a},update:function(p){for(n||i.putBuffer(p);i.length()>=8;)h([[5,o],[1,u],[6,o],[1,u],[5,o]])},finish:function(p){var g=!0;if(r)if(p)g=p(8,i,!r);else{var v=i.length()===8?8:8-i.length();i.fillWithByte(v,v)}if(g&&(n=!0,d.update()),!r&&(g=i.length()===0,g))if(p)g=p(8,a,!r);else{var x=a.length(),S=a.at(x-1);S>x?g=!1:a.truncate(S)}return g}},d};We.rc2.startEncrypting=function(e,t,r){var n=We.rc2.createEncryptionCipher(e,128);return n.start(t,r),n};We.rc2.createEncryptionCipher=function(e,t){return bc(e,t,!0)};We.rc2.startDecrypting=function(e,t,r){var n=We.rc2.createDecryptionCipher(e,128);return n.start(t,r),n};We.rc2.createDecryptionCipher=function(e,t){return bc(e,t,!1)}});var ga=T((tb,Rc)=>{var Gs=ae();Rc.exports=Gs.jsbn=Gs.jsbn||{};var ar,Sy=244837814094590,Sc=(Sy&16777215)==15715070;function E(e,t,r){this.data=[],e!=null&&(typeof e=="number"?this.fromNumber(e,t,r):t==null&&typeof e!="string"?this.fromString(e,256):this.fromString(e,t))}Gs.jsbn.BigInteger=E;function X(){return new E(null)}function By(e,t,r,n,i,a){for(;--a>=0;){var s=t*this.data[e++]+r.data[n]+i;i=Math.floor(s/67108864),r.data[n++]=s&67108863}return i}function Cy(e,t,r,n,i,a){for(var s=t&32767,o=t>>15;--a>=0;){var u=this.data[e]&32767,c=this.data[e++]>>15,f=o*u+c*s;u=s*u+((f&32767)<<15)+r.data[n]+(i&1073741823),i=(u>>>30)+(f>>>15)+o*c+(i>>>30),r.data[n++]=u&1073741823}return i}function Bc(e,t,r,n,i,a){for(var s=t&16383,o=t>>14;--a>=0;){var u=this.data[e]&16383,c=this.data[e++]>>14,f=o*u+c*s;u=s*u+((f&16383)<<14)+r.data[n]+i,i=(u>>28)+(f>>14)+o*c,r.data[n++]=u&268435455}return i}typeof navigator=="undefined"?(E.prototype.am=Bc,ar=28):Sc&&navigator.appName=="Microsoft Internet Explorer"?(E.prototype.am=Cy,ar=30):Sc&&navigator.appName!="Netscape"?(E.prototype.am=By,ar=26):(E.prototype.am=Bc,ar=28);E.prototype.DB=ar;E.prototype.DM=(1<<ar)-1;E.prototype.DV=1<<ar;var $s=52;E.prototype.FV=Math.pow(2,$s);E.prototype.F1=$s-ar;E.prototype.F2=2*ar-$s;var Ay="0123456789abcdefghijklmnopqrstuvwxyz",da=new Array,vn,ct;vn="0".charCodeAt(0);for(ct=0;ct<=9;++ct)da[vn++]=ct;vn="a".charCodeAt(0);for(ct=10;ct<36;++ct)da[vn++]=ct;vn="A".charCodeAt(0);for(ct=10;ct<36;++ct)da[vn++]=ct;function Cc(e){return Ay.charAt(e)}function Ac(e,t){var r=da[e.charCodeAt(t)];return r??-1}function Ty(e){for(var t=this.t-1;t>=0;--t)e.data[t]=this.data[t];e.t=this.t,e.s=this.s}function Iy(e){this.t=1,this.s=e<0?-1:0,e>0?this.data[0]=e:e<-1?this.data[0]=e+this.DV:this.t=0}function xr(e){var t=X();return t.fromInt(e),t}function _y(e,t){var r;if(t==16)r=4;else if(t==8)r=3;else if(t==256)r=8;else if(t==2)r=1;else if(t==32)r=5;else if(t==4)r=2;else{this.fromRadix(e,t);return}this.t=0,this.s=0;for(var n=e.length,i=!1,a=0;--n>=0;){var s=r==8?e[n]&255:Ac(e,n);if(s<0){e.charAt(n)=="-"&&(i=!0);continue}i=!1,a==0?this.data[this.t++]=s:a+r>this.DB?(this.data[this.t-1]|=(s&(1<<this.DB-a)-1)<<a,this.data[this.t++]=s>>this.DB-a):this.data[this.t-1]|=s<<a,a+=r,a>=this.DB&&(a-=this.DB)}r==8&&(e[0]&128)!=0&&(this.s=-1,a>0&&(this.data[this.t-1]|=(1<<this.DB-a)-1<<a)),this.clamp(),i&&E.ZERO.subTo(this,this)}function Ry(){for(var e=this.s&this.DM;this.t>0&&this.data[this.t-1]==e;)--this.t}function Ny(e){if(this.s<0)return"-"+this.negate().toString(e);var t;if(e==16)t=4;else if(e==8)t=3;else if(e==2)t=1;else if(e==32)t=5;else if(e==4)t=2;else return this.toRadix(e);var r=(1<<t)-1,n,i=!1,a="",s=this.t,o=this.DB-s*this.DB%t;if(s-- >0)for(o<this.DB&&(n=this.data[s]>>o)>0&&(i=!0,a=Cc(n));s>=0;)o<t?(n=(this.data[s]&(1<<o)-1)<<t-o,n|=this.data[--s]>>(o+=this.DB-t)):(n=this.data[s]>>(o-=t)&r,o<=0&&(o+=this.DB,--s)),n>0&&(i=!0),i&&(a+=Cc(n));return i?a:"0"}function Dy(){var e=X();return E.ZERO.subTo(this,e),e}function ky(){return this.s<0?this.negate():this}function Py(e){var t=this.s-e.s;if(t!=0)return t;var r=this.t;if(t=r-e.t,t!=0)return this.s<0?-t:t;for(;--r>=0;)if((t=this.data[r]-e.data[r])!=0)return t;return 0}function ya(e){var t=1,r;return(r=e>>>16)!=0&&(e=r,t+=16),(r=e>>8)!=0&&(e=r,t+=8),(r=e>>4)!=0&&(e=r,t+=4),(r=e>>2)!=0&&(e=r,t+=2),(r=e>>1)!=0&&(e=r,t+=1),t}function Ky(){return this.t<=0?0:this.DB*(this.t-1)+ya(this.data[this.t-1]^this.s&this.DM)}function Uy(e,t){var r;for(r=this.t-1;r>=0;--r)t.data[r+e]=this.data[r];for(r=e-1;r>=0;--r)t.data[r]=0;t.t=this.t+e,t.s=this.s}function Fy(e,t){for(var r=e;r<this.t;++r)t.data[r-e]=this.data[r];t.t=Math.max(this.t-e,0),t.s=this.s}function Ly(e,t){var r=e%this.DB,n=this.DB-r,i=(1<<n)-1,a=Math.floor(e/this.DB),s=this.s<<r&this.DM,o;for(o=this.t-1;o>=0;--o)t.data[o+a+1]=this.data[o]>>n|s,s=(this.data[o]&i)<<r;for(o=a-1;o>=0;--o)t.data[o]=0;t.data[a]=s,t.t=this.t+a+1,t.s=this.s,t.clamp()}function Oy(e,t){t.s=this.s;var r=Math.floor(e/this.DB);if(r>=this.t){t.t=0;return}var n=e%this.DB,i=this.DB-n,a=(1<<n)-1;t.data[0]=this.data[r]>>n;for(var s=r+1;s<this.t;++s)t.data[s-r-1]|=(this.data[s]&a)<<i,t.data[s-r]=this.data[s]>>n;n>0&&(t.data[this.t-r-1]|=(this.s&a)<<i),t.t=this.t-r,t.clamp()}function qy(e,t){for(var r=0,n=0,i=Math.min(e.t,this.t);r<i;)n+=this.data[r]-e.data[r],t.data[r++]=n&this.DM,n>>=this.DB;if(e.t<this.t){for(n-=e.s;r<this.t;)n+=this.data[r],t.data[r++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;r<e.t;)n-=e.data[r],t.data[r++]=n&this.DM,n>>=this.DB;n-=e.s}t.s=n<0?-1:0,n<-1?t.data[r++]=this.DV+n:n>0&&(t.data[r++]=n),t.t=r,t.clamp()}function My(e,t){var r=this.abs(),n=e.abs(),i=r.t;for(t.t=i+n.t;--i>=0;)t.data[i]=0;for(i=0;i<n.t;++i)t.data[i+r.t]=r.am(0,n.data[i],t,i,0,r.t);t.s=0,t.clamp(),this.s!=e.s&&E.ZERO.subTo(t,t)}function Vy(e){for(var t=this.abs(),r=e.t=2*t.t;--r>=0;)e.data[r]=0;for(r=0;r<t.t-1;++r){var n=t.am(r,t.data[r],e,2*r,0,1);(e.data[r+t.t]+=t.am(r+1,2*t.data[r],e,2*r+1,n,t.t-r-1))>=t.DV&&(e.data[r+t.t]-=t.DV,e.data[r+t.t+1]=1)}e.t>0&&(e.data[e.t-1]+=t.am(r,t.data[r],e,2*r,0,1)),e.s=0,e.clamp()}function zy(e,t,r){var n=e.abs();if(!(n.t<=0)){var i=this.abs();if(i.t<n.t){t!=null&&t.fromInt(0),r!=null&&this.copyTo(r);return}r==null&&(r=X());var a=X(),s=this.s,o=e.s,u=this.DB-ya(n.data[n.t-1]);u>0?(n.lShiftTo(u,a),i.lShiftTo(u,r)):(n.copyTo(a),i.copyTo(r));var c=a.t,f=a.data[c-1];if(f!=0){var l=f*(1<<this.F1)+(c>1?a.data[c-2]>>this.F2:0),h=this.FV/l,d=(1<<this.F1)/l,p=1<<this.F2,g=r.t,v=g-c,x=t??X();for(a.dlShiftTo(v,x),r.compareTo(x)>=0&&(r.data[r.t++]=1,r.subTo(x,r)),E.ONE.dlShiftTo(c,x),x.subTo(a,a);a.t<c;)a.data[a.t++]=0;for(;--v>=0;){var S=r.data[--g]==f?this.DM:Math.floor(r.data[g]*h+(r.data[g-1]+p)*d);if((r.data[g]+=a.am(0,S,r,v,0,c))<S)for(a.dlShiftTo(v,x),r.subTo(x,r);r.data[g]<--S;)r.subTo(x,r)}t!=null&&(r.drShiftTo(c,t),s!=o&&E.ZERO.subTo(t,t)),r.t=c,r.clamp(),u>0&&r.rShiftTo(u,r),s<0&&E.ZERO.subTo(r,r)}}}function Hy(e){var t=X();return this.abs().divRemTo(e,null,t),this.s<0&&t.compareTo(E.ZERO)>0&&e.subTo(t,t),t}function qr(e){this.m=e}function jy(e){return e.s<0||e.compareTo(this.m)>=0?e.mod(this.m):e}function Gy(e){return e}function $y(e){e.divRemTo(this.m,null,e)}function Wy(e,t,r){e.multiplyTo(t,r),this.reduce(r)}function Yy(e,t){e.squareTo(t),this.reduce(t)}qr.prototype.convert=jy;qr.prototype.revert=Gy;qr.prototype.reduce=$y;qr.prototype.mulTo=Wy;qr.prototype.sqrTo=Yy;function Zy(){if(this.t<1)return 0;var e=this.data[0];if((e&1)==0)return 0;var t=e&3;return t=t*(2-(e&15)*t)&15,t=t*(2-(e&255)*t)&255,t=t*(2-((e&65535)*t&65535))&65535,t=t*(2-e*t%this.DV)%this.DV,t>0?this.DV-t:-t}function Mr(e){this.m=e,this.mp=e.invDigit(),this.mpl=this.mp&32767,this.mph=this.mp>>15,this.um=(1<<e.DB-15)-1,this.mt2=2*e.t}function Qy(e){var t=X();return e.abs().dlShiftTo(this.m.t,t),t.divRemTo(this.m,null,t),e.s<0&&t.compareTo(E.ZERO)>0&&this.m.subTo(t,t),t}function Xy(e){var t=X();return e.copyTo(t),this.reduce(t),t}function Jy(e){for(;e.t<=this.mt2;)e.data[e.t++]=0;for(var t=0;t<this.m.t;++t){var r=e.data[t]&32767,n=r*this.mpl+((r*this.mph+(e.data[t]>>15)*this.mpl&this.um)<<15)&e.DM;for(r=t+this.m.t,e.data[r]+=this.m.am(0,n,e,t,0,this.m.t);e.data[r]>=e.DV;)e.data[r]-=e.DV,e.data[++r]++}e.clamp(),e.drShiftTo(this.m.t,e),e.compareTo(this.m)>=0&&e.subTo(this.m,e)}function e1(e,t){e.squareTo(t),this.reduce(t)}function t1(e,t,r){e.multiplyTo(t,r),this.reduce(r)}Mr.prototype.convert=Qy;Mr.prototype.revert=Xy;Mr.prototype.reduce=Jy;Mr.prototype.mulTo=t1;Mr.prototype.sqrTo=e1;function r1(){return(this.t>0?this.data[0]&1:this.s)==0}function n1(e,t){if(e>4294967295||e<1)return E.ONE;var r=X(),n=X(),i=t.convert(this),a=ya(e)-1;for(i.copyTo(r);--a>=0;)if(t.sqrTo(r,n),(e&1<<a)>0)t.mulTo(n,i,r);else{var s=r;r=n,n=s}return t.revert(r)}function i1(e,t){var r;return e<256||t.isEven()?r=new qr(t):r=new Mr(t),this.exp(e,r)}E.prototype.copyTo=Ty;E.prototype.fromInt=Iy;E.prototype.fromString=_y;E.prototype.clamp=Ry;E.prototype.dlShiftTo=Uy;E.prototype.drShiftTo=Fy;E.prototype.lShiftTo=Ly;E.prototype.rShiftTo=Oy;E.prototype.subTo=qy;E.prototype.multiplyTo=My;E.prototype.squareTo=Vy;E.prototype.divRemTo=zy;E.prototype.invDigit=Zy;E.prototype.isEven=r1;E.prototype.exp=n1;E.prototype.toString=Ny;E.prototype.negate=Dy;E.prototype.abs=ky;E.prototype.compareTo=Py;E.prototype.bitLength=Ky;E.prototype.mod=Hy;E.prototype.modPowInt=i1;E.ZERO=xr(0);E.ONE=xr(1);function a1(){var e=X();return this.copyTo(e),e}function s1(){if(this.s<0){if(this.t==1)return this.data[0]-this.DV;if(this.t==0)return-1}else{if(this.t==1)return this.data[0];if(this.t==0)return 0}return(this.data[1]&(1<<32-this.DB)-1)<<this.DB|this.data[0]}function o1(){return this.t==0?this.s:this.data[0]<<24>>24}function u1(){return this.t==0?this.s:this.data[0]<<16>>16}function c1(e){return Math.floor(Math.LN2*this.DB/Math.log(e))}function f1(){return this.s<0?-1:this.t<=0||this.t==1&&this.data[0]<=0?0:1}function l1(e){if(e==null&&(e=10),this.signum()==0||e<2||e>36)return"0";var t=this.chunkSize(e),r=Math.pow(e,t),n=xr(r),i=X(),a=X(),s="";for(this.divRemTo(n,i,a);i.signum()>0;)s=(r+a.intValue()).toString(e).substr(1)+s,i.divRemTo(n,i,a);return a.intValue().toString(e)+s}function h1(e,t){this.fromInt(0),t==null&&(t=10);for(var r=this.chunkSize(t),n=Math.pow(t,r),i=!1,a=0,s=0,o=0;o<e.length;++o){var u=Ac(e,o);if(u<0){e.charAt(o)=="-"&&this.signum()==0&&(i=!0);continue}s=t*s+u,++a>=r&&(this.dMultiply(n),this.dAddOffset(s,0),a=0,s=0)}a>0&&(this.dMultiply(Math.pow(t,a)),this.dAddOffset(s,0)),i&&E.ZERO.subTo(this,this)}function p1(e,t,r){if(typeof t=="number")if(e<2)this.fromInt(1);else for(this.fromNumber(e,r),this.testBit(e-1)||this.bitwiseTo(E.ONE.shiftLeft(e-1),Ws,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(t);)this.dAddOffset(2,0),this.bitLength()>e&&this.subTo(E.ONE.shiftLeft(e-1),this);else{var n=new Array,i=e&7;n.length=(e>>3)+1,t.nextBytes(n),i>0?n[0]&=(1<<i)-1:n[0]=0,this.fromString(n,256)}}function d1(){var e=this.t,t=new Array;t[0]=this.s;var r=this.DB-e*this.DB%8,n,i=0;if(e-- >0)for(r<this.DB&&(n=this.data[e]>>r)!=(this.s&this.DM)>>r&&(t[i++]=n|this.s<<this.DB-r);e>=0;)r<8?(n=(this.data[e]&(1<<r)-1)<<8-r,n|=this.data[--e]>>(r+=this.DB-8)):(n=this.data[e]>>(r-=8)&255,r<=0&&(r+=this.DB,--e)),(n&128)!=0&&(n|=-256),i==0&&(this.s&128)!=(n&128)&&++i,(i>0||n!=this.s)&&(t[i++]=n);return t}function y1(e){return this.compareTo(e)==0}function g1(e){return this.compareTo(e)<0?this:e}function v1(e){return this.compareTo(e)>0?this:e}function m1(e,t,r){var n,i,a=Math.min(e.t,this.t);for(n=0;n<a;++n)r.data[n]=t(this.data[n],e.data[n]);if(e.t<this.t){for(i=e.s&this.DM,n=a;n<this.t;++n)r.data[n]=t(this.data[n],i);r.t=this.t}else{for(i=this.s&this.DM,n=a;n<e.t;++n)r.data[n]=t(i,e.data[n]);r.t=e.t}r.s=t(this.s,e.s),r.clamp()}function x1(e,t){return e&t}function b1(e){var t=X();return this.bitwiseTo(e,x1,t),t}function Ws(e,t){return e|t}function w1(e){var t=X();return this.bitwiseTo(e,Ws,t),t}function Tc(e,t){return e^t}function E1(e){var t=X();return this.bitwiseTo(e,Tc,t),t}function Ic(e,t){return e&~t}function S1(e){var t=X();return this.bitwiseTo(e,Ic,t),t}function B1(){for(var e=X(),t=0;t<this.t;++t)e.data[t]=this.DM&~this.data[t];return e.t=this.t,e.s=~this.s,e}function C1(e){var t=X();return e<0?this.rShiftTo(-e,t):this.lShiftTo(e,t),t}function A1(e){var t=X();return e<0?this.lShiftTo(-e,t):this.rShiftTo(e,t),t}function T1(e){if(e==0)return-1;var t=0;return(e&65535)==0&&(e>>=16,t+=16),(e&255)==0&&(e>>=8,t+=8),(e&15)==0&&(e>>=4,t+=4),(e&3)==0&&(e>>=2,t+=2),(e&1)==0&&++t,t}function I1(){for(var e=0;e<this.t;++e)if(this.data[e]!=0)return e*this.DB+T1(this.data[e]);return this.s<0?this.t*this.DB:-1}function _1(e){for(var t=0;e!=0;)e&=e-1,++t;return t}function R1(){for(var e=0,t=this.s&this.DM,r=0;r<this.t;++r)e+=_1(this.data[r]^t);return e}function N1(e){var t=Math.floor(e/this.DB);return t>=this.t?this.s!=0:(this.data[t]&1<<e%this.DB)!=0}function D1(e,t){var r=E.ONE.shiftLeft(e);return this.bitwiseTo(r,t,r),r}function k1(e){return this.changeBit(e,Ws)}function P1(e){return this.changeBit(e,Ic)}function K1(e){return this.changeBit(e,Tc)}function U1(e,t){for(var r=0,n=0,i=Math.min(e.t,this.t);r<i;)n+=this.data[r]+e.data[r],t.data[r++]=n&this.DM,n>>=this.DB;if(e.t<this.t){for(n+=e.s;r<this.t;)n+=this.data[r],t.data[r++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;r<e.t;)n+=e.data[r],t.data[r++]=n&this.DM,n>>=this.DB;n+=e.s}t.s=n<0?-1:0,n>0?t.data[r++]=n:n<-1&&(t.data[r++]=this.DV+n),t.t=r,t.clamp()}function F1(e){var t=X();return this.addTo(e,t),t}function L1(e){var t=X();return this.subTo(e,t),t}function O1(e){var t=X();return this.multiplyTo(e,t),t}function q1(e){var t=X();return this.divRemTo(e,t,null),t}function M1(e){var t=X();return this.divRemTo(e,null,t),t}function V1(e){var t=X(),r=X();return this.divRemTo(e,t,r),new Array(t,r)}function z1(e){this.data[this.t]=this.am(0,e-1,this,0,0,this.t),++this.t,this.clamp()}function H1(e,t){if(e!=0){for(;this.t<=t;)this.data[this.t++]=0;for(this.data[t]+=e;this.data[t]>=this.DV;)this.data[t]-=this.DV,++t>=this.t&&(this.data[this.t++]=0),++this.data[t]}}function si(){}function _c(e){return e}function j1(e,t,r){e.multiplyTo(t,r)}function G1(e,t){e.squareTo(t)}si.prototype.convert=_c;si.prototype.revert=_c;si.prototype.mulTo=j1;si.prototype.sqrTo=G1;function $1(e){return this.exp(e,new si)}function W1(e,t,r){var n=Math.min(this.t+e.t,t);for(r.s=0,r.t=n;n>0;)r.data[--n]=0;var i;for(i=r.t-this.t;n<i;++n)r.data[n+this.t]=this.am(0,e.data[n],r,n,0,this.t);for(i=Math.min(e.t,t);n<i;++n)this.am(0,e.data[n],r,n,0,t-n);r.clamp()}function Y1(e,t,r){--t;var n=r.t=this.t+e.t-t;for(r.s=0;--n>=0;)r.data[n]=0;for(n=Math.max(t-this.t,0);n<e.t;++n)r.data[this.t+n-t]=this.am(t-n,e.data[n],r,0,0,this.t+n-t);r.clamp(),r.drShiftTo(1,r)}function mn(e){this.r2=X(),this.q3=X(),E.ONE.dlShiftTo(2*e.t,this.r2),this.mu=this.r2.divide(e),this.m=e}function Z1(e){if(e.s<0||e.t>2*this.m.t)return e.mod(this.m);if(e.compareTo(this.m)<0)return e;var t=X();return e.copyTo(t),this.reduce(t),t}function Q1(e){return e}function X1(e){for(e.drShiftTo(this.m.t-1,this.r2),e.t>this.m.t+1&&(e.t=this.m.t+1,e.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);e.compareTo(this.r2)<0;)e.dAddOffset(1,this.m.t+1);for(e.subTo(this.r2,e);e.compareTo(this.m)>=0;)e.subTo(this.m,e)}function J1(e,t){e.squareTo(t),this.reduce(t)}function eg(e,t,r){e.multiplyTo(t,r),this.reduce(r)}mn.prototype.convert=Z1;mn.prototype.revert=Q1;mn.prototype.reduce=X1;mn.prototype.mulTo=eg;mn.prototype.sqrTo=J1;function tg(e,t){var r=e.bitLength(),n,i=xr(1),a;if(r<=0)return i;r<18?n=1:r<48?n=3:r<144?n=4:r<768?n=5:n=6,r<8?a=new qr(t):t.isEven()?a=new mn(t):a=new Mr(t);var s=new Array,o=3,u=n-1,c=(1<<n)-1;if(s[1]=a.convert(this),n>1){var f=X();for(a.sqrTo(s[1],f);o<=c;)s[o]=X(),a.mulTo(f,s[o-2],s[o]),o+=2}var l=e.t-1,h,d=!0,p=X(),g;for(r=ya(e.data[l])-1;l>=0;){for(r>=u?h=e.data[l]>>r-u&c:(h=(e.data[l]&(1<<r+1)-1)<<u-r,l>0&&(h|=e.data[l-1]>>this.DB+r-u)),o=n;(h&1)==0;)h>>=1,--o;if((r-=o)<0&&(r+=this.DB,--l),d)s[h].copyTo(i),d=!1;else{for(;o>1;)a.sqrTo(i,p),a.sqrTo(p,i),o-=2;o>0?a.sqrTo(i,p):(g=i,i=p,p=g),a.mulTo(p,s[h],i)}for(;l>=0&&(e.data[l]&1<<r)==0;)a.sqrTo(i,p),g=i,i=p,p=g,--r<0&&(r=this.DB-1,--l)}return a.revert(i)}function rg(e){var t=this.s<0?this.negate():this.clone(),r=e.s<0?e.negate():e.clone();if(t.compareTo(r)<0){var n=t;t=r,r=n}var i=t.getLowestSetBit(),a=r.getLowestSetBit();if(a<0)return t;for(i<a&&(a=i),a>0&&(t.rShiftTo(a,t),r.rShiftTo(a,r));t.signum()>0;)(i=t.getLowestSetBit())>0&&t.rShiftTo(i,t),(i=r.getLowestSetBit())>0&&r.rShiftTo(i,r),t.compareTo(r)>=0?(t.subTo(r,t),t.rShiftTo(1,t)):(r.subTo(t,r),r.rShiftTo(1,r));return a>0&&r.lShiftTo(a,r),r}function ng(e){if(e<=0)return 0;var t=this.DV%e,r=this.s<0?e-1:0;if(this.t>0)if(t==0)r=this.data[0]%e;else for(var n=this.t-1;n>=0;--n)r=(t*r+this.data[n])%e;return r}function ig(e){var t=e.isEven();if(this.isEven()&&t||e.signum()==0)return E.ZERO;for(var r=e.clone(),n=this.clone(),i=xr(1),a=xr(0),s=xr(0),o=xr(1);r.signum()!=0;){for(;r.isEven();)r.rShiftTo(1,r),t?((!i.isEven()||!a.isEven())&&(i.addTo(this,i),a.subTo(e,a)),i.rShiftTo(1,i)):a.isEven()||a.subTo(e,a),a.rShiftTo(1,a);for(;n.isEven();)n.rShiftTo(1,n),t?((!s.isEven()||!o.isEven())&&(s.addTo(this,s),o.subTo(e,o)),s.rShiftTo(1,s)):o.isEven()||o.subTo(e,o),o.rShiftTo(1,o);r.compareTo(n)>=0?(r.subTo(n,r),t&&i.subTo(s,i),a.subTo(o,a)):(n.subTo(r,n),t&&s.subTo(i,s),o.subTo(a,o))}if(n.compareTo(E.ONE)!=0)return E.ZERO;if(o.compareTo(e)>=0)return o.subtract(e);if(o.signum()<0)o.addTo(e,o);else return o;return o.signum()<0?o.add(e):o}var It=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509],ag=(1<<26)/It[It.length-1];function sg(e){var t,r=this.abs();if(r.t==1&&r.data[0]<=It[It.length-1]){for(t=0;t<It.length;++t)if(r.data[0]==It[t])return!0;return!1}if(r.isEven())return!1;for(t=1;t<It.length;){for(var n=It[t],i=t+1;i<It.length&&n<ag;)n*=It[i++];for(n=r.modInt(n);t<i;)if(n%It[t++]==0)return!1}return r.millerRabin(e)}function og(e){var t=this.subtract(E.ONE),r=t.getLowestSetBit();if(r<=0)return!1;for(var n=t.shiftRight(r),i=ug(),a,s=0;s<e;++s){do a=new E(this.bitLength(),i);while(a.compareTo(E.ONE)<=0||a.compareTo(t)>=0);var o=a.modPow(n,this);if(o.compareTo(E.ONE)!=0&&o.compareTo(t)!=0){for(var u=1;u++<r&&o.compareTo(t)!=0;)if(o=o.modPowInt(2,this),o.compareTo(E.ONE)==0)return!1;if(o.compareTo(t)!=0)return!1}}return!0}function ug(){return{nextBytes:function(e){for(var t=0;t<e.length;++t)e[t]=Math.floor(Math.random()*256)}}}E.prototype.chunkSize=c1;E.prototype.toRadix=l1;E.prototype.fromRadix=h1;E.prototype.fromNumber=p1;E.prototype.bitwiseTo=m1;E.prototype.changeBit=D1;E.prototype.addTo=U1;E.prototype.dMultiply=z1;E.prototype.dAddOffset=H1;E.prototype.multiplyLowerTo=W1;E.prototype.multiplyUpperTo=Y1;E.prototype.modInt=ng;E.prototype.millerRabin=og;E.prototype.clone=a1;E.prototype.intValue=s1;E.prototype.byteValue=o1;E.prototype.shortValue=u1;E.prototype.signum=f1;E.prototype.toByteArray=d1;E.prototype.equals=y1;E.prototype.min=g1;E.prototype.max=v1;E.prototype.and=b1;E.prototype.or=w1;E.prototype.xor=E1;E.prototype.andNot=S1;E.prototype.not=B1;E.prototype.shiftLeft=C1;E.prototype.shiftRight=A1;E.prototype.getLowestSetBit=I1;E.prototype.bitCount=R1;E.prototype.testBit=N1;E.prototype.setBit=k1;E.prototype.clearBit=P1;E.prototype.flipBit=K1;E.prototype.add=F1;E.prototype.subtract=L1;E.prototype.multiply=O1;E.prototype.divide=q1;E.prototype.remainder=M1;E.prototype.divideAndRemainder=V1;E.prototype.modPow=tg;E.prototype.modInverse=ig;E.prototype.pow=$1;E.prototype.gcd=rg;E.prototype.isProbablePrime=sg});var Kc=T((rb,Pc)=>{var qt=ae();Or();Se();var Nc=Pc.exports=qt.sha1=qt.sha1||{};qt.md.sha1=qt.md.algorithms.sha1=Nc;Nc.create=function(){Dc||cg();var e=null,t=qt.util.createBuffer(),r=new Array(80),n={algorithm:"sha1",blockLength:64,digestLength:20,messageLength:0,fullMessageLength:null,messageLengthSize:8};return n.start=function(){n.messageLength=0,n.fullMessageLength=n.messageLength64=[];for(var i=n.messageLengthSize/4,a=0;a<i;++a)n.fullMessageLength.push(0);return t=qt.util.createBuffer(),e={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878,h4:3285377520},n},n.start(),n.update=function(i,a){a==="utf8"&&(i=qt.util.encodeUtf8(i));var s=i.length;n.messageLength+=s,s=[s/4294967296>>>0,s>>>0];for(var o=n.fullMessageLength.length-1;o>=0;--o)n.fullMessageLength[o]+=s[1],s[1]=s[0]+(n.fullMessageLength[o]/4294967296>>>0),n.fullMessageLength[o]=n.fullMessageLength[o]>>>0,s[0]=s[1]/4294967296>>>0;return t.putBytes(i),kc(e,r,t),(t.read>2048||t.length()===0)&&t.compact(),n},n.digest=function(){var i=qt.util.createBuffer();i.putBytes(t.bytes());var a=n.fullMessageLength[n.fullMessageLength.length-1]+n.messageLengthSize,s=a&n.blockLength-1;i.putBytes(Ys.substr(0,n.blockLength-s));for(var o,u,c=n.fullMessageLength[0]*8,f=0;f<n.fullMessageLength.length-1;++f)o=n.fullMessageLength[f+1]*8,u=o/4294967296>>>0,c+=u,i.putInt32(c>>>0),c=o>>>0;i.putInt32(c);var l={h0:e.h0,h1:e.h1,h2:e.h2,h3:e.h3,h4:e.h4};kc(l,r,i);var h=qt.util.createBuffer();return h.putInt32(l.h0),h.putInt32(l.h1),h.putInt32(l.h2),h.putInt32(l.h3),h.putInt32(l.h4),h},n};var Ys=null,Dc=!1;function cg(){Ys=String.fromCharCode(128),Ys+=qt.util.fillString(String.fromCharCode(0),64),Dc=!0}function kc(e,t,r){for(var n,i,a,s,o,u,c,f,l=r.length();l>=64;){for(i=e.h0,a=e.h1,s=e.h2,o=e.h3,u=e.h4,f=0;f<16;++f)n=r.getInt32(),t[f]=n,c=o^a&(s^o),n=(i<<5|i>>>27)+c+u+1518500249+n,u=o,o=s,s=(a<<30|a>>>2)>>>0,a=i,i=n;for(;f<20;++f)n=t[f-3]^t[f-8]^t[f-14]^t[f-16],n=n<<1|n>>>31,t[f]=n,c=o^a&(s^o),n=(i<<5|i>>>27)+c+u+1518500249+n,u=o,o=s,s=(a<<30|a>>>2)>>>0,a=i,i=n;for(;f<32;++f)n=t[f-3]^t[f-8]^t[f-14]^t[f-16],n=n<<1|n>>>31,t[f]=n,c=a^s^o,n=(i<<5|i>>>27)+c+u+1859775393+n,u=o,o=s,s=(a<<30|a>>>2)>>>0,a=i,i=n;for(;f<40;++f)n=t[f-6]^t[f-16]^t[f-28]^t[f-32],n=n<<2|n>>>30,t[f]=n,c=a^s^o,n=(i<<5|i>>>27)+c+u+1859775393+n,u=o,o=s,s=(a<<30|a>>>2)>>>0,a=i,i=n;for(;f<60;++f)n=t[f-6]^t[f-16]^t[f-28]^t[f-32],n=n<<2|n>>>30,t[f]=n,c=a&s|o&(a^s),n=(i<<5|i>>>27)+c+u+2400959708+n,u=o,o=s,s=(a<<30|a>>>2)>>>0,a=i,i=n;for(;f<80;++f)n=t[f-6]^t[f-16]^t[f-28]^t[f-32],n=n<<2|n>>>30,t[f]=n,c=a^s^o,n=(i<<5|i>>>27)+c+u+3395469782+n,u=o,o=s,s=(a<<30|a>>>2)>>>0,a=i,i=n;e.h0=e.h0+i|0,e.h1=e.h1+a|0,e.h2=e.h2+s|0,e.h3=e.h3+o|0,e.h4=e.h4+u|0,l-=64}}});var Lc=T((nb,Fc)=>{var Mt=ae();Se();ai();Kc();var Uc=Fc.exports=Mt.pkcs1=Mt.pkcs1||{};Uc.encode_rsa_oaep=function(e,t,r){var n,i,a,s;typeof r=="string"?(n=r,i=arguments[3]||void 0,a=arguments[4]||void 0):r&&(n=r.label||void 0,i=r.seed||void 0,a=r.md||void 0,r.mgf1&&r.mgf1.md&&(s=r.mgf1.md)),a?a.start():a=Mt.md.sha1.create(),s||(s=a);var o=Math.ceil(e.n.bitLength()/8),u=o-2*a.digestLength-2;if(t.length>u){var c=new Error("RSAES-OAEP input message length is too long.");throw c.length=t.length,c.maxLength=u,c}n||(n=""),a.update(n,"raw");for(var f=a.digest(),l="",h=u-t.length,d=0;d<h;d++)l+="\0";var p=f.getBytes()+l+""+t;if(!i)i=Mt.random.getBytes(a.digestLength);else if(i.length!==a.digestLength){var c=new Error("Invalid RSAES-OAEP seed. The seed length must match the digest length.");throw c.seedLength=i.length,c.digestLength=a.digestLength,c}var g=va(i,o-a.digestLength-1,s),v=Mt.util.xorBytes(p,g,p.length),x=va(v,a.digestLength,s),S=Mt.util.xorBytes(i,x,i.length);return"\0"+S+v};Uc.decode_rsa_oaep=function(e,t,r){var n,i,a;typeof r=="string"?(n=r,i=arguments[3]||void 0):r&&(n=r.label||void 0,i=r.md||void 0,r.mgf1&&r.mgf1.md&&(a=r.mgf1.md));var s=Math.ceil(e.n.bitLength()/8);if(t.length!==s){var v=new Error("RSAES-OAEP encoded message length is invalid.");throw v.length=t.length,v.expectedLength=s,v}if(i===void 0?i=Mt.md.sha1.create():i.start(),a||(a=i),s<2*i.digestLength+2)throw new Error("RSAES-OAEP key is too short for the hash function.");n||(n=""),i.update(n,"raw");for(var o=i.digest().getBytes(),u=t.charAt(0),c=t.substring(1,i.digestLength+1),f=t.substring(1+i.digestLength),l=va(f,i.digestLength,a),h=Mt.util.xorBytes(c,l,c.length),d=va(h,s-i.digestLength-1,a),p=Mt.util.xorBytes(f,d,f.length),g=p.substring(0,i.digestLength),v=u!=="\0",x=0;x<i.digestLength;++x)v|=o.charAt(x)!==g.charAt(x);for(var S=1,C=i.digestLength,L=i.digestLength;L<p.length;L++){var D=p.charCodeAt(L),R=D&1^1,$=S?65534:0;v|=D&$,S=S&R,C+=S}if(v||p.charCodeAt(C)!==1)throw new Error("Invalid RSAES-OAEP padding.");return p.substring(C+1)};function va(e,t,r){r||(r=Mt.md.sha1.create());for(var n="",i=Math.ceil(t/r.digestLength),a=0;a<i;++a){var s=String.fromCharCode(a>>24&255,a>>16&255,a>>8&255,a&255);r.start(),r.update(e+s),n+=r.digest().getBytes()}return n.substring(0,t)}});var Oc=T((ib,Zs)=>{var br=ae();Se();ga();ai();(function(){if(br.prime){Zs.exports=br.prime;return}var e=Zs.exports=br.prime=br.prime||{},t=br.jsbn.BigInteger,r=[6,4,2,4,2,4,6,2],n=new t(null);n.fromInt(30);var i=function(l,h){return l|h};e.generateProbablePrime=function(l,h,d){typeof h=="function"&&(d=h,h={}),h=h||{};var p=h.algorithm||"PRIMEINC";typeof p=="string"&&(p={name:p}),p.options=p.options||{};var g=h.prng||br.random,v={nextBytes:function(x){for(var S=g.getBytesSync(x.length),C=0;C<x.length;++C)x[C]=S.charCodeAt(C)}};if(p.name==="PRIMEINC")return a(l,v,p.options,d);throw new Error("Invalid prime generation algorithm: "+p.name)};function a(l,h,d,p){return"workers"in d?u(l,h,d,p):s(l,h,d,p)}function s(l,h,d,p){var g=c(l,h),v=0,x=f(g.bitLength());"millerRabinTests"in d&&(x=d.millerRabinTests);var S=10;"maxBlockTime"in d&&(S=d.maxBlockTime),o(g,l,h,v,x,S,p)}function o(l,h,d,p,g,v,x){var S=+new Date;do{if(l.bitLength()>h&&(l=c(h,d)),l.isProbablePrime(g))return x(null,l);l.dAddOffset(r[p++%8],0)}while(v<0||+new Date-S<v);br.util.setImmediate(function(){o(l,h,d,p,g,v,x)})}function u(l,h,d,p){if(typeof Worker=="undefined")return s(l,h,d,p);var g=c(l,h),v=d.workers,x=d.workLoad||100,S=x*30/8,C=d.workerScript||"forge/prime.worker.js";if(v===-1)return br.util.estimateCores(function(D,R){D&&(R=2),v=R-1,L()});L();function L(){v=Math.max(1,v);for(var D=[],R=0;R<v;++R)D[R]=new Worker(C);for(var $=v,R=0;R<v;++R)D[R].addEventListener("message",Ee);var Y=!1;function Ee(Xe){if(!Y){--$;var Oe=Xe.data;if(Oe.found){for(var Fe=0;Fe<D.length;++Fe)D[Fe].terminate();return Y=!0,p(null,new t(Oe.prime,16))}g.bitLength()>l&&(g=c(l,h));var lr=g.toString(16);Xe.target.postMessage({hex:lr,workLoad:x}),g.dAddOffset(S,0)}}}}function c(l,h){var d=new t(l,h),p=l-1;return d.testBit(p)||d.bitwiseTo(t.ONE.shiftLeft(p),i,d),d.dAddOffset(31-d.mod(n).byteValue(),0),d}function f(l){return l<=100?27:l<=150?18:l<=200?15:l<=250?12:l<=300?9:l<=350?8:l<=400?7:l<=500?6:l<=600?5:l<=800?4:l<=1250?3:2}})()});var xa=T((ab,Gc)=>{var V=ae();ii();ga();oa();Lc();Oc();ai();Se();typeof Z=="undefined"&&(Z=V.jsbn.BigInteger);var Z,Qs=V.util.isNodejs?gn():null,m=V.asn1,ft=V.util;V.pki=V.pki||{};Gc.exports=V.pki.rsa=V.rsa=V.rsa||{};var z=V.pki,fg=[6,4,2,4,2,4,6,2],lg={name:"PrivateKeyInfo",tagClass:m.Class.UNIVERSAL,type:m.Type.SEQUENCE,constructed:!0,value:[{name:"PrivateKeyInfo.version",tagClass:m.Class.UNIVERSAL,type:m.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"PrivateKeyInfo.privateKeyAlgorithm",tagClass:m.Class.UNIVERSAL,type:m.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:m.Class.UNIVERSAL,type:m.Type.OID,constructed:!1,capture:"privateKeyOid"}]},{name:"PrivateKeyInfo",tagClass:m.Class.UNIVERSAL,type:m.Type.OCTETSTRING,constructed:!1,capture:"privateKey"}]},hg={name:"RSAPrivateKey",tagClass:m.Class.UNIVERSAL,type:m.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPrivateKey.version",tagClass:m.Class.UNIVERSAL,type:m.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"RSAPrivateKey.modulus",tagClass:m.Class.UNIVERSAL,type:m.Type.INTEGER,constructed:!1,capture:"privateKeyModulus"},{name:"RSAPrivateKey.publicExponent",tagClass:m.Class.UNIVERSAL,type:m.Type.INTEGER,constructed:!1,capture:"privateKeyPublicExponent"},{name:"RSAPrivateKey.privateExponent",tagClass:m.Class.UNIVERSAL,type:m.Type.INTEGER,constructed:!1,capture:"privateKeyPrivateExponent"},{name:"RSAPrivateKey.prime1",tagClass:m.Class.UNIVERSAL,type:m.Type.INTEGER,constructed:!1,capture:"privateKeyPrime1"},{name:"RSAPrivateKey.prime2",tagClass:m.Class.UNIVERSAL,type:m.Type.INTEGER,constructed:!1,capture:"privateKeyPrime2"},{name:"RSAPrivateKey.exponent1",tagClass:m.Class.UNIVERSAL,type:m.Type.INTEGER,constructed:!1,capture:"privateKeyExponent1"},{name:"RSAPrivateKey.exponent2",tagClass:m.Class.UNIVERSAL,type:m.Type.INTEGER,constructed:!1,capture:"privateKeyExponent2"},{name:"RSAPrivateKey.coefficient",tagClass:m.Class.UNIVERSAL,type:m.Type.INTEGER,constructed:!1,capture:"privateKeyCoefficient"}]},pg={name:"RSAPublicKey",tagClass:m.Class.UNIVERSAL,type:m.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPublicKey.modulus",tagClass:m.Class.UNIVERSAL,type:m.Type.INTEGER,constructed:!1,capture:"publicKeyModulus"},{name:"RSAPublicKey.exponent",tagClass:m.Class.UNIVERSAL,type:m.Type.INTEGER,constructed:!1,capture:"publicKeyExponent"}]},dg=V.pki.rsa.publicKeyValidator={name:"SubjectPublicKeyInfo",tagClass:m.Class.UNIVERSAL,type:m.Type.SEQUENCE,constructed:!0,captureAsn1:"subjectPublicKeyInfo",value:[{name:"SubjectPublicKeyInfo.AlgorithmIdentifier",tagClass:m.Class.UNIVERSAL,type:m.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:m.Class.UNIVERSAL,type:m.Type.OID,constructed:!1,capture:"publicKeyOid"}]},{name:"SubjectPublicKeyInfo.subjectPublicKey",tagClass:m.Class.UNIVERSAL,type:m.Type.BITSTRING,constructed:!1,value:[{name:"SubjectPublicKeyInfo.subjectPublicKey.RSAPublicKey",tagClass:m.Class.UNIVERSAL,type:m.Type.SEQUENCE,constructed:!0,optional:!0,captureAsn1:"rsaPublicKey"}]}]},yg=function(e){var t;if(e.algorithm in z.oids)t=z.oids[e.algorithm];else{var r=new Error("Unknown message digest algorithm.");throw r.algorithm=e.algorithm,r}var n=m.oidToDer(t).getBytes(),i=m.create(m.Class.UNIVERSAL,m.Type.SEQUENCE,!0,[]),a=m.create(m.Class.UNIVERSAL,m.Type.SEQUENCE,!0,[]);a.value.push(m.create(m.Class.UNIVERSAL,m.Type.OID,!1,n)),a.value.push(m.create(m.Class.UNIVERSAL,m.Type.NULL,!1,""));var s=m.create(m.Class.UNIVERSAL,m.Type.OCTETSTRING,!1,e.digest().getBytes());return i.value.push(a),i.value.push(s),m.toDer(i).getBytes()},qc=function(e,t,r){if(r)return e.modPow(t.e,t.n);if(!t.p||!t.q)return e.modPow(t.d,t.n);t.dP||(t.dP=t.d.mod(t.p.subtract(Z.ONE))),t.dQ||(t.dQ=t.d.mod(t.q.subtract(Z.ONE))),t.qInv||(t.qInv=t.q.modInverse(t.p));var n;do n=new Z(V.util.bytesToHex(V.random.getBytes(t.n.bitLength()/8)),16);while(n.compareTo(t.n)>=0||!n.gcd(t.n).equals(Z.ONE));e=e.multiply(n.modPow(t.e,t.n)).mod(t.n);for(var i=e.mod(t.p).modPow(t.dP,t.p),a=e.mod(t.q).modPow(t.dQ,t.q);i.compareTo(a)<0;)i=i.add(t.p);var s=i.subtract(a).multiply(t.qInv).mod(t.p).multiply(t.q).add(a);return s=s.multiply(n.modInverse(t.n)).mod(t.n),s};z.rsa.encrypt=function(e,t,r){var n=r,i,a=Math.ceil(t.n.bitLength()/8);r!==!1&&r!==!0?(n=r===2,i=Mc(e,t,r)):(i=V.util.createBuffer(),i.putBytes(e));for(var s=new Z(i.toHex(),16),o=qc(s,t,n),u=o.toString(16),c=V.util.createBuffer(),f=a-Math.ceil(u.length/2);f>0;)c.putByte(0),--f;return c.putBytes(V.util.hexToBytes(u)),c.getBytes()};z.rsa.decrypt=function(e,t,r,n){var i=Math.ceil(t.n.bitLength()/8);if(e.length!==i){var a=new Error("Encrypted message length is invalid.");throw a.length=e.length,a.expected=i,a}var s=new Z(V.util.createBuffer(e).toHex(),16);if(s.compareTo(t.n)>=0)throw new Error("Encrypted message is invalid.");for(var o=qc(s,t,r),u=o.toString(16),c=V.util.createBuffer(),f=i-Math.ceil(u.length/2);f>0;)c.putByte(0),--f;return c.putBytes(V.util.hexToBytes(u)),n!==!1?ma(c.getBytes(),t,r):c.getBytes()};z.rsa.createKeyPairGenerationState=function(e,t,r){typeof e=="string"&&(e=parseInt(e,10)),e=e||2048,r=r||{};var n=r.prng||V.random,i={nextBytes:function(o){for(var u=n.getBytesSync(o.length),c=0;c<o.length;++c)o[c]=u.charCodeAt(c)}},a=r.algorithm||"PRIMEINC",s;if(a==="PRIMEINC")s={algorithm:a,state:0,bits:e,rng:i,eInt:t||65537,e:new Z(null),p:null,q:null,qBits:e>>1,pBits:e-(e>>1),pqState:0,num:null,keys:null},s.e.fromInt(s.eInt);else throw new Error("Invalid key generation algorithm: "+a);return s};z.rsa.stepKeyPairGenerationState=function(e,t){"algorithm"in e||(e.algorithm="PRIMEINC");var r=new Z(null);r.fromInt(30);for(var n=0,i=function(l,h){return l|h},a=+new Date,s,o=0;e.keys===null&&(t<=0||o<t);){if(e.state===0){var u=e.p===null?e.pBits:e.qBits,c=u-1;e.pqState===0?(e.num=new Z(u,e.rng),e.num.testBit(c)||e.num.bitwiseTo(Z.ONE.shiftLeft(c),i,e.num),e.num.dAddOffset(31-e.num.mod(r).byteValue(),0),n=0,++e.pqState):e.pqState===1?e.num.bitLength()>u?e.pqState=0:e.num.isProbablePrime(vg(e.num.bitLength()))?++e.pqState:e.num.dAddOffset(fg[n++%8],0):e.pqState===2?e.pqState=e.num.subtract(Z.ONE).gcd(e.e).compareTo(Z.ONE)===0?3:0:e.pqState===3&&(e.pqState=0,e.p===null?e.p=e.num:e.q=e.num,e.p!==null&&e.q!==null&&++e.state,e.num=null)}else if(e.state===1)e.p.compareTo(e.q)<0&&(e.num=e.p,e.p=e.q,e.q=e.num),++e.state;else if(e.state===2)e.p1=e.p.subtract(Z.ONE),e.q1=e.q.subtract(Z.ONE),e.phi=e.p1.multiply(e.q1),++e.state;else if(e.state===3)e.phi.gcd(e.e).compareTo(Z.ONE)===0?++e.state:(e.p=null,e.q=null,e.state=0);else if(e.state===4)e.n=e.p.multiply(e.q),e.n.bitLength()===e.bits?++e.state:(e.q=null,e.state=0);else if(e.state===5){var f=e.e.modInverse(e.phi);e.keys={privateKey:z.rsa.setPrivateKey(e.n,e.e,f,e.p,e.q,f.mod(e.p1),f.mod(e.q1),e.q.modInverse(e.p)),publicKey:z.rsa.setPublicKey(e.n,e.e)}}s=+new Date,o+=s-a,a=s}return e.keys!==null};z.rsa.generateKeyPair=function(e,t,r,n){if(arguments.length===1?typeof e=="object"?(r=e,e=void 0):typeof e=="function"&&(n=e,e=void 0):arguments.length===2?typeof e=="number"?typeof t=="function"?(n=t,t=void 0):typeof t!="number"&&(r=t,t=void 0):(r=e,n=t,e=void 0,t=void 0):arguments.length===3&&(typeof t=="number"?typeof r=="function"&&(n=r,r=void 0):(n=r,r=t,t=void 0)),r=r||{},e===void 0&&(e=r.bits||2048),t===void 0&&(t=r.e||65537),!V.options.usePureJavaScript&&!r.prng&&e>=256&&e<=16384&&(t===65537||t===3)){if(n){if(Vc("generateKeyPair"))return Qs.generateKeyPair("rsa",{modulusLength:e,publicExponent:t,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"pkcs8",format:"pem"}},function(o,u,c){if(o)return n(o);n(null,{privateKey:z.privateKeyFromPem(c),publicKey:z.publicKeyFromPem(u)})});if(zc("generateKey")&&zc("exportKey"))return ft.globalScope.crypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:e,publicExponent:jc(t),hash:{name:"SHA-256"}},!0,["sign","verify"]).then(function(o){return ft.globalScope.crypto.subtle.exportKey("pkcs8",o.privateKey)}).then(void 0,function(o){n(o)}).then(function(o){if(o){var u=z.privateKeyFromAsn1(m.fromDer(V.util.createBuffer(o)));n(null,{privateKey:u,publicKey:z.setRsaPublicKey(u.n,u.e)})}});if(Hc("generateKey")&&Hc("exportKey")){var i=ft.globalScope.msCrypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:e,publicExponent:jc(t),hash:{name:"SHA-256"}},!0,["sign","verify"]);i.oncomplete=function(o){var u=o.target.result,c=ft.globalScope.msCrypto.subtle.exportKey("pkcs8",u.privateKey);c.oncomplete=function(f){var l=f.target.result,h=z.privateKeyFromAsn1(m.fromDer(V.util.createBuffer(l)));n(null,{privateKey:h,publicKey:z.setRsaPublicKey(h.n,h.e)})},c.onerror=function(f){n(f)}},i.onerror=function(o){n(o)};return}}else if(Vc("generateKeyPairSync")){var a=Qs.generateKeyPairSync("rsa",{modulusLength:e,publicExponent:t,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"pkcs8",format:"pem"}});return{privateKey:z.privateKeyFromPem(a.privateKey),publicKey:z.publicKeyFromPem(a.publicKey)}}}var s=z.rsa.createKeyPairGenerationState(e,t,r);if(!n)return z.rsa.stepKeyPairGenerationState(s,0),s.keys;gg(s,r,n)};z.setRsaPublicKey=z.rsa.setPublicKey=function(e,t){var r={n:e,e:t};return r.encrypt=function(n,i,a){if(typeof i=="string"?i=i.toUpperCase():i===void 0&&(i="RSAES-PKCS1-V1_5"),i==="RSAES-PKCS1-V1_5")i={encode:function(o,u,c){return Mc(o,u,2).getBytes()}};else if(i==="RSA-OAEP"||i==="RSAES-OAEP")i={encode:function(o,u){return V.pkcs1.encode_rsa_oaep(u,o,a)}};else if(["RAW","NONE","NULL",null].indexOf(i)!==-1)i={encode:function(o){return o}};else if(typeof i=="string")throw new Error('Unsupported encryption scheme: "'+i+'".');var s=i.encode(n,r,!0);return z.rsa.encrypt(s,r,!0)},r.verify=function(n,i,a){typeof a=="string"?a=a.toUpperCase():a===void 0&&(a="RSASSA-PKCS1-V1_5"),a==="RSASSA-PKCS1-V1_5"?a={verify:function(o,u){u=ma(u,r,!0);var c=m.fromDer(u);return o===c.value[1].value}}:(a==="NONE"||a==="NULL"||a===null)&&(a={verify:function(o,u){return u=ma(u,r,!0),o===u}});var s=z.rsa.decrypt(i,r,!0,!1);return a.verify(n,s,r.n.bitLength())},r};z.setRsaPrivateKey=z.rsa.setPrivateKey=function(e,t,r,n,i,a,s,o){var u={n:e,e:t,d:r,p:n,q:i,dP:a,dQ:s,qInv:o};return u.decrypt=function(c,f,l){typeof f=="string"?f=f.toUpperCase():f===void 0&&(f="RSAES-PKCS1-V1_5");var h=z.rsa.decrypt(c,u,!1,!1);if(f==="RSAES-PKCS1-V1_5")f={decode:ma};else if(f==="RSA-OAEP"||f==="RSAES-OAEP")f={decode:function(d,p){return V.pkcs1.decode_rsa_oaep(p,d,l)}};else if(["RAW","NONE","NULL",null].indexOf(f)!==-1)f={decode:function(d){return d}};else throw new Error('Unsupported encryption scheme: "'+f+'".');return f.decode(h,u,!1)},u.sign=function(c,f){var l=!1;typeof f=="string"&&(f=f.toUpperCase()),f===void 0||f==="RSASSA-PKCS1-V1_5"?(f={encode:yg},l=1):(f==="NONE"||f==="NULL"||f===null)&&(f={encode:function(){return c}},l=1);var h=f.encode(c,u.n.bitLength());return z.rsa.encrypt(h,u,l)},u};z.wrapRsaPrivateKey=function(e){return m.create(m.Class.UNIVERSAL,m.Type.SEQUENCE,!0,[m.create(m.Class.UNIVERSAL,m.Type.INTEGER,!1,m.integerToDer(0).getBytes()),m.create(m.Class.UNIVERSAL,m.Type.SEQUENCE,!0,[m.create(m.Class.UNIVERSAL,m.Type.OID,!1,m.oidToDer(z.oids.rsaEncryption).getBytes()),m.create(m.Class.UNIVERSAL,m.Type.NULL,!1,"")]),m.create(m.Class.UNIVERSAL,m.Type.OCTETSTRING,!1,m.toDer(e).getBytes())])};z.privateKeyFromAsn1=function(e){var t={},r=[];if(m.validate(e,lg,t,r)&&(e=m.fromDer(V.util.createBuffer(t.privateKey))),t={},r=[],!m.validate(e,hg,t,r)){var n=new Error("Cannot read private key. ASN.1 object does not contain an RSAPrivateKey.");throw n.errors=r,n}var i,a,s,o,u,c,f,l;return i=V.util.createBuffer(t.privateKeyModulus).toHex(),a=V.util.createBuffer(t.privateKeyPublicExponent).toHex(),s=V.util.createBuffer(t.privateKeyPrivateExponent).toHex(),o=V.util.createBuffer(t.privateKeyPrime1).toHex(),u=V.util.createBuffer(t.privateKeyPrime2).toHex(),c=V.util.createBuffer(t.privateKeyExponent1).toHex(),f=V.util.createBuffer(t.privateKeyExponent2).toHex(),l=V.util.createBuffer(t.privateKeyCoefficient).toHex(),z.setRsaPrivateKey(new Z(i,16),new Z(a,16),new Z(s,16),new Z(o,16),new Z(u,16),new Z(c,16),new Z(f,16),new Z(l,16))};z.privateKeyToAsn1=z.privateKeyToRSAPrivateKey=function(e){return m.create(m.Class.UNIVERSAL,m.Type.SEQUENCE,!0,[m.create(m.Class.UNIVERSAL,m.Type.INTEGER,!1,m.integerToDer(0).getBytes()),m.create(m.Class.UNIVERSAL,m.Type.INTEGER,!1,Vt(e.n)),m.create(m.Class.UNIVERSAL,m.Type.INTEGER,!1,Vt(e.e)),m.create(m.Class.UNIVERSAL,m.Type.INTEGER,!1,Vt(e.d)),m.create(m.Class.UNIVERSAL,m.Type.INTEGER,!1,Vt(e.p)),m.create(m.Class.UNIVERSAL,m.Type.INTEGER,!1,Vt(e.q)),m.create(m.Class.UNIVERSAL,m.Type.INTEGER,!1,Vt(e.dP)),m.create(m.Class.UNIVERSAL,m.Type.INTEGER,!1,Vt(e.dQ)),m.create(m.Class.UNIVERSAL,m.Type.INTEGER,!1,Vt(e.qInv))])};z.publicKeyFromAsn1=function(e){var t={},r=[];if(m.validate(e,dg,t,r)){var n=m.derToOid(t.publicKeyOid);if(n!==z.oids.rsaEncryption){var i=new Error("Cannot read public key. Unknown OID.");throw i.oid=n,i}e=t.rsaPublicKey}if(r=[],!m.validate(e,pg,t,r)){var i=new Error("Cannot read public key. ASN.1 object does not contain an RSAPublicKey.");throw i.errors=r,i}var a=V.util.createBuffer(t.publicKeyModulus).toHex(),s=V.util.createBuffer(t.publicKeyExponent).toHex();return z.setRsaPublicKey(new Z(a,16),new Z(s,16))};z.publicKeyToAsn1=z.publicKeyToSubjectPublicKeyInfo=function(e){return m.create(m.Class.UNIVERSAL,m.Type.SEQUENCE,!0,[m.create(m.Class.UNIVERSAL,m.Type.SEQUENCE,!0,[m.create(m.Class.UNIVERSAL,m.Type.OID,!1,m.oidToDer(z.oids.rsaEncryption).getBytes()),m.create(m.Class.UNIVERSAL,m.Type.NULL,!1,"")]),m.create(m.Class.UNIVERSAL,m.Type.BITSTRING,!1,[z.publicKeyToRSAPublicKey(e)])])};z.publicKeyToRSAPublicKey=function(e){return m.create(m.Class.UNIVERSAL,m.Type.SEQUENCE,!0,[m.create(m.Class.UNIVERSAL,m.Type.INTEGER,!1,Vt(e.n)),m.create(m.Class.UNIVERSAL,m.Type.INTEGER,!1,Vt(e.e))])};function Mc(e,t,r){var n=V.util.createBuffer(),i=Math.ceil(t.n.bitLength()/8);if(e.length>i-11){var a=new Error("Message is too long for PKCS#1 v1.5 padding.");throw a.length=e.length,a.max=i-11,a}n.putByte(0),n.putByte(r);var s=i-3-e.length,o;if(r===0||r===1){o=r===0?0:255;for(var u=0;u<s;++u)n.putByte(o)}else for(;s>0;){for(var c=0,f=V.random.getBytes(s),u=0;u<s;++u)o=f.charCodeAt(u),o===0?++c:n.putByte(o);s=c}return n.putByte(0),n.putBytes(e),n}function ma(e,t,r,n){var i=Math.ceil(t.n.bitLength()/8),a=V.util.createBuffer(e),s=a.getByte(),o=a.getByte();if(s!==0||r&&o!==0&&o!==1||!r&&o!=2||r&&o===0&&typeof n=="undefined")throw new Error("Encryption block is invalid.");var u=0;if(o===0){u=i-3-n;for(var c=0;c<u;++c)if(a.getByte()!==0)throw new Error("Encryption block is invalid.")}else if(o===1)for(u=0;a.length()>1;){if(a.getByte()!==255){--a.read;break}++u}else if(o===2)for(u=0;a.length()>1;){if(a.getByte()===0){--a.read;break}++u}var f=a.getByte();if(f!==0||u!==i-3-a.length())throw new Error("Encryption block is invalid.");return a.getBytes()}function gg(e,t,r){typeof t=="function"&&(r=t,t={}),t=t||{};var n={algorithm:{name:t.algorithm||"PRIMEINC",options:{workers:t.workers||2,workLoad:t.workLoad||100,workerScript:t.workerScript}}};"prng"in t&&(n.prng=t.prng),i();function i(){a(e.pBits,function(o,u){if(o)return r(o);if(e.p=u,e.q!==null)return s(o,e.q);a(e.qBits,s)})}function a(o,u){V.prime.generateProbablePrime(o,n,u)}function s(o,u){if(o)return r(o);if(e.q=u,e.p.compareTo(e.q)<0){var c=e.p;e.p=e.q,e.q=c}if(e.p.subtract(Z.ONE).gcd(e.e).compareTo(Z.ONE)!==0){e.p=null,i();return}if(e.q.subtract(Z.ONE).gcd(e.e).compareTo(Z.ONE)!==0){e.q=null,a(e.qBits,s);return}if(e.p1=e.p.subtract(Z.ONE),e.q1=e.q.subtract(Z.ONE),e.phi=e.p1.multiply(e.q1),e.phi.gcd(e.e).compareTo(Z.ONE)!==0){e.p=e.q=null,i();return}if(e.n=e.p.multiply(e.q),e.n.bitLength()!==e.bits){e.q=null,a(e.qBits,s);return}var f=e.e.modInverse(e.phi);e.keys={privateKey:z.rsa.setPrivateKey(e.n,e.e,f,e.p,e.q,f.mod(e.p1),f.mod(e.q1),e.q.modInverse(e.p)),publicKey:z.rsa.setPublicKey(e.n,e.e)},r(null,e.keys)}}function Vt(e){var t=e.toString(16);t[0]>="8"&&(t="00"+t);var r=V.util.hexToBytes(t);return r.length>1&&(r.charCodeAt(0)===0&&(r.charCodeAt(1)&128)==0||r.charCodeAt(0)===255&&(r.charCodeAt(1)&128)==128)?r.substr(1):r}function vg(e){return e<=100?27:e<=150?18:e<=200?15:e<=250?12:e<=300?9:e<=350?8:e<=400?7:e<=500?6:e<=600?5:e<=800?4:e<=1250?3:2}function Vc(e){return V.util.isNodejs&&typeof Qs[e]=="function"}function zc(e){return typeof ft.globalScope!="undefined"&&typeof ft.globalScope.crypto=="object"&&typeof ft.globalScope.crypto.subtle=="object"&&typeof ft.globalScope.crypto.subtle[e]=="function"}function Hc(e){return typeof ft.globalScope!="undefined"&&typeof ft.globalScope.msCrypto=="object"&&typeof ft.globalScope.msCrypto.subtle=="object"&&typeof ft.globalScope.msCrypto.subtle[e]=="function"}function jc(e){for(var t=V.util.hexToBytes(e.toString(16)),r=new Uint8Array(t.length),n=0;n<t.length;++n)r[n]=t.charCodeAt(n);return r}});var Xc=T((sb,Qc)=>{var k=ae();Xi();ii();nc();Or();oa();Vs();fc();ai();Ec();xa();Se();typeof $c=="undefined"&&($c=k.jsbn.BigInteger);var $c,b=k.asn1,j=k.pki=k.pki||{};Qc.exports=j.pbe=k.pbe=k.pbe||{};var Vr=j.oids,mg={name:"EncryptedPrivateKeyInfo",tagClass:b.Class.UNIVERSAL,type:b.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedPrivateKeyInfo.encryptionAlgorithm",tagClass:b.Class.UNIVERSAL,type:b.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:b.Class.UNIVERSAL,type:b.Type.OID,constructed:!1,capture:"encryptionOid"},{name:"AlgorithmIdentifier.parameters",tagClass:b.Class.UNIVERSAL,type:b.Type.SEQUENCE,constructed:!0,captureAsn1:"encryptionParams"}]},{name:"EncryptedPrivateKeyInfo.encryptedData",tagClass:b.Class.UNIVERSAL,type:b.Type.OCTETSTRING,constructed:!1,capture:"encryptedData"}]},xg={name:"PBES2Algorithms",tagClass:b.Class.UNIVERSAL,type:b.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc",tagClass:b.Class.UNIVERSAL,type:b.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc.oid",tagClass:b.Class.UNIVERSAL,type:b.Type.OID,constructed:!1,capture:"kdfOid"},{name:"PBES2Algorithms.params",tagClass:b.Class.UNIVERSAL,type:b.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.params.salt",tagClass:b.Class.UNIVERSAL,type:b.Type.OCTETSTRING,constructed:!1,capture:"kdfSalt"},{name:"PBES2Algorithms.params.iterationCount",tagClass:b.Class.UNIVERSAL,type:b.Type.INTEGER,constructed:!1,capture:"kdfIterationCount"},{name:"PBES2Algorithms.params.keyLength",tagClass:b.Class.UNIVERSAL,type:b.Type.INTEGER,constructed:!1,optional:!0,capture:"keyLength"},{name:"PBES2Algorithms.params.prf",tagClass:b.Class.UNIVERSAL,type:b.Type.SEQUENCE,constructed:!0,optional:!0,value:[{name:"PBES2Algorithms.params.prf.algorithm",tagClass:b.Class.UNIVERSAL,type:b.Type.OID,constructed:!1,capture:"prfOid"}]}]}]},{name:"PBES2Algorithms.encryptionScheme",tagClass:b.Class.UNIVERSAL,type:b.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.encryptionScheme.oid",tagClass:b.Class.UNIVERSAL,type:b.Type.OID,constructed:!1,capture:"encOid"},{name:"PBES2Algorithms.encryptionScheme.iv",tagClass:b.Class.UNIVERSAL,type:b.Type.OCTETSTRING,constructed:!1,capture:"encIv"}]}]},bg={name:"pkcs-12PbeParams",tagClass:b.Class.UNIVERSAL,type:b.Type.SEQUENCE,constructed:!0,value:[{name:"pkcs-12PbeParams.salt",tagClass:b.Class.UNIVERSAL,type:b.Type.OCTETSTRING,constructed:!1,capture:"salt"},{name:"pkcs-12PbeParams.iterations",tagClass:b.Class.UNIVERSAL,type:b.Type.INTEGER,constructed:!1,capture:"iterations"}]};j.encryptPrivateKeyInfo=function(e,t,r){r=r||{},r.saltSize=r.saltSize||8,r.count=r.count||2048,r.algorithm=r.algorithm||"aes128",r.prfAlgorithm=r.prfAlgorithm||"sha1";var n=k.random.getBytesSync(r.saltSize),i=r.count,a=b.integerToDer(i),s,o,u;if(r.algorithm.indexOf("aes")===0||r.algorithm==="des"){var c,f,l;switch(r.algorithm){case"aes128":s=16,c=16,f=Vr["aes128-CBC"],l=k.aes.createEncryptionCipher;break;case"aes192":s=24,c=16,f=Vr["aes192-CBC"],l=k.aes.createEncryptionCipher;break;case"aes256":s=32,c=16,f=Vr["aes256-CBC"],l=k.aes.createEncryptionCipher;break;case"des":s=8,c=8,f=Vr.desCBC,l=k.des.createEncryptionCipher;break;default:var h=new Error("Cannot encrypt private key. Unknown encryption algorithm.");throw h.algorithm=r.algorithm,h}var d="hmacWith"+r.prfAlgorithm.toUpperCase(),p=Zc(d),g=k.pkcs5.pbkdf2(t,n,i,s,p),v=k.random.getBytesSync(c),x=l(g);x.start(v),x.update(b.toDer(e)),x.finish(),u=x.output.getBytes();var S=wg(n,a,s,d);o=b.create(b.Class.UNIVERSAL,b.Type.SEQUENCE,!0,[b.create(b.Class.UNIVERSAL,b.Type.OID,!1,b.oidToDer(Vr.pkcs5PBES2).getBytes()),b.create(b.Class.UNIVERSAL,b.Type.SEQUENCE,!0,[b.create(b.Class.UNIVERSAL,b.Type.SEQUENCE,!0,[b.create(b.Class.UNIVERSAL,b.Type.OID,!1,b.oidToDer(Vr.pkcs5PBKDF2).getBytes()),S]),b.create(b.Class.UNIVERSAL,b.Type.SEQUENCE,!0,[b.create(b.Class.UNIVERSAL,b.Type.OID,!1,b.oidToDer(f).getBytes()),b.create(b.Class.UNIVERSAL,b.Type.OCTETSTRING,!1,v)])])])}else if(r.algorithm==="3des"){s=24;var C=new k.util.ByteBuffer(n),g=j.pbe.generatePkcs12Key(t,C,1,i,s),v=j.pbe.generatePkcs12Key(t,C,2,i,s),x=k.des.createEncryptionCipher(g);x.start(v),x.update(b.toDer(e)),x.finish(),u=x.output.getBytes(),o=b.create(b.Class.UNIVERSAL,b.Type.SEQUENCE,!0,[b.create(b.Class.UNIVERSAL,b.Type.OID,!1,b.oidToDer(Vr["pbeWithSHAAnd3-KeyTripleDES-CBC"]).getBytes()),b.create(b.Class.UNIVERSAL,b.Type.SEQUENCE,!0,[b.create(b.Class.UNIVERSAL,b.Type.OCTETSTRING,!1,n),b.create(b.Class.UNIVERSAL,b.Type.INTEGER,!1,a.getBytes())])])}else{var h=new Error("Cannot encrypt private key. Unknown encryption algorithm.");throw h.algorithm=r.algorithm,h}var L=b.create(b.Class.UNIVERSAL,b.Type.SEQUENCE,!0,[o,b.create(b.Class.UNIVERSAL,b.Type.OCTETSTRING,!1,u)]);return L};j.decryptPrivateKeyInfo=function(e,t){var r=null,n={},i=[];if(!b.validate(e,mg,n,i)){var a=new Error("Cannot read encrypted private key. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw a.errors=i,a}var s=b.derToOid(n.encryptionOid),o=j.pbe.getCipher(s,n.encryptionParams,t),u=k.util.createBuffer(n.encryptedData);return o.update(u),o.finish()&&(r=b.fromDer(o.output)),r};j.encryptedPrivateKeyToPem=function(e,t){var r={type:"ENCRYPTED PRIVATE KEY",body:b.toDer(e).getBytes()};return k.pem.encode(r,{maxline:t})};j.encryptedPrivateKeyFromPem=function(e){var t=k.pem.decode(e)[0];if(t.type!=="ENCRYPTED PRIVATE KEY"){var r=new Error('Could not convert encrypted private key from PEM; PEM header type is "ENCRYPTED PRIVATE KEY".');throw r.headerType=t.type,r}if(t.procType&&t.procType.type==="ENCRYPTED")throw new Error("Could not convert encrypted private key from PEM; PEM is encrypted.");return b.fromDer(t.body)};j.encryptRsaPrivateKey=function(e,t,r){if(r=r||{},!r.legacy){var n=j.wrapRsaPrivateKey(j.privateKeyToAsn1(e));return n=j.encryptPrivateKeyInfo(n,t,r),j.encryptedPrivateKeyToPem(n)}var i,a,s,o;switch(r.algorithm){case"aes128":i="AES-128-CBC",s=16,a=k.random.getBytesSync(16),o=k.aes.createEncryptionCipher;break;case"aes192":i="AES-192-CBC",s=24,a=k.random.getBytesSync(16),o=k.aes.createEncryptionCipher;break;case"aes256":i="AES-256-CBC",s=32,a=k.random.getBytesSync(16),o=k.aes.createEncryptionCipher;break;case"3des":i="DES-EDE3-CBC",s=24,a=k.random.getBytesSync(8),o=k.des.createEncryptionCipher;break;case"des":i="DES-CBC",s=8,a=k.random.getBytesSync(8),o=k.des.createEncryptionCipher;break;default:var u=new Error('Could not encrypt RSA private key; unsupported encryption algorithm "'+r.algorithm+'".');throw u.algorithm=r.algorithm,u}var c=k.pbe.opensslDeriveBytes(t,a.substr(0,8),s),f=o(c);f.start(a),f.update(b.toDer(j.privateKeyToAsn1(e))),f.finish();var l={type:"RSA PRIVATE KEY",procType:{version:"4",type:"ENCRYPTED"},dekInfo:{algorithm:i,parameters:k.util.bytesToHex(a).toUpperCase()},body:f.output.getBytes()};return k.pem.encode(l)};j.decryptRsaPrivateKey=function(e,t){var r=null,n=k.pem.decode(e)[0];if(n.type!=="ENCRYPTED PRIVATE KEY"&&n.type!=="PRIVATE KEY"&&n.type!=="RSA PRIVATE KEY"){var i=new Error('Could not convert private key from PEM; PEM header type is not "ENCRYPTED PRIVATE KEY", "PRIVATE KEY", or "RSA PRIVATE KEY".');throw i.headerType=i,i}if(n.procType&&n.procType.type==="ENCRYPTED"){var a,s;switch(n.dekInfo.algorithm){case"DES-CBC":a=8,s=k.des.createDecryptionCipher;break;case"DES-EDE3-CBC":a=24,s=k.des.createDecryptionCipher;break;case"AES-128-CBC":a=16,s=k.aes.createDecryptionCipher;break;case"AES-192-CBC":a=24,s=k.aes.createDecryptionCipher;break;case"AES-256-CBC":a=32,s=k.aes.createDecryptionCipher;break;case"RC2-40-CBC":a=5,s=function(l){return k.rc2.createDecryptionCipher(l,40)};break;case"RC2-64-CBC":a=8,s=function(l){return k.rc2.createDecryptionCipher(l,64)};break;case"RC2-128-CBC":a=16,s=function(l){return k.rc2.createDecryptionCipher(l,128)};break;default:var i=new Error('Could not decrypt private key; unsupported encryption algorithm "'+n.dekInfo.algorithm+'".');throw i.algorithm=n.dekInfo.algorithm,i}var o=k.util.hexToBytes(n.dekInfo.parameters),u=k.pbe.opensslDeriveBytes(t,o.substr(0,8),a),c=s(u);if(c.start(o),c.update(k.util.createBuffer(n.body)),c.finish())r=c.output.getBytes();else return r}else r=n.body;return n.type==="ENCRYPTED PRIVATE KEY"?r=j.decryptPrivateKeyInfo(b.fromDer(r),t):r=b.fromDer(r),r!==null&&(r=j.privateKeyFromAsn1(r)),r};j.pbe.generatePkcs12Key=function(e,t,r,n,i,a){var s,o;if(typeof a=="undefined"||a===null){if(!("sha1"in k.md))throw new Error('"sha1" hash algorithm unavailable.');a=k.md.sha1.create()}var u=a.digestLength,c=a.blockLength,f=new k.util.ByteBuffer,l=new k.util.ByteBuffer;if(e!=null){for(o=0;o<e.length;o++)l.putInt16(e.charCodeAt(o));l.putInt16(0)}var h=l.length(),d=t.length(),p=new k.util.ByteBuffer;p.fillWithByte(r,c);var g=c*Math.ceil(d/c),v=new k.util.ByteBuffer;for(o=0;o<g;o++)v.putByte(t.at(o%d));var x=c*Math.ceil(h/c),S=new k.util.ByteBuffer;for(o=0;o<x;o++)S.putByte(l.at(o%h));var C=v;C.putBuffer(S);for(var L=Math.ceil(i/u),D=1;D<=L;D++){var R=new k.util.ByteBuffer;R.putBytes(p.bytes()),R.putBytes(C.bytes());for(var $=0;$<n;$++)a.start(),a.update(R.getBytes()),R=a.digest();var Y=new k.util.ByteBuffer;for(o=0;o<c;o++)Y.putByte(R.at(o%u));var Ee=Math.ceil(d/c)+Math.ceil(h/c),Xe=new k.util.ByteBuffer;for(s=0;s<Ee;s++){var Oe=new k.util.ByteBuffer(C.getBytes(c)),Fe=511;for(o=Y.length()-1;o>=0;o--)Fe=Fe>>8,Fe+=Y.at(o)+Oe.at(o),Oe.setAt(o,Fe&255);Xe.putBuffer(Oe)}C=Xe,f.putBuffer(R)}return f.truncate(f.length()-i),f};j.pbe.getCipher=function(e,t,r){switch(e){case j.oids.pkcs5PBES2:return j.pbe.getCipherForPBES2(e,t,r);case j.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:case j.oids["pbewithSHAAnd40BitRC2-CBC"]:return j.pbe.getCipherForPKCS12PBE(e,t,r);default:var n=new Error("Cannot read encrypted PBE data block. Unsupported OID.");throw n.oid=e,n.supportedOids=["pkcs5PBES2","pbeWithSHAAnd3-KeyTripleDES-CBC","pbewithSHAAnd40BitRC2-CBC"],n}};j.pbe.getCipherForPBES2=function(e,t,r){var n={},i=[];if(!b.validate(t,xg,n,i)){var a=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw a.errors=i,a}if(e=b.derToOid(n.kdfOid),e!==j.oids.pkcs5PBKDF2){var a=new Error("Cannot read encrypted private key. Unsupported key derivation function OID.");throw a.oid=e,a.supportedOids=["pkcs5PBKDF2"],a}if(e=b.derToOid(n.encOid),e!==j.oids["aes128-CBC"]&&e!==j.oids["aes192-CBC"]&&e!==j.oids["aes256-CBC"]&&e!==j.oids["des-EDE3-CBC"]&&e!==j.oids.desCBC){var a=new Error("Cannot read encrypted private key. Unsupported encryption scheme OID.");throw a.oid=e,a.supportedOids=["aes128-CBC","aes192-CBC","aes256-CBC","des-EDE3-CBC","desCBC"],a}var s=n.kdfSalt,o=k.util.createBuffer(n.kdfIterationCount);o=o.getInt(o.length()<<3);var u,c;switch(j.oids[e]){case"aes128-CBC":u=16,c=k.aes.createDecryptionCipher;break;case"aes192-CBC":u=24,c=k.aes.createDecryptionCipher;break;case"aes256-CBC":u=32,c=k.aes.createDecryptionCipher;break;case"des-EDE3-CBC":u=24,c=k.des.createDecryptionCipher;break;case"desCBC":u=8,c=k.des.createDecryptionCipher;break}var f=Yc(n.prfOid),l=k.pkcs5.pbkdf2(r,s,o,u,f),h=n.encIv,d=c(l);return d.start(h),d};j.pbe.getCipherForPKCS12PBE=function(e,t,r){var n={},i=[];if(!b.validate(t,bg,n,i)){var a=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw a.errors=i,a}var s=k.util.createBuffer(n.salt),o=k.util.createBuffer(n.iterations);o=o.getInt(o.length()<<3);var u,c,f;switch(e){case j.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:u=24,c=8,f=k.des.startDecrypting;break;case j.oids["pbewithSHAAnd40BitRC2-CBC"]:u=5,c=8,f=function(g,v){var x=k.rc2.createDecryptionCipher(g,40);return x.start(v,null),x};break;default:var a=new Error("Cannot read PKCS #12 PBE data block. Unsupported OID.");throw a.oid=e,a}var l=Yc(n.prfOid),h=j.pbe.generatePkcs12Key(r,s,1,o,u,l);l.start();var d=j.pbe.generatePkcs12Key(r,s,2,o,c,l);return f(h,d)};j.pbe.opensslDeriveBytes=function(e,t,r,n){if(typeof n=="undefined"||n===null){if(!("md5"in k.md))throw new Error('"md5" hash algorithm unavailable.');n=k.md.md5.create()}t===null&&(t="");for(var i=[Wc(n,e+t)],a=16,s=1;a<r;++s,a+=16)i.push(Wc(n,i[s-1]+e+t));return i.join("").substr(0,r)};function Wc(e,t){return e.start().update(t).digest().getBytes()}function Yc(e){var t;if(!e)t="hmacWithSHA1";else if(t=j.oids[b.derToOid(e)],!t){var r=new Error("Unsupported PRF OID.");throw r.oid=e,r.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],r}return Zc(t)}function Zc(e){var t=k.md;switch(e){case"hmacWithSHA224":t=k.md.sha512;case"hmacWithSHA1":case"hmacWithSHA256":case"hmacWithSHA384":case"hmacWithSHA512":e=e.substr(8).toLowerCase();break;default:var r=new Error("Unsupported PRF algorithm.");throw r.algorithm=e,r.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],r}if(!t||!(e in t))throw new Error("Unknown hash algorithm: "+e);return t[e].create()}function wg(e,t,r,n){var i=b.create(b.Class.UNIVERSAL,b.Type.SEQUENCE,!0,[b.create(b.Class.UNIVERSAL,b.Type.OCTETSTRING,!1,e),b.create(b.Class.UNIVERSAL,b.Type.INTEGER,!1,t.getBytes())]);return n!=="hmacWithSHA1"&&i.value.push(b.create(b.Class.UNIVERSAL,b.Type.INTEGER,!1,k.util.hexToBytes(r.toString(16))),b.create(b.Class.UNIVERSAL,b.Type.SEQUENCE,!0,[b.create(b.Class.UNIVERSAL,b.Type.OID,!1,b.oidToDer(j.oids[n]).getBytes()),b.create(b.Class.UNIVERSAL,b.Type.NULL,!1,"")])),i}});var oi={};Ne(oi,{concat:()=>wr});function wr(e,t){t||(t=e.reduce((i,a)=>i+a.length,0));let r=new Uint8Array(t),n=0;for(let i of e)r.set(i,n),n+=i.length;return r}var xn=se(()=>{});var Xs=T((ob,ef)=>{"use strict";var{concat:Eg}=(xn(),oi),{fromString:Jc}=(Bt(),tr),Sg=Qn();function Bg({algorithm:e="AES-GCM",nonceLength:t=12,keyLength:r=16,digest:n="SHA-256",saltLength:i=16,iterations:a=32767}={}){let s=Sg.get();r*=8;async function o(c,f){let l=s.getRandomValues(new Uint8Array(i)),h=s.getRandomValues(new Uint8Array(t)),d={name:e,iv:h},p={name:"PBKDF2",salt:l,iterations:a,hash:{name:n}},g=await s.subtle.importKey("raw",Jc(f),{name:"PBKDF2"},!1,["deriveKey","deriveBits"]),v=await s.subtle.deriveKey(p,g,{name:e,length:r},!0,["encrypt"]),x=await s.subtle.encrypt(d,v,c);return Eg([l,d.iv,new Uint8Array(x)])}async function u(c,f){let l=c.slice(0,i),h=c.slice(i,i+t),d=c.slice(i+t),p={name:e,iv:h},g={name:"PBKDF2",salt:l,iterations:a,hash:{name:n}},v=await s.subtle.importKey("raw",Jc(f),{name:"PBKDF2"},!1,["deriveKey","deriveBits"]),x=await s.subtle.deriveKey(g,v,{name:e,length:r},!0,["decrypt"]),S=await s.subtle.decrypt(p,x,d);return new Uint8Array(S)}return{encrypt:o,decrypt:u}}ef.exports={create:Bg}});var rf=T((ub,tf)=>{"use strict";var{base64:Cg}=(Vn(),sn),Ag=Xs();tf.exports={import:async function(e,t){let r=Cg.decode(e);return await Ag.create().decrypt(r,t)}}});var bn={};Ne(bn,{equals:()=>ba});function ba(e,t){if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;for(let r=0;r<e.byteLength;r++)if(e[r]!==t[r])return!1;return!0}var zr=se(()=>{});var uf=T((cb,of)=>{var pe=ae();Or();Se();var ui=of.exports=pe.sha512=pe.sha512||{};pe.md.sha512=pe.md.algorithms.sha512=ui;var nf=pe.sha384=pe.sha512.sha384=pe.sha512.sha384||{};nf.create=function(){return ui.create("SHA-384")};pe.md.sha384=pe.md.algorithms.sha384=nf;pe.sha512.sha256=pe.sha512.sha256||{create:function(){return ui.create("SHA-512/256")}};pe.md["sha512/256"]=pe.md.algorithms["sha512/256"]=pe.sha512.sha256;pe.sha512.sha224=pe.sha512.sha224||{create:function(){return ui.create("SHA-512/224")}};pe.md["sha512/224"]=pe.md.algorithms["sha512/224"]=pe.sha512.sha224;ui.create=function(e){if(af||Tg(),typeof e=="undefined"&&(e="SHA-512"),!(e in Hr))throw new Error("Invalid SHA-512 algorithm: "+e);for(var t=Hr[e],r=null,n=pe.util.createBuffer(),i=new Array(80),a=0;a<80;++a)i[a]=new Array(2);var s=64;switch(e){case"SHA-384":s=48;break;case"SHA-512/256":s=32;break;case"SHA-512/224":s=28;break}var o={algorithm:e.replace("-","").toLowerCase(),blockLength:128,digestLength:s,messageLength:0,fullMessageLength:null,messageLengthSize:16};return o.start=function(){o.messageLength=0,o.fullMessageLength=o.messageLength128=[];for(var u=o.messageLengthSize/4,c=0;c<u;++c)o.fullMessageLength.push(0);n=pe.util.createBuffer(),r=new Array(t.length);for(var c=0;c<t.length;++c)r[c]=t[c].slice(0);return o},o.start(),o.update=function(u,c){c==="utf8"&&(u=pe.util.encodeUtf8(u));var f=u.length;o.messageLength+=f,f=[f/4294967296>>>0,f>>>0];for(var l=o.fullMessageLength.length-1;l>=0;--l)o.fullMessageLength[l]+=f[1],f[1]=f[0]+(o.fullMessageLength[l]/4294967296>>>0),o.fullMessageLength[l]=o.fullMessageLength[l]>>>0,f[0]=f[1]/4294967296>>>0;return n.putBytes(u),sf(r,i,n),(n.read>2048||n.length()===0)&&n.compact(),o},o.digest=function(){var u=pe.util.createBuffer();u.putBytes(n.bytes());var c=o.fullMessageLength[o.fullMessageLength.length-1]+o.messageLengthSize,f=c&o.blockLength-1;u.putBytes(Js.substr(0,o.blockLength-f));for(var l,h,d=o.fullMessageLength[0]*8,p=0;p<o.fullMessageLength.length-1;++p)l=o.fullMessageLength[p+1]*8,h=l/4294967296>>>0,d+=h,u.putInt32(d>>>0),d=l>>>0;u.putInt32(d);for(var g=new Array(r.length),p=0;p<r.length;++p)g[p]=r[p].slice(0);sf(g,i,u);var v=pe.util.createBuffer(),x;e==="SHA-512"?x=g.length:e==="SHA-384"?x=g.length-2:x=g.length-4;for(var p=0;p<x;++p)v.putInt32(g[p][0]),(p!==x-1||e!=="SHA-512/224")&&v.putInt32(g[p][1]);return v},o};var Js=null,af=!1,eo=null,Hr=null;function Tg(){Js=String.fromCharCode(128),Js+=pe.util.fillString(String.fromCharCode(0),128),eo=[[1116352408,3609767458],[1899447441,602891725],[3049323471,3964484399],[3921009573,2173295548],[961987163,4081628472],[1508970993,3053834265],[2453635748,2937671579],[2870763221,3664609560],[3624381080,2734883394],[310598401,1164996542],[607225278,1323610764],[1426881987,3590304994],[1925078388,4068182383],[2162078206,991336113],[2614888103,633803317],[3248222580,3479774868],[3835390401,2666613458],[4022224774,944711139],[264347078,2341262773],[604807628,2007800933],[770255983,1495990901],[1249150122,1856431235],[1555081692,3175218132],[1996064986,2198950837],[2554220882,3999719339],[2821834349,766784016],[2952996808,2566594879],[3210313671,3203337956],[3336571891,1034457026],[3584528711,2466948901],[113926993,3758326383],[338241895,168717936],[666307205,1188179964],[773529912,1546045734],[1294757372,1522805485],[1396182291,2643833823],[1695183700,2343527390],[1986661051,1014477480],[2177026350,1206759142],[2456956037,344077627],[2730485921,1290863460],[2820302411,3158454273],[3259730800,3505952657],[3345764771,106217008],[3516065817,3606008344],[3600352804,1432725776],[4094571909,1467031594],[275423344,851169720],[430227734,3100823752],[506948616,1363258195],[659060556,3750685593],[883997877,3785050280],[958139571,3318307427],[1322822218,3812723403],[1537002063,2003034995],[1747873779,3602036899],[1955562222,1575990012],[2024104815,1125592928],[2227730452,2716904306],[2361852424,442776044],[2428436474,593698344],[2756734187,3733110249],[3204031479,2999351573],[3329325298,3815920427],[3391569614,3928383900],[3515267271,566280711],[3940187606,3454069534],[4118630271,4000239992],[116418474,1914138554],[174292421,2731055270],[289380356,3203993006],[460393269,320620315],[685471733,587496836],[852142971,1086792851],[1017036298,365543100],[1126000580,2618297676],[1288033470,3409855158],[1501505948,4234509866],[1607167915,987167468],[1816402316,1246189591]],Hr={},Hr["SHA-512"]=[[1779033703,4089235720],[3144134277,2227873595],[1013904242,4271175723],[2773480762,1595750129],[1359893119,2917565137],[2600822924,725511199],[528734635,4215389547],[1541459225,327033209]],Hr["SHA-384"]=[[3418070365,3238371032],[1654270250,914150663],[2438529370,812702999],[355462360,4144912697],[1731405415,4290775857],[2394180231,1750603025],[3675008525,1694076839],[1203062813,3204075428]],Hr["SHA-512/256"]=[[573645204,4230739756],[2673172387,3360449730],[596883563,1867755857],[2520282905,1497426621],[2519219938,2827943907],[3193839141,1401305490],[721525244,746961066],[246885852,2177182882]],Hr["SHA-512/224"]=[[2352822216,424955298],[1944164710,2312950998],[502970286,855612546],[1738396948,1479516111],[258812777,2077511080],[2011393907,79989058],[1067287976,1780299464],[286451373,2446758561]],af=!0}function sf(e,t,r){for(var n,i,a,s,o,u,c,f,l,h,d,p,g,v,x,S,C,L,D,R,$,Y,Ee,Xe,Oe,Fe,lr,Jr,me,Le,O,Fn,Ln,Qt,Xt,K=r.length();K>=128;){for(me=0;me<16;++me)t[me][0]=r.getInt32()>>>0,t[me][1]=r.getInt32()>>>0;for(;me<80;++me)Fn=t[me-2],Le=Fn[0],O=Fn[1],n=((Le>>>19|O<<13)^(O>>>29|Le<<3)^Le>>>6)>>>0,i=((Le<<13|O>>>19)^(O<<3|Le>>>29)^(Le<<26|O>>>6))>>>0,Qt=t[me-15],Le=Qt[0],O=Qt[1],a=((Le>>>1|O<<31)^(Le>>>8|O<<24)^Le>>>7)>>>0,s=((Le<<31|O>>>1)^(Le<<24|O>>>8)^(Le<<25|O>>>7))>>>0,Ln=t[me-7],Xt=t[me-16],O=i+Ln[1]+s+Xt[1],t[me][0]=n+Ln[0]+a+Xt[0]+(O/4294967296>>>0)>>>0,t[me][1]=O>>>0;for(g=e[0][0],v=e[0][1],x=e[1][0],S=e[1][1],C=e[2][0],L=e[2][1],D=e[3][0],R=e[3][1],$=e[4][0],Y=e[4][1],Ee=e[5][0],Xe=e[5][1],Oe=e[6][0],Fe=e[6][1],lr=e[7][0],Jr=e[7][1],me=0;me<80;++me)c=(($>>>14|Y<<18)^($>>>18|Y<<14)^(Y>>>9|$<<23))>>>0,f=(($<<18|Y>>>14)^($<<14|Y>>>18)^(Y<<23|$>>>9))>>>0,l=(Oe^$&(Ee^Oe))>>>0,h=(Fe^Y&(Xe^Fe))>>>0,o=((g>>>28|v<<4)^(v>>>2|g<<30)^(v>>>7|g<<25))>>>0,u=((g<<4|v>>>28)^(v<<30|g>>>2)^(v<<25|g>>>7))>>>0,d=(g&x|C&(g^x))>>>0,p=(v&S|L&(v^S))>>>0,O=Jr+f+h+eo[me][1]+t[me][1],n=lr+c+l+eo[me][0]+t[me][0]+(O/4294967296>>>0)>>>0,i=O>>>0,O=u+p,a=o+d+(O/4294967296>>>0)>>>0,s=O>>>0,lr=Oe,Jr=Fe,Oe=Ee,Fe=Xe,Ee=$,Xe=Y,O=R+i,$=D+n+(O/4294967296>>>0)>>>0,Y=O>>>0,D=C,R=L,C=x,L=S,x=g,S=v,O=i+s,g=n+a+(O/4294967296>>>0)>>>0,v=O>>>0;O=e[0][1]+v,e[0][0]=e[0][0]+g+(O/4294967296>>>0)>>>0,e[0][1]=O>>>0,O=e[1][1]+S,e[1][0]=e[1][0]+x+(O/4294967296>>>0)>>>0,e[1][1]=O>>>0,O=e[2][1]+L,e[2][0]=e[2][0]+C+(O/4294967296>>>0)>>>0,e[2][1]=O>>>0,O=e[3][1]+R,e[3][0]=e[3][0]+D+(O/4294967296>>>0)>>>0,e[3][1]=O>>>0,O=e[4][1]+Y,e[4][0]=e[4][0]+$+(O/4294967296>>>0)>>>0,e[4][1]=O>>>0,O=e[5][1]+Xe,e[5][0]=e[5][0]+Ee+(O/4294967296>>>0)>>>0,e[5][1]=O>>>0,O=e[6][1]+Fe,e[6][0]=e[6][0]+Oe+(O/4294967296>>>0)>>>0,e[6][1]=O>>>0,O=e[7][1]+Jr,e[7][0]=e[7][0]+lr+(O/4294967296>>>0)>>>0,e[7][1]=O>>>0,K-=128}}});var ff=T((fb,cf)=>{"use strict";var wa=65536;function Ig(e){let t=new Uint8Array(e),r=0;if(e>0)if(e>wa)for(;r<e;)r+wa>e?(crypto.getRandomValues(t.subarray(r,r+(e-r))),r+=e-r):(crypto.getRandomValues(t.subarray(r,r+wa)),r+=wa);else crypto.getRandomValues(t);return t}cf.exports=Ig});var Ea=T((lb,lf)=>{"use strict";var _g=ff(),Rg=Je();lf.exports=function(e){if(isNaN(e)||e<=0)throw Rg(new Error("random bytes length must be a Number bigger than 0"),"ERR_INVALID_LENGTH");return _g(e)}});var Sa=T(ci=>{"use strict";Se();ga();var Ng=ae(),{fromString:Dg}=(Bt(),tr),{toString:hf}=(St(),er),{concat:pf}=(xn(),oi);ci.bigIntegerToUintBase64url=(e,t)=>{let r=Uint8Array.from(e.abs().toByteArray());if(r=r[0]===0?r.slice(1):r,t!=null){if(r.length>t)throw new Error("byte array longer than desired length");r=pf([new Uint8Array(t-r.length),r])}return hf(r,"base64url")};ci.base64urlToBigInteger=e=>{let t=ci.base64urlToBuffer(e);return new Ng.jsbn.BigInteger(hf(t,"base16"),16)};ci.base64urlToBuffer=(e,t)=>{let r=Dg(e,"base64urlpad");if(t!=null){if(r.length>t)throw new Error("byte array longer than desired length");r=pf([new Uint8Array(t-r.length),r])}return r}});var gf=T(fi=>{"use strict";ii();xa();var Er=ae(),{bigIntegerToUintBase64url:zt,base64urlToBigInteger:Ht}=Sa(),{fromString:df}=(Bt(),tr),{toString:yf}=(St(),er);fi.pkcs1ToJwk=function(e){let t=Er.asn1.fromDer(yf(e,"ascii")),r=Er.pki.privateKeyFromAsn1(t);return{kty:"RSA",n:zt(r.n),e:zt(r.e),d:zt(r.d),p:zt(r.p),q:zt(r.q),dp:zt(r.dP),dq:zt(r.dQ),qi:zt(r.qInv),alg:"RS256",kid:"2011-04-29"}};fi.jwkToPkcs1=function(e){let t=Er.pki.privateKeyToAsn1({n:Ht(e.n),e:Ht(e.e),d:Ht(e.d),p:Ht(e.p),q:Ht(e.q),dP:Ht(e.dp),dQ:Ht(e.dq),qInv:Ht(e.qi)});return df(Er.asn1.toDer(t).getBytes(),"ascii")};fi.pkixToJwk=function(e){let t=Er.asn1.fromDer(yf(e,"ascii")),r=Er.pki.publicKeyFromAsn1(t);return{kty:"RSA",n:zt(r.n),e:zt(r.e),alg:"RS256",kid:"2011-04-29"}};fi.jwkToPkix=function(e){let t=Er.pki.publicKeyToAsn1({n:Ht(e.n),e:Ht(e.e)});return df(Er.asn1.toDer(t).getBytes(),"ascii")}});var bf=T((db,xf)=>{"use strict";xa();var vf=ae(),{base64urlToBigInteger:kg}=Sa();function mf(e,t){return t.map(r=>kg(e[r]))}function Pg(e){return vf.pki.setRsaPrivateKey(...mf(e,["n","e","d","p","q","dp","dq","qi"]))}function Kg(e){return vf.pki.setRsaPublicKey(...mf(e,["n","e"]))}xf.exports={jwk2pub:Kg,jwk2priv:Pg}});var Sf=T(or=>{"use strict";var sr=Qn(),Ug=Ea(),{toString:Fg}=(St(),er),{fromString:Lg}=(Bt(),tr);or.utils=gf();or.generateKey=async function(e){let t=await sr.get().subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:e,publicExponent:new Uint8Array([1,0,1]),hash:{name:"SHA-256"}},!0,["sign","verify"]),r=await wf(t);return{privateKey:r[0],publicKey:r[1]}};or.unmarshalPrivateKey=async function(e){let r=[await sr.get().subtle.importKey("jwk",e,{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!0,["sign"]),await Og(e)],n=await wf({privateKey:r[0],publicKey:r[1]});return{privateKey:n[0],publicKey:n[1]}};or.getRandomValues=Ug;or.hashAndSign=async function(e,t){let r=await sr.get().subtle.importKey("jwk",e,{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!1,["sign"]),n=await sr.get().subtle.sign({name:"RSASSA-PKCS1-v1_5"},r,Uint8Array.from(t));return new Uint8Array(n,n.byteOffset,n.byteLength)};or.hashAndVerify=async function(e,t,r){let n=await sr.get().subtle.importKey("jwk",e,{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!1,["verify"]);return sr.get().subtle.verify({name:"RSASSA-PKCS1-v1_5"},n,t,r)};function wf(e){return Promise.all([sr.get().subtle.exportKey("jwk",e.privateKey),sr.get().subtle.exportKey("jwk",e.publicKey)])}function Og(e){return sr.get().subtle.importKey("jwk",{kty:e.kty,n:e.n,e:e.e},{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!0,["verify"])}var{jwk2pub:qg,jwk2priv:Mg}=bf();function Ef(e,t,r,n){let i=t?qg(e):Mg(e),a=Fg(Uint8Array.from(r),"ascii"),s=n(a,i);return Lg(s,"ascii")}or.encrypt=function(e,t){return Ef(e,!0,t,(r,n)=>n.encrypt(r))};or.decrypt=function(e,t){return Ef(e,!1,t,(r,n)=>n.decrypt(r))}});var Ba=T((gb,Bf)=>{"use strict";var{base64:Vg}=(Vn(),sn),zg=Xs();Bf.exports={export:async function(e,t){let n=await zg.create().encrypt(e,t);return Vg.encode(n)}}});var _f=T((vb,If)=>{"use strict";var{sha256:Cf}=(ln(),kr),Af=Je(),{equals:Tf}=(zr(),bn),{toString:Hg}=(St(),er);uf();var Ca=ae(),lt=Sf(),Aa=sa(),jg=Ba(),Ta=class{constructor(t){this._key=t}async verify(t,r){return lt.hashAndVerify(this._key,r,t)}marshal(){return lt.utils.jwkToPkix(this._key)}get bytes(){return Aa.PublicKey.encode({Type:Aa.KeyType.RSA,Data:this.marshal()}).finish()}encrypt(t){return lt.encrypt(this._key,t)}equals(t){return Tf(this.bytes,t.bytes)}async hash(){let{bytes:t}=await Cf.digest(this.bytes);return t}},li=class{constructor(t,r){this._key=t,this._publicKey=r}genSecret(){return lt.getRandomValues(16)}async sign(t){return lt.hashAndSign(this._key,t)}get public(){if(!this._publicKey)throw Af(new Error("public key not provided"),"ERR_PUBKEY_NOT_PROVIDED");return new Ta(this._publicKey)}decrypt(t){return lt.decrypt(this._key,t)}marshal(){return lt.utils.jwkToPkcs1(this._key)}get bytes(){return Aa.PrivateKey.encode({Type:Aa.KeyType.RSA,Data:this.marshal()}).finish()}equals(t){return Tf(this.bytes,t.bytes)}async hash(){let{bytes:t}=await Cf.digest(this.bytes);return t}async id(){let t=await this.public.hash();return Hg(t,"base58btc")}async export(t,r="pkcs-8"){if(r==="pkcs-8"){let n=new Ca.util.ByteBuffer(this.marshal()),i=Ca.asn1.fromDer(n),a=Ca.pki.privateKeyFromAsn1(i),s={algorithm:"aes256",count:1e4,saltSize:128/8,prfAlgorithm:"sha512"};return Ca.pki.encryptRsaPrivateKey(a,t,s)}else{if(r==="libp2p-key")return jg.export(this.bytes,t);throw Af(new Error(`export format '${r}' is not supported`),"ERR_INVALID_EXPORT_FORMAT")}}};async function Gg(e){let t=lt.utils.pkcs1ToJwk(e),r=await lt.unmarshalPrivateKey(t);return new li(r.privateKey,r.publicKey)}function $g(e){let t=lt.utils.pkixToJwk(e);return new Ta(t)}async function Wg(e){let t=await lt.unmarshalPrivateKey(e);return new li(t.privateKey,t.publicKey)}async function Yg(e){let t=await lt.generateKey(e);return new li(t.privateKey,t.publicKey)}If.exports={RsaPublicKey:Ta,RsaPrivateKey:li,unmarshalRsaPublicKey:$g,unmarshalRsaPrivateKey:Gg,generateKeyPair:Yg,fromJwk:Wg}});var Ff=T((ve,Uf)=>{"use strict";Object.defineProperty(ve,"__esModule",{value:!0});ve.utils=ve.verify=ve.sign=ve.getPublicKey=ve.SignResult=ve.Signature=ve.Point=ve.ExtendedPoint=ve.CURVE=void 0;var be={a:-1n,d:37095705934669439343138083508754565189542113879843219016388785533085940283555n,P:2n**255n-19n,n:2n**252n+27742317777372353535851937790883648493n,h:8n,Gx:15112221349535400772501151409588531511454012693041857206046113283949847762202n,Gy:46316835694926478169428394003475163141307993866256225615783033603165251855960n};ve.CURVE=be;var je=32,hi=19681161376707505956807079304988542015446066515923890162744021073123829784752n,Zg=25063068953384623474111414158702152701244531502492656460079210482610430750235n,Qg=54469307008909316920995813868745141605393597292927456921205312896311721017578n,Xg=1159843021668779879193775521855586647937357759715417654439879720876111806838n,Jg=40440834346308536858101042469323190826248399146238708352240133220865137265952n,oe=class{constructor(t,r,n,i){this.x=t,this.y=r,this.z=n,this.t=i}static fromAffine(t){if(!(t instanceof ge))throw new TypeError("ExtendedPoint#fromAffine: expected Point");return t.equals(ge.ZERO)?oe.ZERO:new oe(t.x,t.y,1n,B(t.x*t.y))}static toAffineBatch(t){let r=t2(t.map(n=>n.z));return t.map((n,i)=>n.toAffine(r[i]))}static normalizeZ(t){return this.toAffineBatch(t).map(this.fromAffine)}static fromRistrettoHash(t){let r=no(t.slice(0,je)),n=this.calcElligatorRistrettoMap(r),i=no(t.slice(je,je*2)),a=this.calcElligatorRistrettoMap(i);return n.add(a)}static calcElligatorRistrettoMap(t){let{d:r}=be,n=B(hi*t*t),i=B((n+1n)*Xg),a=-1n,s=B((a-r*n)*B(n+r)),{isValid:o,value:u}=ao(i,s),c=B(u*t);Br(c)||(c=B(-c)),o||(u=c),o||(a=n);let f=B(a*(n-1n)*Jg-s),l=u*u,h=B((u+u)*s),d=B(f*Zg),p=B(1n-l),g=B(1n+l);return new oe(B(h*g),B(p*d),B(d*g),B(h*p))}static fromRistrettoBytes(t){let{a:r,d:n}=be,i="ExtendedPoint.fromRistrettoBytes: Cannot convert bytes to Ristretto Point",a=no(t);if(!i2(Nf(a,je),t)||Br(a))throw new Error(i);let s=B(a*a),o=B(1n+r*s),u=B(1n-r*s),c=B(o*o),f=B(u*u),l=B(r*n*c-f),{isValid:h,value:d}=kf(B(l*f)),p=B(d*u),g=B(d*p*l),v=B((a+a)*p);Br(v)&&(v=B(-v));let x=B(o*g),S=B(v*x);if(!h||Br(S)||x===0n)throw new Error(i);return new oe(v,x,1n,S)}toRistrettoBytes(){let{x:t,y:r,z:n,t:i}=this,a=B((n+r)*(n-r)),s=B(t*r),{value:o}=kf(B(a*s**2n)),u=B(o*a),c=B(o*s),f=B(u*c*i),l;Br(i*f)?([t,r]=[B(r*hi),B(t*hi)],l=B(u*Qg)):l=c,Br(t*f)&&(r=B(-r));let h=B((n-r)*l);return Br(h)&&(h=B(-h)),Nf(h,je)}equals(t){let r=this,n=t,[i,a,s,o]=[r.t,n.t,r.z,n.z];return B(i*o)===B(a*s)}negate(){return new oe(B(-this.x),this.y,this.z,B(-this.t))}double(){let t=this.x,r=this.y,n=this.z,{a:i}=be,a=B(t**2n),s=B(r**2n),o=B(2n*n**2n),u=B(i*a),c=B((t+r)**2n-a-s),f=B(u+s),l=B(f-o),h=B(u-s),d=B(c*l),p=B(f*h),g=B(c*h),v=B(l*f);return new oe(d,p,v,g)}add(t){let r=this.x,n=this.y,i=this.z,a=this.t,s=t.x,o=t.y,u=t.z,c=t.t,f=B((n-r)*(o+s)),l=B((n+r)*(o-s)),h=B(l-f);if(h===0n)return this.double();let d=B(i*2n*c),p=B(a*2n*u),g=B(p+d),v=B(l+f),x=B(p-d),S=B(g*h),C=B(v*x),L=B(g*x),D=B(h*v);return new oe(S,C,D,L)}subtract(t){return this.add(t.negate())}multiplyUnsafe(t){if(!Df(t))throw new TypeError("Point#multiply: expected number or bigint");let r=B(BigInt(t),be.n);if(r===1n)return this;let n=oe.ZERO,i=this;for(;r>0n;)r&1n&&(n=n.add(i)),i=i.double(),r>>=1n;return n}precomputeWindow(t){let r=256/t+1,n=[],i=this,a=i;for(let s=0;s<r;s++){a=i,n.push(a);for(let o=1;o<2**(t-1);o++)a=a.add(i),n.push(a);i=a.double()}return n}wNAF(t,r){!r&&this.equals(oe.BASE)&&(r=ge.BASE);let n=r&&r._WINDOW_SIZE||1;if(256%n)throw new Error("Point#wNAF: Invalid precomputation window, must be power of 2");let i=r&&to.get(r);i||(i=this.precomputeWindow(n),r&&n!==1&&(i=oe.normalizeZ(i),to.set(r,i)));let a=oe.ZERO,s=oe.ZERO,o=256/n+1,u=2**(n-1),c=BigInt(2**n-1),f=2**n,l=BigInt(n);for(let h=0;h<o;h++){let d=h*u,p=Number(t&c);if(t>>=l,p>u&&(p-=f,t+=1n),p===0)s=s.add(h%2?i[d].negate():i[d]);else{let g=i[d+Math.abs(p)-1];a=a.add(p<0?g.negate():g)}}return[a,s]}multiply(t,r){if(!Df(t))throw new TypeError("Point#multiply: expected number or bigint");let n=B(BigInt(t),be.n);return oe.normalizeZ(this.wNAF(n,r))[0]}toAffine(t=io(this.z)){let r=B(this.x*t),n=B(this.y*t);return new ge(r,n)}};ve.ExtendedPoint=oe;oe.BASE=new oe(be.Gx,be.Gy,1n,B(be.Gx*be.Gy));oe.ZERO=new oe(0n,1n,1n,0n);var to=new WeakMap,ge=class{constructor(t,r){this.x=t,this.y=r}_setWindowSize(t){this._WINDOW_SIZE=t,to.delete(this)}static fromHex(t){let{d:r,P:n}=be,i=t instanceof Uint8Array?t:pi(t);if(i.length!==32)throw new Error("Point.fromHex: expected 32 bytes");let a=i[31],s=a&~128,o=(a&128)!=0,u=Uint8Array.from(Array.from(i.slice(0,31)).concat(s)),c=wn(u);if(c>=n)throw new Error("Point.fromHex expects hex <= Fp");let f=B(c*c),l=B(f-1n),h=B(r*f+1n),{isValid:d,value:p}=ao(l,h);if(!d)throw new Error("Point.fromHex: invalid y coordinate");let g=(p&1n)===1n;return o!==g&&(p=B(-p)),new ge(p,c)}static async fromPrivateKey(t){let r=await ve.utils.sha512(Kf(t));return ge.BASE.multiply(Pf(r))}toRawBytes(){let t=ro(this.y),r=new Uint8Array(je);for(let i=t.length-2,a=0;a<je&&i>=0;i-=2,a++)r[a]=Number.parseInt(t[i]+t[i+1],16);let n=this.x&1n?128:0;return r[je-1]|=n,r}toHex(){return Rf(this.toRawBytes())}toX25519(){return B((1n+this.y)*io(1n-this.y))}equals(t){return this.x===t.x&&this.y===t.y}negate(){return new ge(B(-this.x),this.y)}add(t){return oe.fromAffine(this).add(oe.fromAffine(t)).toAffine()}subtract(t){return this.add(t.negate())}multiply(t){return oe.fromAffine(this).multiply(t,this).toAffine()}};ve.Point=ge;ge.BASE=new ge(be.Gx,be.Gy);ge.ZERO=new ge(0n,1n);var Sr=class{constructor(t,r){this.r=t,this.s=r}static fromHex(t){t=oo(t);let r=ge.fromHex(t.slice(0,32)),n=wn(t.slice(32));if(!a2(n))throw new Error("Signature.fromHex expects s <= CURVE.n");return new Sr(r,n)}toRawBytes(){let t=pi(ro(this.s)).reverse(),r=new Uint8Array(je);r.set(t);let n=new Uint8Array(je*2);return n.set(this.r.toRawBytes()),n.set(r,32),n}toHex(){return Rf(this.toRawBytes())}};ve.Signature=Sr;ve.SignResult=Sr;function e2(...e){if(e.length===1)return e[0];let t=e.reduce((n,i)=>n+i.length,0),r=new Uint8Array(t);for(let n=0,i=0;n<e.length;n++){let a=e[n];r.set(a,i),i+=a.length}return r}function Rf(e){let t="";for(let r=0;r<e.length;r++)t+=e[r].toString(16).padStart(2,"0");return t}function pi(e){if(typeof e!="string")throw new TypeError("hexToBytes: expected string, got "+typeof e);if(e.length%2)throw new Error("hexToBytes: received invalid unpadded hex");let t=new Uint8Array(e.length/2);for(let r=0;r<t.length;r++){let n=r*2;t[r]=Number.parseInt(e.slice(n,n+2),16)}return t}function ro(e){let t=e.toString(16);return t.length&1?`0${t}`:t}function Nf(e,t=je){let r=ro(e).padStart(t*2,"0");return pi(r).reverse()}function Br(e){return(B(e)&1n)===1n}function Df(e){return!!(typeof e=="bigint"&&e>0n||typeof e=="number"&&e>0&&Number.isSafeInteger(e))}function wn(e){let t=0n;for(let r=0;r<e.length;r++)t+=BigInt(e[r])<<8n*BigInt(r);return t}function no(e){return B(wn(e)&2n**255n-1n)}function B(e,t=be.P){let r=e%t;return r>=0n?r:t+r}function io(e,t=be.P){if(e===0n||t<=0n)throw new Error(`invert: expected positive integers, got n=${e} mod=${t}`);let r=B(e,t),n=t,[i,a,s,o]=[0n,1n,1n,0n];for(;r!==0n;){let c=n/r,f=n%r,l=i-s*c,h=a-o*c;[n,r]=[r,f],[i,a]=[s,o],[s,o]=[l,h]}if(n!==1n)throw new Error("invert: does not exist");return B(i,t)}function t2(e,t=be.P){let r=e.length,n=new Array(r),i=1n;for(let a=0;a<r;a++)e[a]!==0n&&(n[a]=i,i=B(i*e[a],t));i=io(i,t);for(let a=r-1;a>=0;a--){if(e[a]===0n)continue;let s=B(i*e[a],t);e[a]=B(i*n[a],t),i=s}return e}function jt(e,t){let{P:r}=be,n=e;for(;t-- >0n;)n*=n,n%=r;return n}function r2(e){let{P:t}=be,n=e*e%t*e%t,i=jt(n,2n)*n%t,a=jt(i,1n)*e%t,s=jt(a,5n)*a%t,o=jt(s,10n)*s%t,u=jt(o,20n)*o%t,c=jt(u,40n)*u%t,f=jt(c,80n)*c%t,l=jt(f,80n)*c%t,h=jt(l,10n)*s%t;return jt(h,2n)*e%t}function ao(e,t){let r=B(t*t*t),n=B(r*r*t),i=B(e*r*r2(e*n)),a=B(t*i*i),s=i,o=B(i*hi),u=a===e,c=a===B(-e),f=a===B(-e*hi);return u&&(i=s),(c||f)&&(i=o),Br(i)&&(i=B(-i)),{isValid:u||c,value:i}}function kf(e){return ao(1n,e)}async function so(...e){let t=e2(...e),r=await ve.utils.sha512(t),n=wn(r);return B(n,be.n)}function n2(e){return e.slice(je)}function Pf(e){let t=je-1,r=e.slice(0,je);return r[0]&=248,r[t]&=127,r[t]|=64,B(wn(r),be.n)}function i2(e,t){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}function oo(e){return e instanceof Uint8Array?e:pi(e)}function a2(e){return 0<e&&e<be.n}function Kf(e){let t;if(typeof e=="bigint"||typeof e=="number"&&Number.isSafeInteger(e)){if(t=BigInt(e),t<0n||t>2n**256n)throw new Error("Expected 32 bytes of private key");e=t.toString(16).padStart(je*2,"0")}if(typeof e=="string"){if(e.length!==64)throw new Error("Expected 32 bytes of private key");return pi(e)}else if(e instanceof Uint8Array){if(e.length!==32)throw new Error("Expected 32 bytes of private key");return e}else throw new TypeError("Expected valid private key")}async function s2(e){let t=await ge.fromPrivateKey(e);return typeof e=="string"?t.toHex():t.toRawBytes()}ve.getPublicKey=s2;async function o2(e,t){let r=await ve.utils.sha512(Kf(t)),n=Pf(r),i=ge.BASE.multiply(n),a=oo(e),s=await so(n2(r),a),o=ge.BASE.multiply(s),u=await so(o.toRawBytes(),i.toRawBytes(),a),c=B(s+u*n,be.n),f=new Sr(o,c);return typeof e=="string"?f.toHex():f.toRawBytes()}ve.sign=o2;async function u2(e,t,r){t=oo(t),r instanceof ge||(r=ge.fromHex(r)),e instanceof Sr||(e=Sr.fromHex(e));let n=await so(e.r.toRawBytes(),r.toRawBytes(),t),i=oe.fromAffine(r).multiplyUnsafe(n),a=oe.BASE.multiply(e.s);return oe.fromAffine(e.r).add(i).subtract(a).multiplyUnsafe(8n).equals(oe.ZERO)}ve.verify=u2;ge.BASE._setWindowSize(8);var Cr=(()=>{let e=typeof self=="object"&&"crypto"in self?self.crypto:void 0;return{node:typeof Uf!="undefined"&&typeof Ui=="function"&&!e?gn():void 0,web:e}})();ve.utils={TORSION_SUBGROUP:["0100000000000000000000000000000000000000000000000000000000000000","c7176a703d4dd84fba3c0b760d10670f2a2053fa2c39ccc64ec7fd7792ac037a","0000000000000000000000000000000000000000000000000000000000000080","26e8958fc2b227b045c3f489f2ef98f0d5dfac05d3c63339b13802886d53fc05","ecffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff7f","26e8958fc2b227b045c3f489f2ef98f0d5dfac05d3c63339b13802886d53fc85","0000000000000000000000000000000000000000000000000000000000000000","c7176a703d4dd84fba3c0b760d10670f2a2053fa2c39ccc64ec7fd7792ac03fa"],randomBytes:(e=32)=>{if(Cr.web)return Cr.web.getRandomValues(new Uint8Array(e));if(Cr.node){let{randomBytes:t}=Cr.node;return new Uint8Array(t(e).buffer)}else throw new Error("The environment doesn't have randomBytes function")},randomPrivateKey:()=>{let e=1024;for(;e--;){let t=ve.utils.randomBytes(32),r=wn(t);if(r>1n&&r<be.n)return t}throw new Error("Valid private key was not found in 1024 iterations. PRNG is broken")},sha512:async e=>{if(Cr.web){let t=await Cr.web.subtle.digest("SHA-512",e.buffer);return new Uint8Array(t)}else{if(Cr.node)return Uint8Array.from(Cr.node.createHash("sha512").update(e).digest());throw new Error("The environment doesn't have sha512 function")}},precompute(e=8,t=ge.BASE){let r=t.equals(ge.BASE)?t:new ge(t.x,t.y);return r._setWindowSize(e),r.multiply(1n),r}}});var Of=T(Ar=>{"use strict";var di=Ff(),c2=32,f2=64,Ia=32;Ar.publicKeyLength=c2;Ar.privateKeyLength=f2;Ar.generateKey=async function(){let e=di.utils.randomPrivateKey(),t=await di.getPublicKey(e);return{privateKey:Lf(e,t),publicKey:t}};Ar.generateKeyFromSeed=async function(e){if(e.length!==Ia)throw new TypeError('"seed" must be 32 bytes in length.');if(!(e instanceof Uint8Array))throw new TypeError('"seed" must be a node.js Buffer, or Uint8Array.');let t=e,r=await di.getPublicKey(t);return{privateKey:Lf(t,r),publicKey:r}};Ar.hashAndSign=function(e,t){let r=e.slice(0,Ia);return di.sign(t,r)};Ar.hashAndVerify=function(e,t,r){return di.verify(t,r,e)};function Lf(e,t){let r=new Uint8Array(Ar.privateKeyLength);for(let n=0;n<Ia;n++)r[n]=e[n],r[Ia+n]=t[n];return r}});var Hf=T((xb,zf)=>{"use strict";var qf=Je(),{equals:Mf}=(zr(),bn),{sha256:Vf}=(ln(),kr),{base58btc:l2}=(an(),nn),{identity:h2}=(Yn(),Wn),Me=Of(),_a=sa(),p2=Ba(),Ra=class{constructor(t){this._key=Sn(t,Me.publicKeyLength)}async verify(t,r){return Me.hashAndVerify(this._key,r,t)}marshal(){return this._key}get bytes(){return _a.PublicKey.encode({Type:_a.KeyType.Ed25519,Data:this.marshal()}).finish()}equals(t){return Mf(this.bytes,t.bytes)}async hash(){let{bytes:t}=await Vf.digest(this.bytes);return t}},En=class{constructor(t,r){this._key=Sn(t,Me.privateKeyLength),this._publicKey=Sn(r,Me.publicKeyLength)}async sign(t){return Me.hashAndSign(this._key,t)}get public(){return new Ra(this._publicKey)}marshal(){return this._key}get bytes(){return _a.PrivateKey.encode({Type:_a.KeyType.Ed25519,Data:this.marshal()}).finish()}equals(t){return Mf(this.bytes,t.bytes)}async hash(){let{bytes:t}=await Vf.digest(this.bytes);return t}async id(){let t=await h2.digest(this.public.bytes);return l2.encode(t.bytes).substring(1)}async export(t,r="libp2p-key"){if(r==="libp2p-key")return p2.export(this.bytes,t);throw qf(new Error(`export format '${r}' is not supported`),"ERR_INVALID_EXPORT_FORMAT")}};function d2(e){if(e.length>Me.privateKeyLength){e=Sn(e,Me.privateKeyLength+Me.publicKeyLength);let n=e.slice(0,Me.privateKeyLength),i=e.slice(Me.privateKeyLength,e.length);return new En(n,i)}e=Sn(e,Me.privateKeyLength);let t=e.slice(0,Me.privateKeyLength),r=e.slice(Me.publicKeyLength);return new En(t,r)}function y2(e){return e=Sn(e,Me.publicKeyLength),new Ra(e)}async function g2(){let{privateKey:e,publicKey:t}=await Me.generateKey();return new En(e,t)}async function v2(e){let{privateKey:t,publicKey:r}=await Me.generateKeyFromSeed(e);return new En(t,r)}function Sn(e,t){if(e=Uint8Array.from(e||[]),e.length!==t)throw qf(new Error(`Key must be a Uint8Array of length ${t}, got ${e.length}`),"ERR_INVALID_KEY_TYPE");return e}zf.exports={Ed25519PublicKey:Ra,Ed25519PrivateKey:En,unmarshalEd25519PrivateKey:d2,unmarshalEd25519PublicKey:y2,generateKeyPair:g2,generateKeyPairFromSeed:v2}});var al=T((ee,il)=>{"use strict";Object.defineProperty(ee,"__esModule",{value:!0});ee.utils=ee.schnorr=ee.verify=ee.signSync=ee.sign=ee.getSharedSecret=ee.recoverPublicKey=ee.getPublicKey=ee.SignResult=ee.Signature=ee.Point=ee.CURVE=void 0;var ne={a:0n,b:7n,P:2n**256n-2n**32n-977n,n:2n**256n-432420386565659656852420866394968145599n,h:1n,Gx:55066263022277343669578718895168534326250603453777594175500187360389116729240n,Gy:32670510020758816978083085130507043184471273380659243275938904335757337482424n,beta:0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501een};ee.CURVE=ne;function jf(e){let{a:t,b:r}=ne;return U(e**3n+t*e+r)}var Na=ne.a===0n,J=class{constructor(t,r,n){this.x=t,this.y=r,this.z=n}static fromAffine(t){if(!(t instanceof ie))throw new TypeError("JacobianPoint#fromAffine: expected Point");return new J(t.x,t.y,1n)}static toAffineBatch(t){let r=x2(t.map(n=>n.z));return t.map((n,i)=>n.toAffine(r[i]))}static normalizeZ(t){return J.toAffineBatch(t).map(J.fromAffine)}equals(t){let r=this,n=t,i=U(r.z*r.z),a=U(r.z*i),s=U(n.z*n.z),o=U(n.z*s);return U(r.x*s)===U(i*n.x)&&U(r.y*o)===U(a*n.y)}negate(){return new J(this.x,U(-this.y),this.z)}double(){let t=this.x,r=this.y,n=this.z,i=U(t**2n),a=U(r**2n),s=U(a**2n),o=U(2n*(U(U((t+a)**2n))-i-s)),u=U(3n*i),c=U(u**2n),f=U(c-2n*o),l=U(u*(o-f)-8n*s),h=U(2n*r*n);return new J(f,l,h)}add(t){if(!(t instanceof J))throw new TypeError("JacobianPoint#add: expected JacobianPoint");let r=this.x,n=this.y,i=this.z,a=t.x,s=t.y,o=t.z;if(a===0n||s===0n)return this;if(r===0n||n===0n)return t;let u=U(i**2n),c=U(o**2n),f=U(r*c),l=U(a*u),h=U(n*o*c),d=U(U(s*i)*u),p=U(l-f),g=U(d-h);if(p===0n)return g===0n?this.double():J.ZERO;let v=U(p**2n),x=U(p*v),S=U(f*v),C=U(g**2n-x-2n*S),L=U(g*(S-C)-h*x),D=U(i*o*p);return new J(C,L,D)}subtract(t){return this.add(t.negate())}multiplyUnsafe(t){if(!Wf(t))throw new TypeError("Point#multiply: expected valid scalar");let r=U(BigInt(t),ne.n);if(!Na){let f=J.ZERO,l=this;for(;r>0n;)r&1n&&(f=f.add(l)),l=l.double(),r>>=1n;return f}let[n,i,a,s]=Zf(r),o=J.ZERO,u=J.ZERO,c=this;for(;i>0n||s>0n;)i&1n&&(o=o.add(c)),s&1n&&(u=u.add(c)),c=c.double(),i>>=1n,s>>=1n;return n&&(o=o.negate()),a&&(u=u.negate()),u=new J(U(u.x*ne.beta),u.y,u.z),o.add(u)}precomputeWindow(t){let r=Na?128/t+1:256/t+1,n=[],i=this,a=i;for(let s=0;s<r;s++){a=i,n.push(a);for(let o=1;o<2**(t-1);o++)a=a.add(i),n.push(a);i=a.double()}return n}wNAF(t,r){!r&&this.equals(J.BASE)&&(r=ie.BASE);let n=r&&r._WINDOW_SIZE||1;if(256%n)throw new Error("Point#wNAF: Invalid precomputation window, must be power of 2");let i=r&&uo.get(r);i||(i=this.precomputeWindow(n),r&&n!==1&&(i=J.normalizeZ(i),uo.set(r,i)));let a=J.ZERO,s=J.ZERO,o=Na?128/n+1:256/n+1,u=2**(n-1),c=BigInt(2**n-1),f=2**n,l=BigInt(n);for(let h=0;h<o;h++){let d=h*u,p=Number(t&c);if(t>>=l,p>u&&(p-=f,t+=1n),p===0)s=s.add(h%2?i[d].negate():i[d]);else{let g=i[d+Math.abs(p)-1];a=a.add(p<0?g.negate():g)}}return[a,s]}multiply(t,r){if(!Wf(t))throw new TypeError("Point#multiply: expected valid scalar");let n=U(BigInt(t),ne.n),i,a;if(Na){let[s,o,u,c]=Zf(n),f,l,h,d;[f,h]=this.wNAF(o,r),[l,d]=this.wNAF(c,r),s&&(f=f.negate()),u&&(l=l.negate()),l=new J(U(l.x*ne.beta),l.y,l.z),[i,a]=[f.add(l),h.add(d)]}else[i,a]=this.wNAF(n,r);return J.normalizeZ([i,a])[0]}toAffine(t=vi(this.z)){let r=t**2n,n=U(this.x*r),i=U(this.y*r*t);return new ie(n,i)}};J.BASE=new J(ne.Gx,ne.Gy,1n);J.ZERO=new J(0n,1n,0n);var uo=new WeakMap,ie=class{constructor(t,r){this.x=t,this.y=r}_setWindowSize(t){this._WINDOW_SIZE=t,uo.delete(this)}static fromCompressedHex(t){let r=t.length===32,n=ht(r?t:t.slice(1)),i=jf(n),a=m2(i),s=(a&1n)===1n;r?s&&(a=U(-a)):(t[0]&1)==1!==s&&(a=U(-a));let o=new ie(n,a);return o.assertValidity(),o}static fromUncompressedHex(t){let r=ht(t.slice(1,33)),n=ht(t.slice(33)),i=new ie(r,n);return i.assertValidity(),i}static fromHex(t){let r=Pa(t),n=r[0];if(r.length===32||r.length===33&&(n===2||n===3))return this.fromCompressedHex(r);if(r.length===65&&n===4)return this.fromUncompressedHex(r);throw new Error(`Point.fromHex: received invalid point. Expected 32-33 compressed bytes or 65 uncompressed bytes, not ${r.length}`)}static fromPrivateKey(t){return ie.BASE.multiply(Bn(t))}static fromSignature(t,r,n){let i=t instanceof Uint8Array?ht(t):cr(t),a=Jf(r),{r:s,s:o}=a;if(n!==0&&n!==1)throw new Error("Cannot recover signature: invalid yParity bit");let u=2+(n&1),c=ie.fromHex(`0${u}${Tr(s)}`),f=J.fromAffine(c).multiplyUnsafe(o),l=J.BASE.multiply(i),h=vi(s,ne.n),p=f.subtract(l).multiplyUnsafe(h).toAffine();return p.assertValidity(),p}toRawBytes(t=!1){return Ir(this.toHex(t))}toHex(t=!1){let r=Tr(this.x);return t?`${this.y&1n?"03":"02"}${r}`:`04${r}${Tr(this.y)}`}toHexX(){return this.toHex(!0).slice(2)}toRawX(){return this.toRawBytes(!0).slice(1)}assertValidity(){let t="Point is not on elliptic curve",{P:r}=ne,{x:n,y:i}=this;if(n===0n||i===0n||n>=r||i>=r)throw new Error(t);let a=U(i*i),s=jf(n);if((a-s)%r!==0n)throw new Error(t)}equals(t){return this.x===t.x&&this.y===t.y}negate(){return new ie(this.x,U(-this.y))}double(){return J.fromAffine(this).double().toAffine()}add(t){return J.fromAffine(this).add(J.fromAffine(t)).toAffine()}subtract(t){return this.add(t.negate())}multiply(t){return J.fromAffine(this).multiply(t,this).toAffine()}};ee.Point=ie;ie.BASE=new ie(ne.Gx,ne.Gy);ie.ZERO=new ie(0n,0n);function Gf(e){return Number.parseInt(e[0],16)>=8?"00"+e:e}var ur=class{constructor(t,r){this.r=t,this.s=r}static fromCompact(t){if(typeof t!="string"&&!(t instanceof Uint8Array))throw new TypeError("Signature.fromCompact: Expected string or Uint8Array");let r=t instanceof Uint8Array?Da(t):t;if(r.length!==128)throw new Error("Signature.fromCompact: Expected 64-byte hex");let n=new ur(cr(r.slice(0,64)),cr(r.slice(64,128)));return n.assertValidity(),n}static fromDER(t){let r="Signature.fromDER";if(typeof t!="string"&&!(t instanceof Uint8Array))throw new TypeError(`${r}: Expected string or Uint8Array`);let n=t instanceof Uint8Array?Da(t):t,i=gi(n.slice(2,4));if(n.slice(0,2)!=="30"||i!==n.length-4||n.slice(4,6)!=="02")throw new Error(`${r}: Invalid signature ${n}`);let a=gi(n.slice(6,8)),s=8+a,o=n.slice(8,s);if(o.startsWith("00")&&gi(o.slice(2,4))<=127)throw new Error(`${r}: Invalid r with trailing length`);let u=cr(o);if(n.slice(s,s+2)!=="02")throw new Error(`${r}: Invalid r-s separator`);let f=gi(n.slice(s+2,s+4)),l=i-f-a-10;if(l>0||l===-4)throw new Error(`${r}: Invalid total length`);if(f>i-a-4)throw new Error(`${r}: Invalid s`);let h=s+4,d=n.slice(h,h+f);if(d.startsWith("00")&&gi(d.slice(2,4))<=127)throw new Error(`${r}: Invalid s with trailing length`);let p=cr(d),g=new ur(u,p);return g.assertValidity(),g}static fromHex(t){return this.fromDER(t)}assertValidity(){let{r:t,s:r}=this;if(!mi(t))throw new Error("Invalid Signature: r must be 0 < r < n");if(!mi(r))throw new Error("Invalid Signature: s must be 0 < s < n")}toDERRawBytes(t=!1){return Ir(this.toDERHex(t))}toDERHex(t=!1){let r=Gf(yi(this.s));if(t)return r;let n=Gf(yi(this.r)),i=yi(n.length/2),a=yi(r.length/2);return`30${yi(n.length/2+r.length/2+4)}02${i}${n}02${a}${r}`}toRawBytes(){return this.toDERRawBytes()}toHex(){return this.toDERHex()}toCompactRawBytes(){return Ir(this.toCompactHex())}toCompactHex(){return Tr(this.r)+Tr(this.s)}};ee.Signature=ur;ee.SignResult=ur;function $f(...e){if(e.length===1)return e[0];let t=e.reduce((n,i)=>n+i.length,0),r=new Uint8Array(t);for(let n=0,i=0;n<e.length;n++){let a=e[n];r.set(a,i),i+=a.length}return r}function Da(e){let t="";for(let r=0;r<e.length;r++)t+=e[r].toString(16).padStart(2,"0");return t}function Tr(e){return e.toString(16).padStart(64,"0")}function ka(e){return Ir(Tr(e))}function yi(e){let t=e.toString(16);return t.length&1?`0${t}`:t}function cr(e){if(typeof e!="string")throw new TypeError("hexToNumber: expected string, got "+typeof e);return BigInt(`0x${e}`)}function Ir(e){if(typeof e!="string")throw new TypeError("hexToBytes: expected string, got "+typeof e);if(e.length%2)throw new Error("hexToBytes: received invalid unpadded hex");let t=new Uint8Array(e.length/2);for(let r=0;r<t.length;r++){let n=r*2;t[r]=Number.parseInt(e.slice(n,n+2),16)}return t}function Pa(e){return e instanceof Uint8Array?e:Ir(e)}function ht(e){return cr(Da(e))}function gi(e){return Number.parseInt(e,16)*2}function Wf(e){return!!(typeof e=="bigint"&&e>0n||typeof e=="number"&&e>0&&Number.isSafeInteger(e))}function U(e,t=ne.P){let r=e%t;return r>=0?r:t+r}function pt(e,t){let{P:r}=ne,n=e;for(;t-- >0n;)n*=n,n%=r;return n}function m2(e){let{P:t}=ne,r=e*e*e%t,n=r*r*e%t,i=pt(n,3n)*n%t,a=pt(i,3n)*n%t,s=pt(a,2n)*r%t,o=pt(s,11n)*s%t,u=pt(o,22n)*o%t,c=pt(u,44n)*u%t,f=pt(c,88n)*c%t,l=pt(f,44n)*u%t,h=pt(l,3n)*n%t,d=pt(h,23n)*o%t,p=pt(d,6n)*r%t;return pt(p,2n)}function vi(e,t=ne.P){if(e===0n||t<=0n)throw new Error(`invert: expected positive integers, got n=${e} mod=${t}`);let r=U(e,t),n=t,[i,a,s,o]=[0n,1n,1n,0n];for(;r!==0n;){let c=n/r,f=n%r,l=i-s*c,h=a-o*c;[n,r]=[r,f],[i,a]=[s,o],[s,o]=[l,h]}if(n!==1n)throw new Error("invert: does not exist");return U(i,t)}function x2(e,t=ne.P){let r=e.length,n=new Array(r),i=1n;for(let a=0;a<r;a++)e[a]!==0n&&(n[a]=i,i=U(i*e[a],t));i=vi(i,t);for(let a=r-1;a>=0;a--){if(e[a]===0n)continue;let s=U(i*e[a],t);e[a]=U(i*n[a],t),i=s}return e}var Yf=(e,t)=>(e+t/2n)/t,Ka=2n**128n;function Zf(e){let{n:t}=ne,r=0x3086d221a7d46bcde86c90e49284eb15n,n=-0xe4437ed6010e88286f547fa90abfe4c3n,i=0x114ca50f7a8e2f3f657c1108d9d44cfd8n,a=r,s=Yf(a*e,t),o=Yf(-n*e,t),u=U(e-s*r-o*i,t),c=U(-s*n-o*a,t),f=u>Ka,l=c>Ka;if(f&&(u=t-u),l&&(c=t-c),u>Ka||c>Ka)throw new Error("splitScalarEndo: Endomorphism failed");return[f,u,l,c]}function b2(e){typeof e!="string"&&(e=Da(e));let t=cr(e||"0"),n=e.length/2*8-256;return n>0&&(t=t>>BigInt(n)),t>=ne.n&&(t-=ne.n),t}function Qf(e,t){if(e==null)throw new Error(`sign: expected valid msgHash, not "${e}"`);let r=typeof e=="string"?cr(e):ht(e),n=ka(r),i=ht(n),a=ka(t),s=new Uint8Array(32).fill(1),o=new Uint8Array(32).fill(0),u=Uint8Array.from([0]),c=Uint8Array.from([1]);return[n,i,a,s,o,u,c]}async function w2(e,t){let r=Bn(t),[n,i,a,s,o,u,c]=Qf(e,r),f=ee.utils.hmacSha256;o=await f(o,s,u,a,n),s=await f(o,s),o=await f(o,s,c,a,n),s=await f(o,s);for(let l=0;l<1e3;l++){s=await f(o,s);let h=Xf(s,i,r);if(h)return h;o=await f(o,s,u),s=await f(o,s)}throw new TypeError("secp256k1: Tried 1,000 k values for sign(), all were invalid")}function E2(e,t){let r=Bn(t),[n,i,a,s,o,u,c]=Qf(e,r),f=ee.utils.hmacSha256Sync;if(!f)throw new Error("utils.hmacSha256Sync is undefined, you need to set it");if(o=f(o,s,u,a,n),o instanceof Promise)throw new Error("To use sync sign(), ensure utils.hmacSha256 is sync");s=f(o,s),o=f(o,s,c,a,n),s=f(o,s);for(let l=0;l<1e3;l++){s=f(o,s);let h=Xf(s,i,r);if(h)return h;o=f(o,s,u),s=f(o,s)}throw new TypeError("secp256k1: Tried 1,000 k values for sign(), all were invalid")}function mi(e){return 0<e&&e<ne.n}function Xf(e,t,r){let n=ht(e);if(!mi(n))return;let i=ne.n,a=ie.BASE.multiply(n),s=U(a.x,i),o=U(vi(n,i)*(t+s*r),i);if(!(s===0n||o===0n))return[a,s,o]}function Bn(e){let t;if(typeof e=="bigint")t=e;else if(typeof e=="number"&&Number.isSafeInteger(e)&&e>0)t=BigInt(e);else if(typeof e=="string"){if(e.length!==64)throw new Error("Expected 32 bytes of private key");t=cr(e)}else if(e instanceof Uint8Array){if(e.length!==32)throw new Error("Expected 32 bytes of private key");t=ht(e)}else throw new TypeError("Expected valid private key");if(!mi(t))throw new Error("Expected private key: 0 < key < n");return t}function co(e){return e instanceof ie?(e.assertValidity(),e):ie.fromHex(e)}function Jf(e){return e instanceof ur?(e.assertValidity(),e):ur.fromDER(e)}function S2(e,t=!1){let r=ie.fromPrivateKey(e);return typeof e=="string"?r.toHex(t):r.toRawBytes(t)}ee.getPublicKey=S2;function B2(e,t,r){let n=ie.fromSignature(e,t,r);return typeof e=="string"?n.toHex():n.toRawBytes()}ee.recoverPublicKey=B2;function el(e){let t=e instanceof Uint8Array,r=typeof e=="string",n=(t||r)&&e.length;return t?n===33||n===65:r?n===66||n===130:e instanceof ie}function C2(e,t,r=!1){if(el(e))throw new TypeError("getSharedSecret: first arg must be private key");if(!el(t))throw new TypeError("getSharedSecret: second arg must be public key");let n=co(t);n.assertValidity();let i=n.multiply(Bn(e));return typeof e=="string"?i.toHex(r):i.toRawBytes(r)}ee.getSharedSecret=C2;function tl(e,t,r=!1){let[n,i,a]=e,{canonical:s,der:o,recovered:u}=t,c=(n.x===i?0:2)|Number(n.y&1n),f=a,l=ne.n>>1n;a>l&&s&&(f=ne.n-a,c^=1);let h=new ur(i,f);h.assertValidity();let d=o===!1?h.toCompactHex():h.toDERHex(),p=r?d:Ir(d);return u?[p,c]:p}async function A2(e,t,r={}){return tl(await w2(e,t),r,typeof e=="string")}ee.sign=A2;function T2(e,t,r={}){return tl(E2(e,t),r,typeof e=="string")}ee.signSync=T2;function I2(e,t,r){let{n}=ne,i;try{i=Jf(e)}catch(v){return!1}let{r:a,s}=i,o=b2(t);if(o===0n)return!1;let u=J.fromAffine(co(r)),c=vi(s,n),f=U(o*c,n),l=U(a*c,n),h=J.BASE.multiply(f),d=u.multiplyUnsafe(l),p=h.add(d).toAffine();return U(p.x,n)===a}ee.verify=I2;async function fo(e,...t){let r=new Uint8Array(e.split("").map(a=>a.charCodeAt(0))),n=await ee.utils.sha256(r),i=await ee.utils.sha256($f(n,n,...t));return ht(i)}async function rl(e,t,r){let n=ka(e),i=await fo("BIP0340/challenge",n,t.toRawX(),r);return U(i,ne.n)}function lo(e){return U(e.y,2n)===0n}var jr=class{constructor(t,r){if(this.r=t,this.s=r,t<=0n||r<=0n||t>=ne.P||r>=ne.n)throw new Error("Invalid signature")}static fromHex(t){let r=Pa(t);if(r.length!==64)throw new TypeError(`SchnorrSignature.fromHex: expected 64 bytes, not ${r.length}`);let n=ht(r.slice(0,32)),i=ht(r.slice(32));return new jr(n,i)}toHex(){return Tr(this.r)+Tr(this.s)}toRawBytes(){return Ir(this.toHex())}};function _2(e){let t=ie.fromPrivateKey(e);return typeof e=="string"?t.toHexX():t.toRawX()}async function R2(e,t,r=ee.utils.randomBytes()){if(e==null)throw new TypeError(`sign: Expected valid message, not "${e}"`);t||(t=0n);let{n}=ne,i=Pa(e),a=Bn(t),s=Pa(r);if(s.length!==32)throw new TypeError("sign: Expected 32 bytes of aux randomness");let o=ie.fromPrivateKey(a),u=lo(o)?a:n-a,c=await fo("BIP0340/aux",s),f=u^c,l=await fo("BIP0340/nonce",ka(f),o.toRawX(),i),h=U(l,n);if(h===0n)throw new Error("sign: Creation of signature failed. k is zero");let d=ie.fromPrivateKey(h),p=lo(d)?h:n-h,g=await rl(d.x,o,i),v=new jr(d.x,U(p+g*u,n));if(!await nl(v.toRawBytes(),i,o.toRawX()))throw new Error("sign: Invalid signature produced");return typeof e=="string"?v.toHex():v.toRawBytes()}async function nl(e,t,r){let n=e instanceof jr?e:jr.fromHex(e),i=typeof t=="string"?Ir(t):t,a=co(r),s=await rl(n.r,a,i),o=ie.fromPrivateKey(n.s),u=a.multiply(s),c=o.subtract(u);return!(c.equals(ie.BASE)||!lo(c)||c.x!==n.r)}ee.schnorr={Signature:jr,getPublicKey:_2,sign:R2,verify:nl};ie.BASE._setWindowSize(8);var et=(()=>{let e=typeof self=="object"&&"crypto"in self?self.crypto:void 0;return{node:typeof il!="undefined"&&typeof Ui=="function"&&!e?gn():void 0,web:e}})();ee.utils={isValidPrivateKey(e){try{return Bn(e),!0}catch(t){return!1}},randomBytes:(e=32)=>{if(et.web)return et.web.getRandomValues(new Uint8Array(e));if(et.node){let{randomBytes:t}=et.node;return new Uint8Array(t(e).buffer)}else throw new Error("The environment doesn't have randomBytes function")},randomPrivateKey:()=>{let e=8;for(;e--;){let t=ee.utils.randomBytes(32),r=ht(t);if(mi(r)&&r!==1n)return t}throw new Error("Valid private key was not found in 8 iterations. PRNG is broken")},sha256:async e=>{if(et.web){let t=await et.web.subtle.digest("SHA-256",e.buffer);return new Uint8Array(t)}else if(et.node){let{createHash:t}=et.node;return Uint8Array.from(t("sha256").update(e).digest())}else throw new Error("The environment doesn't have sha256 function")},hmacSha256:async(e,...t)=>{if(et.web){let r=await et.web.subtle.importKey("raw",e,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]),n=$f(...t),i=await et.web.subtle.sign("HMAC",r,n);return new Uint8Array(i)}else if(et.node){let{createHmac:r}=et.node,n=r("sha256",e);for(let i of t)n.update(i);return Uint8Array.from(n.digest())}else throw new Error("The environment doesn't have hmac-sha256 function")},sha256Sync:void 0,hmacSha256Sync:void 0,precompute(e=8,t=ie.BASE){let r=t===ie.BASE?t:new ie(t.x,t.y);return r._setWindowSize(e),r.multiply(3n),r}}});var ul=T((bb,ol)=>{"use strict";var xi=Je(),_r=al(),{sha256:sl}=(ln(),kr);ol.exports=()=>{let e=32;function t(){return _r.utils.randomPrivateKey()}async function r(c,f){let{digest:l}=await sl.digest(f);try{return await _r.sign(l,c)}catch(h){throw xi(h,"ERR_INVALID_INPUT")}}async function n(c,f,l){try{let{digest:h}=await sl.digest(l);return _r.verify(f,h,c)}catch(h){throw xi(h,"ERR_INVALID_INPUT")}}function i(c){return _r.Point.fromHex(c).toRawBytes(!0)}function a(c){return _r.Point.fromHex(c).toRawBytes(!1)}function s(c){try{_r.getPublicKey(c,!0)}catch(f){throw xi(f,"ERR_INVALID_PRIVATE_KEY")}}function o(c){try{_r.Point.fromHex(c)}catch(f){throw xi(f,"ERR_INVALID_PUBLIC_KEY")}}function u(c){try{return _r.getPublicKey(c,!0)}catch(f){throw xi(f,"ERR_INVALID_PRIVATE_KEY")}}return{generateKey:t,privateKeyLength:e,hashAndSign:r,hashAndVerify:n,compressPublicKey:i,decompressPublicKey:a,validatePrivateKey:s,validatePublicKey:o,computePublicKey:u}}});var hl=T((wb,ll)=>{"use strict";var{sha256:cl}=(ln(),kr),N2=Je(),{equals:fl}=(zr(),bn),{toString:D2}=(St(),er),k2=Ba();ll.exports=(e,t,r)=>{r=r||ul()();class n{constructor(c){r.validatePublicKey(c),this._key=c}verify(c,f){return r.hashAndVerify(this._key,f,c)}marshal(){return r.compressPublicKey(this._key)}get bytes(){return e.PublicKey.encode({Type:e.KeyType.Secp256k1,Data:this.marshal()}).finish()}equals(c){return fl(this.bytes,c.bytes)}async hash(){let{bytes:c}=await cl.digest(this.bytes);return c}}class i{constructor(c,f){this._key=c,this._publicKey=f||r.computePublicKey(c),r.validatePrivateKey(this._key),r.validatePublicKey(this._publicKey)}sign(c){return r.hashAndSign(this._key,c)}get public(){return new n(this._publicKey)}marshal(){return this._key}get bytes(){return e.PrivateKey.encode({Type:e.KeyType.Secp256k1,Data:this.marshal()}).finish()}equals(c){return fl(this.bytes,c.bytes)}async hash(){let{bytes:c}=await cl.digest(this.bytes);return c}async id(){let c=await this.public.hash();return D2(c,"base58btc")}async export(c,f="libp2p-key"){if(f==="libp2p-key")return k2.export(this.bytes,c);throw N2(new Error(`export format '${f}' is not supported`),"ERR_INVALID_EXPORT_FORMAT")}}function a(u){return new i(u)}function s(u){return new n(u)}async function o(){let u=await r.generateKey();return new i(u)}return{Secp256k1PublicKey:n,Secp256k1PrivateKey:i,unmarshalSecp256k1PrivateKey:a,unmarshalSecp256k1PublicKey:s,generateKeyPair:o}}});var vl=T((Eb,gl)=>{"use strict";var pl=Je(),{concat:dl}=(xn(),oi),{fromString:P2}=(Bt(),tr),K2=gs(),yl={"AES-128":{ivSize:16,keySize:16},"AES-256":{ivSize:16,keySize:32},Blowfish:{ivSize:8,cipherKeySize:32}};gl.exports=async(e,t,r)=>{let n=yl[e];if(!n){let S=Object.keys(yl).join(" / ");throw pl(new Error(`unknown cipher type '${e}'. Must be ${S}`),"ERR_INVALID_CIPHER_TYPE")}if(!t)throw pl(new Error("missing hash type"),"ERR_MISSING_HASH_TYPE");let i=n.keySize,a=n.ivSize,s=20,o=P2("key expansion"),u=2*(a+i+s),c=await K2.create(t,r),f=await c.digest(o),l=[],h=0;for(;h<u;){let S=await c.digest(dl([f,o])),C=S.length;h+C>u&&(C=u-h),l.push(S),h+=C,f=await c.digest(f)}let d=u/2,p=dl(l),g=p.slice(0,d),v=p.slice(d,u),x=S=>({iv:S.slice(0,a),cipherKey:S.slice(a,a+i),macKey:S.slice(a+i)});return{k1:x(g),k2:x(v)}}});var xl=T((Sb,ml)=>{"use strict";var U2=Je();ml.exports=function(e,t){if(!e.includes(t)){let r=e.join(" / ");throw U2(new Error(`Unknown curve: ${t}. Must be ${r}`),"ERR_INVALID_CURVE")}}});var Cl=T(Bl=>{"use strict";var F2=Je(),bi=Qn(),{base64urlToBuffer:bl}=Sa(),L2=xl(),{toString:ho}=(St(),er),{concat:O2}=(xn(),oi),{equals:q2}=(zr(),bn),wl={"P-256":256,"P-384":384,"P-521":521};Bl.generateEphmeralKeyPair=async function(e){L2(Object.keys(wl),e);let t=await bi.get().subtle.generateKey({name:"ECDH",namedCurve:e},!0,["deriveBits"]),r=async(i,a)=>{let s;a?s=await bi.get().subtle.importKey("jwk",V2(e,a),{name:"ECDH",namedCurve:e},!1,["deriveBits"]):s=t.privateKey;let o=[await bi.get().subtle.importKey("jwk",Sl(e,i),{name:"ECDH",namedCurve:e},!1,[]),s],u=await bi.get().subtle.deriveBits({name:"ECDH",namedCurve:e,public:o[0]},o[1],wl[e]);return new Uint8Array(u,u.byteOffset,u.byteLength)},n=await bi.get().subtle.exportKey("jwk",t.publicKey);return{key:M2(n),genSharedKey:r}};var El={"P-256":32,"P-384":48,"P-521":66};function M2(e){let t=El[e.crv];return O2([Uint8Array.from([4]),bl(e.x,t),bl(e.y,t)],1+t*2)}function Sl(e,t){let r=El[e];if(q2(!t.slice(0,1),Uint8Array.from([4])))throw F2(new Error("Cannot unmarshal public key - invalid key format"),"ERR_INVALID_KEY_FORMAT");return{kty:"EC",crv:e,x:ho(t.slice(1,r+1),"base64url"),y:ho(t.slice(1+r),"base64url"),ext:!0}}var V2=(e,t)=>({...Sl(e,t.public),d:ho(t.private,"base64url")})});var Tl=T((Cb,Al)=>{"use strict";var z2=Cl();Al.exports=async e=>z2.generateEphmeralKeyPair(e)});var yo=T((Ab,_l)=>{"use strict";var Gt=sa();ii();Xc();var po=ae(),wi=Je(),{fromString:H2}=(Bt(),tr),j2=rf(),dt={rsa:_f(),ed25519:Hf(),secp256k1:hl()(Gt,Ea())},Ua={message:"secp256k1 support requires libp2p-crypto-secp256k1 package",code:"ERR_MISSING_PACKAGE"};function Cn(e){let t=dt[e.toLowerCase()];if(!t){let r=Object.keys(dt).join(" / ");throw wi(new Error(`invalid or unsupported key type ${e}. Must be ${r}`),"ERR_UNSUPPORTED_KEY_TYPE")}return t}var G2=async(e,t)=>Cn(e).generateKeyPair(t),$2=async(e,t,r)=>{let n=Cn(e);if(e.toLowerCase()!=="ed25519")throw wi(new Error("Seed key derivation is unimplemented for RSA or secp256k1"),"ERR_UNSUPPORTED_KEY_DERIVATION_TYPE");return n.generateKeyPairFromSeed(t,r)},W2=e=>{let t=Gt.PublicKey.decode(e),r=t.Data;switch(t.Type){case Gt.KeyType.RSA:return dt.rsa.unmarshalRsaPublicKey(r);case Gt.KeyType.Ed25519:return dt.ed25519.unmarshalEd25519PublicKey(r);case Gt.KeyType.Secp256k1:if(dt.secp256k1)return dt.secp256k1.unmarshalSecp256k1PublicKey(r);throw wi(new Error(Ua.message),Ua.code);default:Cn(t.Type)}},Y2=(e,t)=>(t=(t||"rsa").toLowerCase(),Cn(t),e.bytes),Il=async e=>{let t=Gt.PrivateKey.decode(e),r=t.Data;switch(t.Type){case Gt.KeyType.RSA:return dt.rsa.unmarshalRsaPrivateKey(r);case Gt.KeyType.Ed25519:return dt.ed25519.unmarshalEd25519PrivateKey(r);case Gt.KeyType.Secp256k1:if(dt.secp256k1)return dt.secp256k1.unmarshalSecp256k1PrivateKey(r);throw wi(new Error(Ua.message),Ua.code);default:Cn(t.Type)}},Z2=(e,t)=>(t=(t||"rsa").toLowerCase(),Cn(t),e.bytes),Q2=async(e,t)=>{try{let i=await j2.import(e,t);return Il(i)}catch(i){}let r=po.pki.decryptRsaPrivateKey(e,t);if(r===null)throw wi(new Error("Cannot read the key, most likely the password is wrong or not a RSA key"),"ERR_CANNOT_DECRYPT_PEM");let n=po.asn1.toDer(po.pki.privateKeyToAsn1(r));return n=H2(n.getBytes(),"ascii"),dt.rsa.unmarshalRsaPrivateKey(n)};_l.exports={supportedKeys:dt,keysPBM:Gt,keyStretcher:vl(),generateEphemeralKeyPair:Tl(),generateKeyPair:G2,generateKeyPairFromSeed:$2,unmarshalPublicKey:W2,marshalPublicKey:Y2,unmarshalPrivateKey:Il,marshalPrivateKey:Z2,import:Q2}});var Dl=T((Tb,Nl)=>{"use strict";var X2=Vs(),J2=Se(),ev=Je(),Rl={sha1:"sha1","sha2-256":"sha256","sha2-512":"sha512"};function tv(e,t,r,n,i){let a=Rl[i];if(!a){let o=Object.keys(Rl).join(" / ");throw ev(new Error(`Hash '${i}' is unknown or not supported. Must be ${o}`),"ERR_UNSUPPORTED_HASH_TYPE")}let s=X2(e,t,r,n,a);return J2.encode64(s)}Nl.exports=tv});var kl=T(An=>{"use strict";var rv=gs(),nv=J0(),iv=yo();An.aes=nv;An.hmac=rv;An.keys=iv;An.randomBytes=Ea();An.pbkdf2=Dl()});var Pl=T((_b,go)=>{"use strict";function av(e,{className:t,symbolName:r}){let n=Symbol.for(r),i={[t]:class extends e{constructor(...a){super(...a);Object.defineProperty(this,n,{value:!0})}get[Symbol.toStringTag](){return t}}}[t];return i[`is${t}`]=a=>!!(a&&a[n]),i}function sv(e,{className:t,symbolName:r,withoutNew:n}){let i=Symbol.for(r),a={[t]:function(...s){if(n&&!(this instanceof a))return new a(...s);let o=e.call(this,...s)||this;return o&&!o[i]&&Object.defineProperty(o,i,{value:!0}),o}}[t];return a.prototype=Object.create(e.prototype),a.prototype.constructor=a,Object.defineProperty(a.prototype,Symbol.toStringTag,{get(){return t}}),a[`is${t}`]=s=>!!(s&&s[i]),a}go.exports=av;go.exports.proto=sv});var Fl=T((Rb,Ul)=>{"use strict";var Tn=ia(),Kl=Tn.Reader,ov=Tn.Writer,_e=Tn.util,Ei=Tn.roots["libp2p-peer-id"]||(Tn.roots["libp2p-peer-id"]={});Ei.PeerIdProto=function(){function e(t){if(t)for(var r=Object.keys(t),n=0;n<r.length;++n)t[r[n]]!=null&&(this[r[n]]=t[r[n]])}return e.prototype.id=_e.newBuffer([]),e.prototype.pubKey=_e.newBuffer([]),e.prototype.privKey=_e.newBuffer([]),e.encode=function(r,n){return n||(n=ov.create()),n.uint32(10).bytes(r.id),r.pubKey!=null&&Object.hasOwnProperty.call(r,"pubKey")&&n.uint32(18).bytes(r.pubKey),r.privKey!=null&&Object.hasOwnProperty.call(r,"privKey")&&n.uint32(26).bytes(r.privKey),n},e.decode=function(r,n){r instanceof Kl||(r=Kl.create(r));for(var i=n===void 0?r.len:r.pos+n,a=new Ei.PeerIdProto;r.pos<i;){var s=r.uint32();switch(s>>>3){case 1:a.id=r.bytes();break;case 2:a.pubKey=r.bytes();break;case 3:a.privKey=r.bytes();break;default:r.skipType(s&7);break}}if(!a.hasOwnProperty("id"))throw _e.ProtocolError("missing required 'id'",{instance:a});return a},e.fromObject=function(r){if(r instanceof Ei.PeerIdProto)return r;var n=new Ei.PeerIdProto;return r.id!=null&&(typeof r.id=="string"?_e.base64.decode(r.id,n.id=_e.newBuffer(_e.base64.length(r.id)),0):r.id.length&&(n.id=r.id)),r.pubKey!=null&&(typeof r.pubKey=="string"?_e.base64.decode(r.pubKey,n.pubKey=_e.newBuffer(_e.base64.length(r.pubKey)),0):r.pubKey.length&&(n.pubKey=r.pubKey)),r.privKey!=null&&(typeof r.privKey=="string"?_e.base64.decode(r.privKey,n.privKey=_e.newBuffer(_e.base64.length(r.privKey)),0):r.privKey.length&&(n.privKey=r.privKey)),n},e.toObject=function(r,n){n||(n={});var i={};return n.defaults&&(n.bytes===String?i.id="":(i.id=[],n.bytes!==Array&&(i.id=_e.newBuffer(i.id))),n.bytes===String?i.pubKey="":(i.pubKey=[],n.bytes!==Array&&(i.pubKey=_e.newBuffer(i.pubKey))),n.bytes===String?i.privKey="":(i.privKey=[],n.bytes!==Array&&(i.privKey=_e.newBuffer(i.privKey)))),r.id!=null&&r.hasOwnProperty("id")&&(i.id=n.bytes===String?_e.base64.encode(r.id,0,r.id.length):n.bytes===Array?Array.prototype.slice.call(r.id):r.id),r.pubKey!=null&&r.hasOwnProperty("pubKey")&&(i.pubKey=n.bytes===String?_e.base64.encode(r.pubKey,0,r.pubKey.length):n.bytes===Array?Array.prototype.slice.call(r.pubKey):r.pubKey),r.privKey!=null&&r.hasOwnProperty("privKey")&&(i.privKey=n.bytes===String?_e.base64.encode(r.privKey,0,r.privKey.length):n.bytes===Array?Array.prototype.slice.call(r.privKey):r.privKey),i},e.prototype.toJSON=function(){return this.constructor.toObject(this,Tn.util.toJSONOptions)},e}();Ul.exports=Ei});var Gl=T((Ve,jl)=>{"use strict";var{CID:vo}=(hs(),m0),uv=(rn(),Mn),cv=(us(),Oi),fv=(an(),nn),lv=(Vn(),sn),{base58btc:mo}=(an(),nn),{base32:hv}=(rn(),Mn),{base16:Ll}=(ss(),Li),Si=(fn(),Mi),$t=yo(),pv=Pl(),{PeerIdProto:Ol}=Fl(),{equals:Gr}=(zr(),bn),{fromString:Bi}=(Bt(),tr),{toString:dv}=(St(),er),{identity:Fa}=(Yn(),Wn),ql={...uv,...cv,...fv,...lv},yv=Object.keys(ql).reduce((e,t)=>e.or(ql[t]),hv.decoder),gv=112,Ml=114,Vl=class{constructor(t,r,n){if(!(t instanceof Uint8Array))throw new Error("invalid id provided");if(r&&n&&!Gr(r.public.bytes,n.bytes))throw new Error("inconsistent arguments");this._id=t,this._idB58String=mo.encode(this.id).substring(1),this._privKey=r,this._pubKey=n}get id(){return this._id}set id(t){throw new Error("Id is immutable")}get privKey(){return this._privKey}set privKey(t){this._privKey=t}get pubKey(){if(this._pubKey)return this._pubKey;if(this._privKey)return this._privKey.public;try{let t=Si.decode(this.id);t.code===Fa.code&&(this._pubKey=$t.unmarshalPublicKey(t.digest))}catch(t){}return this._pubKey}set pubKey(t){this._pubKey=t}marshalPubKey(){if(this.pubKey)return $t.marshalPublicKey(this.pubKey)}marshalPrivKey(){if(this.privKey)return $t.marshalPrivateKey(this.privKey)}marshal(t){return Ol.encode({id:this.toBytes(),pubKey:this.marshalPubKey(),privKey:t?null:this.marshalPrivKey()}).finish()}toPrint(){let t=this.toB58String();t.startsWith("Qm")&&(t=t.slice(2));let r=6;return t.length<r&&(r=t.length),"<peer.ID "+t.substr(0,r)+">"}toJSON(){return{id:this.toB58String(),privKey:Hl(this.marshalPrivKey()),pubKey:Hl(this.marshalPubKey())}}toHexString(){return Ll.encode(this.id).substring(1)}toBytes(){return this.id}toB58String(){return this._idB58String}toString(){if(!this._idCIDString){let t=vo.createV1(Ml,Si.decode(this.id));Object.defineProperty(this,"_idCIDString",{value:t.toString(),enumerable:!1})}return this._idCIDString}equals(t){if(t instanceof Uint8Array)return Gr(this.id,t);if(t.id)return Gr(this.id,t.id);throw new Error("not valid Id")}isEqual(t){return this.equals(t)}isValid(){return Boolean(this.privKey&&this.privKey.public&&this.privKey.public.bytes&&this.pubKey.bytes instanceof Uint8Array&&Gr(this.privKey.public.bytes,this.pubKey.bytes))}hasInlinePublicKey(){try{if(Si.decode(this.id).code===Fa.code)return!0}catch(t){}return!1}},Wt=pv(Vl,{className:"PeerId",symbolName:"@libp2p/js-peer-id/PeerId"});Ve=jl.exports=Wt;var Ci=e=>e.bytes.length<=42?Si.create(Fa.code,e.bytes).bytes:e.hash(),xo=async(e,t)=>{let r=await Ci(t);return new Wt(r,e,t)};Ve.create=async e=>{e=e||{},e.bits=e.bits||2048,e.keyType=e.keyType||"RSA";let t=await $t.generateKeyPair(e.keyType,e.bits);return xo(t,t.public)};Ve.createFromHexString=e=>new Wt(Ll.decode("f"+e));Ve.createFromBytes=e=>{try{let t=vo.decode(e);if(!zl(t))throw new Error("Supplied PeerID CID is invalid");return Ve.createFromCID(t)}catch{if(Si.decode(e).code!==Fa.code)throw new Error("Supplied PeerID CID is invalid");return new Wt(e)}};Ve.createFromB58String=e=>Ve.createFromBytes(mo.decode("z"+e));var zl=e=>e.code===Ml||e.code===gv;Ve.createFromCID=e=>{if(e=vo.asCID(e),!e||!zl(e))throw new Error("Supplied PeerID CID is invalid");return new Wt(e.multihash.bytes)};Ve.createFromPubKey=async e=>{let t=e;if(typeof t=="string"&&(t=Bi(e,"base64pad")),!(t instanceof Uint8Array))throw new Error("Supplied key is neither a base64 string nor a Uint8Array");let r=await $t.unmarshalPublicKey(t);return xo(void 0,r)};Ve.createFromPrivKey=async e=>{if(typeof e=="string"&&(e=Bi(e,"base64pad")),!(e instanceof Uint8Array))throw new Error("Supplied key is neither a base64 string nor a Uint8Array");let t=await $t.unmarshalPrivateKey(e);return xo(t,t.public)};Ve.createFromJSON=async e=>{let t=mo.decode("z"+e.id),r=e.privKey&&Bi(e.privKey,"base64pad"),n=e.pubKey&&Bi(e.pubKey,"base64pad"),i=n&&await $t.unmarshalPublicKey(n);if(!r)return new Wt(t,void 0,i);let a=await $t.unmarshalPrivateKey(r),s=await Ci(a.public),o;if(i&&(o=await Ci(i)),i&&!Gr(s,o))throw new Error("Public and private key do not match");if(t&&!Gr(s,t))throw new Error("Id and private key do not match");return new Wt(t,a,i)};Ve.createFromProtobuf=async e=>{typeof e=="string"&&(e=Bi(e,"base16"));let{id:t,privKey:r,pubKey:n}=Ol.decode(e);r=r?await $t.unmarshalPrivateKey(r):!1,n=n?await $t.unmarshalPublicKey(n):!1;let i,a;if(r&&(a=await Ci(r.public)),n&&(i=await Ci(n)),r){if(n&&!Gr(a,i))throw new Error("Public and private key do not match");return new Wt(a,r,r.public)}if(n)return new Wt(i,void 0,n);if(t)return new Wt(t);throw new Error("Protobuf did not contain any usable key material")};Ve.parse=e=>((e.charAt(0)==="1"||e.charAt(0)==="Q")&&(e=`z${e}`),Ve.createFromBytes(yv.decode(e)));Ve.isPeerId=e=>Boolean(typeof e=="object"&&e._id&&e._idB58String);function Hl(e){if(e)return dv(e,"base64pad")}});var up=T((Qw,op)=>{op.exports=le;var vt=null;try{vt=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(e){}function le(e,t,r){this.low=e|0,this.high=t|0,this.unsigned=!!r}le.prototype.__isLong__;Object.defineProperty(le.prototype,"__isLong__",{value:!0});function Ze(e){return(e&&e.__isLong__)===!0}le.isLong=Ze;var Xh={},Jh={};function $r(e,t){var r,n,i;return t?(e>>>=0,(i=0<=e&&e<256)&&(n=Jh[e],n)?n:(r=he(e,(e|0)<0?-1:0,!0),i&&(Jh[e]=r),r)):(e|=0,(i=-128<=e&&e<128)&&(n=Xh[e],n)?n:(r=he(e,e<0?-1:0,!1),i&&(Xh[e]=r),r))}le.fromInt=$r;function mt(e,t){if(isNaN(e))return t?Wr:xt;if(t){if(e<0)return Wr;if(e>=tp)return sp}else{if(e<=-rp)return Qe;if(e+1>=rp)return ap}return e<0?mt(-e,t).neg():he(e%Dn|0,e/Dn|0,t)}le.fromNumber=mt;function he(e,t,r){return new le(e,t,r)}le.fromBits=he;var $a=Math.pow;function No(e,t,r){if(e.length===0)throw Error("empty string");if(e==="NaN"||e==="Infinity"||e==="+Infinity"||e==="-Infinity")return xt;if(typeof t=="number"?(r=t,t=!1):t=!!t,r=r||10,r<2||36<r)throw RangeError("radix");var n;if((n=e.indexOf("-"))>0)throw Error("interior hyphen");if(n===0)return No(e.substring(1),t,r).neg();for(var i=mt($a(r,8)),a=xt,s=0;s<e.length;s+=8){var o=Math.min(8,e.length-s),u=parseInt(e.substring(s,s+o),r);if(o<8){var c=mt($a(r,o));a=a.mul(c).add(mt(u))}else a=a.mul(i),a=a.add(mt(u))}return a.unsigned=t,a}le.fromString=No;function Nt(e,t){return typeof e=="number"?mt(e,t):typeof e=="string"?No(e,t):he(e.low,e.high,typeof t=="boolean"?t:e.unsigned)}le.fromValue=Nt;var ep=1<<16,Lv=1<<24,Dn=ep*ep,tp=Dn*Dn,rp=tp/2,np=$r(Lv),xt=$r(0);le.ZERO=xt;var Wr=$r(0,!0);le.UZERO=Wr;var kn=$r(1);le.ONE=kn;var ip=$r(1,!0);le.UONE=ip;var Do=$r(-1);le.NEG_ONE=Do;var ap=he(4294967295|0,2147483647|0,!1);le.MAX_VALUE=ap;var sp=he(4294967295|0,4294967295|0,!0);le.MAX_UNSIGNED_VALUE=sp;var Qe=he(0,2147483648|0,!1);le.MIN_VALUE=Qe;var I=le.prototype;I.toInt=function(){return this.unsigned?this.low>>>0:this.low};I.toNumber=function(){return this.unsigned?(this.high>>>0)*Dn+(this.low>>>0):this.high*Dn+(this.low>>>0)};I.toString=function(t){if(t=t||10,t<2||36<t)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(Qe)){var r=mt(t),n=this.div(r),i=n.mul(r).sub(this);return n.toString(t)+i.toInt().toString(t)}else return"-"+this.neg().toString(t);for(var a=mt($a(t,6),this.unsigned),s=this,o="";;){var u=s.div(a),c=s.sub(u.mul(a)).toInt()>>>0,f=c.toString(t);if(s=u,s.isZero())return f+o;for(;f.length<6;)f="0"+f;o=""+f+o}};I.getHighBits=function(){return this.high};I.getHighBitsUnsigned=function(){return this.high>>>0};I.getLowBits=function(){return this.low};I.getLowBitsUnsigned=function(){return this.low>>>0};I.getNumBitsAbs=function(){if(this.isNegative())return this.eq(Qe)?64:this.neg().getNumBitsAbs();for(var t=this.high!=0?this.high:this.low,r=31;r>0&&(t&1<<r)==0;r--);return this.high!=0?r+33:r+1};I.isZero=function(){return this.high===0&&this.low===0};I.eqz=I.isZero;I.isNegative=function(){return!this.unsigned&&this.high<0};I.isPositive=function(){return this.unsigned||this.high>=0};I.isOdd=function(){return(this.low&1)==1};I.isEven=function(){return(this.low&1)==0};I.equals=function(t){return Ze(t)||(t=Nt(t)),this.unsigned!==t.unsigned&&this.high>>>31==1&&t.high>>>31==1?!1:this.high===t.high&&this.low===t.low};I.eq=I.equals;I.notEquals=function(t){return!this.eq(t)};I.neq=I.notEquals;I.ne=I.notEquals;I.lessThan=function(t){return this.comp(t)<0};I.lt=I.lessThan;I.lessThanOrEqual=function(t){return this.comp(t)<=0};I.lte=I.lessThanOrEqual;I.le=I.lessThanOrEqual;I.greaterThan=function(t){return this.comp(t)>0};I.gt=I.greaterThan;I.greaterThanOrEqual=function(t){return this.comp(t)>=0};I.gte=I.greaterThanOrEqual;I.ge=I.greaterThanOrEqual;I.compare=function(t){if(Ze(t)||(t=Nt(t)),this.eq(t))return 0;var r=this.isNegative(),n=t.isNegative();return r&&!n?-1:!r&&n?1:this.unsigned?t.high>>>0>this.high>>>0||t.high===this.high&&t.low>>>0>this.low>>>0?-1:1:this.sub(t).isNegative()?-1:1};I.comp=I.compare;I.negate=function(){return!this.unsigned&&this.eq(Qe)?Qe:this.not().add(kn)};I.neg=I.negate;I.add=function(t){Ze(t)||(t=Nt(t));var r=this.high>>>16,n=this.high&65535,i=this.low>>>16,a=this.low&65535,s=t.high>>>16,o=t.high&65535,u=t.low>>>16,c=t.low&65535,f=0,l=0,h=0,d=0;return d+=a+c,h+=d>>>16,d&=65535,h+=i+u,l+=h>>>16,h&=65535,l+=n+o,f+=l>>>16,l&=65535,f+=r+s,f&=65535,he(h<<16|d,f<<16|l,this.unsigned)};I.subtract=function(t){return Ze(t)||(t=Nt(t)),this.add(t.neg())};I.sub=I.subtract;I.multiply=function(t){if(this.isZero())return xt;if(Ze(t)||(t=Nt(t)),vt){var r=vt.mul(this.low,this.high,t.low,t.high);return he(r,vt.get_high(),this.unsigned)}if(t.isZero())return xt;if(this.eq(Qe))return t.isOdd()?Qe:xt;if(t.eq(Qe))return this.isOdd()?Qe:xt;if(this.isNegative())return t.isNegative()?this.neg().mul(t.neg()):this.neg().mul(t).neg();if(t.isNegative())return this.mul(t.neg()).neg();if(this.lt(np)&&t.lt(np))return mt(this.toNumber()*t.toNumber(),this.unsigned);var n=this.high>>>16,i=this.high&65535,a=this.low>>>16,s=this.low&65535,o=t.high>>>16,u=t.high&65535,c=t.low>>>16,f=t.low&65535,l=0,h=0,d=0,p=0;return p+=s*f,d+=p>>>16,p&=65535,d+=a*f,h+=d>>>16,d&=65535,d+=s*c,h+=d>>>16,d&=65535,h+=i*f,l+=h>>>16,h&=65535,h+=a*c,l+=h>>>16,h&=65535,h+=s*u,l+=h>>>16,h&=65535,l+=n*f+i*c+a*u+s*o,l&=65535,he(d<<16|p,l<<16|h,this.unsigned)};I.mul=I.multiply;I.divide=function(t){if(Ze(t)||(t=Nt(t)),t.isZero())throw Error("division by zero");if(vt){if(!this.unsigned&&this.high===-2147483648&&t.low===-1&&t.high===-1)return this;var r=(this.unsigned?vt.div_u:vt.div_s)(this.low,this.high,t.low,t.high);return he(r,vt.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?Wr:xt;var n,i,a;if(this.unsigned){if(t.unsigned||(t=t.toUnsigned()),t.gt(this))return Wr;if(t.gt(this.shru(1)))return ip;a=Wr}else{if(this.eq(Qe)){if(t.eq(kn)||t.eq(Do))return Qe;if(t.eq(Qe))return kn;var s=this.shr(1);return n=s.div(t).shl(1),n.eq(xt)?t.isNegative()?kn:Do:(i=this.sub(t.mul(n)),a=n.add(i.div(t)),a)}else if(t.eq(Qe))return this.unsigned?Wr:xt;if(this.isNegative())return t.isNegative()?this.neg().div(t.neg()):this.neg().div(t).neg();if(t.isNegative())return this.div(t.neg()).neg();a=xt}for(i=this;i.gte(t);){n=Math.max(1,Math.floor(i.toNumber()/t.toNumber()));for(var o=Math.ceil(Math.log(n)/Math.LN2),u=o<=48?1:$a(2,o-48),c=mt(n),f=c.mul(t);f.isNegative()||f.gt(i);)n-=u,c=mt(n,this.unsigned),f=c.mul(t);c.isZero()&&(c=kn),a=a.add(c),i=i.sub(f)}return a};I.div=I.divide;I.modulo=function(t){if(Ze(t)||(t=Nt(t)),vt){var r=(this.unsigned?vt.rem_u:vt.rem_s)(this.low,this.high,t.low,t.high);return he(r,vt.get_high(),this.unsigned)}return this.sub(this.div(t).mul(t))};I.mod=I.modulo;I.rem=I.modulo;I.not=function(){return he(~this.low,~this.high,this.unsigned)};I.and=function(t){return Ze(t)||(t=Nt(t)),he(this.low&t.low,this.high&t.high,this.unsigned)};I.or=function(t){return Ze(t)||(t=Nt(t)),he(this.low|t.low,this.high|t.high,this.unsigned)};I.xor=function(t){return Ze(t)||(t=Nt(t)),he(this.low^t.low,this.high^t.high,this.unsigned)};I.shiftLeft=function(t){return Ze(t)&&(t=t.toInt()),(t&=63)==0?this:t<32?he(this.low<<t,this.high<<t|this.low>>>32-t,this.unsigned):he(0,this.low<<t-32,this.unsigned)};I.shl=I.shiftLeft;I.shiftRight=function(t){return Ze(t)&&(t=t.toInt()),(t&=63)==0?this:t<32?he(this.low>>>t|this.high<<32-t,this.high>>t,this.unsigned):he(this.high>>t-32,this.high>=0?0:-1,this.unsigned)};I.shr=I.shiftRight;I.shiftRightUnsigned=function(t){if(Ze(t)&&(t=t.toInt()),t&=63,t===0)return this;var r=this.high;if(t<32){var n=this.low;return he(n>>>t|r<<32-t,r>>>t,this.unsigned)}else return t===32?he(r,0,this.unsigned):he(r>>>t-32,0,this.unsigned)};I.shru=I.shiftRightUnsigned;I.shr_u=I.shiftRightUnsigned;I.toSigned=function(){return this.unsigned?he(this.low,this.high,!1):this};I.toUnsigned=function(){return this.unsigned?this:he(this.low,this.high,!0)};I.toBytes=function(t){return t?this.toBytesLE():this.toBytesBE()};I.toBytesLE=function(){var t=this.high,r=this.low;return[r&255,r>>>8&255,r>>>16&255,r>>>24,t&255,t>>>8&255,t>>>16&255,t>>>24]};I.toBytesBE=function(){var t=this.high,r=this.low;return[t>>>24,t>>>16&255,t>>>8&255,t&255,r>>>24,r>>>16&255,r>>>8&255,r&255]};le.fromBytes=function(t,r,n){return n?le.fromBytesLE(t,r):le.fromBytesBE(t,r)};le.fromBytesLE=function(t,r){return new le(t[0]|t[1]<<8|t[2]<<16|t[3]<<24,t[4]|t[5]<<8|t[6]<<16|t[7]<<24,r)};le.fromBytesBE=function(t,r){return new le(t[4]<<24|t[5]<<16|t[6]<<8|t[7],t[0]<<24|t[1]<<16|t[2]<<8|t[3],r)}});var fp=T((Xw,cp)=>{var Pn=1e3,Kn=Pn*60,Un=Kn*60,Yr=Un*24,Ov=Yr*7,qv=Yr*365.25;cp.exports=function(e,t){t=t||{};var r=typeof e;if(r==="string"&&e.length>0)return Mv(e);if(r==="number"&&isFinite(e))return t.long?zv(e):Vv(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))};function Mv(e){if(e=String(e),!(e.length>100)){var t=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(!!t){var r=parseFloat(t[1]),n=(t[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return r*qv;case"weeks":case"week":case"w":return r*Ov;case"days":case"day":case"d":return r*Yr;case"hours":case"hour":case"hrs":case"hr":case"h":return r*Un;case"minutes":case"minute":case"mins":case"min":case"m":return r*Kn;case"seconds":case"second":case"secs":case"sec":case"s":return r*Pn;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}function Vv(e){var t=Math.abs(e);return t>=Yr?Math.round(e/Yr)+"d":t>=Un?Math.round(e/Un)+"h":t>=Kn?Math.round(e/Kn)+"m":t>=Pn?Math.round(e/Pn)+"s":e+"ms"}function zv(e){var t=Math.abs(e);return t>=Yr?Wa(e,t,Yr,"day"):t>=Un?Wa(e,t,Un,"hour"):t>=Kn?Wa(e,t,Kn,"minute"):t>=Pn?Wa(e,t,Pn,"second"):e+" ms"}function Wa(e,t,r,n){var i=t>=r*1.5;return Math.round(e/r)+" "+n+(i?"s":"")}});var hp=T((Jw,lp)=>{function Hv(e){r.debug=r,r.default=r,r.coerce=u,r.disable=a,r.enable=i,r.enabled=s,r.humanize=fp(),r.destroy=c,Object.keys(e).forEach(f=>{r[f]=e[f]}),r.names=[],r.skips=[],r.formatters={};function t(f){let l=0;for(let h=0;h<f.length;h++)l=(l<<5)-l+f.charCodeAt(h),l|=0;return r.colors[Math.abs(l)%r.colors.length]}r.selectColor=t;function r(f){let l,h=null,d,p;function g(...v){if(!g.enabled)return;let x=g,S=Number(new Date),C=S-(l||S);x.diff=C,x.prev=l,x.curr=S,l=S,v[0]=r.coerce(v[0]),typeof v[0]!="string"&&v.unshift("%O");let L=0;v[0]=v[0].replace(/%([a-zA-Z%])/g,(R,$)=>{if(R==="%%")return"%";L++;let Y=r.formatters[$];if(typeof Y=="function"){let Ee=v[L];R=Y.call(x,Ee),v.splice(L,1),L--}return R}),r.formatArgs.call(x,v),(x.log||r.log).apply(x,v)}return g.namespace=f,g.useColors=r.useColors(),g.color=r.selectColor(f),g.extend=n,g.destroy=r.destroy,Object.defineProperty(g,"enabled",{enumerable:!0,configurable:!1,get:()=>h!==null?h:(d!==r.namespaces&&(d=r.namespaces,p=r.enabled(f)),p),set:v=>{h=v}}),typeof r.init=="function"&&r.init(g),g}function n(f,l){let h=r(this.namespace+(typeof l=="undefined"?":":l)+f);return h.log=this.log,h}function i(f){r.save(f),r.namespaces=f,r.names=[],r.skips=[];let l,h=(typeof f=="string"?f:"").split(/[\s,]+/),d=h.length;for(l=0;l<d;l++)!h[l]||(f=h[l].replace(/\*/g,".*?"),f[0]==="-"?r.skips.push(new RegExp("^"+f.substr(1)+"$")):r.names.push(new RegExp("^"+f+"$")))}function a(){let f=[...r.names.map(o),...r.skips.map(o).map(l=>"-"+l)].join(",");return r.enable(""),f}function s(f){if(f[f.length-1]==="*")return!0;let l,h;for(l=0,h=r.skips.length;l<h;l++)if(r.skips[l].test(f))return!1;for(l=0,h=r.names.length;l<h;l++)if(r.names[l].test(f))return!0;return!1}function o(f){return f.toString().substring(2,f.toString().length-2).replace(/\.\*\?$/,"*")}function u(f){return f instanceof Error?f.stack||f.message:f}function c(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return r.enable(r.load()),r}lp.exports=Hv});var pp=T((at,Ya)=>{at.formatArgs=Gv;at.save=$v;at.load=Wv;at.useColors=jv;at.storage=Yv();at.destroy=(()=>{let e=!1;return()=>{e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();at.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function jv(){return typeof window!="undefined"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document!="undefined"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window!="undefined"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function Gv(e){if(e[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+e[0]+(this.useColors?"%c ":" ")+"+"+Ya.exports.humanize(this.diff),!this.useColors)return;let t="color: "+this.color;e.splice(1,0,t,"color: inherit");let r=0,n=0;e[0].replace(/%[a-zA-Z%]/g,i=>{i!=="%%"&&(r++,i==="%c"&&(n=r))}),e.splice(n,0,t)}at.log=console.debug||console.log||(()=>{});function $v(e){try{e?at.storage.setItem("debug",e):at.storage.removeItem("debug")}catch(t){}}function Wv(){let e;try{e=at.storage.getItem("debug")}catch(t){}return!e&&typeof process!="undefined"&&"env"in process&&(e=process.env.DEBUG),e}function Yv(){try{return localStorage}catch(e){}}Ya.exports=hp()(at);var{formatters:Zv}=Ya.exports;Zv.j=function(e){try{return JSON.stringify(e)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}}});var pm={};Ne(pm,{create:()=>tm,createWithExpiration:()=>rm,embedPublicKey:()=>am,extractPublicKey:()=>Cp,getIdKeys:()=>om,getLocalKey:()=>sm,marshal:()=>lm,namespace:()=>Ep,namespaceLength:()=>em,unmarshal:()=>es,validate:()=>Bp,validator:()=>hm});var Po=Dr(zo());var Ho=(e=21)=>{let t="",r=crypto.getRandomValues(new Uint8Array(e));for(;e--;){let n=r[e]&63;n<36?t+=n.toString(36):n<62?t+=(n-26).toString(36).toUpperCase():n<63?t+="_":t+="-"}return t};St();Bt();var rr="/",S0=new TextEncoder().encode(rr),Gi=S0[0],Ie=class{constructor(t,r){if(typeof t=="string")this._buf=Pt(t);else if(t instanceof Uint8Array)this._buf=t;else throw new Error("Invalid key, should be String of Uint8Array");if(r==null&&(r=!0),r&&this.clean(),this._buf.byteLength===0||this._buf[0]!==Gi)throw new Error("Invalid key")}toString(t="utf8"){return Pr(this._buf,t)}uint8Array(){return this._buf}get[Symbol.toStringTag](){return`Key(${this.toString()})`}static withNamespaces(t){return new Ie(t.join(rr))}static random(){return new Ie(Ho().replace(/-/g,""))}static asKey(t){return t instanceof Uint8Array||typeof t=="string"?new Ie(t):t.uint8Array?new Ie(t.uint8Array()):null}clean(){if((!this._buf||this._buf.byteLength===0)&&(this._buf=S0),this._buf[0]!==Gi){let t=new Uint8Array(this._buf.byteLength+1);t.fill(Gi,0,1),t.set(this._buf,1),this._buf=t}for(;this._buf.byteLength>1&&this._buf[this._buf.byteLength-1]===Gi;)this._buf=this._buf.subarray(0,-1)}less(t){let r=this.list(),n=t.list();for(let i=0;i<r.length;i++){if(n.length<i+1)return!1;let a=r[i],s=n[i];if(a<s)return!0;if(a>s)return!1}return r.length<n.length}reverse(){return Ie.withNamespaces(this.list().slice().reverse())}namespaces(){return this.list()}baseNamespace(){let t=this.namespaces();return t[t.length-1]}list(){return this.toString().split(rr).slice(1)}type(){return Kd(this.baseNamespace())}name(){return Ud(this.baseNamespace())}instance(t){return new Ie(this.toString()+":"+t)}path(){let t=this.parent().toString();return t.endsWith(rr)||(t+=rr),t+=this.type(),new Ie(t)}parent(){let t=this.list();return t.length===1?new Ie(rr):new Ie(t.slice(0,-1).join(rr))}child(t){return this.toString()===rr?t:t.toString()===rr?this:new Ie(this.toString()+t.toString(),!1)}isAncestorOf(t){return t.toString()===this.toString()?!1:t.toString().startsWith(this.toString())}isDecendantOf(t){return t.toString()===this.toString()?!1:this.toString().startsWith(t.toString())}isTopLevel(){return this.list().length===1}concat(...t){return Ie.withNamespaces([...this.namespaces(),...Fd(t.map(r=>r.namespaces()))])}};function Kd(e){let t=e.split(":");return t.length<2?"":t.slice(0,-1).join(":")}function Ud(e){let t=e.split(":");return t[t.length-1]}function Fd(e){return[].concat(...e)}var Xa=Dr(kl()),Ja=Dr(Gl());fn();Yn();var Re=Dr(Je());rn();Bt();St();xn();zr();var vv=["string","number","bigint","symbol"],mv=["Function","Generator","AsyncGenerator","GeneratorFunction","AsyncGeneratorFunction","AsyncFunction","Observable","Array","Buffer","Object","RegExp","Date","Error","Map","Set","WeakMap","WeakSet","ArrayBuffer","SharedArrayBuffer","DataView","Promise","URL","HTMLElement","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array","BigInt64Array","BigUint64Array"];function $l(e){if(e===null)return"null";if(e===void 0)return"undefined";if(e===!0||e===!1)return"boolean";let t=typeof e;if(vv.includes(t))return t;if(t==="function")return"Function";if(Array.isArray(e))return"Array";if(xv(e))return"Buffer";let r=bv(e);return r||"Object"}function xv(e){return e&&e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer.call(null,e)}function bv(e){let t=Object.prototype.toString.call(e).slice(8,-1);if(mv.includes(t))return t}var w=class{constructor(t,r,n){this.major=t,this.majorEncoded=t<<5,this.name=r,this.terminal=n}toString(){return`Type[${this.major}].${this.name}`}compare(t){return this.major<t.major?-1:this.major>t.major?1:0}};w.uint=new w(0,"uint",!0);w.negint=new w(1,"negint",!0);w.bytes=new w(2,"bytes",!0);w.string=new w(3,"string",!0);w.array=new w(4,"array",!1);w.map=new w(5,"map",!1);w.tag=new w(6,"tag",!1);w.float=new w(7,"float",!0);w.false=new w(7,"false",!0);w.true=new w(7,"true",!0);w.null=new w(7,"null",!0);w.undefined=new w(7,"undefined",!0);w.break=new w(7,"break",!0);var P=class{constructor(t,r,n){this.type=t,this.value=r,this.encodedLength=n,this.encodedBytes=void 0}toString(){return`Token[${this.type}].${this.value}`}};var In=globalThis.process&&!globalThis.process.browser&&globalThis.Buffer&&typeof globalThis.Buffer.isBuffer=="function",wv=new TextDecoder,Ev=new TextEncoder;function La(e){return In&&globalThis.Buffer.isBuffer(e)}function bo(e){return e instanceof Uint8Array?La(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e:Uint8Array.from(e)}var Wl=In?(e,t,r)=>r-t>64?globalThis.Buffer.from(e.subarray(t,r)).toString("utf8"):eh(e,t,r):(e,t,r)=>r-t>64?wv.decode(e.subarray(t,r)):eh(e,t,r),Yl=In?e=>e.length>64?globalThis.Buffer.from(e):Jl(e):e=>e.length>64?Ev.encode(e):Jl(e),Yt=e=>Uint8Array.from(e),Oa=In?(e,t,r)=>La(e)?new Uint8Array(e.subarray(t,r)):e.slice(t,r):(e,t,r)=>e.slice(t,r),Zl=In?(e,t)=>(e=e.map(r=>r instanceof Uint8Array?r:globalThis.Buffer.from(r)),bo(globalThis.Buffer.concat(e,t))):(e,t)=>{let r=new Uint8Array(t),n=0;for(let i of e)n+i.length>r.length&&(i=i.subarray(0,r.length-n)),r.set(i,n),n+=i.length;return r},Ql=In?e=>globalThis.Buffer.allocUnsafe(e):e=>new Uint8Array(e);function Xl(e,t){if(La(e)&&La(t))return e.compare(t);for(let r=0;r<e.length;r++)if(e[r]!==t[r])return e[r]<t[r]?-1:1;return 0}function Jl(e,t=1/0){let r,n=e.length,i=null,a=[];for(let s=0;s<n;++s){if(r=e.charCodeAt(s),r>55295&&r<57344){if(!i){if(r>56319){(t-=3)>-1&&a.push(239,191,189);continue}else if(s+1===n){(t-=3)>-1&&a.push(239,191,189);continue}i=r;continue}if(r<56320){(t-=3)>-1&&a.push(239,191,189),i=r;continue}r=(i-55296<<10|r-56320)+65536}else i&&(t-=3)>-1&&a.push(239,191,189);if(i=null,r<128){if((t-=1)<0)break;a.push(r)}else if(r<2048){if((t-=2)<0)break;a.push(r>>6|192,r&63|128)}else if(r<65536){if((t-=3)<0)break;a.push(r>>12|224,r>>6&63|128,r&63|128)}else if(r<1114112){if((t-=4)<0)break;a.push(r>>18|240,r>>12&63|128,r>>6&63|128,r&63|128)}else throw new Error("Invalid code point")}return a}function eh(e,t,r){let n=[];for(;t<r;){let i=e[t],a=null,s=i>239?4:i>223?3:i>191?2:1;if(t+s<=r){let o,u,c,f;switch(s){case 1:i<128&&(a=i);break;case 2:o=e[t+1],(o&192)==128&&(f=(i&31)<<6|o&63,f>127&&(a=f));break;case 3:o=e[t+1],u=e[t+2],(o&192)==128&&(u&192)==128&&(f=(i&15)<<12|(o&63)<<6|u&63,f>2047&&(f<55296||f>57343)&&(a=f));break;case 4:o=e[t+1],u=e[t+2],c=e[t+3],(o&192)==128&&(u&192)==128&&(c&192)==128&&(f=(i&15)<<18|(o&63)<<12|(u&63)<<6|c&63,f>65535&&f<1114112&&(a=f))}}a===null?(a=65533,s=1):a>65535&&(a-=65536,n.push(a>>>10&1023|55296),a=56320|a&1023),n.push(a),t+=s}return Sv(n)}var th=4096;function Sv(e){let t=e.length;if(t<=th)return String.fromCharCode.apply(String,e);let r="",n=0;for(;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=th));return r}var Bv=256,qa=class{constructor(t=Bv){this.chunkSize=t,this.cursor=0,this.maxCursor=-1,this.chunks=[],this._initReuseChunk=null}reset(){this.chunks=[],this.cursor=0,this.maxCursor=-1,this._initReuseChunk!==null&&(this.chunks.push(this._initReuseChunk),this.maxCursor=this._initReuseChunk.length-1)}push(t){let r=this.chunks[this.chunks.length-1];if(this.cursor+t.length<=this.maxCursor+1){let i=r.length-(this.maxCursor-this.cursor)-1;r.set(t,i)}else{if(r){let i=r.length-(this.maxCursor-this.cursor)-1;i<r.length&&(this.chunks[this.chunks.length-1]=r.subarray(0,i),this.maxCursor=this.cursor-1)}t.length<64&&t.length<this.chunkSize?(r=Ql(this.chunkSize),this.chunks.push(r),this.maxCursor+=r.length,this._initReuseChunk===null&&(this._initReuseChunk=r),r.set(t,0)):(this.chunks.push(t),this.maxCursor+=t.length)}this.cursor+=t.length}toBytes(t=!1){let r;if(this.chunks.length===1){let n=this.chunks[0];t&&this.cursor>n.length/2?(r=this.cursor===n.length?n:n.subarray(0,this.cursor),this._initReuseChunk=null,this.chunks=[]):r=Oa(n,0,this.cursor)}else r=Zl(this.chunks,this.cursor);return t&&this.reset(),r}};var M="CBOR decode error:",wo="CBOR encode error:",Ai=[];Ai[23]=1;Ai[24]=2;Ai[25]=3;Ai[26]=5;Ai[27]=9;function fr(e,t,r){if(e.length-t<r)throw new Error(`${M} not enough data for type`)}var Ue=[24,256,65536,4294967296,BigInt("18446744073709551616")];function tt(e,t,r){fr(e,t,1);let n=e[t];if(r.strict===!0&&n<Ue[0])throw new Error(`${M} integer encoded in more bytes than necessary (strict decode)`);return n}function rt(e,t,r){fr(e,t,2);let n=e[t]<<8|e[t+1];if(r.strict===!0&&n<Ue[1])throw new Error(`${M} integer encoded in more bytes than necessary (strict decode)`);return n}function nt(e,t,r){fr(e,t,4);let n=e[t]*16777216+(e[t+1]<<16)+(e[t+2]<<8)+e[t+3];if(r.strict===!0&&n<Ue[2])throw new Error(`${M} integer encoded in more bytes than necessary (strict decode)`);return n}function it(e,t,r){fr(e,t,8);let n=e[t]*16777216+(e[t+1]<<16)+(e[t+2]<<8)+e[t+3],i=e[t+4]*16777216+(e[t+5]<<16)+(e[t+6]<<8)+e[t+7],a=(BigInt(n)<<BigInt(32))+BigInt(i);if(r.strict===!0&&a<Ue[3])throw new Error(`${M} integer encoded in more bytes than necessary (strict decode)`);if(a<=Number.MAX_SAFE_INTEGER)return Number(a);if(r.allowBigInt===!0)return a;throw new Error(`${M} integers outside of the safe integer range are not supported`)}function rh(e,t,r,n){return new P(w.uint,tt(e,t+1,n),2)}function nh(e,t,r,n){return new P(w.uint,rt(e,t+1,n),3)}function ih(e,t,r,n){return new P(w.uint,nt(e,t+1,n),5)}function ah(e,t,r,n){return new P(w.uint,it(e,t+1,n),9)}function yt(e,t){return Ye(e,0,t.value)}function Ye(e,t,r){if(r<Ue[0]){let n=Number(r);e.push([t|n])}else if(r<Ue[1]){let n=Number(r);e.push([t|24,n])}else if(r<Ue[2]){let n=Number(r);e.push([t|25,n>>>8,n&255])}else if(r<Ue[3]){let n=Number(r);e.push([t|26,n>>>24&255,n>>>16&255,n>>>8&255,n&255])}else{let n=BigInt(r);if(n<Ue[4]){let i=[t|27,0,0,0,0,0,0,0],a=Number(n&BigInt(4294967295)),s=Number(n>>BigInt(32)&BigInt(4294967295));i[8]=a&255,a=a>>8,i[7]=a&255,a=a>>8,i[6]=a&255,a=a>>8,i[5]=a&255,i[4]=s&255,s=s>>8,i[3]=s&255,s=s>>8,i[2]=s&255,s=s>>8,i[1]=s&255,e.push(i)}else throw new Error(`${M} encountered BigInt larger than allowable range`)}}yt.encodedSize=function(t){return Ye.encodedSize(t.value)};Ye.encodedSize=function(t){return t<Ue[0]?1:t<Ue[1]?2:t<Ue[2]?3:t<Ue[3]?5:9};yt.compareTokens=function(t,r){return t.value<r.value?-1:t.value>r.value?1:0};function sh(e,t,r,n){return new P(w.negint,-1-tt(e,t+1,n),2)}function oh(e,t,r,n){return new P(w.negint,-1-rt(e,t+1,n),3)}function uh(e,t,r,n){return new P(w.negint,-1-nt(e,t+1,n),5)}var Eo=BigInt(-1),ch=BigInt(1);function fh(e,t,r,n){let i=it(e,t+1,n);if(typeof i!="bigint"){let a=-1-i;if(a>=Number.MIN_SAFE_INTEGER)return new P(w.negint,a,9)}if(n.allowBigInt!==!0)throw new Error(`${M} integers outside of the safe integer range are not supported`);return new P(w.negint,Eo-BigInt(i),9)}function Ma(e,t){let r=t.value,n=typeof r=="bigint"?r*Eo-ch:r*-1-1;Ye(e,t.type.majorEncoded,n)}Ma.encodedSize=function(t){let r=t.value,n=typeof r=="bigint"?r*Eo-ch:r*-1-1;return n<Ue[0]?1:n<Ue[1]?2:n<Ue[2]?3:n<Ue[3]?5:9};Ma.compareTokens=function(t,r){return t.value<r.value?1:t.value>r.value?-1:0};function Ti(e,t,r,n){fr(e,t,r+n);let i=Oa(e,t+r,t+r+n);return new P(w.bytes,i,r+n)}function lh(e,t,r,n){return Ti(e,t,1,r)}function hh(e,t,r,n){return Ti(e,t,2,tt(e,t+1,n))}function ph(e,t,r,n){return Ti(e,t,3,rt(e,t+1,n))}function dh(e,t,r,n){return Ti(e,t,5,nt(e,t+1,n))}function yh(e,t,r,n){let i=it(e,t+1,n);if(typeof i=="bigint")throw new Error(`${M} 64-bit integer bytes lengths not supported`);return Ti(e,t,9,i)}function Va(e){return e.encodedBytes===void 0&&(e.encodedBytes=e.type===w.string?Yl(e.value):e.value),e.encodedBytes}function _n(e,t){let r=Va(t);Ye(e,t.type.majorEncoded,r.length),e.push(r)}_n.encodedSize=function(t){let r=Va(t);return Ye.encodedSize(r.length)+r.length};_n.compareTokens=function(t,r){return Cv(Va(t),Va(r))};function Cv(e,t){return e.length<t.length?-1:e.length>t.length?1:Xl(e,t)}function Ii(e,t,r,n){let i=r+n;return fr(e,t,i),new P(w.string,Wl(e,t+r,t+i),i)}function gh(e,t,r,n){return Ii(e,t,1,r)}function vh(e,t,r,n){return Ii(e,t,2,tt(e,t+1,n))}function mh(e,t,r,n){return Ii(e,t,3,rt(e,t+1,n))}function xh(e,t,r,n){return Ii(e,t,5,nt(e,t+1,n))}function bh(e,t,r,n){let i=it(e,t+1,n);if(typeof i=="bigint")throw new Error(`${M} 64-bit integer string lengths not supported`);return Ii(e,t,9,i)}var wh=_n;function Rn(e,t,r,n){return new P(w.array,n,r)}function Eh(e,t,r,n){return Rn(e,t,1,r)}function Sh(e,t,r,n){return Rn(e,t,2,tt(e,t+1,n))}function Bh(e,t,r,n){return Rn(e,t,3,rt(e,t+1,n))}function Ch(e,t,r,n){return Rn(e,t,5,nt(e,t+1,n))}function Ah(e,t,r,n){let i=it(e,t+1,n);if(typeof i=="bigint")throw new Error(`${M} 64-bit integer array lengths not supported`);return Rn(e,t,9,i)}function Th(e,t,r,n){if(n.allowIndefinite===!1)throw new Error(`${M} indefinite length items not allowed`);return Rn(e,t,1,1/0)}function So(e,t){Ye(e,w.array.majorEncoded,t.value)}So.compareTokens=yt.compareTokens;function Nn(e,t,r,n){return new P(w.map,n,r)}function Ih(e,t,r,n){return Nn(e,t,1,r)}function _h(e,t,r,n){return Nn(e,t,2,tt(e,t+1,n))}function Rh(e,t,r,n){return Nn(e,t,3,rt(e,t+1,n))}function Nh(e,t,r,n){return Nn(e,t,5,nt(e,t+1,n))}function Dh(e,t,r,n){let i=it(e,t+1,n);if(typeof i=="bigint")throw new Error(`${M} 64-bit integer map lengths not supported`);return Nn(e,t,9,i)}function kh(e,t,r,n){if(n.allowIndefinite===!1)throw new Error(`${M} indefinite length items not allowed`);return Nn(e,t,1,1/0)}function Bo(e,t){Ye(e,w.map.majorEncoded,t.value)}Bo.compareTokens=yt.compareTokens;function Ph(e,t,r,n){return new P(w.tag,r,1)}function Kh(e,t,r,n){return new P(w.tag,tt(e,t+1,n),2)}function Uh(e,t,r,n){return new P(w.tag,rt(e,t+1,n),3)}function Fh(e,t,r,n){return new P(w.tag,nt(e,t+1,n),5)}function Lh(e,t,r,n){return new P(w.tag,it(e,t+1,n),9)}function Co(e,t){Ye(e,w.tag.majorEncoded,t.value)}Co.compareTokens=yt.compareTokens;var Av=20,Tv=21,Iv=22,_v=23;function Oh(e,t,r,n){if(n.allowUndefined===!1)throw new Error(`${M} undefined values are not supported`);return new P(w.undefined,void 0,1)}function qh(e,t,r,n){if(n.allowIndefinite===!1)throw new Error(`${M} indefinite length items not allowed`);return new P(w.break,void 0,1)}function Ao(e,t,r){if(r){if(r.allowNaN===!1&&Number.isNaN(e))throw new Error(`${M} NaN values are not supported`);if(r.allowInfinity===!1&&(e===1/0||e===-1/0))throw new Error(`${M} Infinity values are not supported`)}return new P(w.float,e,t)}function Mh(e,t,r,n){return Ao(To(e,t+1),3,n)}function Vh(e,t,r,n){return Ao(Io(e,t+1),5,n)}function zh(e,t,r,n){return Ao($h(e,t+1),9,n)}function za(e,t,r){let n=t.value;if(n===!1)e.push([w.float.majorEncoded|Av]);else if(n===!0)e.push([w.float.majorEncoded|Tv]);else if(n===null)e.push([w.float.majorEncoded|Iv]);else if(n===void 0)e.push([w.float.majorEncoded|_v]);else{let i,a=!1;(!r||r.float64!==!0)&&(jh(n),i=To(_t,1),n===i||Number.isNaN(n)?(_t[0]=249,e.push(_t.slice(0,3)),a=!0):(Gh(n),i=Io(_t,1),n===i&&(_t[0]=250,e.push(_t.slice(0,5)),a=!0))),a||(Rv(n),i=$h(_t,1),_t[0]=251,e.push(_t.slice(0,9)))}}za.encodedSize=function(t,r){let n=t.value;if(n===!1||n===!0||n===null||n===void 0)return 1;let i;if(!r||r.float64!==!0){if(jh(n),i=To(_t,1),n===i||Number.isNaN(n))return 3;if(Gh(n),i=Io(_t,1),n===i)return 5}return 9};var Hh=new ArrayBuffer(9),gt=new DataView(Hh,1),_t=new Uint8Array(Hh,0);function jh(e){if(e===1/0)gt.setUint16(0,31744,!1);else if(e===-1/0)gt.setUint16(0,64512,!1);else if(Number.isNaN(e))gt.setUint16(0,32256,!1);else{gt.setFloat32(0,e);let t=gt.getUint32(0),r=(t&2139095040)>>23,n=t&8388607;if(r===255)gt.setUint16(0,31744,!1);else if(r===0)gt.setUint16(0,(e&2147483648)>>16|n>>13,!1);else{let i=r-127;i<-24?gt.setUint16(0,0):i<-14?gt.setUint16(0,(t&2147483648)>>16|1<<24+i,!1):gt.setUint16(0,(t&2147483648)>>16|i+15<<10|n>>13,!1)}}}function To(e,t){if(e.length-t<2)throw new Error(`${M} not enough data for float16`);let r=(e[t]<<8)+e[t+1];if(r===31744)return 1/0;if(r===64512)return-1/0;if(r===32256)return NaN;let n=r>>10&31,i=r&1023,a;return n===0?a=i*2**-24:n!==31?a=(i+1024)*2**(n-25):a=i===0?1/0:NaN,r&32768?-a:a}function Gh(e){gt.setFloat32(0,e,!1)}function Io(e,t){if(e.length-t<4)throw new Error(`${M} not enough data for float32`);let r=(e.byteOffset||0)+t;return new DataView(e.buffer,r,4).getFloat32(0,!1)}function Rv(e){gt.setFloat64(0,e,!1)}function $h(e,t){if(e.length-t<8)throw new Error(`${M} not enough data for float64`);let r=(e.byteOffset||0)+t;return new DataView(e.buffer,r,8).getFloat64(0,!1)}za.compareTokens=yt.compareTokens;function te(e,t,r){throw new Error(`${M} encountered invalid minor (${r}) for major ${e[t]>>>5}`)}function Ha(e){return()=>{throw new Error(`${M} ${e}`)}}var _=[];for(let e=0;e<=23;e++)_[e]=te;_[24]=rh;_[25]=nh;_[26]=ih;_[27]=ah;_[28]=te;_[29]=te;_[30]=te;_[31]=te;for(let e=32;e<=55;e++)_[e]=te;_[56]=sh;_[57]=oh;_[58]=uh;_[59]=fh;_[60]=te;_[61]=te;_[62]=te;_[63]=te;for(let e=64;e<=87;e++)_[e]=lh;_[88]=hh;_[89]=ph;_[90]=dh;_[91]=yh;_[92]=te;_[93]=te;_[94]=te;_[95]=Ha("indefinite length bytes/strings are not supported");for(let e=96;e<=119;e++)_[e]=gh;_[120]=vh;_[121]=mh;_[122]=xh;_[123]=bh;_[124]=te;_[125]=te;_[126]=te;_[127]=Ha("indefinite length bytes/strings are not supported");for(let e=128;e<=151;e++)_[e]=Eh;_[152]=Sh;_[153]=Bh;_[154]=Ch;_[155]=Ah;_[156]=te;_[157]=te;_[158]=te;_[159]=Th;for(let e=160;e<=183;e++)_[e]=Ih;_[184]=_h;_[185]=Rh;_[186]=Nh;_[187]=Dh;_[188]=te;_[189]=te;_[190]=te;_[191]=kh;for(let e=192;e<=215;e++)_[e]=Ph;_[216]=Kh;_[217]=Uh;_[218]=Fh;_[219]=Lh;_[220]=te;_[221]=te;_[222]=te;_[223]=te;for(let e=224;e<=243;e++)_[e]=Ha("simple values are not supported");_[244]=te;_[245]=te;_[246]=te;_[247]=Oh;_[248]=Ha("simple values are not supported");_[249]=Mh;_[250]=Vh;_[251]=zh;_[252]=te;_[253]=te;_[254]=te;_[255]=qh;var Rt=[];for(let e=0;e<24;e++)Rt[e]=new P(w.uint,e,1);for(let e=-1;e>=-24;e--)Rt[31-e]=new P(w.negint,e,1);Rt[64]=new P(w.bytes,new Uint8Array(0),1);Rt[96]=new P(w.string,"",1);Rt[128]=new P(w.array,0,1);Rt[160]=new P(w.map,0,1);Rt[244]=new P(w.false,!1,1);Rt[245]=new P(w.true,!0,1);Rt[246]=new P(w.null,null,1);function Wh(e){switch(e.type){case w.false:return Yt([244]);case w.true:return Yt([245]);case w.null:return Yt([246]);case w.bytes:return e.value.length?void 0:Yt([64]);case w.string:return e.value===""?Yt([96]):void 0;case w.array:return e.value===0?Yt([128]):void 0;case w.map:return e.value===0?Yt([160]):void 0;case w.uint:return e.value<24?Yt([Number(e.value)]):void 0;case w.negint:if(e.value>=-24)return Yt([31-Number(e.value)])}}var Nv={float64:!1,mapSorter:kv,quickEncodeToken:Wh},Zt=[];Zt[w.uint.major]=yt;Zt[w.negint.major]=Ma;Zt[w.bytes.major]=_n;Zt[w.string.major]=wh;Zt[w.array.major]=So;Zt[w.map.major]=Bo;Zt[w.tag.major]=Co;Zt[w.float.major]=za;var Yh=new qa,_i=class{constructor(t,r){this.obj=t,this.parent=r}includes(t){let r=this;do if(r.obj===t)return!0;while(r=r.parent);return!1}static createCheck(t,r){if(t&&t.includes(r))throw new Error(`${wo} object contains circular references`);return new _i(r,t)}},Rr={null:new P(w.null,null),undefined:new P(w.undefined,void 0),true:new P(w.true,!0),false:new P(w.false,!1),emptyArray:new P(w.array,0),emptyMap:new P(w.map,0)},Nr={number(e,t,r,n){return!Number.isInteger(e)||!Number.isSafeInteger(e)?new P(w.float,e):e>=0?new P(w.uint,e):new P(w.negint,e)},bigint(e,t,r,n){return e>=BigInt(0)?new P(w.uint,e):new P(w.negint,e)},Uint8Array(e,t,r,n){return new P(w.bytes,e)},string(e,t,r,n){return new P(w.string,e)},boolean(e,t,r,n){return e?Rr.true:Rr.false},null(e,t,r,n){return Rr.null},undefined(e,t,r,n){return Rr.undefined},ArrayBuffer(e,t,r,n){return new P(w.bytes,new Uint8Array(e))},DataView(e,t,r,n){return new P(w.bytes,new Uint8Array(e.buffer,e.byteOffset,e.byteLength))},Array(e,t,r,n){if(!e.length)return r.addBreakTokens===!0?[Rr.emptyArray,new P(w.break)]:Rr.emptyArray;n=_i.createCheck(n,e);let i=[],a=0;for(let s of e)i[a++]=ja(s,r,n);return r.addBreakTokens?[new P(w.array,e.length),i,new P(w.break)]:[new P(w.array,e.length),i]},Object(e,t,r,n){let i=t!=="Object",a=i?e.keys():Object.keys(e),s=i?e.size:a.length;if(!s)return r.addBreakTokens===!0?[Rr.emptyMap,new P(w.break)]:Rr.emptyMap;n=_i.createCheck(n,e);let o=[],u=0;for(let c of a)o[u++]=[ja(c,r,n),ja(i?e.get(c):e[c],r,n)];return Dv(o,r),r.addBreakTokens?[new P(w.map,s),o,new P(w.break)]:[new P(w.map,s),o]}};Nr.Map=Nr.Object;Nr.Buffer=Nr.Uint8Array;for(let e of"Uint8Clamped Uint16 Uint32 Int8 Int16 Int32 BigUint64 BigInt64 Float32 Float64".split(" "))Nr[`${e}Array`]=Nr.DataView;function ja(e,t={},r){let n=$l(e),i=t&&t.typeEncoders&&t.typeEncoders[n]||Nr[n];if(typeof i=="function"){let s=i(e,n,t,r);if(s!=null)return s}let a=Nr[n];if(!a)throw new Error(`${wo} unsupported type: ${n}`);return a(e,n,t,r)}function Dv(e,t){t.mapSorter&&e.sort(t.mapSorter)}function kv(e,t){let r=Array.isArray(e[0])?e[0][0]:e[0],n=Array.isArray(t[0])?t[0][0]:t[0];if(r.type!==n.type)return r.type.compare(n.type);let i=r.type.major,a=Zt[i].compareTokens(r,n);return a===0&&console.warn("WARNING: complex key types used, CBOR key sorting guarantees are gone"),a}function Zh(e,t,r,n){if(Array.isArray(t))for(let i of t)Zh(e,i,r,n);else r[t.type.major](e,t,n)}function Pv(e,t,r){let n=ja(e,r);if(!Array.isArray(n)&&r.quickEncodeToken){let i=r.quickEncodeToken(n);if(i)return i;let a=t[n.type.major];if(a.encodedSize){let s=a.encodedSize(n,r),o=new qa(s);if(a(o,n,r),o.chunks.length!==1)throw new Error(`Unexpected error: pre-calculated length for ${n} was wrong`);return bo(o.chunks[0])}}return Zh(Yh,n,t,r),Yh.toBytes(!0)}function _o(e,t){return t=Object.assign({},Nv,t),Pv(e,Zt,t)}var Kv={strict:!1,allowIndefinite:!0,allowUndefined:!0,allowBigInt:!0},Qh=class{constructor(t,r={}){this.pos=0,this.data=t,this.options=r}done(){return this.pos>=this.data.length}next(){let t=this.data[this.pos],r=Rt[t];if(r===void 0){let n=_[t];if(!n)throw new Error(`${M} no decoder for major type ${t>>>5} (byte 0x${t.toString(16).padStart(2,"0")})`);let i=t&31;r=n(this.data,this.pos,i,this.options)}return this.pos+=r.encodedLength,r}},Ri=Symbol.for("DONE"),Ga=Symbol.for("BREAK");function Uv(e,t,r){let n=[];for(let i=0;i<e.value;i++){let a=Ni(t,r);if(a===Ga){if(e.value===1/0)break;throw new Error(`${M} got unexpected break to lengthed array`)}if(a===Ri)throw new Error(`${M} found array but not enough entries (got ${i}, expected ${e.value})`);n[i]=a}return n}function Fv(e,t,r){let n=r.useMaps===!0,i=n?void 0:{},a=n?new Map:void 0;for(let s=0;s<e.value;s++){let o=Ni(t,r);if(o===Ga){if(e.value===1/0)break;throw new Error(`${M} got unexpected break to lengthed map`)}if(o===Ri)throw new Error(`${M} found map but not enough entries (got ${s} [no key], expected ${e.value})`);if(n!==!0&&typeof o!="string")throw new Error(`${M} non-string keys not supported (got ${typeof o})`);let u=Ni(t,r);if(u===Ri)throw new Error(`${M} found map but not enough entries (got ${s} [no value], expected ${e.value})`);n?a.set(o,u):i[o]=u}return n?a:i}function Ni(e,t){if(e.done())return Ri;let r=e.next();if(r.type===w.break)return Ga;if(r.type.terminal)return r.value;if(r.type===w.array)return Uv(r,e,t);if(r.type===w.map)return Fv(r,e,t);if(r.type===w.tag){if(t.tags&&typeof t.tags[r.value]=="function"){let n=Ni(e,t);return t.tags[r.value](n)}throw new Error(`${M} tag not supported (${r.value})`)}throw new Error("unsupported")}function Ro(e,t){if(!(e instanceof Uint8Array))throw new Error(`${M} data to decode must be a Uint8Array`);t=Object.assign({},Kv,t);let r=t.tokenizer||new Qh(e,t),n=Ni(r,t);if(n===Ri)throw new Error(`${M} did not find any content to decode`);if(n===Ga)throw new Error(`${M} got unexpected break`);if(!r.done())throw new Error(`${M} too many terminals, data makes no sense`);return n}var Ko=Dr(up()),Uo=Dr(pp());var Zr=Dr(ia()),dp=Zr.default.Reader,Qv=Zr.default.Writer,q=Zr.default.util,Di=Zr.default.roots["ipfs-ipns"]||(Zr.default.roots["ipfs-ipns"]={}),Qr=Di.IpnsEntry=(()=>{function e(t){if(t)for(var r=Object.keys(t),n=0;n<r.length;++n)t[r[n]]!=null&&(this[r[n]]=t[r[n]])}return e.prototype.value=q.newBuffer([]),e.prototype.signature=q.newBuffer([]),e.prototype.validityType=0,e.prototype.validity=q.newBuffer([]),e.prototype.sequence=q.Long?q.Long.fromBits(0,0,!0):0,e.prototype.ttl=q.Long?q.Long.fromBits(0,0,!0):0,e.prototype.pubKey=q.newBuffer([]),e.prototype.signatureV2=q.newBuffer([]),e.prototype.data=q.newBuffer([]),e.encode=function(r,n){return n||(n=Qv.create()),r.value!=null&&Object.hasOwnProperty.call(r,"value")&&n.uint32(10).bytes(r.value),r.signature!=null&&Object.hasOwnProperty.call(r,"signature")&&n.uint32(18).bytes(r.signature),r.validityType!=null&&Object.hasOwnProperty.call(r,"validityType")&&n.uint32(24).int32(r.validityType),r.validity!=null&&Object.hasOwnProperty.call(r,"validity")&&n.uint32(34).bytes(r.validity),r.sequence!=null&&Object.hasOwnProperty.call(r,"sequence")&&n.uint32(40).uint64(r.sequence),r.ttl!=null&&Object.hasOwnProperty.call(r,"ttl")&&n.uint32(48).uint64(r.ttl),r.pubKey!=null&&Object.hasOwnProperty.call(r,"pubKey")&&n.uint32(58).bytes(r.pubKey),r.signatureV2!=null&&Object.hasOwnProperty.call(r,"signatureV2")&&n.uint32(66).bytes(r.signatureV2),r.data!=null&&Object.hasOwnProperty.call(r,"data")&&n.uint32(74).bytes(r.data),n},e.decode=function(r,n){r instanceof dp||(r=dp.create(r));for(var i=n===void 0?r.len:r.pos+n,a=new Di.IpnsEntry;r.pos<i;){var s=r.uint32();switch(s>>>3){case 1:a.value=r.bytes();break;case 2:a.signature=r.bytes();break;case 3:a.validityType=r.int32();break;case 4:a.validity=r.bytes();break;case 5:a.sequence=r.uint64();break;case 6:a.ttl=r.uint64();break;case 7:a.pubKey=r.bytes();break;case 8:a.signatureV2=r.bytes();break;case 9:a.data=r.bytes();break;default:r.skipType(s&7);break}}return a},e.fromObject=function(r){if(r instanceof Di.IpnsEntry)return r;var n=new Di.IpnsEntry;switch(r.value!=null&&(typeof r.value=="string"?q.base64.decode(r.value,n.value=q.newBuffer(q.base64.length(r.value)),0):r.value.length&&(n.value=r.value)),r.signature!=null&&(typeof r.signature=="string"?q.base64.decode(r.signature,n.signature=q.newBuffer(q.base64.length(r.signature)),0):r.signature.length&&(n.signature=r.signature)),r.validityType){case"EOL":case 0:n.validityType=0;break}return r.validity!=null&&(typeof r.validity=="string"?q.base64.decode(r.validity,n.validity=q.newBuffer(q.base64.length(r.validity)),0):r.validity.length&&(n.validity=r.validity)),r.sequence!=null&&(q.Long?(n.sequence=q.Long.fromValue(r.sequence)).unsigned=!0:typeof r.sequence=="string"?n.sequence=parseInt(r.sequence,10):typeof r.sequence=="number"?n.sequence=r.sequence:typeof r.sequence=="object"&&(n.sequence=new q.LongBits(r.sequence.low>>>0,r.sequence.high>>>0).toNumber(!0))),r.ttl!=null&&(q.Long?(n.ttl=q.Long.fromValue(r.ttl)).unsigned=!0:typeof r.ttl=="string"?n.ttl=parseInt(r.ttl,10):typeof r.ttl=="number"?n.ttl=r.ttl:typeof r.ttl=="object"&&(n.ttl=new q.LongBits(r.ttl.low>>>0,r.ttl.high>>>0).toNumber(!0))),r.pubKey!=null&&(typeof r.pubKey=="string"?q.base64.decode(r.pubKey,n.pubKey=q.newBuffer(q.base64.length(r.pubKey)),0):r.pubKey.length&&(n.pubKey=r.pubKey)),r.signatureV2!=null&&(typeof r.signatureV2=="string"?q.base64.decode(r.signatureV2,n.signatureV2=q.newBuffer(q.base64.length(r.signatureV2)),0):r.signatureV2.length&&(n.signatureV2=r.signatureV2)),r.data!=null&&(typeof r.data=="string"?q.base64.decode(r.data,n.data=q.newBuffer(q.base64.length(r.data)),0):r.data.length&&(n.data=r.data)),n},e.toObject=function(r,n){n||(n={});var i={};if(n.defaults){if(n.bytes===String?i.value="":(i.value=[],n.bytes!==Array&&(i.value=q.newBuffer(i.value))),n.bytes===String?i.signature="":(i.signature=[],n.bytes!==Array&&(i.signature=q.newBuffer(i.signature))),i.validityType=n.enums===String?"EOL":0,n.bytes===String?i.validity="":(i.validity=[],n.bytes!==Array&&(i.validity=q.newBuffer(i.validity))),q.Long){var a=new q.Long(0,0,!0);i.sequence=n.longs===String?a.toString():n.longs===Number?a.toNumber():a}else i.sequence=n.longs===String?"0":0;if(q.Long){var a=new q.Long(0,0,!0);i.ttl=n.longs===String?a.toString():n.longs===Number?a.toNumber():a}else i.ttl=n.longs===String?"0":0;n.bytes===String?i.pubKey="":(i.pubKey=[],n.bytes!==Array&&(i.pubKey=q.newBuffer(i.pubKey))),n.bytes===String?i.signatureV2="":(i.signatureV2=[],n.bytes!==Array&&(i.signatureV2=q.newBuffer(i.signatureV2))),n.bytes===String?i.data="":(i.data=[],n.bytes!==Array&&(i.data=q.newBuffer(i.data)))}return r.value!=null&&r.hasOwnProperty("value")&&(i.value=n.bytes===String?q.base64.encode(r.value,0,r.value.length):n.bytes===Array?Array.prototype.slice.call(r.value):r.value),r.signature!=null&&r.hasOwnProperty("signature")&&(i.signature=n.bytes===String?q.base64.encode(r.signature,0,r.signature.length):n.bytes===Array?Array.prototype.slice.call(r.signature):r.signature),r.validityType!=null&&r.hasOwnProperty("validityType")&&(i.validityType=n.enums===String?Di.IpnsEntry.ValidityType[r.validityType]:r.validityType),r.validity!=null&&r.hasOwnProperty("validity")&&(i.validity=n.bytes===String?q.base64.encode(r.validity,0,r.validity.length):n.bytes===Array?Array.prototype.slice.call(r.validity):r.validity),r.sequence!=null&&r.hasOwnProperty("sequence")&&(typeof r.sequence=="number"?i.sequence=n.longs===String?String(r.sequence):r.sequence:i.sequence=n.longs===String?q.Long.prototype.toString.call(r.sequence):n.longs===Number?new q.LongBits(r.sequence.low>>>0,r.sequence.high>>>0).toNumber(!0):r.sequence),r.ttl!=null&&r.hasOwnProperty("ttl")&&(typeof r.ttl=="number"?i.ttl=n.longs===String?String(r.ttl):r.ttl:i.ttl=n.longs===String?q.Long.prototype.toString.call(r.ttl):n.longs===Number?new q.LongBits(r.ttl.low>>>0,r.ttl.high>>>0).toNumber(!0):r.ttl),r.pubKey!=null&&r.hasOwnProperty("pubKey")&&(i.pubKey=n.bytes===String?q.base64.encode(r.pubKey,0,r.pubKey.length):n.bytes===Array?Array.prototype.slice.call(r.pubKey):r.pubKey),r.signatureV2!=null&&r.hasOwnProperty("signatureV2")&&(i.signatureV2=n.bytes===String?q.base64.encode(r.signatureV2,0,r.signatureV2.length):n.bytes===Array?Array.prototype.slice.call(r.signatureV2):r.signatureV2),r.data!=null&&r.hasOwnProperty("data")&&(i.data=n.bytes===String?q.base64.encode(r.data,0,r.data.length):n.bytes===Array?Array.prototype.slice.call(r.data):r.data),i},e.prototype.toJSON=function(){return this.constructor.toObject(this,Zr.default.util.toJSONOptions)},e.ValidityType=function(){let t={},r=Object.create(t);return r[t[0]="EOL"]=0,r}(),e})();function Za(e){let t=new RegExp("(\\d{4})-(\\d{2})-(\\d{2})T(\\d{2}):(\\d{2}):(\\d{2})\\.(\\d+)Z"),r=String(e).trim().match(t);if(!r)throw new Error("Invalid format");let n=parseInt(r[1],10),i=parseInt(r[2],10)-1,a=parseInt(r[3],10),s=parseInt(r[4],10),o=parseInt(r[5],10),u=parseInt(r[6],10),c=parseInt(r[7].slice(0,-6),10);return new Date(Date.UTC(n,i,a,s,o,u,c))}var yp="ERR_IPNS_EXPIRED_RECORD",ko="ERR_UNRECOGNIZED_VALIDITY",gp="ERR_SIGNATURE_CREATION",Xr="ERR_SIGNATURE_VERIFICATION",vp="ERR_UNRECOGNIZED_FORMAT",mp="ERR_PEER_ID_FROM_PUBLIC_KEY",xp="ERR_PUBLIC_KEY_FROM_ID",Qa="ERR_UNDEFINED_PARAMETER",bp="ERR_INVALID_RECORD_DATA",wp="ERR_INVALID_EMBEDDED_KEY";var st=Object.assign((0,Uo.default)("jsipns"),{error:(0,Uo.default)("jsipns:error")}),Xv=ls.code,Jv=Pt("/ipns/"),Ep="/ipns/",em=Ep.length,tm=(e,t,r,n)=>{let i=new Po.default(Date.now()+Number(n)),a=Qr.ValidityType.EOL,[s,o]=n.toString().split("."),u=BigInt(s)*BigInt(1e5)+BigInt(o||0);return Sp(e,t,r,a,i,u)},rm=(e,t,r,n)=>{let i=Po.default.fromString(n),a=Qr.ValidityType.EOL,s=i.toDate().getTime()-Date.now(),o=BigInt(s)*BigInt(1e5)+BigInt(i.getNano());return Sp(e,t,r,a,i,o)},Sp=async(e,t,r,n,i,a)=>{r=BigInt(r);let s=Pt(i.toString()),o=await um(e,t,n,s),u=nm(t,s,n,r,a),c=Tp(u),f=await e.sign(c),l={value:t,signature:o,validityType:n,validity:s,sequence:r,ttl:a,signatureV2:f,data:u};return st(`ipns entry for ${t} created`),l},nm=(e,t,r,n,i)=>_o({Value:e,Validity:t,ValidityType:r,Sequence:n,TTL:i}),Bp=async(e,t)=>{let{value:r,validityType:n,validity:i}=t,a,s;t.signatureV2&&t.data?(s=t.signatureV2,a=Tp(t.data),im(t)):(s=t.signature,a=Ap(r,n,i));let o;try{o=await e.verify(a,s)}catch(u){o=!1}if(!o)throw st.error("record signature verification failed"),(0,Re.default)(new Error("record signature verification failed"),Xr);if(n===Qr.ValidityType.EOL){let u;try{u=Za(Pr(i))}catch(c){throw st.error("unrecognized validity format (not an rfc3339 format)"),(0,Re.default)(new Error("unrecognized validity format (not an rfc3339 format)"),vp)}if(u.getTime()<Date.now())throw st.error("record has expired"),(0,Re.default)(new Error("record has expired"),yp)}else if(n)throw st.error("unrecognized validity type"),(0,Re.default)(new Error("unrecognized validity type"),ko);st(`ipns entry for ${r} is valid`)},im=e=>{if(!e.data)throw(0,Re.default)(new Error("Record data is missing"),bp);let t=Ro(e.data);if(Number.isInteger(t.Sequence)&&(t.Sequence=BigInt(t.Sequence)),Number.isInteger(t.TTL)&&(t.TTL=BigInt(t.TTL)),!ba(t.Value,e.value))throw(0,Re.default)(new Error('Field "value" did not match between protobuf and CBOR'),Xr);if(!ba(t.Validity,e.validity))throw(0,Re.default)(new Error('Field "validity" did not match between protobuf and CBOR'),Xr);if(t.ValidityType!==e.validityType)throw(0,Re.default)(new Error('Field "validityType" did not match between protobuf and CBOR'),Xr);if(t.Sequence!==e.sequence)throw(0,Re.default)(new Error('Field "sequence" did not match between protobuf and CBOR'),Xr);if(t.TTL!==e.ttl)throw(0,Re.default)(new Error('Field "ttl" did not match between protobuf and CBOR'),Xr)},am=async(e,t)=>{if(!e||!e.bytes||!t){let i=new Error("one or more of the provided parameters are not defined");throw st.error(i),(0,Re.default)(i,Qa)}let r;try{r=await Ja.default.createFromPubKey(e.bytes)}catch(i){throw(0,Re.default)(i,mp)}let n;try{n=fm(r)}catch(i){throw st.error(i),(0,Re.default)(i,xp)}if(n)return null;try{t.pubKey=Xa.default.keys.marshalPublicKey(e)}catch(i){throw st.error(i),i}return t},Cp=async(e,t)=>{if(!t||!e){let n=new Error("one or more of the provided parameters are not defined");throw st.error(n),(0,Re.default)(n,Qa)}let r;if(t.pubKey){try{r=Xa.default.keys.unmarshalPublicKey(t.pubKey)}catch(i){throw st.error(i),i}if(!(await Ja.default.createFromPubKey(t.pubKey)).equals(e))throw(0,Re.default)(new Error("Embedded public key did not match PeerID"),wp)}else e.pubKey&&(r=e.pubKey);if(r)return r;throw(0,Re.default)(new Error("no public key is available"),Qa)},Fo=e=>os.encode(e).slice(1),sm=e=>new Ie(`/ipns/${Fo(e)}`),om=e=>{let t=Pt("/pk/"),r=Pt("/ipns/");return{routingPubKey:new Ie(wr([t,e]),!1),pkKey:new Ie(Fo(wr([t,e]))),routingKey:new Ie(wr([r,e]),!1),ipnsKey:new Ie(Fo(wr([r,e])))}},um=(e,t,r,n)=>{try{let i=Ap(t,r,n);return e.sign(i)}catch(i){throw st.error("record signature creation failed"),(0,Re.default)(new Error("record signature creation failed: "+i.message),gp)}},cm=e=>{if(e.toString()==="0")return"EOL";let t=new Error(`unrecognized validity type ${e.toString()}`);throw st.error(t),(0,Re.default)(t,ko)},Ap=(e,t,r)=>{let n=Pt(cm(t));return wr([e,r,n])},Tp=e=>{let t=Pt("ipns-signature:");return wr([t,e])},fm=e=>{let t=Gn(e.id);return t.code!==Xv?null:Xa.default.keys.unmarshalPublicKey(t.digest)},lm=e=>Qr.encode({...e,sequence:Ko.default.fromString(e.sequence.toString()),ttl:e.ttl==null?void 0:Ko.default.fromString(e.ttl.toString())}).finish(),es=e=>{let t=Qr.decode(e),r=Qr.toObject(t,{defaults:!1,arrays:!0,objects:!1});return{value:r.value,signature:r.signature,validityType:r.validityType,validity:r.validity,sequence:Object.hasOwnProperty.call(r,"sequence")?BigInt(`${r.sequence}`):0n,pubKey:r.pubKey,ttl:Object.hasOwnProperty.call(r,"ttl")?BigInt(`${r.ttl}`):void 0,signatureV2:r.signatureV2,data:r.data}},hm={validate:async(e,t)=>{let r=es(e),n=t.slice(Jv.length),i=Ja.default.createFromBytes(n),a=await Cp(i,r);await Bp(a,r)},select:(e,t)=>{let r=es(e),n=es(t);if(r.signatureV2&&!n.signatureV2)return 0;if(n.signatureV2&&!r.signatureV2)return 1;if(r.sequence>n.sequence)return 0;if(r.sequence<n.sequence)return 1;let i=Za(Pr(r.validity));return Za(Pr(n.validity)).getTime()>i.getTime()?1:0}};return pm;})();
/*! noble-ed25519 - MIT License (c) Paul Miller (paulmillr.com) */
/*! noble-secp256k1 - MIT License (c) Paul Miller (paulmillr.com) */
/**
 * Timestamp for 64-bit time_t, nanosecond precision and strftime
 *
 * @author Yusuke Kawasaki
 * @license MIT
 * @see https://github.com/kawanet/timestamp-nano
 */
return Ipns}));
