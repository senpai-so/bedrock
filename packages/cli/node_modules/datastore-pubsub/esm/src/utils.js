import errcode from 'err-code';
import { toString as uint8ArrayToString } from 'uint8arrays/to-string';
import { fromString as uint8ArrayFromString } from 'uint8arrays/from-string';
const namespace = '/record/';
export function encodeBase32(buf) {
  return uint8ArrayToString(buf, 'base32');
}
export function keyToTopic(key) {
  if (typeof key === 'string' || key instanceof String) {
    key = uint8ArrayFromString(key.toString());
  }
  const b64url = uint8ArrayToString(key, 'base64url');
  return `${ namespace }${ b64url }`;
}
export function topicToKey(topic) {
  if (topic.substring(0, namespace.length) !== namespace) {
    throw errcode(new Error('topic received is not from a record'), 'ERR_TOPIC_IS_NOT_FROM_RECORD_NAMESPACE');
  }
  const key = topic.substring(namespace.length);
  return uint8ArrayFromString(key, 'base64url');
}