(function (root, factory) {(typeof module === 'object' && module.exports) ? module.exports = factory() : root.Libp2pFloodsub = factory()}(typeof self !== 'undefined' ? self : this, function () {
var Libp2pFloodsub=(()=>{var pa=Object.defineProperty;var qp=t=>pa(t,"__esModule",{value:!0});var zn=(t=>typeof require!="undefined"?require:typeof Proxy!="undefined"?new Proxy(t,{get:(e,r)=>(typeof require!="undefined"?require:e)[r]}):t)(function(t){if(typeof require!="undefined")return require.apply(this,arguments);throw new Error('Dynamic require of "'+t+'" is not supported')});var Z=(t,e)=>()=>(t&&(e=t(t=0)),e);var E=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),Ee=(t,e)=>{qp(t);for(var r in e)pa(t,r,{get:e[r],enumerable:!0})};var va=E((Qm,xa)=>{var da="Expected a function",ya=0/0,Mp="[object Symbol]",Vp=/^\s+|\s+$/g,zp=/^[-+]0x[0-9a-f]+$/i,Hp=/^0b[01]+$/i,Gp=/^0o[0-7]+$/i,jp=parseInt,Wp=typeof globalThis=="object"&&globalThis&&globalThis.Object===Object&&globalThis,$p=typeof self=="object"&&self&&self.Object===Object&&self,Yp=Wp||$p||Function("return this")(),Qp=Object.prototype,Zp=Qp.toString,Xp=Math.max,Jp=Math.min,us=function(){return Yp.Date.now()};function ed(t,e,r){var n,i,s,o,a,u,c=0,f=!1,h=!1,l=!0;if(typeof t!="function")throw new TypeError(da);e=ga(e)||0,Hn(r)&&(f=!!r.leading,h="maxWait"in r,s=h?Xp(ga(r.maxWait)||0,e):s,l="trailing"in r?!!r.trailing:l);function d(_){var O=n,q=i;return n=i=void 0,c=_,o=t.apply(q,O),o}function p(_){return c=_,a=setTimeout(m,e),f?d(_):o}function g(_){var O=_-u,q=_-c,ce=e-O;return h?Jp(ce,s-q):ce}function x(_){var O=_-u,q=_-c;return u===void 0||O>=e||O<0||h&&q>=s}function m(){var _=us();if(x(_))return B(_);a=setTimeout(m,g(_))}function B(_){return a=void 0,l&&n?d(_):(n=i=void 0,o)}function I(){a!==void 0&&clearTimeout(a),c=0,n=u=i=a=void 0}function L(){return a===void 0?o:B(us())}function T(){var _=us(),O=x(_);if(n=arguments,i=this,u=_,O){if(a===void 0)return p(u);if(h)return a=setTimeout(m,e),d(u)}return a===void 0&&(a=setTimeout(m,e)),o}return T.cancel=I,T.flush=L,T}function td(t,e,r){var n=!0,i=!0;if(typeof t!="function")throw new TypeError(da);return Hn(r)&&(n="leading"in r?!!r.leading:n,i="trailing"in r?!!r.trailing:i),ed(t,e,{leading:n,maxWait:e,trailing:i})}function Hn(t){var e=typeof t;return!!t&&(e=="object"||e=="function")}function rd(t){return!!t&&typeof t=="object"}function nd(t){return typeof t=="symbol"||rd(t)&&Zp.call(t)==Mp}function ga(t){if(typeof t=="number")return t;if(nd(t))return ya;if(Hn(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=Hn(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=t.replace(Vp,"");var r=Hp.test(t);return r||Gp.test(t)?jp(t.slice(2),r?2:8):zp.test(t)?ya:+t}xa.exports=td});var wa=E((ma,ba)=>{"use strict";var id=va();ma=ba.exports=cs;function cs(t){if(!(this instanceof cs))return new cs(t);t=t||{};let e=t.validity||30,r=new Map,n=id(()=>{r.forEach((i,s)=>{let o=i.validity||e;sd(i.timestamp)>o&&r.delete(s)})},200);this.put=(i,s,o)=>{this.has(i)||r.set(i,{value:s,timestamp:new Date,validity:o}),n()},this.get=i=>{if(r.has(i))return r.get(i).value;throw new Error("key does not exist")},this.has=i=>r.has(i)}function sd(t){let r=new Date().getTime()-t.getTime();return Math.floor(r/1e3)}});function od(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var i=0;i<t.length;i++){var s=t.charAt(i),o=s.charCodeAt(0);if(r[o]!==255)throw new TypeError(s+" is ambiguous");r[o]=i}var a=t.length,u=t.charAt(0),c=Math.log(a)/Math.log(256),f=Math.log(256)/Math.log(a);function h(p){if(p instanceof Uint8Array||(ArrayBuffer.isView(p)?p=new Uint8Array(p.buffer,p.byteOffset,p.byteLength):Array.isArray(p)&&(p=Uint8Array.from(p))),!(p instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(p.length===0)return"";for(var g=0,x=0,m=0,B=p.length;m!==B&&p[m]===0;)m++,g++;for(var I=(B-m)*f+1>>>0,L=new Uint8Array(I);m!==B;){for(var T=p[m],_=0,O=I-1;(T!==0||_<x)&&O!==-1;O--,_++)T+=256*L[O]>>>0,L[O]=T%a>>>0,T=T/a>>>0;if(T!==0)throw new Error("Non-zero carry");x=_,m++}for(var q=I-x;q!==I&&L[q]===0;)q++;for(var ce=u.repeat(g);q<I;++q)ce+=t.charAt(L[q]);return ce}function l(p){if(typeof p!="string")throw new TypeError("Expected String");if(p.length===0)return new Uint8Array;var g=0;if(p[g]!==" "){for(var x=0,m=0;p[g]===u;)x++,g++;for(var B=(p.length-g)*c+1>>>0,I=new Uint8Array(B);p[g];){var L=r[p.charCodeAt(g)];if(L===255)return;for(var T=0,_=B-1;(L!==0||T<m)&&_!==-1;_--,T++)L+=a*I[_]>>>0,I[_]=L%256>>>0,L=L/256>>>0;if(L!==0)throw new Error("Non-zero carry");m=T,g++}if(p[g]!==" "){for(var O=B-m;O!==B&&I[O]===0;)O++;for(var q=new Uint8Array(x+(B-O)),ce=x;O!==B;)q[ce++]=I[O++];return q}}}function d(p){var g=l(p);if(g)return g;throw new Error(`Non-${e} character`)}return{encode:h,decodeUnsafe:l,decode:d}}var ad,ud,Ea,Sa=Z(()=>{ad=od,ud=ad,Ea=ud});var Xm,Ba,Ct,Ca,_a,kt=Z(()=>{Xm=new Uint8Array(0),Ba=(t,e)=>{if(t===e)return!0;if(t.byteLength!==e.byteLength)return!1;for(let r=0;r<t.byteLength;r++)if(t[r]!==e[r])return!1;return!0},Ct=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},Ca=t=>new TextEncoder().encode(t),_a=t=>new TextDecoder().decode(t)});var Ia,Ta,Ra,Pa,Da,Gn,Ot,cd,fd,fe,nt=Z(()=>{Sa();kt();Ia=class{constructor(e,r,n){this.name=e,this.prefix=r,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},Ta=class{constructor(e,r,n){this.name=e,this.prefix=r,this.baseDecode=n}decode(e){if(typeof e=="string")switch(e[0]){case this.prefix:return this.baseDecode(e.slice(1));default:throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`)}else throw Error("Can only multibase decode strings")}or(e){return Pa(this,e)}},Ra=class{constructor(e){this.decoders=e}or(e){return Pa(this,e)}decode(e){let r=e[0],n=this.decoders[r];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}},Pa=(t,e)=>new Ra({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}}),Da=class{constructor(e,r,n,i){this.name=e,this.prefix=r,this.baseEncode=n,this.baseDecode=i,this.encoder=new Ia(e,r,n),this.decoder=new Ta(e,r,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}},Gn=({name:t,prefix:e,encode:r,decode:n})=>new Da(t,e,r,n),Ot=({prefix:t,name:e,alphabet:r})=>{let{encode:n,decode:i}=Ea(r,e);return Gn({prefix:t,name:e,encode:n,decode:s=>Ct(i(s))})},cd=(t,e,r,n)=>{let i={};for(let f=0;f<e.length;++f)i[e[f]]=f;let s=t.length;for(;t[s-1]==="=";)--s;let o=new Uint8Array(s*r/8|0),a=0,u=0,c=0;for(let f=0;f<s;++f){let h=i[t[f]];if(h===void 0)throw new SyntaxError(`Non-${n} character`);u=u<<r|h,a+=r,a>=8&&(a-=8,o[c++]=255&u>>a)}if(a>=r||255&u<<8-a)throw new SyntaxError("Unexpected end of data");return o},fd=(t,e,r)=>{let n=e[e.length-1]==="=",i=(1<<r)-1,s="",o=0,a=0;for(let u=0;u<t.length;++u)for(a=a<<8|t[u],o+=8;o>r;)o-=r,s+=e[i&a>>o];if(o&&(s+=e[i&a<<r-o]),n)for(;s.length*r&7;)s+="=";return s},fe=({name:t,prefix:e,bitsPerChar:r,alphabet:n})=>Gn({prefix:e,name:t,encode(i){return fd(i,n,r)},decode(i){return cd(i,n,r,t)}})});var fs={};Ee(fs,{identity:()=>hd});var hd,Na=Z(()=>{nt();kt();hd=Gn({prefix:"\0",name:"identity",encode:t=>_a(t),decode:t=>Ca(t)})});var hs={};Ee(hs,{base2:()=>ld});var ld,La=Z(()=>{nt();ld=fe({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1})});var ls={};Ee(ls,{base8:()=>pd});var pd,ka=Z(()=>{nt();pd=fe({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3})});var ps={};Ee(ps,{base10:()=>dd});var dd,Oa=Z(()=>{nt();dd=Ot({prefix:"9",name:"base10",alphabet:"0123456789"})});var jn={};Ee(jn,{base16:()=>yd,base16upper:()=>gd});var yd,gd,ds=Z(()=>{nt();yd=fe({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),gd=fe({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4})});var tn={};Ee(tn,{base32:()=>Er,base32hex:()=>bd,base32hexpad:()=>Ed,base32hexpadupper:()=>Sd,base32hexupper:()=>wd,base32pad:()=>vd,base32padupper:()=>md,base32upper:()=>xd,base32z:()=>Bd});var Er,xd,vd,md,bd,wd,Ed,Sd,Bd,rn=Z(()=>{nt();Er=fe({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),xd=fe({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),vd=fe({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),md=fe({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),bd=fe({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),wd=fe({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),Ed=fe({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),Sd=fe({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),Bd=fe({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5})});var Wn={};Ee(Wn,{base36:()=>Cd,base36upper:()=>_d});var Cd,_d,ys=Z(()=>{nt();Cd=Ot({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),_d=Ot({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"})});var Sr={};Ee(Sr,{base58btc:()=>it,base58flickr:()=>Ad});var it,Ad,Br=Z(()=>{nt();it=Ot({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),Ad=Ot({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"})});var Cr={};Ee(Cr,{base64:()=>Id,base64pad:()=>Td,base64url:()=>Rd,base64urlpad:()=>Pd});var Id,Td,Rd,Pd,nn=Z(()=>{nt();Id=fe({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),Td=fe({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),Rd=fe({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),Pd=fe({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6})});function Ka(t,e,r){e=e||[],r=r||0;for(var n=r;t>=kd;)e[r++]=t&255|Fa,t/=128;for(;t&Ld;)e[r++]=t&255|Fa,t>>>=7;return e[r]=t|0,Ka.bytes=r-n+1,e}function gs(t,e){var r=0,e=e||0,n=0,i=e,s,o=t.length;do{if(i>=o)throw gs.bytes=0,new RangeError("Could not decode varint");s=t[i++],r+=n<28?(s&Ua)<<n:(s&Ua)*Math.pow(2,n),n+=7}while(s>=Fd);return gs.bytes=i-e,r}var Dd,Fa,Nd,Ld,kd,Od,Fd,Ua,Kd,Ud,qd,Md,Vd,zd,Hd,Gd,jd,Wd,$d,Yd,sn,qa=Z(()=>{Dd=Ka,Fa=128,Nd=127,Ld=~Nd,kd=Math.pow(2,31);Od=gs,Fd=128,Ua=127;Kd=Math.pow(2,7),Ud=Math.pow(2,14),qd=Math.pow(2,21),Md=Math.pow(2,28),Vd=Math.pow(2,35),zd=Math.pow(2,42),Hd=Math.pow(2,49),Gd=Math.pow(2,56),jd=Math.pow(2,63),Wd=function(t){return t<Kd?1:t<Ud?2:t<qd?3:t<Md?4:t<Vd?5:t<zd?6:t<Hd?7:t<Gd?8:t<jd?9:10},$d={encode:Dd,decode:Od,encodingLength:Wd},Yd=$d,sn=Yd});var on,_r,Ar,$n=Z(()=>{qa();on=t=>[sn.decode(t),sn.decode.bytes],_r=(t,e,r=0)=>(sn.encode(t,e,r),e),Ar=t=>sn.encodingLength(t)});var Yn={};Ee(Yn,{Digest:()=>Ir,create:()=>an,decode:()=>xs,equals:()=>vs});var an,xs,vs,Ir,un=Z(()=>{kt();$n();an=(t,e)=>{let r=e.byteLength,n=Ar(t),i=n+Ar(r),s=new Uint8Array(i+r);return _r(t,s,0),_r(r,s,n),s.set(e,i),new Ir(t,r,e,s)},xs=t=>{let e=Ct(t),[r,n]=on(e),[i,s]=on(e.subarray(n)),o=e.subarray(n+s);if(o.byteLength!==i)throw new Error("Incorrect length");return new Ir(r,i,o,e)},vs=(t,e)=>t===e?!0:t.code===e.code&&t.size===e.size&&Ba(t.bytes,e.bytes),Ir=class{constructor(e,r,n,i){this.code=e,this.size=r,this.digest=n,this.bytes=i}}});var cn,Va,Qn=Z(()=>{un();cn=({name:t,code:e,encode:r})=>new Va(t,e,r),Va=class{constructor(e,r,n){this.name=e,this.code=r,this.encode=n}async digest(e){if(e instanceof Uint8Array){let r=await this.encode(e);return an(this.code,r)}else throw Error("Unknown type, must be binary type")}}});var Ft={};Ee(Ft,{sha256:()=>Qd,sha512:()=>Zd});var Ha,Qd,Zd,nr=Z(()=>{Qn();Ha=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),Qd=cn({name:"sha2-256",code:18,encode:Ha("SHA-256")}),Zd=cn({name:"sha2-512",code:19,encode:Ha("SHA-512")})});var fn={};Ee(fn,{identity:()=>Xd});var Xd,Zn=Z(()=>{Qn();kt();Xd=cn({name:"identity",code:0,encode:t=>Ct(t)})});var Ga=Z(()=>{kt()});var wb,Eb,ja=Z(()=>{wb=new TextEncoder,Eb=new TextDecoder});var Ya={};Ee(Ya,{CID:()=>de});var de,ty,ry,ny,hn,iy,Wa,$a,Xn,Jn,sy,oy,ay,ms=Z(()=>{$n();un();Br();rn();kt();de=class{constructor(e,r,n,i){this.code=r,this.version=e,this.multihash=n,this.bytes=i,this.byteOffset=i.byteOffset,this.byteLength=i.byteLength,this.asCID=this,this._baseCache=new Map,Object.defineProperties(this,{byteOffset:Jn,byteLength:Jn,code:Xn,version:Xn,multihash:Xn,bytes:Xn,_baseCache:Jn,asCID:Jn})}toV0(){switch(this.version){case 0:return this;default:{let{code:e,multihash:r}=this;if(e!==hn)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(r.code!==iy)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return de.createV0(r)}}}toV1(){switch(this.version){case 0:{let{code:e,digest:r}=this.multihash,n=an(e,r);return de.createV1(this.code,n)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}equals(e){return e&&this.code===e.code&&this.version===e.version&&vs(this.multihash,e.multihash)}toString(e){let{bytes:r,version:n,_baseCache:i}=this;switch(n){case 0:return ry(r,i,e||it.encoder);default:return ny(r,i,e||Er.encoder)}}toJSON(){return{code:this.code,version:this.version,hash:this.multihash.bytes}}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return"CID("+this.toString()+")"}static isCID(e){return oy(/^0\.0/,ay),!!(e&&(e[$a]||e.asCID===e))}get toBaseEncodedString(){throw new Error("Deprecated, use .toString()")}get codec(){throw new Error('"codec" property is deprecated, use integer "code" property instead')}get buffer(){throw new Error("Deprecated .buffer property, use .bytes to get Uint8Array instead")}get multibaseName(){throw new Error('"multibaseName" property is deprecated')}get prefix(){throw new Error('"prefix" property is deprecated')}static asCID(e){if(e instanceof de)return e;if(e!=null&&e.asCID===e){let{version:r,code:n,multihash:i,bytes:s}=e;return new de(r,n,i,s||Wa(r,n,i.bytes))}else if(e!=null&&e[$a]===!0){let{version:r,multihash:n,code:i}=e,s=xs(n);return de.create(r,i,s)}else return null}static create(e,r,n){if(typeof r!="number")throw new Error("String codecs are no longer supported");switch(e){case 0:{if(r!==hn)throw new Error(`Version 0 CID must use dag-pb (code: ${hn}) block encoding`);return new de(e,r,n,n.bytes)}case 1:{let i=Wa(e,r,n.bytes);return new de(e,r,n,i)}default:throw new Error("Invalid version")}}static createV0(e){return de.create(0,hn,e)}static createV1(e,r){return de.create(1,e,r)}static decode(e){let[r,n]=de.decodeFirst(e);if(n.length)throw new Error("Incorrect length");return r}static decodeFirst(e){let r=de.inspectBytes(e),n=r.size-r.multihashSize,i=Ct(e.subarray(n,n+r.multihashSize));if(i.byteLength!==r.multihashSize)throw new Error("Incorrect length");let s=i.subarray(r.multihashSize-r.digestSize),o=new Ir(r.multihashCode,r.digestSize,s,i);return[r.version===0?de.createV0(o):de.createV1(r.codec,o),e.subarray(r.size)]}static inspectBytes(e){let r=0,n=()=>{let[h,l]=on(e.subarray(r));return r+=l,h},i=n(),s=hn;if(i===18?(i=0,r=0):i===1&&(s=n()),i!==0&&i!==1)throw new RangeError(`Invalid CID version ${i}`);let o=r,a=n(),u=n(),c=r+u,f=c-o;return{version:i,codec:s,multihashCode:a,digestSize:u,multihashSize:f,size:c}}static parse(e,r){let[n,i]=ty(e,r),s=de.decode(i);return s._baseCache.set(n,e),s}},ty=(t,e)=>{switch(t[0]){case"Q":{let r=e||it;return[it.prefix,r.decode(`${it.prefix}${t}`)]}case it.prefix:{let r=e||it;return[it.prefix,r.decode(t)]}case Er.prefix:{let r=e||Er;return[Er.prefix,r.decode(t)]}default:{if(e==null)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[t[0],e.decode(t)]}}},ry=(t,e,r)=>{let{prefix:n}=r;if(n!==it.prefix)throw Error(`Cannot string encode V0 in ${r.name} encoding`);let i=e.get(n);if(i==null){let s=r.encode(t).slice(1);return e.set(n,s),s}else return i},ny=(t,e,r)=>{let{prefix:n}=r,i=e.get(n);if(i==null){let s=r.encode(t);return e.set(n,s),s}else return i},hn=112,iy=18,Wa=(t,e,r)=>{let n=Ar(t),i=n+Ar(e),s=new Uint8Array(i+r.byteLength);return _r(t,s,0),_r(e,s,n),s.set(r,i),s},$a=Symbol.for("@ipld/js-cid/CID"),Xn={writable:!1,configurable:!1,enumerable:!0},Jn={writable:!1,enumerable:!1,configurable:!1},sy="0.0.0-dev",oy=(t,e)=>{if(t.test(sy))console.warn(e);else throw new Error(e)},ay=`CID.isCID(v) is deprecated and will be removed in the next major release.
Following code pattern:

if (CID.isCID(value)) {
  doSomethingWithCID(value)
}

Is replaced with:

const cid = CID.asCID(value)
if (cid) {
  // Make sure to use cid instead of value
  doSomethingWithCID(cid)
}
`});var Qa=Z(()=>{ms();$n();kt();Qn();un()});var bs,Pb,Za=Z(()=>{Na();La();ka();Oa();ds();rn();ys();Br();nn();nr();Zn();Ga();ja();Qa();bs={...fs,...hs,...ls,...ps,...jn,...tn,...Wn,...Sr,...Cr},Pb={...Ft,...fn}});function Xa(t,e,r,n){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:r},decoder:{decode:n}}}var Ja,ws,uy,ei,Es=Z(()=>{Za();Ja=Xa("utf8","u",t=>{let e=new TextDecoder("utf8");return"u"+e.decode(t)},t=>new TextEncoder().encode(t.substring(1))),ws=Xa("ascii","a",t=>{let e="a";for(let r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return e},t=>{t=t.substring(1);let e=new Uint8Array(t.length);for(let r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e}),uy={utf8:Ja,"utf-8":Ja,hex:bs.base16,latin1:ws,ascii:ws,binary:ws,...bs},ei=uy});var st={};Ee(st,{toString:()=>cy});function cy(t,e="utf8"){let r=ei[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return r.encoder.encode(t).substring(1)}var ot=Z(()=>{Es()});var t0=E((Ob,e0)=>{var Tr=1e3,Rr=Tr*60,Pr=Rr*60,ir=Pr*24,fy=ir*7,hy=ir*365.25;e0.exports=function(t,e){e=e||{};var r=typeof t;if(r==="string"&&t.length>0)return ly(t);if(r==="number"&&isFinite(t))return e.long?dy(t):py(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))};function ly(t){if(t=String(t),!(t.length>100)){var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(!!e){var r=parseFloat(e[1]),n=(e[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return r*hy;case"weeks":case"week":case"w":return r*fy;case"days":case"day":case"d":return r*ir;case"hours":case"hour":case"hrs":case"hr":case"h":return r*Pr;case"minutes":case"minute":case"mins":case"min":case"m":return r*Rr;case"seconds":case"second":case"secs":case"sec":case"s":return r*Tr;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}function py(t){var e=Math.abs(t);return e>=ir?Math.round(t/ir)+"d":e>=Pr?Math.round(t/Pr)+"h":e>=Rr?Math.round(t/Rr)+"m":e>=Tr?Math.round(t/Tr)+"s":t+"ms"}function dy(t){var e=Math.abs(t);return e>=ir?ti(t,e,ir,"day"):e>=Pr?ti(t,e,Pr,"hour"):e>=Rr?ti(t,e,Rr,"minute"):e>=Tr?ti(t,e,Tr,"second"):t+" ms"}function ti(t,e,r,n){var i=e>=r*1.5;return Math.round(t/r)+" "+n+(i?"s":"")}});var n0=E((Fb,r0)=>{function yy(t){r.debug=r,r.default=r,r.coerce=u,r.disable=s,r.enable=i,r.enabled=o,r.humanize=t0(),r.destroy=c,Object.keys(t).forEach(f=>{r[f]=t[f]}),r.names=[],r.skips=[],r.formatters={};function e(f){let h=0;for(let l=0;l<f.length;l++)h=(h<<5)-h+f.charCodeAt(l),h|=0;return r.colors[Math.abs(h)%r.colors.length]}r.selectColor=e;function r(f){let h,l=null,d,p;function g(...x){if(!g.enabled)return;let m=g,B=Number(new Date),I=B-(h||B);m.diff=I,m.prev=h,m.curr=B,h=B,x[0]=r.coerce(x[0]),typeof x[0]!="string"&&x.unshift("%O");let L=0;x[0]=x[0].replace(/%([a-zA-Z%])/g,(_,O)=>{if(_==="%%")return"%";L++;let q=r.formatters[O];if(typeof q=="function"){let ce=x[L];_=q.call(m,ce),x.splice(L,1),L--}return _}),r.formatArgs.call(m,x),(m.log||r.log).apply(m,x)}return g.namespace=f,g.useColors=r.useColors(),g.color=r.selectColor(f),g.extend=n,g.destroy=r.destroy,Object.defineProperty(g,"enabled",{enumerable:!0,configurable:!1,get:()=>l!==null?l:(d!==r.namespaces&&(d=r.namespaces,p=r.enabled(f)),p),set:x=>{l=x}}),typeof r.init=="function"&&r.init(g),g}function n(f,h){let l=r(this.namespace+(typeof h=="undefined"?":":h)+f);return l.log=this.log,l}function i(f){r.save(f),r.namespaces=f,r.names=[],r.skips=[];let h,l=(typeof f=="string"?f:"").split(/[\s,]+/),d=l.length;for(h=0;h<d;h++)!l[h]||(f=l[h].replace(/\*/g,".*?"),f[0]==="-"?r.skips.push(new RegExp("^"+f.substr(1)+"$")):r.names.push(new RegExp("^"+f+"$")))}function s(){let f=[...r.names.map(a),...r.skips.map(a).map(h=>"-"+h)].join(",");return r.enable(""),f}function o(f){if(f[f.length-1]==="*")return!0;let h,l;for(h=0,l=r.skips.length;h<l;h++)if(r.skips[h].test(f))return!1;for(h=0,l=r.names.length;h<l;h++)if(r.names[h].test(f))return!0;return!1}function a(f){return f.toString().substring(2,f.toString().length-2).replace(/\.\*\?$/,"*")}function u(f){return f instanceof Error?f.stack||f.message:f}function c(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return r.enable(r.load()),r}r0.exports=yy});var ni=E((Ke,ri)=>{Ke.formatArgs=xy;Ke.save=vy;Ke.load=my;Ke.useColors=gy;Ke.storage=by();Ke.destroy=(()=>{let t=!1;return()=>{t||(t=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();Ke.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function gy(){return typeof window!="undefined"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document!="undefined"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window!="undefined"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function xy(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+ri.exports.humanize(this.diff),!this.useColors)return;let e="color: "+this.color;t.splice(1,0,e,"color: inherit");let r=0,n=0;t[0].replace(/%[a-zA-Z%]/g,i=>{i!=="%%"&&(r++,i==="%c"&&(n=r))}),t.splice(n,0,e)}Ke.log=console.debug||console.log||(()=>{});function vy(t){try{t?Ke.storage.setItem("debug",t):Ke.storage.removeItem("debug")}catch(e){}}function my(){let t;try{t=Ke.storage.getItem("debug")}catch(e){}return!t&&typeof process!="undefined"&&"env"in process&&(t=process.env.DEBUG),t}function by(){try{return localStorage}catch(t){}}ri.exports=n0()(Ke);var{formatters:wy}=ri.exports;wy.j=function(t){try{return JSON.stringify(t)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}});var Bs=E((Kb,Ss)=>{"use strict";var Dr=typeof Reflect=="object"?Reflect:null,i0=Dr&&typeof Dr.apply=="function"?Dr.apply:function(e,r,n){return Function.prototype.apply.call(e,r,n)},ii;Dr&&typeof Dr.ownKeys=="function"?ii=Dr.ownKeys:Object.getOwnPropertySymbols?ii=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:ii=function(e){return Object.getOwnPropertyNames(e)};function Ey(t){console&&console.warn&&console.warn(t)}var s0=Number.isNaN||function(e){return e!==e};function X(){X.init.call(this)}Ss.exports=X;Ss.exports.once=_y;X.EventEmitter=X;X.prototype._events=void 0;X.prototype._eventsCount=0;X.prototype._maxListeners=void 0;var o0=10;function si(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}Object.defineProperty(X,"defaultMaxListeners",{enumerable:!0,get:function(){return o0},set:function(t){if(typeof t!="number"||t<0||s0(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");o0=t}});X.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};X.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||s0(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function a0(t){return t._maxListeners===void 0?X.defaultMaxListeners:t._maxListeners}X.prototype.getMaxListeners=function(){return a0(this)};X.prototype.emit=function(e){for(var r=[],n=1;n<arguments.length;n++)r.push(arguments[n]);var i=e==="error",s=this._events;if(s!==void 0)i=i&&s.error===void 0;else if(!i)return!1;if(i){var o;if(r.length>0&&(o=r[0]),o instanceof Error)throw o;var a=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var u=s[e];if(u===void 0)return!1;if(typeof u=="function")i0(u,this,r);else for(var c=u.length,f=l0(u,c),n=0;n<c;++n)i0(f[n],this,r);return!0};function u0(t,e,r,n){var i,s,o;if(si(r),s=t._events,s===void 0?(s=t._events=Object.create(null),t._eventsCount=0):(s.newListener!==void 0&&(t.emit("newListener",e,r.listener?r.listener:r),s=t._events),o=s[e]),o===void 0)o=s[e]=r,++t._eventsCount;else if(typeof o=="function"?o=s[e]=n?[r,o]:[o,r]:n?o.unshift(r):o.push(r),i=a0(t),i>0&&o.length>i&&!o.warned){o.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=t,a.type=e,a.count=o.length,Ey(a)}return t}X.prototype.addListener=function(e,r){return u0(this,e,r,!1)};X.prototype.on=X.prototype.addListener;X.prototype.prependListener=function(e,r){return u0(this,e,r,!0)};function Sy(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function c0(t,e,r){var n={fired:!1,wrapFn:void 0,target:t,type:e,listener:r},i=Sy.bind(n);return i.listener=r,n.wrapFn=i,i}X.prototype.once=function(e,r){return si(r),this.on(e,c0(this,e,r)),this};X.prototype.prependOnceListener=function(e,r){return si(r),this.prependListener(e,c0(this,e,r)),this};X.prototype.removeListener=function(e,r){var n,i,s,o,a;if(si(r),i=this._events,i===void 0)return this;if(n=i[e],n===void 0)return this;if(n===r||n.listener===r)--this._eventsCount==0?this._events=Object.create(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,n.listener||r));else if(typeof n!="function"){for(s=-1,o=n.length-1;o>=0;o--)if(n[o]===r||n[o].listener===r){a=n[o].listener,s=o;break}if(s<0)return this;s===0?n.shift():By(n,s),n.length===1&&(i[e]=n[0]),i.removeListener!==void 0&&this.emit("removeListener",e,a||r)}return this};X.prototype.off=X.prototype.removeListener;X.prototype.removeAllListeners=function(e){var r,n,i;if(n=this._events,n===void 0)return this;if(n.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):n[e]!==void 0&&(--this._eventsCount==0?this._events=Object.create(null):delete n[e]),this;if(arguments.length===0){var s=Object.keys(n),o;for(i=0;i<s.length;++i)o=s[i],o!=="removeListener"&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(r=n[e],typeof r=="function")this.removeListener(e,r);else if(r!==void 0)for(i=r.length-1;i>=0;i--)this.removeListener(e,r[i]);return this};function f0(t,e,r){var n=t._events;if(n===void 0)return[];var i=n[e];return i===void 0?[]:typeof i=="function"?r?[i.listener||i]:[i]:r?Cy(i):l0(i,i.length)}X.prototype.listeners=function(e){return f0(this,e,!0)};X.prototype.rawListeners=function(e){return f0(this,e,!1)};X.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):h0.call(t,e)};X.prototype.listenerCount=h0;function h0(t){var e=this._events;if(e!==void 0){var r=e[t];if(typeof r=="function")return 1;if(r!==void 0)return r.length}return 0}X.prototype.eventNames=function(){return this._eventsCount>0?ii(this._events):[]};function l0(t,e){for(var r=new Array(e),n=0;n<e;++n)r[n]=t[n];return r}function By(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function Cy(t){for(var e=new Array(t.length),r=0;r<e.length;++r)e[r]=t[r].listener||t[r];return e}function _y(t,e){return new Promise(function(r,n){function i(o){t.removeListener(e,s),n(o)}function s(){typeof t.removeListener=="function"&&t.removeListener("error",i),r([].slice.call(arguments))}p0(t,e,s,{once:!0}),e!=="error"&&Ay(t,i,{once:!0})})}function Ay(t,e,r){typeof t.on=="function"&&p0(t,"error",e,r)}function p0(t,e,r,n){if(typeof t.on=="function")n.once?t.once(e,r):t.on(e,r);else if(typeof t.addEventListener=="function")t.addEventListener(e,function i(s){n.once&&t.removeEventListener(e,i),r(s)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}});var qe=E((Ub,y0)=>{"use strict";function d0(t,e){for(let r in e)Object.defineProperty(t,r,{value:e[r],enumerable:!0,configurable:!0});return t}function Iy(t,e,r){if(!t||typeof t=="string")throw new TypeError("Please pass an Error to err-code");r||(r={}),typeof e=="object"&&(r=e,e=""),e&&(r.code=e);try{return d0(t,r)}catch(n){r.message=t.message,r.stack=t.stack;let i=function(){};return i.prototype=Object.create(Object.getPrototypeOf(t)),d0(new i,r)}}y0.exports=Iy});var _s=E((qb,Nr)=>{var g0=(...t)=>{let e;for(;t.length;)e=t.shift()(e);return e},Cs=t=>t&&(typeof t[Symbol.asyncIterator]=="function"||typeof t[Symbol.iterator]=="function"||typeof t.next=="function"),oi=t=>t&&typeof t.sink=="function"&&Cs(t.source),Ty=t=>e=>(t.sink(e),t.source),x0=(...t)=>{if(oi(t[0])){let e=t[0];t[0]=()=>e.source}else if(Cs(t[0])){let e=t[0];t[0]=()=>e}if(t.length>1&&oi(t[t.length-1])&&(t[t.length-1]=t[t.length-1].sink),t.length>2)for(let e=1;e<t.length-1;e++)oi(t[e])&&(t[e]=Ty(t[e]));return g0(...t)};Nr.exports=x0;Nr.exports.pipe=x0;Nr.exports.rawPipe=g0;Nr.exports.isIterable=Cs;Nr.exports.isDuplex=oi});var m0=E((Mb,As)=>{"use strict";var Ry=Object.prototype.hasOwnProperty,Ie="~";function ln(){}Object.create&&(ln.prototype=Object.create(null),new ln().__proto__||(Ie=!1));function Py(t,e,r){this.fn=t,this.context=e,this.once=r||!1}function v0(t,e,r,n,i){if(typeof r!="function")throw new TypeError("The listener must be a function");var s=new Py(r,n||t,i),o=Ie?Ie+e:e;return t._events[o]?t._events[o].fn?t._events[o]=[t._events[o],s]:t._events[o].push(s):(t._events[o]=s,t._eventsCount++),t}function ai(t,e){--t._eventsCount==0?t._events=new ln:delete t._events[e]}function Se(){this._events=new ln,this._eventsCount=0}Se.prototype.eventNames=function(){var e=[],r,n;if(this._eventsCount===0)return e;for(n in r=this._events)Ry.call(r,n)&&e.push(Ie?n.slice(1):n);return Object.getOwnPropertySymbols?e.concat(Object.getOwnPropertySymbols(r)):e};Se.prototype.listeners=function(e){var r=Ie?Ie+e:e,n=this._events[r];if(!n)return[];if(n.fn)return[n.fn];for(var i=0,s=n.length,o=new Array(s);i<s;i++)o[i]=n[i].fn;return o};Se.prototype.listenerCount=function(e){var r=Ie?Ie+e:e,n=this._events[r];return n?n.fn?1:n.length:0};Se.prototype.emit=function(e,r,n,i,s,o){var a=Ie?Ie+e:e;if(!this._events[a])return!1;var u=this._events[a],c=arguments.length,f,h;if(u.fn){switch(u.once&&this.removeListener(e,u.fn,void 0,!0),c){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,r),!0;case 3:return u.fn.call(u.context,r,n),!0;case 4:return u.fn.call(u.context,r,n,i),!0;case 5:return u.fn.call(u.context,r,n,i,s),!0;case 6:return u.fn.call(u.context,r,n,i,s,o),!0}for(h=1,f=new Array(c-1);h<c;h++)f[h-1]=arguments[h];u.fn.apply(u.context,f)}else{var l=u.length,d;for(h=0;h<l;h++)switch(u[h].once&&this.removeListener(e,u[h].fn,void 0,!0),c){case 1:u[h].fn.call(u[h].context);break;case 2:u[h].fn.call(u[h].context,r);break;case 3:u[h].fn.call(u[h].context,r,n);break;case 4:u[h].fn.call(u[h].context,r,n,i);break;default:if(!f)for(d=1,f=new Array(c-1);d<c;d++)f[d-1]=arguments[d];u[h].fn.apply(u[h].context,f)}}return!0};Se.prototype.on=function(e,r,n){return v0(this,e,r,n,!1)};Se.prototype.once=function(e,r,n){return v0(this,e,r,n,!0)};Se.prototype.removeListener=function(e,r,n,i){var s=Ie?Ie+e:e;if(!this._events[s])return this;if(!r)return ai(this,s),this;var o=this._events[s];if(o.fn)o.fn===r&&(!i||o.once)&&(!n||o.context===n)&&ai(this,s);else{for(var a=0,u=[],c=o.length;a<c;a++)(o[a].fn!==r||i&&!o[a].once||n&&o[a].context!==n)&&u.push(o[a]);u.length?this._events[s]=u.length===1?u[0]:u:ai(this,s)}return this};Se.prototype.removeAllListeners=function(e){var r;return e?(r=Ie?Ie+e:e,this._events[r]&&ai(this,r)):(this._events=new ln,this._eventsCount=0),this};Se.prototype.off=Se.prototype.removeListener;Se.prototype.addListener=Se.prototype.on;Se.prefixed=Ie;Se.EventEmitter=Se;typeof As!="undefined"&&(As.exports=Se)});var w0=E((Vb,b0)=>{"use strict";b0.exports=(t,e)=>(e=e||(()=>{}),t.then(r=>new Promise(n=>{n(e())}).then(()=>r),r=>new Promise(n=>{n(e())}).then(()=>{throw r})))});var S0=E((zb,ui)=>{"use strict";var Dy=w0(),Is=class extends Error{constructor(e){super(e);this.name="TimeoutError"}},E0=(t,e,r)=>new Promise((n,i)=>{if(typeof e!="number"||e<0)throw new TypeError("Expected `milliseconds` to be a positive number");if(e===1/0){n(t);return}let s=setTimeout(()=>{if(typeof r=="function"){try{n(r())}catch(u){i(u)}return}let o=typeof r=="string"?r:`Promise timed out after ${e} milliseconds`,a=r instanceof Error?r:new Is(o);typeof t.cancel=="function"&&t.cancel(),i(a)},e);Dy(t.then(n,i),()=>{clearTimeout(s)})});ui.exports=E0;ui.exports.default=E0;ui.exports.TimeoutError=Is});var B0=E(Ts=>{"use strict";Object.defineProperty(Ts,"__esModule",{value:!0});function Ny(t,e,r){let n=0,i=t.length;for(;i>0;){let s=i/2|0,o=n+s;r(t[o],e)<=0?(n=++o,i-=s+1):i=s}return n}Ts.default=Ny});var _0=E(Rs=>{"use strict";Object.defineProperty(Rs,"__esModule",{value:!0});var Ly=B0(),C0=class{constructor(){this._queue=[]}enqueue(e,r){r=Object.assign({priority:0},r);let n={priority:r.priority,run:e};if(this.size&&this._queue[this.size-1].priority>=r.priority){this._queue.push(n);return}let i=Ly.default(this._queue,n,(s,o)=>o.priority-s.priority);this._queue.splice(i,0,n)}dequeue(){let e=this._queue.shift();return e==null?void 0:e.run}filter(e){return this._queue.filter(r=>r.priority===e.priority).map(r=>r.run)}get size(){return this._queue.length}};Rs.default=C0});var T0=E(Ps=>{"use strict";Object.defineProperty(Ps,"__esModule",{value:!0});var ky=m0(),A0=S0(),Oy=_0(),ci=()=>{},Fy=new A0.TimeoutError,I0=class extends ky{constructor(e){var r,n,i,s;super();if(this._intervalCount=0,this._intervalEnd=0,this._pendingCount=0,this._resolveEmpty=ci,this._resolveIdle=ci,e=Object.assign({carryoverConcurrencyCount:!1,intervalCap:1/0,interval:0,concurrency:1/0,autoStart:!0,queueClass:Oy.default},e),!(typeof e.intervalCap=="number"&&e.intervalCap>=1))throw new TypeError(`Expected \`intervalCap\` to be a number from 1 and up, got \`${(n=(r=e.intervalCap)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:""}\` (${typeof e.intervalCap})`);if(e.interval===void 0||!(Number.isFinite(e.interval)&&e.interval>=0))throw new TypeError(`Expected \`interval\` to be a finite number >= 0, got \`${(s=(i=e.interval)===null||i===void 0?void 0:i.toString())!==null&&s!==void 0?s:""}\` (${typeof e.interval})`);this._carryoverConcurrencyCount=e.carryoverConcurrencyCount,this._isIntervalIgnored=e.intervalCap===1/0||e.interval===0,this._intervalCap=e.intervalCap,this._interval=e.interval,this._queue=new e.queueClass,this._queueClass=e.queueClass,this.concurrency=e.concurrency,this._timeout=e.timeout,this._throwOnTimeout=e.throwOnTimeout===!0,this._isPaused=e.autoStart===!1}get _doesIntervalAllowAnother(){return this._isIntervalIgnored||this._intervalCount<this._intervalCap}get _doesConcurrentAllowAnother(){return this._pendingCount<this._concurrency}_next(){this._pendingCount--,this._tryToStartAnother(),this.emit("next")}_resolvePromises(){this._resolveEmpty(),this._resolveEmpty=ci,this._pendingCount===0&&(this._resolveIdle(),this._resolveIdle=ci,this.emit("idle"))}_onResumeInterval(){this._onInterval(),this._initializeIntervalIfNeeded(),this._timeoutId=void 0}_isIntervalPaused(){let e=Date.now();if(this._intervalId===void 0){let r=this._intervalEnd-e;if(r<0)this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0;else return this._timeoutId===void 0&&(this._timeoutId=setTimeout(()=>{this._onResumeInterval()},r)),!0}return!1}_tryToStartAnother(){if(this._queue.size===0)return this._intervalId&&clearInterval(this._intervalId),this._intervalId=void 0,this._resolvePromises(),!1;if(!this._isPaused){let e=!this._isIntervalPaused();if(this._doesIntervalAllowAnother&&this._doesConcurrentAllowAnother){let r=this._queue.dequeue();return r?(this.emit("active"),r(),e&&this._initializeIntervalIfNeeded(),!0):!1}}return!1}_initializeIntervalIfNeeded(){this._isIntervalIgnored||this._intervalId!==void 0||(this._intervalId=setInterval(()=>{this._onInterval()},this._interval),this._intervalEnd=Date.now()+this._interval)}_onInterval(){this._intervalCount===0&&this._pendingCount===0&&this._intervalId&&(clearInterval(this._intervalId),this._intervalId=void 0),this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0,this._processQueue()}_processQueue(){for(;this._tryToStartAnother(););}get concurrency(){return this._concurrency}set concurrency(e){if(!(typeof e=="number"&&e>=1))throw new TypeError(`Expected \`concurrency\` to be a number from 1 and up, got \`${e}\` (${typeof e})`);this._concurrency=e,this._processQueue()}async add(e,r={}){return new Promise((n,i)=>{let s=async()=>{this._pendingCount++,this._intervalCount++;try{let o=this._timeout===void 0&&r.timeout===void 0?e():A0.default(Promise.resolve(e()),r.timeout===void 0?this._timeout:r.timeout,()=>{(r.throwOnTimeout===void 0?this._throwOnTimeout:r.throwOnTimeout)&&i(Fy)});n(await o)}catch(o){i(o)}this._next()};this._queue.enqueue(s,r),this._tryToStartAnother(),this.emit("add")})}async addAll(e,r){return Promise.all(e.map(async n=>this.add(n,r)))}start(){return this._isPaused?(this._isPaused=!1,this._processQueue(),this):this}pause(){this._isPaused=!0}clear(){this._queue=new this._queueClass}async onEmpty(){if(this._queue.size!==0)return new Promise(e=>{let r=this._resolveEmpty;this._resolveEmpty=()=>{r(),e()}})}async onIdle(){if(!(this._pendingCount===0&&this._queue.size===0))return new Promise(e=>{let r=this._resolveIdle;this._resolveIdle=()=>{r(),e()}})}get size(){return this._queue.size}sizeBy(e){return this._queue.filter(e).length}get pending(){return this._pendingCount}get isPaused(){return this._isPaused}get timeout(){return this._timeout}set timeout(e){this._timeout=e}};Ps.default=I0});var L0=E((Wb,N0)=>{"use strict";var R0=()=>{},P0=Symbol.for("@libp2p/js-interfaces/topology"),D0=class{constructor({min:e=0,max:r=1/0,handlers:n={}}){this.min=e,this.max=r,this._onConnect=n.onConnect||R0,this._onDisconnect=n.onDisconnect||R0,this.peers=new Set}get[Symbol.toStringTag](){return"Topology"}get[P0](){return!0}static isTopology(e){return Boolean(e&&e[P0])}set registrar(e){this._registrar=e}disconnect(e){this._onDisconnect(e)}};N0.exports=D0});var K0=E(($b,F0)=>{"use strict";var Ky=L0(),k0=Symbol.for("@libp2p/js-interfaces/topology/multicodec-topology"),O0=class extends Ky{constructor({min:e,max:r,multicodecs:n,handlers:i}){super({min:e,max:r,handlers:i});if(!n)throw new Error("one or more multicodec should be provided");if(!i)throw new Error("the handlers should be provided");if(typeof i.onConnect!="function")throw new Error("the 'onConnect' handler must be provided");if(typeof i.onDisconnect!="function")throw new Error("the 'onDisconnect' handler must be provided");this.multicodecs=Array.isArray(n)?n:[n],this._registrar=void 0,this._onProtocolChange=this._onProtocolChange.bind(this),this._onPeerConnect=this._onPeerConnect.bind(this)}get[Symbol.toStringTag](){return"Topology"}get[k0](){return!0}static isMulticodecTopology(e){return Boolean(e&&e[k0])}set registrar(e){this._registrar=e,this._registrar.peerStore.on("change:protocols",this._onProtocolChange),this._registrar.connectionManager.on("peer:connect",this._onPeerConnect),this._updatePeers(this._registrar.peerStore.peers.values())}_updatePeers(e){for(let{id:r,protocols:n}of e)if(this.multicodecs.filter(i=>n.includes(i)).length){this.peers.add(r.toB58String());let i=this._registrar.getConnection(r);i&&this._onConnect(r,i)}else this.peers.delete(r.toB58String())}_onProtocolChange({peerId:e,protocols:r}){let n=this.peers.has(e.toB58String()),i=r.filter(s=>this.multicodecs.includes(s));n&&i.length===0&&this._onDisconnect(e);for(let s of r)if(this.multicodecs.includes(s)){let o=this._registrar.peerStore.get(e);this._updatePeers([o]);return}}_onPeerConnect(e){let r=e.remotePeer,n=this._registrar.peerStore.protoBook.get(r);!n||this.multicodecs.find(i=>n.includes(i))&&(this.peers.add(r.toB58String()),this._onConnect(r,e))}};F0.exports=O0});var q0=E(U0=>{"use strict";U0.codes={ERR_INVALID_SIGNATURE_POLICY:"ERR_INVALID_SIGNATURE_POLICY",ERR_UNHANDLED_SIGNATURE_POLICY:"ERR_UNHANDLED_SIGNATURE_POLICY",ERR_MISSING_SIGNATURE:"ERR_MISSING_SIGNATURE",ERR_MISSING_SEQNO:"ERR_MISSING_SEQNO",ERR_INVALID_SIGNATURE:"ERR_INVALID_SIGNATURE",ERR_UNEXPECTED_FROM:"ERR_UNEXPECTED_FROM",ERR_UNEXPECTED_SIGNATURE:"ERR_UNEXPECTED_SIGNATURE",ERR_UNEXPECTED_KEY:"ERR_UNEXPECTED_KEY",ERR_UNEXPECTED_SEQNO:"ERR_UNEXPECTED_SEQNO"}});var V0=E((Qb,M0)=>{"use strict";M0.exports=Uy;function Uy(t,e){for(var r=new Array(arguments.length-1),n=0,i=2,s=!0;i<arguments.length;)r[n++]=arguments[i++];return new Promise(function(a,u){r[n]=function(f){if(s)if(s=!1,f)u(f);else{for(var h=new Array(arguments.length-1),l=0;l<h.length;)h[l++]=arguments[l];a.apply(null,h)}};try{t.apply(e||null,r)}catch(c){s&&(s=!1,u(c))}})}});var j0=E(G0=>{"use strict";var fi=G0;fi.length=function(e){var r=e.length;if(!r)return 0;for(var n=0;--r%4>1&&e.charAt(r)==="=";)++n;return Math.ceil(e.length*3)/4-n};var Lr=new Array(64),z0=new Array(123);for(Ze=0;Ze<64;)z0[Lr[Ze]=Ze<26?Ze+65:Ze<52?Ze+71:Ze<62?Ze-4:Ze-59|43]=Ze++;var Ze;fi.encode=function(e,r,n){for(var i=null,s=[],o=0,a=0,u;r<n;){var c=e[r++];switch(a){case 0:s[o++]=Lr[c>>2],u=(c&3)<<4,a=1;break;case 1:s[o++]=Lr[u|c>>4],u=(c&15)<<2,a=2;break;case 2:s[o++]=Lr[u|c>>6],s[o++]=Lr[c&63],a=0;break}o>8191&&((i||(i=[])).push(String.fromCharCode.apply(String,s)),o=0)}return a&&(s[o++]=Lr[u],s[o++]=61,a===1&&(s[o++]=61)),i?(o&&i.push(String.fromCharCode.apply(String,s.slice(0,o))),i.join("")):String.fromCharCode.apply(String,s.slice(0,o))};var H0="invalid encoding";fi.decode=function(e,r,n){for(var i=n,s=0,o,a=0;a<e.length;){var u=e.charCodeAt(a++);if(u===61&&s>1)break;if((u=z0[u])===void 0)throw Error(H0);switch(s){case 0:o=u,s=1;break;case 1:r[n++]=o<<2|(u&48)>>4,o=u,s=2;break;case 2:r[n++]=(o&15)<<4|(u&60)>>2,o=u,s=3;break;case 3:r[n++]=(o&3)<<6|u,s=0;break}}if(s===1)throw Error(H0);return n-i};fi.test=function(e){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(e)}});var $0=E((Xb,W0)=>{"use strict";W0.exports=hi;function hi(){this._listeners={}}hi.prototype.on=function(e,r,n){return(this._listeners[e]||(this._listeners[e]=[])).push({fn:r,ctx:n||this}),this};hi.prototype.off=function(e,r){if(e===void 0)this._listeners={};else if(r===void 0)this._listeners[e]=[];else for(var n=this._listeners[e],i=0;i<n.length;)n[i].fn===r?n.splice(i,1):++i;return this};hi.prototype.emit=function(e){var r=this._listeners[e];if(r){for(var n=[],i=1;i<arguments.length;)n.push(arguments[i++]);for(i=0;i<r.length;)r[i].fn.apply(r[i++].ctx,n)}return this}});var tu=E((Jb,eu)=>{"use strict";eu.exports=Y0(Y0);function Y0(t){return typeof Float32Array!="undefined"?function(){var e=new Float32Array([-0]),r=new Uint8Array(e.buffer),n=r[3]===128;function i(u,c,f){e[0]=u,c[f]=r[0],c[f+1]=r[1],c[f+2]=r[2],c[f+3]=r[3]}function s(u,c,f){e[0]=u,c[f]=r[3],c[f+1]=r[2],c[f+2]=r[1],c[f+3]=r[0]}t.writeFloatLE=n?i:s,t.writeFloatBE=n?s:i;function o(u,c){return r[0]=u[c],r[1]=u[c+1],r[2]=u[c+2],r[3]=u[c+3],e[0]}function a(u,c){return r[3]=u[c],r[2]=u[c+1],r[1]=u[c+2],r[0]=u[c+3],e[0]}t.readFloatLE=n?o:a,t.readFloatBE=n?a:o}():function(){function e(n,i,s,o){var a=i<0?1:0;if(a&&(i=-i),i===0)n(1/i>0?0:2147483648,s,o);else if(isNaN(i))n(2143289344,s,o);else if(i>34028234663852886e22)n((a<<31|2139095040)>>>0,s,o);else if(i<11754943508222875e-54)n((a<<31|Math.round(i/1401298464324817e-60))>>>0,s,o);else{var u=Math.floor(Math.log(i)/Math.LN2),c=Math.round(i*Math.pow(2,-u)*8388608)&8388607;n((a<<31|u+127<<23|c)>>>0,s,o)}}t.writeFloatLE=e.bind(null,Q0),t.writeFloatBE=e.bind(null,Z0);function r(n,i,s){var o=n(i,s),a=(o>>31)*2+1,u=o>>>23&255,c=o&8388607;return u===255?c?NaN:a*(1/0):u===0?a*1401298464324817e-60*c:a*Math.pow(2,u-150)*(c+8388608)}t.readFloatLE=r.bind(null,X0),t.readFloatBE=r.bind(null,J0)}(),typeof Float64Array!="undefined"?function(){var e=new Float64Array([-0]),r=new Uint8Array(e.buffer),n=r[7]===128;function i(u,c,f){e[0]=u,c[f]=r[0],c[f+1]=r[1],c[f+2]=r[2],c[f+3]=r[3],c[f+4]=r[4],c[f+5]=r[5],c[f+6]=r[6],c[f+7]=r[7]}function s(u,c,f){e[0]=u,c[f]=r[7],c[f+1]=r[6],c[f+2]=r[5],c[f+3]=r[4],c[f+4]=r[3],c[f+5]=r[2],c[f+6]=r[1],c[f+7]=r[0]}t.writeDoubleLE=n?i:s,t.writeDoubleBE=n?s:i;function o(u,c){return r[0]=u[c],r[1]=u[c+1],r[2]=u[c+2],r[3]=u[c+3],r[4]=u[c+4],r[5]=u[c+5],r[6]=u[c+6],r[7]=u[c+7],e[0]}function a(u,c){return r[7]=u[c],r[6]=u[c+1],r[5]=u[c+2],r[4]=u[c+3],r[3]=u[c+4],r[2]=u[c+5],r[1]=u[c+6],r[0]=u[c+7],e[0]}t.readDoubleLE=n?o:a,t.readDoubleBE=n?a:o}():function(){function e(n,i,s,o,a,u){var c=o<0?1:0;if(c&&(o=-o),o===0)n(0,a,u+i),n(1/o>0?0:2147483648,a,u+s);else if(isNaN(o))n(0,a,u+i),n(2146959360,a,u+s);else if(o>17976931348623157e292)n(0,a,u+i),n((c<<31|2146435072)>>>0,a,u+s);else{var f;if(o<22250738585072014e-324)f=o/5e-324,n(f>>>0,a,u+i),n((c<<31|f/4294967296)>>>0,a,u+s);else{var h=Math.floor(Math.log(o)/Math.LN2);h===1024&&(h=1023),f=o*Math.pow(2,-h),n(f*4503599627370496>>>0,a,u+i),n((c<<31|h+1023<<20|f*1048576&1048575)>>>0,a,u+s)}}}t.writeDoubleLE=e.bind(null,Q0,0,4),t.writeDoubleBE=e.bind(null,Z0,4,0);function r(n,i,s,o,a){var u=n(o,a+i),c=n(o,a+s),f=(c>>31)*2+1,h=c>>>20&2047,l=4294967296*(c&1048575)+u;return h===2047?l?NaN:f*(1/0):h===0?f*5e-324*l:f*Math.pow(2,h-1075)*(l+4503599627370496)}t.readDoubleLE=r.bind(null,X0,0,4),t.readDoubleBE=r.bind(null,J0,4,0)}(),t}function Q0(t,e,r){e[r]=t&255,e[r+1]=t>>>8&255,e[r+2]=t>>>16&255,e[r+3]=t>>>24}function Z0(t,e,r){e[r]=t>>>24,e[r+1]=t>>>16&255,e[r+2]=t>>>8&255,e[r+3]=t&255}function X0(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16|t[e+3]<<24)>>>0}function J0(t,e){return(t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3])>>>0}});var ru=E((exports,module)=>{"use strict";module.exports=inquire;function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(t){}return null}});var iu=E(nu=>{"use strict";var Ds=nu;Ds.length=function(e){for(var r=0,n=0,i=0;i<e.length;++i)n=e.charCodeAt(i),n<128?r+=1:n<2048?r+=2:(n&64512)==55296&&(e.charCodeAt(i+1)&64512)==56320?(++i,r+=4):r+=3;return r};Ds.read=function(e,r,n){var i=n-r;if(i<1)return"";for(var s=null,o=[],a=0,u;r<n;)u=e[r++],u<128?o[a++]=u:u>191&&u<224?o[a++]=(u&31)<<6|e[r++]&63:u>239&&u<365?(u=((u&7)<<18|(e[r++]&63)<<12|(e[r++]&63)<<6|e[r++]&63)-65536,o[a++]=55296+(u>>10),o[a++]=56320+(u&1023)):o[a++]=(u&15)<<12|(e[r++]&63)<<6|e[r++]&63,a>8191&&((s||(s=[])).push(String.fromCharCode.apply(String,o)),a=0);return s?(a&&s.push(String.fromCharCode.apply(String,o.slice(0,a))),s.join("")):String.fromCharCode.apply(String,o.slice(0,a))};Ds.write=function(e,r,n){for(var i=n,s,o,a=0;a<e.length;++a)s=e.charCodeAt(a),s<128?r[n++]=s:s<2048?(r[n++]=s>>6|192,r[n++]=s&63|128):(s&64512)==55296&&((o=e.charCodeAt(a+1))&64512)==56320?(s=65536+((s&1023)<<10)+(o&1023),++a,r[n++]=s>>18|240,r[n++]=s>>12&63|128,r[n++]=s>>6&63|128,r[n++]=s&63|128):(r[n++]=s>>12|224,r[n++]=s>>6&63|128,r[n++]=s&63|128);return n-i}});var ou=E((tw,su)=>{"use strict";su.exports=qy;function qy(t,e,r){var n=r||8192,i=n>>>1,s=null,o=n;return function(u){if(u<1||u>i)return t(u);o+u>n&&(s=t(n),o=0);var c=e.call(s,o,o+=u);return o&7&&(o=(o|7)+1),c}}});var uu=E((rw,au)=>{"use strict";au.exports=xe;var pn=Ut();function xe(t,e){this.lo=t>>>0,this.hi=e>>>0}var sr=xe.zero=new xe(0,0);sr.toNumber=function(){return 0};sr.zzEncode=sr.zzDecode=function(){return this};sr.length=function(){return 1};var My=xe.zeroHash="\0\0\0\0\0\0\0\0";xe.fromNumber=function(e){if(e===0)return sr;var r=e<0;r&&(e=-e);var n=e>>>0,i=(e-n)/4294967296>>>0;return r&&(i=~i>>>0,n=~n>>>0,++n>4294967295&&(n=0,++i>4294967295&&(i=0))),new xe(n,i)};xe.from=function(e){if(typeof e=="number")return xe.fromNumber(e);if(pn.isString(e))if(pn.Long)e=pn.Long.fromString(e);else return xe.fromNumber(parseInt(e,10));return e.low||e.high?new xe(e.low>>>0,e.high>>>0):sr};xe.prototype.toNumber=function(e){if(!e&&this.hi>>>31){var r=~this.lo+1>>>0,n=~this.hi>>>0;return r||(n=n+1>>>0),-(r+n*4294967296)}return this.lo+this.hi*4294967296};xe.prototype.toLong=function(e){return pn.Long?new pn.Long(this.lo|0,this.hi|0,Boolean(e)):{low:this.lo|0,high:this.hi|0,unsigned:Boolean(e)}};var Kt=String.prototype.charCodeAt;xe.fromHash=function(e){return e===My?sr:new xe((Kt.call(e,0)|Kt.call(e,1)<<8|Kt.call(e,2)<<16|Kt.call(e,3)<<24)>>>0,(Kt.call(e,4)|Kt.call(e,5)<<8|Kt.call(e,6)<<16|Kt.call(e,7)<<24)>>>0)};xe.prototype.toHash=function(){return String.fromCharCode(this.lo&255,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,this.hi&255,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)};xe.prototype.zzEncode=function(){var e=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^e)>>>0,this.lo=(this.lo<<1^e)>>>0,this};xe.prototype.zzDecode=function(){var e=-(this.lo&1);return this.lo=((this.lo>>>1|this.hi<<31)^e)>>>0,this.hi=(this.hi>>>1^e)>>>0,this};xe.prototype.length=function(){var e=this.lo,r=(this.lo>>>28|this.hi<<4)>>>0,n=this.hi>>>24;return n===0?r===0?e<16384?e<128?1:2:e<2097152?3:4:r<16384?r<128?5:6:r<2097152?7:8:n<128?9:10}});var Ut=E(Ns=>{"use strict";var N=Ns;N.asPromise=V0();N.base64=j0();N.EventEmitter=$0();N.float=tu();N.inquire=ru();N.utf8=iu();N.pool=ou();N.LongBits=uu();N.isNode=Boolean(typeof globalThis!="undefined"&&globalThis&&globalThis.process&&globalThis.process.versions&&globalThis.process.versions.node);N.global=N.isNode&&globalThis||typeof window!="undefined"&&window||typeof self!="undefined"&&self||Ns;N.emptyArray=Object.freeze?Object.freeze([]):[];N.emptyObject=Object.freeze?Object.freeze({}):{};N.isInteger=Number.isInteger||function(e){return typeof e=="number"&&isFinite(e)&&Math.floor(e)===e};N.isString=function(e){return typeof e=="string"||e instanceof String};N.isObject=function(e){return e&&typeof e=="object"};N.isset=N.isSet=function(e,r){var n=e[r];return n!=null&&e.hasOwnProperty(r)?typeof n!="object"||(Array.isArray(n)?n.length:Object.keys(n).length)>0:!1};N.Buffer=function(){try{var t=N.inquire("buffer").Buffer;return t.prototype.utf8Write?t:null}catch(e){return null}}();N._Buffer_from=null;N._Buffer_allocUnsafe=null;N.newBuffer=function(e){return typeof e=="number"?N.Buffer?N._Buffer_allocUnsafe(e):new N.Array(e):N.Buffer?N._Buffer_from(e):typeof Uint8Array=="undefined"?e:new Uint8Array(e)};N.Array=typeof Uint8Array!="undefined"?Uint8Array:Array;N.Long=N.global.dcodeIO&&N.global.dcodeIO.Long||N.global.Long||N.inquire("long");N.key2Re=/^true|false|0|1$/;N.key32Re=/^-?(?:0|[1-9][0-9]*)$/;N.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/;N.longToHash=function(e){return e?N.LongBits.from(e).toHash():N.LongBits.zeroHash};N.longFromHash=function(e,r){var n=N.LongBits.fromHash(e);return N.Long?N.Long.fromBits(n.lo,n.hi,r):n.toNumber(Boolean(r))};function cu(t,e,r){for(var n=Object.keys(e),i=0;i<n.length;++i)(t[n[i]]===void 0||!r)&&(t[n[i]]=e[n[i]]);return t}N.merge=cu;N.lcFirst=function(e){return e.charAt(0).toLowerCase()+e.substring(1)};function fu(t){function e(r,n){if(!(this instanceof e))return new e(r,n);Object.defineProperty(this,"message",{get:function(){return r}}),Error.captureStackTrace?Error.captureStackTrace(this,e):Object.defineProperty(this,"stack",{value:new Error().stack||""}),n&&cu(this,n)}return(e.prototype=Object.create(Error.prototype)).constructor=e,Object.defineProperty(e.prototype,"name",{get:function(){return t}}),e.prototype.toString=function(){return this.name+": "+this.message},e}N.newError=fu;N.ProtocolError=fu("ProtocolError");N.oneOfGetter=function(e){for(var r={},n=0;n<e.length;++n)r[e[n]]=1;return function(){for(var i=Object.keys(this),s=i.length-1;s>-1;--s)if(r[i[s]]===1&&this[i[s]]!==void 0&&this[i[s]]!==null)return i[s]}};N.oneOfSetter=function(e){return function(r){for(var n=0;n<e.length;++n)e[n]!==r&&delete this[e[n]]}};N.toJSONOptions={longs:String,enums:String,bytes:String,json:!0};N._configure=function(){var t=N.Buffer;if(!t){N._Buffer_from=N._Buffer_allocUnsafe=null;return}N._Buffer_from=t.from!==Uint8Array.from&&t.from||function(r,n){return new t(r,n)},N._Buffer_allocUnsafe=t.allocUnsafe||function(r){return new t(r)}}});var qs=E((iw,du)=>{"use strict";du.exports=H;var Me=Ut(),Ls,li=Me.LongBits,hu=Me.base64,lu=Me.utf8;function dn(t,e,r){this.fn=t,this.len=e,this.next=void 0,this.val=r}function ks(){}function Vy(t){this.head=t.head,this.tail=t.tail,this.len=t.len,this.next=t.states}function H(){this.len=0,this.head=new dn(ks,0,0),this.tail=this.head,this.states=null}var pu=function(){return Me.Buffer?function(){return(H.create=function(){return new Ls})()}:function(){return new H}};H.create=pu();H.alloc=function(e){return new Me.Array(e)};Me.Array!==Array&&(H.alloc=Me.pool(H.alloc,Me.Array.prototype.subarray));H.prototype._push=function(e,r,n){return this.tail=this.tail.next=new dn(e,r,n),this.len+=r,this};function Os(t,e,r){e[r]=t&255}function zy(t,e,r){for(;t>127;)e[r++]=t&127|128,t>>>=7;e[r]=t}function Fs(t,e){this.len=t,this.next=void 0,this.val=e}Fs.prototype=Object.create(dn.prototype);Fs.prototype.fn=zy;H.prototype.uint32=function(e){return this.len+=(this.tail=this.tail.next=new Fs((e=e>>>0)<128?1:e<16384?2:e<2097152?3:e<268435456?4:5,e)).len,this};H.prototype.int32=function(e){return e<0?this._push(Ks,10,li.fromNumber(e)):this.uint32(e)};H.prototype.sint32=function(e){return this.uint32((e<<1^e>>31)>>>0)};function Ks(t,e,r){for(;t.hi;)e[r++]=t.lo&127|128,t.lo=(t.lo>>>7|t.hi<<25)>>>0,t.hi>>>=7;for(;t.lo>127;)e[r++]=t.lo&127|128,t.lo=t.lo>>>7;e[r++]=t.lo}H.prototype.uint64=function(e){var r=li.from(e);return this._push(Ks,r.length(),r)};H.prototype.int64=H.prototype.uint64;H.prototype.sint64=function(e){var r=li.from(e).zzEncode();return this._push(Ks,r.length(),r)};H.prototype.bool=function(e){return this._push(Os,1,e?1:0)};function Us(t,e,r){e[r]=t&255,e[r+1]=t>>>8&255,e[r+2]=t>>>16&255,e[r+3]=t>>>24}H.prototype.fixed32=function(e){return this._push(Us,4,e>>>0)};H.prototype.sfixed32=H.prototype.fixed32;H.prototype.fixed64=function(e){var r=li.from(e);return this._push(Us,4,r.lo)._push(Us,4,r.hi)};H.prototype.sfixed64=H.prototype.fixed64;H.prototype.float=function(e){return this._push(Me.float.writeFloatLE,4,e)};H.prototype.double=function(e){return this._push(Me.float.writeDoubleLE,8,e)};var Hy=Me.Array.prototype.set?function(e,r,n){r.set(e,n)}:function(e,r,n){for(var i=0;i<e.length;++i)r[n+i]=e[i]};H.prototype.bytes=function(e){var r=e.length>>>0;if(!r)return this._push(Os,1,0);if(Me.isString(e)){var n=H.alloc(r=hu.length(e));hu.decode(e,n,0),e=n}return this.uint32(r)._push(Hy,r,e)};H.prototype.string=function(e){var r=lu.length(e);return r?this.uint32(r)._push(lu.write,r,e):this._push(Os,1,0)};H.prototype.fork=function(){return this.states=new Vy(this),this.head=this.tail=new dn(ks,0,0),this.len=0,this};H.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new dn(ks,0,0),this.len=0),this};H.prototype.ldelim=function(){var e=this.head,r=this.tail,n=this.len;return this.reset().uint32(n),n&&(this.tail.next=e.next,this.tail=r,this.len+=n),this};H.prototype.finish=function(){for(var e=this.head.next,r=this.constructor.alloc(this.len),n=0;e;)e.fn(e.val,r,n),n+=e.len,e=e.next;return r};H._configure=function(t){Ls=t,H.create=pu(),Ls._configure()}});var xu=E((sw,gu)=>{"use strict";gu.exports=at;var yu=qs();(at.prototype=Object.create(yu.prototype)).constructor=at;var qt=Ut();function at(){yu.call(this)}at._configure=function(){at.alloc=qt._Buffer_allocUnsafe,at.writeBytesBuffer=qt.Buffer&&qt.Buffer.prototype instanceof Uint8Array&&qt.Buffer.prototype.set.name==="set"?function(e,r,n){r.set(e,n)}:function(e,r,n){if(e.copy)e.copy(r,n,0,e.length);else for(var i=0;i<e.length;)r[n++]=e[i++]}};at.prototype.bytes=function(e){qt.isString(e)&&(e=qt._Buffer_from(e,"base64"));var r=e.length>>>0;return this.uint32(r),r&&this._push(at.writeBytesBuffer,r,e),this};function Gy(t,e,r){t.length<40?qt.utf8.write(t,e,r):e.utf8Write?e.utf8Write(t,r):e.write(t,r)}at.prototype.string=function(e){var r=qt.Buffer.byteLength(e);return this.uint32(r),r&&this._push(Gy,r,e),this};at._configure()});var zs=E((ow,Eu)=>{"use strict";Eu.exports=he;var ut=Ut(),Ms,vu=ut.LongBits,jy=ut.utf8;function Xe(t,e){return RangeError("index out of range: "+t.pos+" + "+(e||1)+" > "+t.len)}function he(t){this.buf=t,this.pos=0,this.len=t.length}var mu=typeof Uint8Array!="undefined"?function(e){if(e instanceof Uint8Array||Array.isArray(e))return new he(e);throw Error("illegal buffer")}:function(e){if(Array.isArray(e))return new he(e);throw Error("illegal buffer")},bu=function(){return ut.Buffer?function(r){return(he.create=function(i){return ut.Buffer.isBuffer(i)?new Ms(i):mu(i)})(r)}:mu};he.create=bu();he.prototype._slice=ut.Array.prototype.subarray||ut.Array.prototype.slice;he.prototype.uint32=function(){var e=4294967295;return function(){if(e=(this.buf[this.pos]&127)>>>0,this.buf[this.pos++]<128||(e=(e|(this.buf[this.pos]&127)<<7)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&127)<<14)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&127)<<21)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&15)<<28)>>>0,this.buf[this.pos++]<128))return e;if((this.pos+=5)>this.len)throw this.pos=this.len,Xe(this,10);return e}}();he.prototype.int32=function(){return this.uint32()|0};he.prototype.sint32=function(){var e=this.uint32();return e>>>1^-(e&1)|0};function Vs(){var t=new vu(0,0),e=0;if(this.len-this.pos>4){for(;e<4;++e)if(t.lo=(t.lo|(this.buf[this.pos]&127)<<e*7)>>>0,this.buf[this.pos++]<128)return t;if(t.lo=(t.lo|(this.buf[this.pos]&127)<<28)>>>0,t.hi=(t.hi|(this.buf[this.pos]&127)>>4)>>>0,this.buf[this.pos++]<128)return t;e=0}else{for(;e<3;++e){if(this.pos>=this.len)throw Xe(this);if(t.lo=(t.lo|(this.buf[this.pos]&127)<<e*7)>>>0,this.buf[this.pos++]<128)return t}return t.lo=(t.lo|(this.buf[this.pos++]&127)<<e*7)>>>0,t}if(this.len-this.pos>4){for(;e<5;++e)if(t.hi=(t.hi|(this.buf[this.pos]&127)<<e*7+3)>>>0,this.buf[this.pos++]<128)return t}else for(;e<5;++e){if(this.pos>=this.len)throw Xe(this);if(t.hi=(t.hi|(this.buf[this.pos]&127)<<e*7+3)>>>0,this.buf[this.pos++]<128)return t}throw Error("invalid varint encoding")}he.prototype.bool=function(){return this.uint32()!==0};function pi(t,e){return(t[e-4]|t[e-3]<<8|t[e-2]<<16|t[e-1]<<24)>>>0}he.prototype.fixed32=function(){if(this.pos+4>this.len)throw Xe(this,4);return pi(this.buf,this.pos+=4)};he.prototype.sfixed32=function(){if(this.pos+4>this.len)throw Xe(this,4);return pi(this.buf,this.pos+=4)|0};function wu(){if(this.pos+8>this.len)throw Xe(this,8);return new vu(pi(this.buf,this.pos+=4),pi(this.buf,this.pos+=4))}he.prototype.float=function(){if(this.pos+4>this.len)throw Xe(this,4);var e=ut.float.readFloatLE(this.buf,this.pos);return this.pos+=4,e};he.prototype.double=function(){if(this.pos+8>this.len)throw Xe(this,4);var e=ut.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,e};he.prototype.bytes=function(){var e=this.uint32(),r=this.pos,n=this.pos+e;if(n>this.len)throw Xe(this,e);return this.pos+=e,Array.isArray(this.buf)?this.buf.slice(r,n):r===n?new this.buf.constructor(0):this._slice.call(this.buf,r,n)};he.prototype.string=function(){var e=this.bytes();return jy.read(e,0,e.length)};he.prototype.skip=function(e){if(typeof e=="number"){if(this.pos+e>this.len)throw Xe(this,e);this.pos+=e}else do if(this.pos>=this.len)throw Xe(this);while(this.buf[this.pos++]&128);return this};he.prototype.skipType=function(t){switch(t){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(t=this.uint32()&7)!=4;)this.skipType(t);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+t+" at offset "+this.pos)}return this};he._configure=function(t){Ms=t,he.create=bu(),Ms._configure();var e=ut.Long?"toLong":"toNumber";ut.merge(he.prototype,{int64:function(){return Vs.call(this)[e](!1)},uint64:function(){return Vs.call(this)[e](!0)},sint64:function(){return Vs.call(this).zzDecode()[e](!1)},fixed64:function(){return wu.call(this)[e](!0)},sfixed64:function(){return wu.call(this)[e](!1)}})}});var _u=E((aw,Cu)=>{"use strict";Cu.exports=or;var Su=zs();(or.prototype=Object.create(Su.prototype)).constructor=or;var Bu=Ut();function or(t){Su.call(this,t)}or._configure=function(){Bu.Buffer&&(or.prototype._slice=Bu.Buffer.prototype.slice)};or.prototype.string=function(){var e=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+e,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+e,this.len))};or._configure()});var Iu=E((uw,Au)=>{"use strict";Au.exports=yn;var Hs=Ut();(yn.prototype=Object.create(Hs.EventEmitter.prototype)).constructor=yn;function yn(t,e,r){if(typeof t!="function")throw TypeError("rpcImpl must be a function");Hs.EventEmitter.call(this),this.rpcImpl=t,this.requestDelimited=Boolean(e),this.responseDelimited=Boolean(r)}yn.prototype.rpcCall=function t(e,r,n,i,s){if(!i)throw TypeError("request must be specified");var o=this;if(!s)return Hs.asPromise(t,o,e,r,n,i);if(!o.rpcImpl){setTimeout(function(){s(Error("already ended"))},0);return}try{return o.rpcImpl(e,r[o.requestDelimited?"encodeDelimited":"encode"](i).finish(),function(u,c){if(u)return o.emit("error",u,e),s(u);if(c===null){o.end(!0);return}if(!(c instanceof n))try{c=n[o.responseDelimited?"decodeDelimited":"decode"](c)}catch(f){return o.emit("error",f,e),s(f)}return o.emit("data",c,e),s(null,c)})}catch(a){o.emit("error",a,e),setTimeout(function(){s(a)},0);return}};yn.prototype.end=function(e){return this.rpcImpl&&(e||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}});var Ru=E(Tu=>{"use strict";var Wy=Tu;Wy.Service=Iu()});var Du=E((fw,Pu)=>{"use strict";Pu.exports={}});var ku=E(Lu=>{"use strict";var Ne=Lu;Ne.build="minimal";Ne.Writer=qs();Ne.BufferWriter=xu();Ne.Reader=zs();Ne.BufferReader=_u();Ne.util=Ut();Ne.rpc=Ru();Ne.roots=Du();Ne.configure=Nu;function Nu(){Ne.util._configure(),Ne.Writer._configure(Ne.BufferWriter),Ne.Reader._configure(Ne.BufferReader)}Nu()});var di=E((lw,Ou)=>{"use strict";Ou.exports=ku()});var js=E((pw,Fu)=>{"use strict";var Mt=di(),kr=Mt.Reader,Gs=Mt.Writer,M=Mt.util,ye=Mt.roots["libp2p-pubsub-rpc"]||(Mt.roots["libp2p-pubsub-rpc"]={});ye.RPC=function(){function t(e){if(this.subscriptions=[],this.msgs=[],e)for(var r=Object.keys(e),n=0;n<r.length;++n)e[r[n]]!=null&&(this[r[n]]=e[r[n]])}return t.prototype.subscriptions=M.emptyArray,t.prototype.msgs=M.emptyArray,t.encode=function(r,n){if(n||(n=Gs.create()),r.subscriptions!=null&&r.subscriptions.length)for(var i=0;i<r.subscriptions.length;++i)ye.RPC.SubOpts.encode(r.subscriptions[i],n.uint32(10).fork()).ldelim();if(r.msgs!=null&&r.msgs.length)for(var i=0;i<r.msgs.length;++i)ye.RPC.Message.encode(r.msgs[i],n.uint32(18).fork()).ldelim();return n},t.decode=function(r,n){r instanceof kr||(r=kr.create(r));for(var i=n===void 0?r.len:r.pos+n,s=new ye.RPC;r.pos<i;){var o=r.uint32();switch(o>>>3){case 1:s.subscriptions&&s.subscriptions.length||(s.subscriptions=[]),s.subscriptions.push(ye.RPC.SubOpts.decode(r,r.uint32()));break;case 2:s.msgs&&s.msgs.length||(s.msgs=[]),s.msgs.push(ye.RPC.Message.decode(r,r.uint32()));break;default:r.skipType(o&7);break}}return s},t.fromObject=function(r){if(r instanceof ye.RPC)return r;var n=new ye.RPC;if(r.subscriptions){if(!Array.isArray(r.subscriptions))throw TypeError(".RPC.subscriptions: array expected");n.subscriptions=[];for(var i=0;i<r.subscriptions.length;++i){if(typeof r.subscriptions[i]!="object")throw TypeError(".RPC.subscriptions: object expected");n.subscriptions[i]=ye.RPC.SubOpts.fromObject(r.subscriptions[i])}}if(r.msgs){if(!Array.isArray(r.msgs))throw TypeError(".RPC.msgs: array expected");n.msgs=[];for(var i=0;i<r.msgs.length;++i){if(typeof r.msgs[i]!="object")throw TypeError(".RPC.msgs: object expected");n.msgs[i]=ye.RPC.Message.fromObject(r.msgs[i])}}return n},t.toObject=function(r,n){n||(n={});var i={};if((n.arrays||n.defaults)&&(i.subscriptions=[],i.msgs=[]),r.subscriptions&&r.subscriptions.length){i.subscriptions=[];for(var s=0;s<r.subscriptions.length;++s)i.subscriptions[s]=ye.RPC.SubOpts.toObject(r.subscriptions[s],n)}if(r.msgs&&r.msgs.length){i.msgs=[];for(var s=0;s<r.msgs.length;++s)i.msgs[s]=ye.RPC.Message.toObject(r.msgs[s],n)}return i},t.prototype.toJSON=function(){return this.constructor.toObject(this,Mt.util.toJSONOptions)},t.SubOpts=function(){function e(n){if(n)for(var i=Object.keys(n),s=0;s<i.length;++s)n[i[s]]!=null&&(this[i[s]]=n[i[s]])}e.prototype.subscribe=null,e.prototype.topicID=null;var r;return Object.defineProperty(e.prototype,"_subscribe",{get:M.oneOfGetter(r=["subscribe"]),set:M.oneOfSetter(r)}),Object.defineProperty(e.prototype,"_topicID",{get:M.oneOfGetter(r=["topicID"]),set:M.oneOfSetter(r)}),e.encode=function(i,s){return s||(s=Gs.create()),i.subscribe!=null&&Object.hasOwnProperty.call(i,"subscribe")&&s.uint32(8).bool(i.subscribe),i.topicID!=null&&Object.hasOwnProperty.call(i,"topicID")&&s.uint32(18).string(i.topicID),s},e.decode=function(i,s){i instanceof kr||(i=kr.create(i));for(var o=s===void 0?i.len:i.pos+s,a=new ye.RPC.SubOpts;i.pos<o;){var u=i.uint32();switch(u>>>3){case 1:a.subscribe=i.bool();break;case 2:a.topicID=i.string();break;default:i.skipType(u&7);break}}return a},e.fromObject=function(i){if(i instanceof ye.RPC.SubOpts)return i;var s=new ye.RPC.SubOpts;return i.subscribe!=null&&(s.subscribe=Boolean(i.subscribe)),i.topicID!=null&&(s.topicID=String(i.topicID)),s},e.toObject=function(i,s){s||(s={});var o={};return i.subscribe!=null&&i.hasOwnProperty("subscribe")&&(o.subscribe=i.subscribe,s.oneofs&&(o._subscribe="subscribe")),i.topicID!=null&&i.hasOwnProperty("topicID")&&(o.topicID=i.topicID,s.oneofs&&(o._topicID="topicID")),o},e.prototype.toJSON=function(){return this.constructor.toObject(this,Mt.util.toJSONOptions)},e}(),t.Message=function(){function e(n){if(this.topicIDs=[],n)for(var i=Object.keys(n),s=0;s<i.length;++s)n[i[s]]!=null&&(this[i[s]]=n[i[s]])}e.prototype.from=null,e.prototype.data=null,e.prototype.seqno=null,e.prototype.topicIDs=M.emptyArray,e.prototype.signature=null,e.prototype.key=null;var r;return Object.defineProperty(e.prototype,"_from",{get:M.oneOfGetter(r=["from"]),set:M.oneOfSetter(r)}),Object.defineProperty(e.prototype,"_data",{get:M.oneOfGetter(r=["data"]),set:M.oneOfSetter(r)}),Object.defineProperty(e.prototype,"_seqno",{get:M.oneOfGetter(r=["seqno"]),set:M.oneOfSetter(r)}),Object.defineProperty(e.prototype,"_signature",{get:M.oneOfGetter(r=["signature"]),set:M.oneOfSetter(r)}),Object.defineProperty(e.prototype,"_key",{get:M.oneOfGetter(r=["key"]),set:M.oneOfSetter(r)}),e.encode=function(i,s){if(s||(s=Gs.create()),i.from!=null&&Object.hasOwnProperty.call(i,"from")&&s.uint32(10).bytes(i.from),i.data!=null&&Object.hasOwnProperty.call(i,"data")&&s.uint32(18).bytes(i.data),i.seqno!=null&&Object.hasOwnProperty.call(i,"seqno")&&s.uint32(26).bytes(i.seqno),i.topicIDs!=null&&i.topicIDs.length)for(var o=0;o<i.topicIDs.length;++o)s.uint32(34).string(i.topicIDs[o]);return i.signature!=null&&Object.hasOwnProperty.call(i,"signature")&&s.uint32(42).bytes(i.signature),i.key!=null&&Object.hasOwnProperty.call(i,"key")&&s.uint32(50).bytes(i.key),s},e.decode=function(i,s){i instanceof kr||(i=kr.create(i));for(var o=s===void 0?i.len:i.pos+s,a=new ye.RPC.Message;i.pos<o;){var u=i.uint32();switch(u>>>3){case 1:a.from=i.bytes();break;case 2:a.data=i.bytes();break;case 3:a.seqno=i.bytes();break;case 4:a.topicIDs&&a.topicIDs.length||(a.topicIDs=[]),a.topicIDs.push(i.string());break;case 5:a.signature=i.bytes();break;case 6:a.key=i.bytes();break;default:i.skipType(u&7);break}}return a},e.fromObject=function(i){if(i instanceof ye.RPC.Message)return i;var s=new ye.RPC.Message;if(i.from!=null&&(typeof i.from=="string"?M.base64.decode(i.from,s.from=M.newBuffer(M.base64.length(i.from)),0):i.from.length&&(s.from=i.from)),i.data!=null&&(typeof i.data=="string"?M.base64.decode(i.data,s.data=M.newBuffer(M.base64.length(i.data)),0):i.data.length&&(s.data=i.data)),i.seqno!=null&&(typeof i.seqno=="string"?M.base64.decode(i.seqno,s.seqno=M.newBuffer(M.base64.length(i.seqno)),0):i.seqno.length&&(s.seqno=i.seqno)),i.topicIDs){if(!Array.isArray(i.topicIDs))throw TypeError(".RPC.Message.topicIDs: array expected");s.topicIDs=[];for(var o=0;o<i.topicIDs.length;++o)s.topicIDs[o]=String(i.topicIDs[o])}return i.signature!=null&&(typeof i.signature=="string"?M.base64.decode(i.signature,s.signature=M.newBuffer(M.base64.length(i.signature)),0):i.signature.length&&(s.signature=i.signature)),i.key!=null&&(typeof i.key=="string"?M.base64.decode(i.key,s.key=M.newBuffer(M.base64.length(i.key)),0):i.key.length&&(s.key=i.key)),s},e.toObject=function(i,s){s||(s={});var o={};if((s.arrays||s.defaults)&&(o.topicIDs=[]),i.from!=null&&i.hasOwnProperty("from")&&(o.from=s.bytes===String?M.base64.encode(i.from,0,i.from.length):s.bytes===Array?Array.prototype.slice.call(i.from):i.from,s.oneofs&&(o._from="from")),i.data!=null&&i.hasOwnProperty("data")&&(o.data=s.bytes===String?M.base64.encode(i.data,0,i.data.length):s.bytes===Array?Array.prototype.slice.call(i.data):i.data,s.oneofs&&(o._data="data")),i.seqno!=null&&i.hasOwnProperty("seqno")&&(o.seqno=s.bytes===String?M.base64.encode(i.seqno,0,i.seqno.length):s.bytes===Array?Array.prototype.slice.call(i.seqno):i.seqno,s.oneofs&&(o._seqno="seqno")),i.topicIDs&&i.topicIDs.length){o.topicIDs=[];for(var a=0;a<i.topicIDs.length;++a)o.topicIDs[a]=i.topicIDs[a]}return i.signature!=null&&i.hasOwnProperty("signature")&&(o.signature=s.bytes===String?M.base64.encode(i.signature,0,i.signature.length):s.bytes===Array?Array.prototype.slice.call(i.signature):i.signature,s.oneofs&&(o._signature="signature")),i.key!=null&&i.hasOwnProperty("key")&&(o.key=s.bytes===String?M.base64.encode(i.key,0,i.key.length):s.bytes===Array?Array.prototype.slice.call(i.key):i.key,s.oneofs&&(o._key="key")),o},e.prototype.toJSON=function(){return this.constructor.toObject(this,Mt.util.toJSONOptions)},e}(),t}();Fu.exports=ye});var qu=E(yi=>{"use strict";yi.byteLength=Yy;yi.toByteArray=Zy;yi.fromByteArray=e1;var ct=[],Ve=[],$y=typeof Uint8Array!="undefined"?Uint8Array:Array,Ws="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(ar=0,Ku=Ws.length;ar<Ku;++ar)ct[ar]=Ws[ar],Ve[Ws.charCodeAt(ar)]=ar;var ar,Ku;Ve["-".charCodeAt(0)]=62;Ve["_".charCodeAt(0)]=63;function Uu(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=t.indexOf("=");r===-1&&(r=e);var n=r===e?0:4-r%4;return[r,n]}function Yy(t){var e=Uu(t),r=e[0],n=e[1];return(r+n)*3/4-n}function Qy(t,e,r){return(e+r)*3/4-r}function Zy(t){var e,r=Uu(t),n=r[0],i=r[1],s=new $y(Qy(t,n,i)),o=0,a=i>0?n-4:n,u;for(u=0;u<a;u+=4)e=Ve[t.charCodeAt(u)]<<18|Ve[t.charCodeAt(u+1)]<<12|Ve[t.charCodeAt(u+2)]<<6|Ve[t.charCodeAt(u+3)],s[o++]=e>>16&255,s[o++]=e>>8&255,s[o++]=e&255;return i===2&&(e=Ve[t.charCodeAt(u)]<<2|Ve[t.charCodeAt(u+1)]>>4,s[o++]=e&255),i===1&&(e=Ve[t.charCodeAt(u)]<<10|Ve[t.charCodeAt(u+1)]<<4|Ve[t.charCodeAt(u+2)]>>2,s[o++]=e>>8&255,s[o++]=e&255),s}function Xy(t){return ct[t>>18&63]+ct[t>>12&63]+ct[t>>6&63]+ct[t&63]}function Jy(t,e,r){for(var n,i=[],s=e;s<r;s+=3)n=(t[s]<<16&16711680)+(t[s+1]<<8&65280)+(t[s+2]&255),i.push(Xy(n));return i.join("")}function e1(t){for(var e,r=t.length,n=r%3,i=[],s=16383,o=0,a=r-n;o<a;o+=s)i.push(Jy(t,o,o+s>a?a:o+s));return n===1?(e=t[r-1],i.push(ct[e>>2]+ct[e<<4&63]+"==")):n===2&&(e=(t[r-2]<<8)+t[r-1],i.push(ct[e>>10]+ct[e>>4&63]+ct[e<<2&63]+"=")),i.join("")}});var Mu=E($s=>{$s.read=function(t,e,r,n,i){var s,o,a=i*8-n-1,u=(1<<a)-1,c=u>>1,f=-7,h=r?i-1:0,l=r?-1:1,d=t[e+h];for(h+=l,s=d&(1<<-f)-1,d>>=-f,f+=a;f>0;s=s*256+t[e+h],h+=l,f-=8);for(o=s&(1<<-f)-1,s>>=-f,f+=n;f>0;o=o*256+t[e+h],h+=l,f-=8);if(s===0)s=1-c;else{if(s===u)return o?NaN:(d?-1:1)*(1/0);o=o+Math.pow(2,n),s=s-c}return(d?-1:1)*o*Math.pow(2,s-n)};$s.write=function(t,e,r,n,i,s){var o,a,u,c=s*8-i-1,f=(1<<c)-1,h=f>>1,l=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,d=n?0:s-1,p=n?1:-1,g=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,o=f):(o=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-o))<1&&(o--,u*=2),o+h>=1?e+=l/u:e+=l*Math.pow(2,1-h),e*u>=2&&(o++,u/=2),o+h>=f?(a=0,o=f):o+h>=1?(a=(e*u-1)*Math.pow(2,i),o=o+h):(a=e*Math.pow(2,h-1)*Math.pow(2,i),o=0));i>=8;t[r+d]=a&255,d+=p,a/=256,i-=8);for(o=o<<i|a,c+=i;c>0;t[r+d]=o&255,d+=p,o/=256,c-=8);t[r+d-p]|=g*128}});var cr=E(Ur=>{"use strict";var Ys=qu(),Or=Mu(),Vu=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;Ur.Buffer=b;Ur.SlowBuffer=o1;Ur.INSPECT_MAX_BYTES=50;var gi=2147483647;Ur.kMaxLength=gi;b.TYPED_ARRAY_SUPPORT=t1();!b.TYPED_ARRAY_SUPPORT&&typeof console!="undefined"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function t1(){try{let t=new Uint8Array(1),e={foo:function(){return 42}};return Object.setPrototypeOf(e,Uint8Array.prototype),Object.setPrototypeOf(t,e),t.foo()===42}catch(t){return!1}}Object.defineProperty(b.prototype,"parent",{enumerable:!0,get:function(){if(!!b.isBuffer(this))return this.buffer}});Object.defineProperty(b.prototype,"offset",{enumerable:!0,get:function(){if(!!b.isBuffer(this))return this.byteOffset}});function _t(t){if(t>gi)throw new RangeError('The value "'+t+'" is invalid for option "size"');let e=new Uint8Array(t);return Object.setPrototypeOf(e,b.prototype),e}function b(t,e,r){if(typeof t=="number"){if(typeof e=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return Qs(t)}return zu(t,e,r)}b.poolSize=8192;function zu(t,e,r){if(typeof t=="string")return n1(t,e);if(ArrayBuffer.isView(t))return i1(t);if(t==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);if(ft(t,ArrayBuffer)||t&&ft(t.buffer,ArrayBuffer)||typeof SharedArrayBuffer!="undefined"&&(ft(t,SharedArrayBuffer)||t&&ft(t.buffer,SharedArrayBuffer)))return Xs(t,e,r);if(typeof t=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');let n=t.valueOf&&t.valueOf();if(n!=null&&n!==t)return b.from(n,e,r);let i=s1(t);if(i)return i;if(typeof Symbol!="undefined"&&Symbol.toPrimitive!=null&&typeof t[Symbol.toPrimitive]=="function")return b.from(t[Symbol.toPrimitive]("string"),e,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t)}b.from=function(t,e,r){return zu(t,e,r)};Object.setPrototypeOf(b.prototype,Uint8Array.prototype);Object.setPrototypeOf(b,Uint8Array);function Hu(t){if(typeof t!="number")throw new TypeError('"size" argument must be of type number');if(t<0)throw new RangeError('The value "'+t+'" is invalid for option "size"')}function r1(t,e,r){return Hu(t),t<=0?_t(t):e!==void 0?typeof r=="string"?_t(t).fill(e,r):_t(t).fill(e):_t(t)}b.alloc=function(t,e,r){return r1(t,e,r)};function Qs(t){return Hu(t),_t(t<0?0:Js(t)|0)}b.allocUnsafe=function(t){return Qs(t)};b.allocUnsafeSlow=function(t){return Qs(t)};function n1(t,e){if((typeof e!="string"||e==="")&&(e="utf8"),!b.isEncoding(e))throw new TypeError("Unknown encoding: "+e);let r=Gu(t,e)|0,n=_t(r),i=n.write(t,e);return i!==r&&(n=n.slice(0,i)),n}function Zs(t){let e=t.length<0?0:Js(t.length)|0,r=_t(e);for(let n=0;n<e;n+=1)r[n]=t[n]&255;return r}function i1(t){if(ft(t,Uint8Array)){let e=new Uint8Array(t);return Xs(e.buffer,e.byteOffset,e.byteLength)}return Zs(t)}function Xs(t,e,r){if(e<0||t.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(t.byteLength<e+(r||0))throw new RangeError('"length" is outside of buffer bounds');let n;return e===void 0&&r===void 0?n=new Uint8Array(t):r===void 0?n=new Uint8Array(t,e):n=new Uint8Array(t,e,r),Object.setPrototypeOf(n,b.prototype),n}function s1(t){if(b.isBuffer(t)){let e=Js(t.length)|0,r=_t(e);return r.length===0||t.copy(r,0,0,e),r}if(t.length!==void 0)return typeof t.length!="number"||ro(t.length)?_t(0):Zs(t);if(t.type==="Buffer"&&Array.isArray(t.data))return Zs(t.data)}function Js(t){if(t>=gi)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+gi.toString(16)+" bytes");return t|0}function o1(t){return+t!=t&&(t=0),b.alloc(+t)}b.isBuffer=function(e){return e!=null&&e._isBuffer===!0&&e!==b.prototype};b.compare=function(e,r){if(ft(e,Uint8Array)&&(e=b.from(e,e.offset,e.byteLength)),ft(r,Uint8Array)&&(r=b.from(r,r.offset,r.byteLength)),!b.isBuffer(e)||!b.isBuffer(r))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===r)return 0;let n=e.length,i=r.length;for(let s=0,o=Math.min(n,i);s<o;++s)if(e[s]!==r[s]){n=e[s],i=r[s];break}return n<i?-1:i<n?1:0};b.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}};b.concat=function(e,r){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(e.length===0)return b.alloc(0);let n;if(r===void 0)for(r=0,n=0;n<e.length;++n)r+=e[n].length;let i=b.allocUnsafe(r),s=0;for(n=0;n<e.length;++n){let o=e[n];if(ft(o,Uint8Array))s+o.length>i.length?(b.isBuffer(o)||(o=b.from(o)),o.copy(i,s)):Uint8Array.prototype.set.call(i,o,s);else if(b.isBuffer(o))o.copy(i,s);else throw new TypeError('"list" argument must be an Array of Buffers');s+=o.length}return i};function Gu(t,e){if(b.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||ft(t,ArrayBuffer))return t.byteLength;if(typeof t!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof t);let r=t.length,n=arguments.length>2&&arguments[2]===!0;if(!n&&r===0)return 0;let i=!1;for(;;)switch(e){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return to(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return r*2;case"hex":return r>>>1;case"base64":return nc(t).length;default:if(i)return n?-1:to(t).length;e=(""+e).toLowerCase(),i=!0}}b.byteLength=Gu;function a1(t,e,r){let n=!1;if((e===void 0||e<0)&&(e=0),e>this.length||((r===void 0||r>this.length)&&(r=this.length),r<=0)||(r>>>=0,e>>>=0,r<=e))return"";for(t||(t="utf8");;)switch(t){case"hex":return x1(this,e,r);case"utf8":case"utf-8":return $u(this,e,r);case"ascii":return y1(this,e,r);case"latin1":case"binary":return g1(this,e,r);case"base64":return p1(this,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return v1(this,e,r);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}b.prototype._isBuffer=!0;function ur(t,e,r){let n=t[e];t[e]=t[r],t[r]=n}b.prototype.swap16=function(){let e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let r=0;r<e;r+=2)ur(this,r,r+1);return this};b.prototype.swap32=function(){let e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let r=0;r<e;r+=4)ur(this,r,r+3),ur(this,r+1,r+2);return this};b.prototype.swap64=function(){let e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let r=0;r<e;r+=8)ur(this,r,r+7),ur(this,r+1,r+6),ur(this,r+2,r+5),ur(this,r+3,r+4);return this};b.prototype.toString=function(){let e=this.length;return e===0?"":arguments.length===0?$u(this,0,e):a1.apply(this,arguments)};b.prototype.toLocaleString=b.prototype.toString;b.prototype.equals=function(e){if(!b.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e?!0:b.compare(this,e)===0};b.prototype.inspect=function(){let e="",r=Ur.INSPECT_MAX_BYTES;return e=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(e+=" ... "),"<Buffer "+e+">"};Vu&&(b.prototype[Vu]=b.prototype.inspect);b.prototype.compare=function(e,r,n,i,s){if(ft(e,Uint8Array)&&(e=b.from(e,e.offset,e.byteLength)),!b.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(r===void 0&&(r=0),n===void 0&&(n=e?e.length:0),i===void 0&&(i=0),s===void 0&&(s=this.length),r<0||n>e.length||i<0||s>this.length)throw new RangeError("out of range index");if(i>=s&&r>=n)return 0;if(i>=s)return-1;if(r>=n)return 1;if(r>>>=0,n>>>=0,i>>>=0,s>>>=0,this===e)return 0;let o=s-i,a=n-r,u=Math.min(o,a),c=this.slice(i,s),f=e.slice(r,n);for(let h=0;h<u;++h)if(c[h]!==f[h]){o=c[h],a=f[h];break}return o<a?-1:a<o?1:0};function ju(t,e,r,n,i){if(t.length===0)return-1;if(typeof r=="string"?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,ro(r)&&(r=i?0:t.length-1),r<0&&(r=t.length+r),r>=t.length){if(i)return-1;r=t.length-1}else if(r<0)if(i)r=0;else return-1;if(typeof e=="string"&&(e=b.from(e,n)),b.isBuffer(e))return e.length===0?-1:Wu(t,e,r,n,i);if(typeof e=="number")return e=e&255,typeof Uint8Array.prototype.indexOf=="function"?i?Uint8Array.prototype.indexOf.call(t,e,r):Uint8Array.prototype.lastIndexOf.call(t,e,r):Wu(t,[e],r,n,i);throw new TypeError("val must be string, number or Buffer")}function Wu(t,e,r,n,i){let s=1,o=t.length,a=e.length;if(n!==void 0&&(n=String(n).toLowerCase(),n==="ucs2"||n==="ucs-2"||n==="utf16le"||n==="utf-16le")){if(t.length<2||e.length<2)return-1;s=2,o/=2,a/=2,r/=2}function u(f,h){return s===1?f[h]:f.readUInt16BE(h*s)}let c;if(i){let f=-1;for(c=r;c<o;c++)if(u(t,c)===u(e,f===-1?0:c-f)){if(f===-1&&(f=c),c-f+1===a)return f*s}else f!==-1&&(c-=c-f),f=-1}else for(r+a>o&&(r=o-a),c=r;c>=0;c--){let f=!0;for(let h=0;h<a;h++)if(u(t,c+h)!==u(e,h)){f=!1;break}if(f)return c}return-1}b.prototype.includes=function(e,r,n){return this.indexOf(e,r,n)!==-1};b.prototype.indexOf=function(e,r,n){return ju(this,e,r,n,!0)};b.prototype.lastIndexOf=function(e,r,n){return ju(this,e,r,n,!1)};function u1(t,e,r,n){r=Number(r)||0;let i=t.length-r;n?(n=Number(n),n>i&&(n=i)):n=i;let s=e.length;n>s/2&&(n=s/2);let o;for(o=0;o<n;++o){let a=parseInt(e.substr(o*2,2),16);if(ro(a))return o;t[r+o]=a}return o}function c1(t,e,r,n){return xi(to(e,t.length-r),t,r,n)}function f1(t,e,r,n){return xi(E1(e),t,r,n)}function h1(t,e,r,n){return xi(nc(e),t,r,n)}function l1(t,e,r,n){return xi(S1(e,t.length-r),t,r,n)}b.prototype.write=function(e,r,n,i){if(r===void 0)i="utf8",n=this.length,r=0;else if(n===void 0&&typeof r=="string")i=r,n=this.length,r=0;else if(isFinite(r))r=r>>>0,isFinite(n)?(n=n>>>0,i===void 0&&(i="utf8")):(i=n,n=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let s=this.length-r;if((n===void 0||n>s)&&(n=s),e.length>0&&(n<0||r<0)||r>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");let o=!1;for(;;)switch(i){case"hex":return u1(this,e,r,n);case"utf8":case"utf-8":return c1(this,e,r,n);case"ascii":case"latin1":case"binary":return f1(this,e,r,n);case"base64":return h1(this,e,r,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return l1(this,e,r,n);default:if(o)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),o=!0}};b.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function p1(t,e,r){return e===0&&r===t.length?Ys.fromByteArray(t):Ys.fromByteArray(t.slice(e,r))}function $u(t,e,r){r=Math.min(t.length,r);let n=[],i=e;for(;i<r;){let s=t[i],o=null,a=s>239?4:s>223?3:s>191?2:1;if(i+a<=r){let u,c,f,h;switch(a){case 1:s<128&&(o=s);break;case 2:u=t[i+1],(u&192)==128&&(h=(s&31)<<6|u&63,h>127&&(o=h));break;case 3:u=t[i+1],c=t[i+2],(u&192)==128&&(c&192)==128&&(h=(s&15)<<12|(u&63)<<6|c&63,h>2047&&(h<55296||h>57343)&&(o=h));break;case 4:u=t[i+1],c=t[i+2],f=t[i+3],(u&192)==128&&(c&192)==128&&(f&192)==128&&(h=(s&15)<<18|(u&63)<<12|(c&63)<<6|f&63,h>65535&&h<1114112&&(o=h))}}o===null?(o=65533,a=1):o>65535&&(o-=65536,n.push(o>>>10&1023|55296),o=56320|o&1023),n.push(o),i+=a}return d1(n)}var Yu=4096;function d1(t){let e=t.length;if(e<=Yu)return String.fromCharCode.apply(String,t);let r="",n=0;for(;n<e;)r+=String.fromCharCode.apply(String,t.slice(n,n+=Yu));return r}function y1(t,e,r){let n="";r=Math.min(t.length,r);for(let i=e;i<r;++i)n+=String.fromCharCode(t[i]&127);return n}function g1(t,e,r){let n="";r=Math.min(t.length,r);for(let i=e;i<r;++i)n+=String.fromCharCode(t[i]);return n}function x1(t,e,r){let n=t.length;(!e||e<0)&&(e=0),(!r||r<0||r>n)&&(r=n);let i="";for(let s=e;s<r;++s)i+=B1[t[s]];return i}function v1(t,e,r){let n=t.slice(e,r),i="";for(let s=0;s<n.length-1;s+=2)i+=String.fromCharCode(n[s]+n[s+1]*256);return i}b.prototype.slice=function(e,r){let n=this.length;e=~~e,r=r===void 0?n:~~r,e<0?(e+=n,e<0&&(e=0)):e>n&&(e=n),r<0?(r+=n,r<0&&(r=0)):r>n&&(r=n),r<e&&(r=e);let i=this.subarray(e,r);return Object.setPrototypeOf(i,b.prototype),i};function ve(t,e,r){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>r)throw new RangeError("Trying to access beyond buffer length")}b.prototype.readUintLE=b.prototype.readUIntLE=function(e,r,n){e=e>>>0,r=r>>>0,n||ve(e,r,this.length);let i=this[e],s=1,o=0;for(;++o<r&&(s*=256);)i+=this[e+o]*s;return i};b.prototype.readUintBE=b.prototype.readUIntBE=function(e,r,n){e=e>>>0,r=r>>>0,n||ve(e,r,this.length);let i=this[e+--r],s=1;for(;r>0&&(s*=256);)i+=this[e+--r]*s;return i};b.prototype.readUint8=b.prototype.readUInt8=function(e,r){return e=e>>>0,r||ve(e,1,this.length),this[e]};b.prototype.readUint16LE=b.prototype.readUInt16LE=function(e,r){return e=e>>>0,r||ve(e,2,this.length),this[e]|this[e+1]<<8};b.prototype.readUint16BE=b.prototype.readUInt16BE=function(e,r){return e=e>>>0,r||ve(e,2,this.length),this[e]<<8|this[e+1]};b.prototype.readUint32LE=b.prototype.readUInt32LE=function(e,r){return e=e>>>0,r||ve(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+this[e+3]*16777216};b.prototype.readUint32BE=b.prototype.readUInt32BE=function(e,r){return e=e>>>0,r||ve(e,4,this.length),this[e]*16777216+(this[e+1]<<16|this[e+2]<<8|this[e+3])};b.prototype.readBigUInt64LE=Vt(function(e){e=e>>>0,Kr(e,"offset");let r=this[e],n=this[e+7];(r===void 0||n===void 0)&&gn(e,this.length-8);let i=r+this[++e]*2**8+this[++e]*2**16+this[++e]*2**24,s=this[++e]+this[++e]*2**8+this[++e]*2**16+n*2**24;return BigInt(i)+(BigInt(s)<<BigInt(32))});b.prototype.readBigUInt64BE=Vt(function(e){e=e>>>0,Kr(e,"offset");let r=this[e],n=this[e+7];(r===void 0||n===void 0)&&gn(e,this.length-8);let i=r*2**24+this[++e]*2**16+this[++e]*2**8+this[++e],s=this[++e]*2**24+this[++e]*2**16+this[++e]*2**8+n;return(BigInt(i)<<BigInt(32))+BigInt(s)});b.prototype.readIntLE=function(e,r,n){e=e>>>0,r=r>>>0,n||ve(e,r,this.length);let i=this[e],s=1,o=0;for(;++o<r&&(s*=256);)i+=this[e+o]*s;return s*=128,i>=s&&(i-=Math.pow(2,8*r)),i};b.prototype.readIntBE=function(e,r,n){e=e>>>0,r=r>>>0,n||ve(e,r,this.length);let i=r,s=1,o=this[e+--i];for(;i>0&&(s*=256);)o+=this[e+--i]*s;return s*=128,o>=s&&(o-=Math.pow(2,8*r)),o};b.prototype.readInt8=function(e,r){return e=e>>>0,r||ve(e,1,this.length),this[e]&128?(255-this[e]+1)*-1:this[e]};b.prototype.readInt16LE=function(e,r){e=e>>>0,r||ve(e,2,this.length);let n=this[e]|this[e+1]<<8;return n&32768?n|4294901760:n};b.prototype.readInt16BE=function(e,r){e=e>>>0,r||ve(e,2,this.length);let n=this[e+1]|this[e]<<8;return n&32768?n|4294901760:n};b.prototype.readInt32LE=function(e,r){return e=e>>>0,r||ve(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24};b.prototype.readInt32BE=function(e,r){return e=e>>>0,r||ve(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]};b.prototype.readBigInt64LE=Vt(function(e){e=e>>>0,Kr(e,"offset");let r=this[e],n=this[e+7];(r===void 0||n===void 0)&&gn(e,this.length-8);let i=this[e+4]+this[e+5]*2**8+this[e+6]*2**16+(n<<24);return(BigInt(i)<<BigInt(32))+BigInt(r+this[++e]*2**8+this[++e]*2**16+this[++e]*2**24)});b.prototype.readBigInt64BE=Vt(function(e){e=e>>>0,Kr(e,"offset");let r=this[e],n=this[e+7];(r===void 0||n===void 0)&&gn(e,this.length-8);let i=(r<<24)+this[++e]*2**16+this[++e]*2**8+this[++e];return(BigInt(i)<<BigInt(32))+BigInt(this[++e]*2**24+this[++e]*2**16+this[++e]*2**8+n)});b.prototype.readFloatLE=function(e,r){return e=e>>>0,r||ve(e,4,this.length),Or.read(this,e,!0,23,4)};b.prototype.readFloatBE=function(e,r){return e=e>>>0,r||ve(e,4,this.length),Or.read(this,e,!1,23,4)};b.prototype.readDoubleLE=function(e,r){return e=e>>>0,r||ve(e,8,this.length),Or.read(this,e,!0,52,8)};b.prototype.readDoubleBE=function(e,r){return e=e>>>0,r||ve(e,8,this.length),Or.read(this,e,!1,52,8)};function Le(t,e,r,n,i,s){if(!b.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<s)throw new RangeError('"value" argument is out of bounds');if(r+n>t.length)throw new RangeError("Index out of range")}b.prototype.writeUintLE=b.prototype.writeUIntLE=function(e,r,n,i){if(e=+e,r=r>>>0,n=n>>>0,!i){let a=Math.pow(2,8*n)-1;Le(this,e,r,n,a,0)}let s=1,o=0;for(this[r]=e&255;++o<n&&(s*=256);)this[r+o]=e/s&255;return r+n};b.prototype.writeUintBE=b.prototype.writeUIntBE=function(e,r,n,i){if(e=+e,r=r>>>0,n=n>>>0,!i){let a=Math.pow(2,8*n)-1;Le(this,e,r,n,a,0)}let s=n-1,o=1;for(this[r+s]=e&255;--s>=0&&(o*=256);)this[r+s]=e/o&255;return r+n};b.prototype.writeUint8=b.prototype.writeUInt8=function(e,r,n){return e=+e,r=r>>>0,n||Le(this,e,r,1,255,0),this[r]=e&255,r+1};b.prototype.writeUint16LE=b.prototype.writeUInt16LE=function(e,r,n){return e=+e,r=r>>>0,n||Le(this,e,r,2,65535,0),this[r]=e&255,this[r+1]=e>>>8,r+2};b.prototype.writeUint16BE=b.prototype.writeUInt16BE=function(e,r,n){return e=+e,r=r>>>0,n||Le(this,e,r,2,65535,0),this[r]=e>>>8,this[r+1]=e&255,r+2};b.prototype.writeUint32LE=b.prototype.writeUInt32LE=function(e,r,n){return e=+e,r=r>>>0,n||Le(this,e,r,4,4294967295,0),this[r+3]=e>>>24,this[r+2]=e>>>16,this[r+1]=e>>>8,this[r]=e&255,r+4};b.prototype.writeUint32BE=b.prototype.writeUInt32BE=function(e,r,n){return e=+e,r=r>>>0,n||Le(this,e,r,4,4294967295,0),this[r]=e>>>24,this[r+1]=e>>>16,this[r+2]=e>>>8,this[r+3]=e&255,r+4};function Qu(t,e,r,n,i){rc(e,n,i,t,r,7);let s=Number(e&BigInt(4294967295));t[r++]=s,s=s>>8,t[r++]=s,s=s>>8,t[r++]=s,s=s>>8,t[r++]=s;let o=Number(e>>BigInt(32)&BigInt(4294967295));return t[r++]=o,o=o>>8,t[r++]=o,o=o>>8,t[r++]=o,o=o>>8,t[r++]=o,r}function Zu(t,e,r,n,i){rc(e,n,i,t,r,7);let s=Number(e&BigInt(4294967295));t[r+7]=s,s=s>>8,t[r+6]=s,s=s>>8,t[r+5]=s,s=s>>8,t[r+4]=s;let o=Number(e>>BigInt(32)&BigInt(4294967295));return t[r+3]=o,o=o>>8,t[r+2]=o,o=o>>8,t[r+1]=o,o=o>>8,t[r]=o,r+8}b.prototype.writeBigUInt64LE=Vt(function(e,r=0){return Qu(this,e,r,BigInt(0),BigInt("0xffffffffffffffff"))});b.prototype.writeBigUInt64BE=Vt(function(e,r=0){return Zu(this,e,r,BigInt(0),BigInt("0xffffffffffffffff"))});b.prototype.writeIntLE=function(e,r,n,i){if(e=+e,r=r>>>0,!i){let u=Math.pow(2,8*n-1);Le(this,e,r,n,u-1,-u)}let s=0,o=1,a=0;for(this[r]=e&255;++s<n&&(o*=256);)e<0&&a===0&&this[r+s-1]!==0&&(a=1),this[r+s]=(e/o>>0)-a&255;return r+n};b.prototype.writeIntBE=function(e,r,n,i){if(e=+e,r=r>>>0,!i){let u=Math.pow(2,8*n-1);Le(this,e,r,n,u-1,-u)}let s=n-1,o=1,a=0;for(this[r+s]=e&255;--s>=0&&(o*=256);)e<0&&a===0&&this[r+s+1]!==0&&(a=1),this[r+s]=(e/o>>0)-a&255;return r+n};b.prototype.writeInt8=function(e,r,n){return e=+e,r=r>>>0,n||Le(this,e,r,1,127,-128),e<0&&(e=255+e+1),this[r]=e&255,r+1};b.prototype.writeInt16LE=function(e,r,n){return e=+e,r=r>>>0,n||Le(this,e,r,2,32767,-32768),this[r]=e&255,this[r+1]=e>>>8,r+2};b.prototype.writeInt16BE=function(e,r,n){return e=+e,r=r>>>0,n||Le(this,e,r,2,32767,-32768),this[r]=e>>>8,this[r+1]=e&255,r+2};b.prototype.writeInt32LE=function(e,r,n){return e=+e,r=r>>>0,n||Le(this,e,r,4,2147483647,-2147483648),this[r]=e&255,this[r+1]=e>>>8,this[r+2]=e>>>16,this[r+3]=e>>>24,r+4};b.prototype.writeInt32BE=function(e,r,n){return e=+e,r=r>>>0,n||Le(this,e,r,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[r]=e>>>24,this[r+1]=e>>>16,this[r+2]=e>>>8,this[r+3]=e&255,r+4};b.prototype.writeBigInt64LE=Vt(function(e,r=0){return Qu(this,e,r,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});b.prototype.writeBigInt64BE=Vt(function(e,r=0){return Zu(this,e,r,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function Xu(t,e,r,n,i,s){if(r+n>t.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function Ju(t,e,r,n,i){return e=+e,r=r>>>0,i||Xu(t,e,r,4,34028234663852886e22,-34028234663852886e22),Or.write(t,e,r,n,23,4),r+4}b.prototype.writeFloatLE=function(e,r,n){return Ju(this,e,r,!0,n)};b.prototype.writeFloatBE=function(e,r,n){return Ju(this,e,r,!1,n)};function ec(t,e,r,n,i){return e=+e,r=r>>>0,i||Xu(t,e,r,8,17976931348623157e292,-17976931348623157e292),Or.write(t,e,r,n,52,8),r+8}b.prototype.writeDoubleLE=function(e,r,n){return ec(this,e,r,!0,n)};b.prototype.writeDoubleBE=function(e,r,n){return ec(this,e,r,!1,n)};b.prototype.copy=function(e,r,n,i){if(!b.isBuffer(e))throw new TypeError("argument should be a Buffer");if(n||(n=0),!i&&i!==0&&(i=this.length),r>=e.length&&(r=e.length),r||(r=0),i>0&&i<n&&(i=n),i===n||e.length===0||this.length===0)return 0;if(r<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),e.length-r<i-n&&(i=e.length-r+n);let s=i-n;return this===e&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(r,n,i):Uint8Array.prototype.set.call(e,this.subarray(n,i),r),s};b.prototype.fill=function(e,r,n,i){if(typeof e=="string"){if(typeof r=="string"?(i=r,r=0,n=this.length):typeof n=="string"&&(i=n,n=this.length),i!==void 0&&typeof i!="string")throw new TypeError("encoding must be a string");if(typeof i=="string"&&!b.isEncoding(i))throw new TypeError("Unknown encoding: "+i);if(e.length===1){let o=e.charCodeAt(0);(i==="utf8"&&o<128||i==="latin1")&&(e=o)}}else typeof e=="number"?e=e&255:typeof e=="boolean"&&(e=Number(e));if(r<0||this.length<r||this.length<n)throw new RangeError("Out of range index");if(n<=r)return this;r=r>>>0,n=n===void 0?this.length:n>>>0,e||(e=0);let s;if(typeof e=="number")for(s=r;s<n;++s)this[s]=e;else{let o=b.isBuffer(e)?e:b.from(e,i),a=o.length;if(a===0)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(s=0;s<n-r;++s)this[s+r]=o[s%a]}return this};var Fr={};function eo(t,e,r){Fr[t]=class extends r{constructor(){super();Object.defineProperty(this,"message",{value:e.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${t}]`,this.stack,delete this.name}get code(){return t}set code(i){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:i,writable:!0})}toString(){return`${this.name} [${t}]: ${this.message}`}}}eo("ERR_BUFFER_OUT_OF_BOUNDS",function(t){return t?`${t} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError);eo("ERR_INVALID_ARG_TYPE",function(t,e){return`The "${t}" argument must be of type number. Received type ${typeof e}`},TypeError);eo("ERR_OUT_OF_RANGE",function(t,e,r){let n=`The value of "${t}" is out of range.`,i=r;return Number.isInteger(r)&&Math.abs(r)>2**32?i=tc(String(r)):typeof r=="bigint"&&(i=String(r),(r>BigInt(2)**BigInt(32)||r<-(BigInt(2)**BigInt(32)))&&(i=tc(i)),i+="n"),n+=` It must be ${e}. Received ${i}`,n},RangeError);function tc(t){let e="",r=t.length,n=t[0]==="-"?1:0;for(;r>=n+4;r-=3)e=`_${t.slice(r-3,r)}${e}`;return`${t.slice(0,r)}${e}`}function m1(t,e,r){Kr(e,"offset"),(t[e]===void 0||t[e+r]===void 0)&&gn(e,t.length-(r+1))}function rc(t,e,r,n,i,s){if(t>r||t<e){let o=typeof e=="bigint"?"n":"",a;throw s>3?e===0||e===BigInt(0)?a=`>= 0${o} and < 2${o} ** ${(s+1)*8}${o}`:a=`>= -(2${o} ** ${(s+1)*8-1}${o}) and < 2 ** ${(s+1)*8-1}${o}`:a=`>= ${e}${o} and <= ${r}${o}`,new Fr.ERR_OUT_OF_RANGE("value",a,t)}m1(n,i,s)}function Kr(t,e){if(typeof t!="number")throw new Fr.ERR_INVALID_ARG_TYPE(e,"number",t)}function gn(t,e,r){throw Math.floor(t)!==t?(Kr(t,r),new Fr.ERR_OUT_OF_RANGE(r||"offset","an integer",t)):e<0?new Fr.ERR_BUFFER_OUT_OF_BOUNDS:new Fr.ERR_OUT_OF_RANGE(r||"offset",`>= ${r?1:0} and <= ${e}`,t)}var b1=/[^+/0-9A-Za-z-_]/g;function w1(t){if(t=t.split("=")[0],t=t.trim().replace(b1,""),t.length<2)return"";for(;t.length%4!=0;)t=t+"=";return t}function to(t,e){e=e||1/0;let r,n=t.length,i=null,s=[];for(let o=0;o<n;++o){if(r=t.charCodeAt(o),r>55295&&r<57344){if(!i){if(r>56319){(e-=3)>-1&&s.push(239,191,189);continue}else if(o+1===n){(e-=3)>-1&&s.push(239,191,189);continue}i=r;continue}if(r<56320){(e-=3)>-1&&s.push(239,191,189),i=r;continue}r=(i-55296<<10|r-56320)+65536}else i&&(e-=3)>-1&&s.push(239,191,189);if(i=null,r<128){if((e-=1)<0)break;s.push(r)}else if(r<2048){if((e-=2)<0)break;s.push(r>>6|192,r&63|128)}else if(r<65536){if((e-=3)<0)break;s.push(r>>12|224,r>>6&63|128,r&63|128)}else if(r<1114112){if((e-=4)<0)break;s.push(r>>18|240,r>>12&63|128,r>>6&63|128,r&63|128)}else throw new Error("Invalid code point")}return s}function E1(t){let e=[];for(let r=0;r<t.length;++r)e.push(t.charCodeAt(r)&255);return e}function S1(t,e){let r,n,i,s=[];for(let o=0;o<t.length&&!((e-=2)<0);++o)r=t.charCodeAt(o),n=r>>8,i=r%256,s.push(i),s.push(n);return s}function nc(t){return Ys.toByteArray(w1(t))}function xi(t,e,r,n){let i;for(i=0;i<n&&!(i+r>=e.length||i>=t.length);++i)e[i+r]=t[i];return i}function ft(t,e){return t instanceof e||t!=null&&t.constructor!=null&&t.constructor.name!=null&&t.constructor.name===e.name}function ro(t){return t!==t}var B1=function(){let t="0123456789abcdef",e=new Array(256);for(let r=0;r<16;++r){let n=r*16;for(let i=0;i<16;++i)e[n+i]=t[r]+t[i]}return e}();function Vt(t){return typeof BigInt=="undefined"?C1:t}function C1(){throw new Error("BigInt not supported")}});var no=E((vw,sc)=>{"use strict";var{Buffer:Je}=cr(),ic=Symbol.for("BufferList");function te(t){if(!(this instanceof te))return new te(t);te._init.call(this,t)}te._init=function(e){Object.defineProperty(this,ic,{value:!0}),this._bufs=[],this.length=0,e&&this.append(e)};te.prototype._new=function(e){return new te(e)};te.prototype._offset=function(e){if(e===0)return[0,0];let r=0;for(let n=0;n<this._bufs.length;n++){let i=r+this._bufs[n].length;if(e<i||n===this._bufs.length-1)return[n,e-r];r=i}};te.prototype._reverseOffset=function(t){let e=t[0],r=t[1];for(let n=0;n<e;n++)r+=this._bufs[n].length;return r};te.prototype.get=function(e){if(e>this.length||e<0)return;let r=this._offset(e);return this._bufs[r[0]][r[1]]};te.prototype.slice=function(e,r){return typeof e=="number"&&e<0&&(e+=this.length),typeof r=="number"&&r<0&&(r+=this.length),this.copy(null,0,e,r)};te.prototype.copy=function(e,r,n,i){if((typeof n!="number"||n<0)&&(n=0),(typeof i!="number"||i>this.length)&&(i=this.length),n>=this.length||i<=0)return e||Je.alloc(0);let s=!!e,o=this._offset(n),a=i-n,u=a,c=s&&r||0,f=o[1];if(n===0&&i===this.length){if(!s)return this._bufs.length===1?this._bufs[0]:Je.concat(this._bufs,this.length);for(let h=0;h<this._bufs.length;h++)this._bufs[h].copy(e,c),c+=this._bufs[h].length;return e}if(u<=this._bufs[o[0]].length-f)return s?this._bufs[o[0]].copy(e,r,f,f+u):this._bufs[o[0]].slice(f,f+u);s||(e=Je.allocUnsafe(a));for(let h=o[0];h<this._bufs.length;h++){let l=this._bufs[h].length-f;if(u>l)this._bufs[h].copy(e,c,f),c+=l;else{this._bufs[h].copy(e,c,f,f+u),c+=l;break}u-=l,f&&(f=0)}return e.length>c?e.slice(0,c):e};te.prototype.shallowSlice=function(e,r){if(e=e||0,r=typeof r!="number"?this.length:r,e<0&&(e+=this.length),r<0&&(r+=this.length),e===r)return this._new();let n=this._offset(e),i=this._offset(r),s=this._bufs.slice(n[0],i[0]+1);return i[1]===0?s.pop():s[s.length-1]=s[s.length-1].slice(0,i[1]),n[1]!==0&&(s[0]=s[0].slice(n[1])),this._new(s)};te.prototype.toString=function(e,r,n){return this.slice(r,n).toString(e)};te.prototype.consume=function(e){if(e=Math.trunc(e),Number.isNaN(e)||e<=0)return this;for(;this._bufs.length;)if(e>=this._bufs[0].length)e-=this._bufs[0].length,this.length-=this._bufs[0].length,this._bufs.shift();else{this._bufs[0]=this._bufs[0].slice(e),this.length-=e;break}return this};te.prototype.duplicate=function(){let e=this._new();for(let r=0;r<this._bufs.length;r++)e.append(this._bufs[r]);return e};te.prototype.append=function(e){if(e==null)return this;if(e.buffer)this._appendBuffer(Je.from(e.buffer,e.byteOffset,e.byteLength));else if(Array.isArray(e))for(let r=0;r<e.length;r++)this.append(e[r]);else if(this._isBufferList(e))for(let r=0;r<e._bufs.length;r++)this.append(e._bufs[r]);else typeof e=="number"&&(e=e.toString()),this._appendBuffer(Je.from(e));return this};te.prototype._appendBuffer=function(e){this._bufs.push(e),this.length+=e.length};te.prototype.indexOf=function(t,e,r){if(r===void 0&&typeof e=="string"&&(r=e,e=void 0),typeof t=="function"||Array.isArray(t))throw new TypeError('The "value" argument must be one of type string, Buffer, BufferList, or Uint8Array.');if(typeof t=="number"?t=Je.from([t]):typeof t=="string"?t=Je.from(t,r):this._isBufferList(t)?t=t.slice():Array.isArray(t.buffer)?t=Je.from(t.buffer,t.byteOffset,t.byteLength):Je.isBuffer(t)||(t=Je.from(t)),e=Number(e||0),isNaN(e)&&(e=0),e<0&&(e=this.length+e),e<0&&(e=0),t.length===0)return e>this.length?this.length:e;let n=this._offset(e),i=n[0],s=n[1];for(;i<this._bufs.length;i++){let o=this._bufs[i];for(;s<o.length;)if(o.length-s>=t.length){let u=o.indexOf(t,s);if(u!==-1)return this._reverseOffset([i,u]);s=o.length-t.length+1}else{let u=this._reverseOffset([i,s]);if(this._match(u,t))return u;s++}s=0}return-1};te.prototype._match=function(t,e){if(this.length-t<e.length)return!1;for(let r=0;r<e.length;r++)if(this.get(t+r)!==e[r])return!1;return!0};(function(){let t={readDoubleBE:8,readDoubleLE:8,readFloatBE:4,readFloatLE:4,readInt32BE:4,readInt32LE:4,readUInt32BE:4,readUInt32LE:4,readInt16BE:2,readInt16LE:2,readUInt16BE:2,readUInt16LE:2,readInt8:1,readUInt8:1,readIntBE:null,readIntLE:null,readUIntBE:null,readUIntLE:null};for(let e in t)(function(r){t[r]===null?te.prototype[r]=function(n,i){return this.slice(n,n+i)[r](0,i)}:te.prototype[r]=function(n=0){return this.slice(n,n+t[r])[r](0)}})(e)})();te.prototype._isBufferList=function(e){return e instanceof te||te.isBufferList(e)};te.isBufferList=function(e){return e!=null&&e[ic]};sc.exports=te});var uc=E((mw,ac)=>{ac.exports=io;var oc=128,_1=127,A1=~_1,I1=Math.pow(2,31);function io(t,e,r){if(Number.MAX_SAFE_INTEGER&&t>Number.MAX_SAFE_INTEGER)throw io.bytes=0,new RangeError("Could not encode varint");e=e||[],r=r||0;for(var n=r;t>=I1;)e[r++]=t&255|oc,t/=128;for(;t&A1;)e[r++]=t&255|oc,t>>>=7;return e[r]=t|0,io.bytes=r-n+1,e}});var hc=E((bw,fc)=>{fc.exports=so;var T1=128,cc=127;function so(t,e){var r=0,e=e||0,n=0,i=e,s,o=t.length;do{if(i>=o||n>49)throw so.bytes=0,new RangeError("Could not decode varint");s=t[i++],r+=n<28?(s&cc)<<n:(s&cc)*Math.pow(2,n),n+=7}while(s>=T1);return so.bytes=i-e,r}});var pc=E((ww,lc)=>{var R1=Math.pow(2,7),P1=Math.pow(2,14),D1=Math.pow(2,21),N1=Math.pow(2,28),L1=Math.pow(2,35),k1=Math.pow(2,42),O1=Math.pow(2,49),F1=Math.pow(2,56),K1=Math.pow(2,63);lc.exports=function(t){return t<R1?1:t<P1?2:t<D1?3:t<N1?4:t<L1?5:t<k1?6:t<O1?7:t<F1?8:t<K1?9:10}});var oo=E((Ew,dc)=>{dc.exports={encode:uc(),decode:hc(),encodingLength:pc()}});var ao=E((Sw,xc)=>{"use strict";var yc=oo(),{Buffer:U1}=cr(),gc=(t,e,r)=>{let n=yc.encode(t,e,r);return gc.bytes=yc.encode.bytes,e||U1.from(n)};xc.exports=gc});var Sc=E((Bw,vi)=>{"use strict";var{Buffer:vc}=cr(),mc=no(),bc=ao(),uo=8,wc=10*1024;function Ec(t){t=t||{};let e=Math.max(t.poolSize||wc,t.minPoolSize||uo),r=t.lengthEncoder||bc;return async function*(i){let s=vc.alloc(e),o=0;for await(let a of i){r(a.length,s,o);let u=s.slice(o,o+r.bytes);o+=r.bytes,s.length-o<uo&&(s=vc.alloc(e),o=0),yield new mc().append(u).append(a)}}}Ec.single=(t,e)=>{e=e||{};let r=e.lengthEncoder||bc;return new mc([r(t.length),t.slice()])};vi.exports=Ec;vi.exports.MIN_POOL_SIZE=uo;vi.exports.DEFAULT_POOL_SIZE=wc});var co=E((Cw,_c)=>{"use strict";var Bc=oo(),{Buffer:q1}=cr(),M1=t=>new Proxy({},{get:(e,r)=>r[0]==="l"?t[r]:t.get(parseInt(r))}),Cc=t=>{let e=Bc.decode(q1.isBuffer(t)?t:M1(t));return Cc.bytes=Bc.decode.bytes,e};_c.exports=Cc});var Rc=E((_w,mi)=>{"use strict";var{Buffer:V1}=cr(),fo=no(),z1=co(),Ac=8,Ic=1024*1024*4,Tc=V1.alloc(0),zt={LENGTH:"readLength",DATA:"readData"},H1={[zt.LENGTH]:(t,e,r,n)=>{e=e.append(t);let i;try{i=n.lengthDecoder(e)}catch(s){if(e.length>n.maxLengthLength)throw Object.assign(s,{message:"message length too long",code:"ERR_MSG_LENGTH_TOO_LONG"});if(s instanceof RangeError)return{mode:zt.LENGTH,buffer:e,chunk:void 0,state:void 0,data:void 0};throw s}if(i>n.maxDataLength)throw Object.assign(new Error("message data too long"),{code:"ERR_MSG_DATA_TOO_LONG"});return t=e.shallowSlice(n.lengthDecoder.bytes),e=new fo,n.onLength&&n.onLength(i),i<=0?(n.onData&&n.onData(Tc),{mode:zt.LENGTH,chunk:t,buffer:e,data:Tc}):{mode:zt.DATA,chunk:t,buffer:e,state:{dataLength:i},data:void 0}},[zt.DATA]:(t,e,r,n)=>{if(e=e.append(t),!r)throw new Error("state is required");if(e.length<r.dataLength)return{mode:zt.DATA,buffer:e,state:r,chunk:void 0,data:void 0};let{dataLength:i}=r,s=e.shallowSlice(0,i),o=e.length>i?e.shallowSlice(i):void 0;return e=new fo,n.onData&&n.onData(s),{mode:zt.LENGTH,chunk:o,buffer:e,state:void 0,data:s}}};function ho(t){t=t||{};let e={lengthDecoder:t.lengthDecoder||z1,maxLengthLength:t.maxLengthLength||Ac,maxDataLength:t.maxDataLength||Ic,onLength:t.onLength,onData:t.onData};return async function*(n){let i=new fo,s=zt.LENGTH,o;for await(let a of n){let u=a;for(;u;){let c=H1[s](u,i,o,e);s=c.mode,u=c.chunk,i=c.buffer,o=c.state,c.data&&(yield c.data)}}if(i.length)throw Object.assign(new Error("unexpected end of input"),{code:"ERR_UNEXPECTED_EOF"})}}ho.fromReader=(t,e)=>{let r=1,n={[Symbol.asyncIterator](){return this},next:async()=>{try{return await t.next(r)}catch(s){if(s.code==="ERR_UNDER_READ")return{done:!0,value:null};throw s}finally{r=1}}};return ho({...e||{},onLength:s=>{r=s}})(n)};mi.exports=ho;mi.exports.MAX_LENGTH_LENGTH=Ac;mi.exports.MAX_DATA_LENGTH=Ic});var Nc=E((Aw,Dc)=>{"use strict";var{Buffer:G1}=cr(),Pc=(t,e,r)=>(e=e||G1.allocUnsafe(4),e.writeInt32BE(t,r),e);Pc.bytes=4;Dc.exports=Pc});var Oc=E((Iw,kc)=>{"use strict";var Lc=t=>{if(t.length<4)throw RangeError("Could not decode int32BE");return t.readInt32BE(0)};Lc.bytes=4;kc.exports=Lc});var Fc=E(fr=>{"use strict";fr.encode=Sc();fr.decode=Rc();fr.varintEncode=ao();fr.varintDecode=co();fr.int32BEEncode=Nc();fr.int32BEDecode=Oc()});var Uc=E((Pw,Kc)=>{Kc.exports=class{constructor(e){if(!(e>0)||(e-1&e)!=0)throw new Error("Max size for a FixedFIFO should be a power of two");this.buffer=new Array(e),this.mask=e-1,this.top=0,this.btm=0,this.next=null}push(e){return this.buffer[this.top]!==void 0?!1:(this.buffer[this.top]=e,this.top=this.top+1&this.mask,!0)}shift(){let e=this.buffer[this.btm];if(e!==void 0)return this.buffer[this.btm]=void 0,this.btm=this.btm+1&this.mask,e}isEmpty(){return this.buffer[this.btm]===void 0}}});var Vc=E((Nw,Mc)=>{var qc=Uc();Mc.exports=class{constructor(e){this.hwm=e||16,this.head=new qc(this.hwm),this.tail=this.head}push(e){if(!this.head.push(e)){let r=this.head;this.head=r.next=new qc(2*this.head.buffer.length),this.head.push(e)}}shift(){let e=this.tail.shift();if(e===void 0&&this.tail.next){let r=this.tail.next;return this.tail.next=null,this.tail=r,this.tail.shift()}return e}isEmpty(){return this.head.isEmpty()}}});var Hc=E((Lw,zc)=>{var lo=Vc();zc.exports=t=>{t=t||{};let e;typeof t=="function"?(e=t,t={}):e=t.onEnd;let r=new lo,n,i,s,o=()=>{if(!r.isEmpty()){if(t.writev){let g,x=[];for(;!r.isEmpty();){if(g=r.shift(),g.error)throw g.error;x.push(g.value)}return{done:g.done,value:x}}let p=r.shift();if(p.error)throw p.error;return p}return s?{done:!0}:new Promise((p,g)=>{i=x=>(i=null,x.error?g(x.error):t.writev&&!x.done?p({done:x.done,value:[x.value]}):p(x),n)})},a=p=>i?i(p):(r.push(p),n),u=p=>(r=new lo,i?i({error:p}):(r.push({error:p}),n)),c=p=>s?n:a({done:!1,value:p}),f=p=>s?n:(s=!0,p?u(p):a({done:!0})),h=()=>(r=new lo,f(),{done:!0}),l=p=>(f(p),{done:!0});if(n={[Symbol.asyncIterator](){return this},next:o,return:h,throw:l,push:c,end:f},!e)return n;let d=n;return n={[Symbol.asyncIterator](){return this},next(){return d.next()},throw(p){return d.throw(p),e&&(e(p),e=null),{done:!0}},return(){return d.return(),e&&(e(),e=null),{done:!0}},push:c,end(p){return d.end(p),e&&(e(p),e=null),n}},n}});var jc=E((kw,Gc)=>{Gc.exports=function(e){if(e){if(typeof e[Symbol.iterator]=="function")return e[Symbol.iterator]();if(typeof e[Symbol.asyncIterator]=="function")return e[Symbol.asyncIterator]();if(typeof e.next=="function")return e}throw new Error("argument is not an iterator or iterable")}});var $c=E((Fw,Wc)=>{Wc.exports=class extends Error{constructor(e,r){super(e||"The operation was aborted");this.type="aborted",this.code=r||"ABORT_ERR"}}});var Xc=E((Kw,hr)=>{var j1=jc(),po=$c(),Yc=(t,e,r)=>yo(t,Array.isArray(e)?e:[{signal:e,options:r}]),yo=(t,e)=>{t=j1(t),e=e.map(({signal:n,options:i})=>({signal:n,options:i||{}}));async function*r(){let n,i=()=>{n&&n()};for(let{signal:s}of e)s.addEventListener("abort",i);for(;;){let s;try{for(let{signal:a,options:u}of e)if(a.aborted){let{abortMessage:c,abortCode:f}=u;throw new po(c,f)}let o=new Promise((a,u)=>{n=()=>{let{options:c}=e.find(({signal:l})=>l.aborted),{abortMessage:f,abortCode:h}=c;u(new po(f,h))}});s=await Promise.race([o,t.next()]),n=null}catch(o){for(let{signal:c}of e)c.removeEventListener("abort",i);let a=e.find(({signal:c})=>c.aborted),u=o.type==="aborted"&&a;if(u&&a.options.onAbort&&await a.options.onAbort(t),typeof t.return=="function"&&await t.return(),u&&a.options.returnOnAbort)return;throw o}if(s.done)break;yield s.value}for(let{signal:s}of e)s.removeEventListener("abort",i)}return r()},Qc=(t,e,r)=>Zc(t,Array.isArray(e)?e:[{signal:e,options:r}]),Zc=(t,e)=>r=>t(yo(r,e)),W1=(t,e,r)=>$1(t,Array.isArray(e)?e:[{signal:e,options:r}]),$1=(t,e)=>({sink:Zc(t.sink,e),source:yo(t.source,e)});hr.exports=Yc;hr.exports.AbortError=po;hr.exports.source=Yc;hr.exports.sink=Qc;hr.exports.transform=Qc;hr.exports.duplex=W1});var ef=E((Uw,bi)=>{"use strict";var{AbortController:Jc,AbortSignal:Y1}=typeof self!="undefined"?self:typeof window!="undefined"?window:void 0;bi.exports=Jc;bi.exports.AbortSignal=Y1;bi.exports.default=Jc});var af=E((qw,of)=>{"use strict";var tf=ni(),Q1=Object.assign(tf("libp2p-pubsub:peer-streams"),{error:tf("libp2p-pubsub:peer-streams:err")}),{EventEmitter:Z1}=Bs(),rf=Fc(),X1=Hc(),{pipe:nf}=_s(),{source:J1}=Xc(),eg=ef().default,sf=class extends Z1{constructor({id:e,protocol:r}){super();this.id=e,this.protocol=r,this._rawOutboundStream=null,this._rawInboundStream=null,this._inboundAbortController=new eg,this.outboundStream=null,this.inboundStream=null}get isReadable(){return Boolean(this.inboundStream)}get isWritable(){return Boolean(this.outboundStream)}write(e){if(!this.outboundStream){let r=this.id.toB58String();throw new Error("No writable connection to "+r)}this.outboundStream.push(e)}attachInboundStream(e){return this._rawInboundStream=e,this.inboundStream=J1(nf(this._rawInboundStream,rf.decode()),this._inboundAbortController.signal,{returnOnAbort:!0}),this.emit("stream:inbound"),this.inboundStream}async attachOutboundStream(e){let r=this.outboundStream;this.outboundStream&&await this.outboundStream.end(),this._rawOutboundStream=e,this.outboundStream=X1({onEnd:n=>{this._rawOutboundStream&&this._rawOutboundStream.reset&&this._rawOutboundStream.reset(),this._rawOutboundStream=null,this.outboundStream=null,n&&this.emit("close")}}),nf(this.outboundStream,rf.encode(),this._rawOutboundStream).catch(n=>{Q1.error(n)}),r||this.emit("stream:outbound")}close(){this.outboundStream&&this.outboundStream.end(),this.inboundStream&&this._inboundAbortController.abort(),this._rawOutboundStream=null,this.outboundStream=null,this._rawInboundStream=null,this.inboundStream=null,this.emit("close")}};of.exports=sf});var cf=E(uf=>{"use strict";var tg={StrictSign:"StrictSign",StrictNoSign:"StrictNoSign"};uf.SignaturePolicy=tg});var go=E((Vw,ff)=>{"use strict";var wi=65536;function rg(t){let e=new Uint8Array(t),r=0;if(t>0)if(t>wi)for(;r<t;)r+wi>t?(crypto.getRandomValues(e.subarray(r,r+(t-r))),r+=t-r):(crypto.getRandomValues(e.subarray(r,r+wi)),r+=wi);else crypto.getRandomValues(e);return e}ff.exports=rg});var lf=E((zw,hf)=>{"use strict";var ng=go(),ig=qe();hf.exports=function(t){if(isNaN(t)||t<=0)throw ig(new Error("random bytes length must be a Number bigger than 0"),"ERR_INVALID_LENGTH");return ng(t)}});var ht={};Ee(ht,{fromString:()=>sg});function sg(t,e="utf8"){let r=ei[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return r.decoder.decode(`${r.prefix}${t}`)}var lt=Z(()=>{Es()});var Si=E((Gw,df)=>{"use strict";var lr=di(),Ei=lr.Reader,pf=lr.Writer,Be=lr.util,ze=lr.roots["libp2p-crypto-keys"]||(lr.roots["libp2p-crypto-keys"]={});ze.KeyType=function(){var t={},e=Object.create(t);return e[t[0]="RSA"]=0,e[t[1]="Ed25519"]=1,e[t[2]="Secp256k1"]=2,e}();ze.PublicKey=function(){function t(e){if(e)for(var r=Object.keys(e),n=0;n<r.length;++n)e[r[n]]!=null&&(this[r[n]]=e[r[n]])}return t.prototype.Type=0,t.prototype.Data=Be.newBuffer([]),t.encode=function(r,n){return n||(n=pf.create()),n.uint32(8).int32(r.Type),n.uint32(18).bytes(r.Data),n},t.decode=function(r,n){r instanceof Ei||(r=Ei.create(r));for(var i=n===void 0?r.len:r.pos+n,s=new ze.PublicKey;r.pos<i;){var o=r.uint32();switch(o>>>3){case 1:s.Type=r.int32();break;case 2:s.Data=r.bytes();break;default:r.skipType(o&7);break}}if(!s.hasOwnProperty("Type"))throw Be.ProtocolError("missing required 'Type'",{instance:s});if(!s.hasOwnProperty("Data"))throw Be.ProtocolError("missing required 'Data'",{instance:s});return s},t.fromObject=function(r){if(r instanceof ze.PublicKey)return r;var n=new ze.PublicKey;switch(r.Type){case"RSA":case 0:n.Type=0;break;case"Ed25519":case 1:n.Type=1;break;case"Secp256k1":case 2:n.Type=2;break}return r.Data!=null&&(typeof r.Data=="string"?Be.base64.decode(r.Data,n.Data=Be.newBuffer(Be.base64.length(r.Data)),0):r.Data.length&&(n.Data=r.Data)),n},t.toObject=function(r,n){n||(n={});var i={};return n.defaults&&(i.Type=n.enums===String?"RSA":0,n.bytes===String?i.Data="":(i.Data=[],n.bytes!==Array&&(i.Data=Be.newBuffer(i.Data)))),r.Type!=null&&r.hasOwnProperty("Type")&&(i.Type=n.enums===String?ze.KeyType[r.Type]:r.Type),r.Data!=null&&r.hasOwnProperty("Data")&&(i.Data=n.bytes===String?Be.base64.encode(r.Data,0,r.Data.length):n.bytes===Array?Array.prototype.slice.call(r.Data):r.Data),i},t.prototype.toJSON=function(){return this.constructor.toObject(this,lr.util.toJSONOptions)},t}();ze.PrivateKey=function(){function t(e){if(e)for(var r=Object.keys(e),n=0;n<r.length;++n)e[r[n]]!=null&&(this[r[n]]=e[r[n]])}return t.prototype.Type=0,t.prototype.Data=Be.newBuffer([]),t.encode=function(r,n){return n||(n=pf.create()),n.uint32(8).int32(r.Type),n.uint32(18).bytes(r.Data),n},t.decode=function(r,n){r instanceof Ei||(r=Ei.create(r));for(var i=n===void 0?r.len:r.pos+n,s=new ze.PrivateKey;r.pos<i;){var o=r.uint32();switch(o>>>3){case 1:s.Type=r.int32();break;case 2:s.Data=r.bytes();break;default:r.skipType(o&7);break}}if(!s.hasOwnProperty("Type"))throw Be.ProtocolError("missing required 'Type'",{instance:s});if(!s.hasOwnProperty("Data"))throw Be.ProtocolError("missing required 'Data'",{instance:s});return s},t.fromObject=function(r){if(r instanceof ze.PrivateKey)return r;var n=new ze.PrivateKey;switch(r.Type){case"RSA":case 0:n.Type=0;break;case"Ed25519":case 1:n.Type=1;break;case"Secp256k1":case 2:n.Type=2;break}return r.Data!=null&&(typeof r.Data=="string"?Be.base64.decode(r.Data,n.Data=Be.newBuffer(Be.base64.length(r.Data)),0):r.Data.length&&(n.Data=r.Data)),n},t.toObject=function(r,n){n||(n={});var i={};return n.defaults&&(i.Type=n.enums===String?"RSA":0,n.bytes===String?i.Data="":(i.Data=[],n.bytes!==Array&&(i.Data=Be.newBuffer(i.Data)))),r.Type!=null&&r.hasOwnProperty("Type")&&(i.Type=n.enums===String?ze.KeyType[r.Type]:r.Type),r.Data!=null&&r.hasOwnProperty("Data")&&(i.Data=n.bytes===String?Be.base64.encode(r.Data,0,r.Data.length):n.bytes===Array?Array.prototype.slice.call(r.Data):r.Data),i},t.prototype.toJSON=function(){return this.constructor.toObject(this,lr.util.toJSONOptions)},t}();df.exports=ze});var J=E((jw,yf)=>{yf.exports={options:{usePureJavaScript:!1}}});var vf=E((Ww,xf)=>{var xo={};xf.exports=xo;var gf={};xo.encode=function(t,e,r){if(typeof e!="string")throw new TypeError('"alphabet" must be a string.');if(r!==void 0&&typeof r!="number")throw new TypeError('"maxline" must be a number.');var n="";if(!(t instanceof Uint8Array))n=og(t,e);else{var i=0,s=e.length,o=e.charAt(0),a=[0];for(i=0;i<t.length;++i){for(var u=0,c=t[i];u<a.length;++u)c+=a[u]<<8,a[u]=c%s,c=c/s|0;for(;c>0;)a.push(c%s),c=c/s|0}for(i=0;t[i]===0&&i<t.length-1;++i)n+=o;for(i=a.length-1;i>=0;--i)n+=e[a[i]]}if(r){var f=new RegExp(".{1,"+r+"}","g");n=n.match(f).join(`\r
`)}return n};xo.decode=function(t,e){if(typeof t!="string")throw new TypeError('"input" must be a string.');if(typeof e!="string")throw new TypeError('"alphabet" must be a string.');var r=gf[e];if(!r){r=gf[e]=[];for(var n=0;n<e.length;++n)r[e.charCodeAt(n)]=n}t=t.replace(/\s/g,"");for(var i=e.length,s=e.charAt(0),o=[0],n=0;n<t.length;n++){var a=r[t.charCodeAt(n)];if(a===void 0)return;for(var u=0,c=a;u<o.length;++u)c+=o[u]*i,o[u]=c&255,c>>=8;for(;c>0;)o.push(c&255),c>>=8}for(var f=0;t[f]===s&&f<t.length-1;++f)o.push(0);return typeof Buffer!="undefined"?Buffer.from(o.reverse()):new Uint8Array(o.reverse())};function og(t,e){var r=0,n=e.length,i=e.charAt(0),s=[0];for(r=0;r<t.length();++r){for(var o=0,a=t.at(r);o<s.length;++o)a+=s[o]<<8,s[o]=a%n,a=a/n|0;for(;a>0;)s.push(a%n),a=a/n|0}var u="";for(r=0;t.at(r)===0&&r<t.length()-1;++r)u+=i;for(r=s.length-1;r>=0;--r)u+=e[s[r]];return u}});var pe=E(($w,Ef)=>{var mf=J(),bf=vf(),y=Ef.exports=mf.util=mf.util||{};(function(){if(typeof process!="undefined"&&process.nextTick&&!process.browser){y.nextTick=process.nextTick,typeof setImmediate=="function"?y.setImmediate=setImmediate:y.setImmediate=y.nextTick;return}if(typeof setImmediate=="function"){y.setImmediate=function(){return setImmediate.apply(void 0,arguments)},y.nextTick=function(a){return setImmediate(a)};return}if(y.setImmediate=function(a){setTimeout(a,0)},typeof window!="undefined"&&typeof window.postMessage=="function"){let a=function(u){if(u.source===window&&u.data===t){u.stopPropagation();var c=e.slice();e.length=0,c.forEach(function(f){f()})}};var o=a,t="forge.setImmediate",e=[];y.setImmediate=function(u){e.push(u),e.length===1&&window.postMessage(t,"*")},window.addEventListener("message",a,!0)}if(typeof MutationObserver!="undefined"){var r=Date.now(),n=!0,i=document.createElement("div"),e=[];new MutationObserver(function(){var u=e.slice();e.length=0,u.forEach(function(c){c()})}).observe(i,{attributes:!0});var s=y.setImmediate;y.setImmediate=function(u){Date.now()-r>15?(r=Date.now(),s(u)):(e.push(u),e.length===1&&i.setAttribute("a",n=!n))}}y.nextTick=y.setImmediate})();y.isNodejs=typeof process!="undefined"&&process.versions&&process.versions.node;y.globalScope=function(){return y.isNodejs?globalThis:typeof self=="undefined"?window:self}();y.isArray=Array.isArray||function(t){return Object.prototype.toString.call(t)==="[object Array]"};y.isArrayBuffer=function(t){return typeof ArrayBuffer!="undefined"&&t instanceof ArrayBuffer};y.isArrayBufferView=function(t){return t&&y.isArrayBuffer(t.buffer)&&t.byteLength!==void 0};function xn(t){if(!(t===8||t===16||t===24||t===32))throw new Error("Only 8, 16, 24, or 32 bits supported: "+t)}y.ByteBuffer=vo;function vo(t){if(this.data="",this.read=0,typeof t=="string")this.data=t;else if(y.isArrayBuffer(t)||y.isArrayBufferView(t))if(typeof Buffer!="undefined"&&t instanceof Buffer)this.data=t.toString("binary");else{var e=new Uint8Array(t);try{this.data=String.fromCharCode.apply(null,e)}catch(n){for(var r=0;r<e.length;++r)this.putByte(e[r])}}else(t instanceof vo||typeof t=="object"&&typeof t.data=="string"&&typeof t.read=="number")&&(this.data=t.data,this.read=t.read);this._constructedStringLength=0}y.ByteStringBuffer=vo;var ag=4096;y.ByteStringBuffer.prototype._optimizeConstructedString=function(t){this._constructedStringLength+=t,this._constructedStringLength>ag&&(this.data.substr(0,1),this._constructedStringLength=0)};y.ByteStringBuffer.prototype.length=function(){return this.data.length-this.read};y.ByteStringBuffer.prototype.isEmpty=function(){return this.length()<=0};y.ByteStringBuffer.prototype.putByte=function(t){return this.putBytes(String.fromCharCode(t))};y.ByteStringBuffer.prototype.fillWithByte=function(t,e){t=String.fromCharCode(t);for(var r=this.data;e>0;)e&1&&(r+=t),e>>>=1,e>0&&(t+=t);return this.data=r,this._optimizeConstructedString(e),this};y.ByteStringBuffer.prototype.putBytes=function(t){return this.data+=t,this._optimizeConstructedString(t.length),this};y.ByteStringBuffer.prototype.putString=function(t){return this.putBytes(y.encodeUtf8(t))};y.ByteStringBuffer.prototype.putInt16=function(t){return this.putBytes(String.fromCharCode(t>>8&255)+String.fromCharCode(t&255))};y.ByteStringBuffer.prototype.putInt24=function(t){return this.putBytes(String.fromCharCode(t>>16&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t&255))};y.ByteStringBuffer.prototype.putInt32=function(t){return this.putBytes(String.fromCharCode(t>>24&255)+String.fromCharCode(t>>16&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t&255))};y.ByteStringBuffer.prototype.putInt16Le=function(t){return this.putBytes(String.fromCharCode(t&255)+String.fromCharCode(t>>8&255))};y.ByteStringBuffer.prototype.putInt24Le=function(t){return this.putBytes(String.fromCharCode(t&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t>>16&255))};y.ByteStringBuffer.prototype.putInt32Le=function(t){return this.putBytes(String.fromCharCode(t&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t>>16&255)+String.fromCharCode(t>>24&255))};y.ByteStringBuffer.prototype.putInt=function(t,e){xn(e);var r="";do e-=8,r+=String.fromCharCode(t>>e&255);while(e>0);return this.putBytes(r)};y.ByteStringBuffer.prototype.putSignedInt=function(t,e){return t<0&&(t+=2<<e-1),this.putInt(t,e)};y.ByteStringBuffer.prototype.putBuffer=function(t){return this.putBytes(t.getBytes())};y.ByteStringBuffer.prototype.getByte=function(){return this.data.charCodeAt(this.read++)};y.ByteStringBuffer.prototype.getInt16=function(){var t=this.data.charCodeAt(this.read)<<8^this.data.charCodeAt(this.read+1);return this.read+=2,t};y.ByteStringBuffer.prototype.getInt24=function(){var t=this.data.charCodeAt(this.read)<<16^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2);return this.read+=3,t};y.ByteStringBuffer.prototype.getInt32=function(){var t=this.data.charCodeAt(this.read)<<24^this.data.charCodeAt(this.read+1)<<16^this.data.charCodeAt(this.read+2)<<8^this.data.charCodeAt(this.read+3);return this.read+=4,t};y.ByteStringBuffer.prototype.getInt16Le=function(){var t=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8;return this.read+=2,t};y.ByteStringBuffer.prototype.getInt24Le=function(){var t=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16;return this.read+=3,t};y.ByteStringBuffer.prototype.getInt32Le=function(){var t=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16^this.data.charCodeAt(this.read+3)<<24;return this.read+=4,t};y.ByteStringBuffer.prototype.getInt=function(t){xn(t);var e=0;do e=(e<<8)+this.data.charCodeAt(this.read++),t-=8;while(t>0);return e};y.ByteStringBuffer.prototype.getSignedInt=function(t){var e=this.getInt(t),r=2<<t-2;return e>=r&&(e-=r<<1),e};y.ByteStringBuffer.prototype.getBytes=function(t){var e;return t?(t=Math.min(this.length(),t),e=this.data.slice(this.read,this.read+t),this.read+=t):t===0?e="":(e=this.read===0?this.data:this.data.slice(this.read),this.clear()),e};y.ByteStringBuffer.prototype.bytes=function(t){return typeof t=="undefined"?this.data.slice(this.read):this.data.slice(this.read,this.read+t)};y.ByteStringBuffer.prototype.at=function(t){return this.data.charCodeAt(this.read+t)};y.ByteStringBuffer.prototype.setAt=function(t,e){return this.data=this.data.substr(0,this.read+t)+String.fromCharCode(e)+this.data.substr(this.read+t+1),this};y.ByteStringBuffer.prototype.last=function(){return this.data.charCodeAt(this.data.length-1)};y.ByteStringBuffer.prototype.copy=function(){var t=y.createBuffer(this.data);return t.read=this.read,t};y.ByteStringBuffer.prototype.compact=function(){return this.read>0&&(this.data=this.data.slice(this.read),this.read=0),this};y.ByteStringBuffer.prototype.clear=function(){return this.data="",this.read=0,this};y.ByteStringBuffer.prototype.truncate=function(t){var e=Math.max(0,this.length()-t);return this.data=this.data.substr(this.read,e),this.read=0,this};y.ByteStringBuffer.prototype.toHex=function(){for(var t="",e=this.read;e<this.data.length;++e){var r=this.data.charCodeAt(e);r<16&&(t+="0"),t+=r.toString(16)}return t};y.ByteStringBuffer.prototype.toString=function(){return y.decodeUtf8(this.bytes())};function ug(t,e){e=e||{},this.read=e.readOffset||0,this.growSize=e.growSize||1024;var r=y.isArrayBuffer(t),n=y.isArrayBufferView(t);if(r||n){r?this.data=new DataView(t):this.data=new DataView(t.buffer,t.byteOffset,t.byteLength),this.write="writeOffset"in e?e.writeOffset:this.data.byteLength;return}this.data=new DataView(new ArrayBuffer(0)),this.write=0,t!=null&&this.putBytes(t),"writeOffset"in e&&(this.write=e.writeOffset)}y.DataBuffer=ug;y.DataBuffer.prototype.length=function(){return this.write-this.read};y.DataBuffer.prototype.isEmpty=function(){return this.length()<=0};y.DataBuffer.prototype.accommodate=function(t,e){if(this.length()>=t)return this;e=Math.max(e||this.growSize,t);var r=new Uint8Array(this.data.buffer,this.data.byteOffset,this.data.byteLength),n=new Uint8Array(this.length()+e);return n.set(r),this.data=new DataView(n.buffer),this};y.DataBuffer.prototype.putByte=function(t){return this.accommodate(1),this.data.setUint8(this.write++,t),this};y.DataBuffer.prototype.fillWithByte=function(t,e){this.accommodate(e);for(var r=0;r<e;++r)this.data.setUint8(t);return this};y.DataBuffer.prototype.putBytes=function(t,e){if(y.isArrayBufferView(t)){var r=new Uint8Array(t.buffer,t.byteOffset,t.byteLength),n=r.byteLength-r.byteOffset;this.accommodate(n);var i=new Uint8Array(this.data.buffer,this.write);return i.set(r),this.write+=n,this}if(y.isArrayBuffer(t)){var r=new Uint8Array(t);this.accommodate(r.byteLength);var i=new Uint8Array(this.data.buffer);return i.set(r,this.write),this.write+=r.byteLength,this}if(t instanceof y.DataBuffer||typeof t=="object"&&typeof t.read=="number"&&typeof t.write=="number"&&y.isArrayBufferView(t.data)){var r=new Uint8Array(t.data.byteLength,t.read,t.length());this.accommodate(r.byteLength);var i=new Uint8Array(t.data.byteLength,this.write);return i.set(r),this.write+=r.byteLength,this}if(t instanceof y.ByteStringBuffer&&(t=t.data,e="binary"),e=e||"binary",typeof t=="string"){var s;if(e==="hex")return this.accommodate(Math.ceil(t.length/2)),s=new Uint8Array(this.data.buffer,this.write),this.write+=y.binary.hex.decode(t,s,this.write),this;if(e==="base64")return this.accommodate(Math.ceil(t.length/4)*3),s=new Uint8Array(this.data.buffer,this.write),this.write+=y.binary.base64.decode(t,s,this.write),this;if(e==="utf8"&&(t=y.encodeUtf8(t),e="binary"),e==="binary"||e==="raw")return this.accommodate(t.length),s=new Uint8Array(this.data.buffer,this.write),this.write+=y.binary.raw.decode(s),this;if(e==="utf16")return this.accommodate(t.length*2),s=new Uint16Array(this.data.buffer,this.write),this.write+=y.text.utf16.encode(s),this;throw new Error("Invalid encoding: "+e)}throw Error("Invalid parameter: "+t)};y.DataBuffer.prototype.putBuffer=function(t){return this.putBytes(t),t.clear(),this};y.DataBuffer.prototype.putString=function(t){return this.putBytes(t,"utf16")};y.DataBuffer.prototype.putInt16=function(t){return this.accommodate(2),this.data.setInt16(this.write,t),this.write+=2,this};y.DataBuffer.prototype.putInt24=function(t){return this.accommodate(3),this.data.setInt16(this.write,t>>8&65535),this.data.setInt8(this.write,t>>16&255),this.write+=3,this};y.DataBuffer.prototype.putInt32=function(t){return this.accommodate(4),this.data.setInt32(this.write,t),this.write+=4,this};y.DataBuffer.prototype.putInt16Le=function(t){return this.accommodate(2),this.data.setInt16(this.write,t,!0),this.write+=2,this};y.DataBuffer.prototype.putInt24Le=function(t){return this.accommodate(3),this.data.setInt8(this.write,t>>16&255),this.data.setInt16(this.write,t>>8&65535,!0),this.write+=3,this};y.DataBuffer.prototype.putInt32Le=function(t){return this.accommodate(4),this.data.setInt32(this.write,t,!0),this.write+=4,this};y.DataBuffer.prototype.putInt=function(t,e){xn(e),this.accommodate(e/8);do e-=8,this.data.setInt8(this.write++,t>>e&255);while(e>0);return this};y.DataBuffer.prototype.putSignedInt=function(t,e){return xn(e),this.accommodate(e/8),t<0&&(t+=2<<e-1),this.putInt(t,e)};y.DataBuffer.prototype.getByte=function(){return this.data.getInt8(this.read++)};y.DataBuffer.prototype.getInt16=function(){var t=this.data.getInt16(this.read);return this.read+=2,t};y.DataBuffer.prototype.getInt24=function(){var t=this.data.getInt16(this.read)<<8^this.data.getInt8(this.read+2);return this.read+=3,t};y.DataBuffer.prototype.getInt32=function(){var t=this.data.getInt32(this.read);return this.read+=4,t};y.DataBuffer.prototype.getInt16Le=function(){var t=this.data.getInt16(this.read,!0);return this.read+=2,t};y.DataBuffer.prototype.getInt24Le=function(){var t=this.data.getInt8(this.read)^this.data.getInt16(this.read+1,!0)<<8;return this.read+=3,t};y.DataBuffer.prototype.getInt32Le=function(){var t=this.data.getInt32(this.read,!0);return this.read+=4,t};y.DataBuffer.prototype.getInt=function(t){xn(t);var e=0;do e=(e<<8)+this.data.getInt8(this.read++),t-=8;while(t>0);return e};y.DataBuffer.prototype.getSignedInt=function(t){var e=this.getInt(t),r=2<<t-2;return e>=r&&(e-=r<<1),e};y.DataBuffer.prototype.getBytes=function(t){var e;return t?(t=Math.min(this.length(),t),e=this.data.slice(this.read,this.read+t),this.read+=t):t===0?e="":(e=this.read===0?this.data:this.data.slice(this.read),this.clear()),e};y.DataBuffer.prototype.bytes=function(t){return typeof t=="undefined"?this.data.slice(this.read):this.data.slice(this.read,this.read+t)};y.DataBuffer.prototype.at=function(t){return this.data.getUint8(this.read+t)};y.DataBuffer.prototype.setAt=function(t,e){return this.data.setUint8(t,e),this};y.DataBuffer.prototype.last=function(){return this.data.getUint8(this.write-1)};y.DataBuffer.prototype.copy=function(){return new y.DataBuffer(this)};y.DataBuffer.prototype.compact=function(){if(this.read>0){var t=new Uint8Array(this.data.buffer,this.read),e=new Uint8Array(t.byteLength);e.set(t),this.data=new DataView(e),this.write-=this.read,this.read=0}return this};y.DataBuffer.prototype.clear=function(){return this.data=new DataView(new ArrayBuffer(0)),this.read=this.write=0,this};y.DataBuffer.prototype.truncate=function(t){return this.write=Math.max(0,this.length()-t),this.read=Math.min(this.read,this.write),this};y.DataBuffer.prototype.toHex=function(){for(var t="",e=this.read;e<this.data.byteLength;++e){var r=this.data.getUint8(e);r<16&&(t+="0"),t+=r.toString(16)}return t};y.DataBuffer.prototype.toString=function(t){var e=new Uint8Array(this.data,this.read,this.length());if(t=t||"utf8",t==="binary"||t==="raw")return y.binary.raw.encode(e);if(t==="hex")return y.binary.hex.encode(e);if(t==="base64")return y.binary.base64.encode(e);if(t==="utf8")return y.text.utf8.decode(e);if(t==="utf16")return y.text.utf16.decode(e);throw new Error("Invalid encoding: "+t)};y.createBuffer=function(t,e){return e=e||"raw",t!==void 0&&e==="utf8"&&(t=y.encodeUtf8(t)),new y.ByteBuffer(t)};y.fillString=function(t,e){for(var r="";e>0;)e&1&&(r+=t),e>>>=1,e>0&&(t+=t);return r};y.xorBytes=function(t,e,r){for(var n="",i="",s="",o=0,a=0;r>0;--r,++o)i=t.charCodeAt(o)^e.charCodeAt(o),a>=10&&(n+=s,s="",a=0),s+=String.fromCharCode(i),++a;return n+=s,n};y.hexToBytes=function(t){var e="",r=0;for(t.length&!0&&(r=1,e+=String.fromCharCode(parseInt(t[0],16)));r<t.length;r+=2)e+=String.fromCharCode(parseInt(t.substr(r,2),16));return e};y.bytesToHex=function(t){return y.createBuffer(t).toHex()};y.int32ToBytes=function(t){return String.fromCharCode(t>>24&255)+String.fromCharCode(t>>16&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t&255)};var Ht="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",Gt=[62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,64,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51],wf="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";y.encode64=function(t,e){for(var r="",n="",i,s,o,a=0;a<t.length;)i=t.charCodeAt(a++),s=t.charCodeAt(a++),o=t.charCodeAt(a++),r+=Ht.charAt(i>>2),r+=Ht.charAt((i&3)<<4|s>>4),isNaN(s)?r+="==":(r+=Ht.charAt((s&15)<<2|o>>6),r+=isNaN(o)?"=":Ht.charAt(o&63)),e&&r.length>e&&(n+=r.substr(0,e)+`\r
`,r=r.substr(e));return n+=r,n};y.decode64=function(t){t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");for(var e="",r,n,i,s,o=0;o<t.length;)r=Gt[t.charCodeAt(o++)-43],n=Gt[t.charCodeAt(o++)-43],i=Gt[t.charCodeAt(o++)-43],s=Gt[t.charCodeAt(o++)-43],e+=String.fromCharCode(r<<2|n>>4),i!==64&&(e+=String.fromCharCode((n&15)<<4|i>>2),s!==64&&(e+=String.fromCharCode((i&3)<<6|s)));return e};y.encodeUtf8=function(t){return unescape(encodeURIComponent(t))};y.decodeUtf8=function(t){return decodeURIComponent(escape(t))};y.binary={raw:{},hex:{},base64:{},base58:{},baseN:{encode:bf.encode,decode:bf.decode}};y.binary.raw.encode=function(t){return String.fromCharCode.apply(null,t)};y.binary.raw.decode=function(t,e,r){var n=e;n||(n=new Uint8Array(t.length)),r=r||0;for(var i=r,s=0;s<t.length;++s)n[i++]=t.charCodeAt(s);return e?i-r:n};y.binary.hex.encode=y.bytesToHex;y.binary.hex.decode=function(t,e,r){var n=e;n||(n=new Uint8Array(Math.ceil(t.length/2))),r=r||0;var i=0,s=r;for(t.length&1&&(i=1,n[s++]=parseInt(t[0],16));i<t.length;i+=2)n[s++]=parseInt(t.substr(i,2),16);return e?s-r:n};y.binary.base64.encode=function(t,e){for(var r="",n="",i,s,o,a=0;a<t.byteLength;)i=t[a++],s=t[a++],o=t[a++],r+=Ht.charAt(i>>2),r+=Ht.charAt((i&3)<<4|s>>4),isNaN(s)?r+="==":(r+=Ht.charAt((s&15)<<2|o>>6),r+=isNaN(o)?"=":Ht.charAt(o&63)),e&&r.length>e&&(n+=r.substr(0,e)+`\r
`,r=r.substr(e));return n+=r,n};y.binary.base64.decode=function(t,e,r){var n=e;n||(n=new Uint8Array(Math.ceil(t.length/4)*3)),t=t.replace(/[^A-Za-z0-9\+\/\=]/g,""),r=r||0;for(var i,s,o,a,u=0,c=r;u<t.length;)i=Gt[t.charCodeAt(u++)-43],s=Gt[t.charCodeAt(u++)-43],o=Gt[t.charCodeAt(u++)-43],a=Gt[t.charCodeAt(u++)-43],n[c++]=i<<2|s>>4,o!==64&&(n[c++]=(s&15)<<4|o>>2,a!==64&&(n[c++]=(o&3)<<6|a));return e?c-r:n.subarray(0,c)};y.binary.base58.encode=function(t,e){return y.binary.baseN.encode(t,wf,e)};y.binary.base58.decode=function(t,e){return y.binary.baseN.decode(t,wf,e)};y.text={utf8:{},utf16:{}};y.text.utf8.encode=function(t,e,r){t=y.encodeUtf8(t);var n=e;n||(n=new Uint8Array(t.length)),r=r||0;for(var i=r,s=0;s<t.length;++s)n[i++]=t.charCodeAt(s);return e?i-r:n};y.text.utf8.decode=function(t){return y.decodeUtf8(String.fromCharCode.apply(null,t))};y.text.utf16.encode=function(t,e,r){var n=e;n||(n=new Uint8Array(t.length*2));var i=new Uint16Array(n.buffer);r=r||0;for(var s=r,o=r,a=0;a<t.length;++a)i[o++]=t.charCodeAt(a),s+=2;return e?s-r:n};y.text.utf16.decode=function(t){return String.fromCharCode.apply(null,new Uint16Array(t.buffer))};y.deflate=function(t,e,r){if(e=y.decode64(t.deflate(y.encode64(e)).rval),r){var n=2,i=e.charCodeAt(1);i&32&&(n=6),e=e.substring(n,e.length-4)}return e};y.inflate=function(t,e,r){var n=t.inflate(y.encode64(e)).rval;return n===null?null:y.decode64(n)};var mo=function(t,e,r){if(!t)throw new Error("WebStorage not available.");var n;if(r===null?n=t.removeItem(e):(r=y.encode64(JSON.stringify(r)),n=t.setItem(e,r)),typeof n!="undefined"&&n.rval!==!0){var i=new Error(n.error.message);throw i.id=n.error.id,i.name=n.error.name,i}},bo=function(t,e){if(!t)throw new Error("WebStorage not available.");var r=t.getItem(e);if(t.init)if(r.rval===null){if(r.error){var n=new Error(r.error.message);throw n.id=r.error.id,n.name=r.error.name,n}r=null}else r=r.rval;return r!==null&&(r=JSON.parse(y.decode64(r))),r},cg=function(t,e,r,n){var i=bo(t,e);i===null&&(i={}),i[r]=n,mo(t,e,i)},fg=function(t,e,r){var n=bo(t,e);return n!==null&&(n=r in n?n[r]:null),n},hg=function(t,e,r){var n=bo(t,e);if(n!==null&&r in n){delete n[r];var i=!0;for(var s in n){i=!1;break}i&&(n=null),mo(t,e,n)}},lg=function(t,e){mo(t,e,null)},Bi=function(t,e,r){var n=null;typeof r=="undefined"&&(r=["web","flash"]);var i,s=!1,o=null;for(var a in r){i=r[a];try{if(i==="flash"||i==="both"){if(e[0]===null)throw new Error("Flash local storage not available.");n=t.apply(this,e),s=i==="flash"}(i==="web"||i==="both")&&(e[0]=localStorage,n=t.apply(this,e),s=!0)}catch(u){o=u}if(s)break}if(!s)throw o;return n};y.setItem=function(t,e,r,n,i){Bi(cg,arguments,i)};y.getItem=function(t,e,r,n){return Bi(fg,arguments,n)};y.removeItem=function(t,e,r,n){Bi(hg,arguments,n)};y.clearItems=function(t,e,r){Bi(lg,arguments,r)};y.parseUrl=function(t){var e=/^(https?):\/\/([^:&^\/]*):?(\d*)(.*)$/g;e.lastIndex=0;var r=e.exec(t),n=r===null?null:{full:t,scheme:r[1],host:r[2],port:r[3],path:r[4]};return n&&(n.fullHost=n.host,n.port?(n.port!==80&&n.scheme==="http"||n.port!==443&&n.scheme==="https")&&(n.fullHost+=":"+n.port):n.scheme==="http"?n.port=80:n.scheme==="https"&&(n.port=443),n.full=n.scheme+"://"+n.fullHost),n};var Ci=null;y.getQueryVariables=function(t){var e=function(n){for(var i={},s=n.split("&"),o=0;o<s.length;o++){var a=s[o].indexOf("="),u,c;a>0?(u=s[o].substring(0,a),c=s[o].substring(a+1)):(u=s[o],c=null),u in i||(i[u]=[]),!(u in Object.prototype)&&c!==null&&i[u].push(unescape(c))}return i},r;return typeof t=="undefined"?(Ci===null&&(typeof window!="undefined"&&window.location&&window.location.search?Ci=e(window.location.search.substring(1)):Ci={}),r=Ci):r=e(t),r};y.parseFragment=function(t){var e=t,r="",n=t.indexOf("?");n>0&&(e=t.substring(0,n),r=t.substring(n+1));var i=e.split("/");i.length>0&&i[0]===""&&i.shift();var s=r===""?{}:y.getQueryVariables(r);return{pathString:e,queryString:r,path:i,query:s}};y.makeRequest=function(t){var e=y.parseFragment(t),r={path:e.pathString,query:e.queryString,getPath:function(n){return typeof n=="undefined"?e.path:e.path[n]},getQuery:function(n,i){var s;return typeof n=="undefined"?s=e.query:(s=e.query[n],s&&typeof i!="undefined"&&(s=s[i])),s},getQueryLast:function(n,i){var s,o=r.getQuery(n);return o?s=o[o.length-1]:s=i,s}};return r};y.makeLink=function(t,e,r){t=jQuery.isArray(t)?t.join("/"):t;var n=jQuery.param(e||{});return r=r||"",t+(n.length>0?"?"+n:"")+(r.length>0?"#"+r:"")};y.isEmpty=function(t){for(var e in t)if(t.hasOwnProperty(e))return!1;return!0};y.format=function(t){for(var e=/%./g,r,n,i=0,s=[],o=0;r=e.exec(t);){n=t.substring(o,e.lastIndex-2),n.length>0&&s.push(n),o=e.lastIndex;var a=r[0][1];switch(a){case"s":case"o":i<arguments.length?s.push(arguments[i+++1]):s.push("<?>");break;case"%":s.push("%");break;default:s.push("<%"+a+"?>")}}return s.push(t.substring(o)),s.join("")};y.formatNumber=function(t,e,r,n){var i=t,s=isNaN(e=Math.abs(e))?2:e,o=r===void 0?",":r,a=n===void 0?".":n,u=i<0?"-":"",c=parseInt(i=Math.abs(+i||0).toFixed(s),10)+"",f=c.length>3?c.length%3:0;return u+(f?c.substr(0,f)+a:"")+c.substr(f).replace(/(\d{3})(?=\d)/g,"$1"+a)+(s?o+Math.abs(i-c).toFixed(s).slice(2):"")};y.formatSize=function(t){return t>=1073741824?t=y.formatNumber(t/1073741824,2,".","")+" GiB":t>=1048576?t=y.formatNumber(t/1048576,2,".","")+" MiB":t>=1024?t=y.formatNumber(t/1024,0)+" KiB":t=y.formatNumber(t,0)+" bytes",t};y.bytesFromIP=function(t){return t.indexOf(".")!==-1?y.bytesFromIPv4(t):t.indexOf(":")!==-1?y.bytesFromIPv6(t):null};y.bytesFromIPv4=function(t){if(t=t.split("."),t.length!==4)return null;for(var e=y.createBuffer(),r=0;r<t.length;++r){var n=parseInt(t[r],10);if(isNaN(n))return null;e.putByte(n)}return e.getBytes()};y.bytesFromIPv6=function(t){var e=0;t=t.split(":").filter(function(o){return o.length===0&&++e,!0});for(var r=(8-t.length+e)*2,n=y.createBuffer(),i=0;i<8;++i){if(!t[i]||t[i].length===0){n.fillWithByte(0,r),r=0;continue}var s=y.hexToBytes(t[i]);s.length<2&&n.putByte(0),n.putBytes(s)}return n.getBytes()};y.bytesToIP=function(t){return t.length===4?y.bytesToIPv4(t):t.length===16?y.bytesToIPv6(t):null};y.bytesToIPv4=function(t){if(t.length!==4)return null;for(var e=[],r=0;r<t.length;++r)e.push(t.charCodeAt(r));return e.join(".")};y.bytesToIPv6=function(t){if(t.length!==16)return null;for(var e=[],r=[],n=0,i=0;i<t.length;i+=2){for(var s=y.bytesToHex(t[i]+t[i+1]);s[0]==="0"&&s!=="0";)s=s.substr(1);if(s==="0"){var o=r[r.length-1],a=e.length;!o||a!==o.end+1?r.push({start:a,end:a}):(o.end=a,o.end-o.start>r[n].end-r[n].start&&(n=r.length-1))}e.push(s)}if(r.length>0){var u=r[n];u.end-u.start>0&&(e.splice(u.start,u.end-u.start+1,""),u.start===0&&e.unshift(""),u.end===7&&e.push(""))}return e.join(":")};y.estimateCores=function(t,e){if(typeof t=="function"&&(e=t,t={}),t=t||{},"cores"in y&&!t.update)return e(null,y.cores);if(typeof navigator!="undefined"&&"hardwareConcurrency"in navigator&&navigator.hardwareConcurrency>0)return y.cores=navigator.hardwareConcurrency,e(null,y.cores);if(typeof Worker=="undefined")return y.cores=1,e(null,y.cores);if(typeof Blob=="undefined")return y.cores=2,e(null,y.cores);var r=URL.createObjectURL(new Blob(["(",function(){self.addEventListener("message",function(o){for(var a=Date.now(),u=a+4;Date.now()<u;);self.postMessage({st:a,et:u})})}.toString(),")()"],{type:"application/javascript"}));n([],5,16);function n(o,a,u){if(a===0){var c=Math.floor(o.reduce(function(f,h){return f+h},0)/o.length);return y.cores=Math.max(1,c),URL.revokeObjectURL(r),e(null,y.cores)}i(u,function(f,h){o.push(s(u,h)),n(o,a-1,u)})}function i(o,a){for(var u=[],c=[],f=0;f<o;++f){var h=new Worker(r);h.addEventListener("message",function(l){if(c.push(l.data),c.length===o){for(var d=0;d<o;++d)u[d].terminate();a(null,c)}}),u.push(h)}for(var f=0;f<o;++f)u[f].postMessage(f)}function s(o,a){for(var u=[],c=0;c<o;++c)for(var f=a[c],h=u[c]=[],l=0;l<o;++l)if(c!==l){var d=a[l];(f.st>d.st&&f.st<d.et||d.st>f.st&&d.st<f.et)&&h.push(l)}return u.reduce(function(p,g){return Math.max(p,g.length)},0)}}});var _i=E((Yw,Sf)=>{var vn=J();vn.pki=vn.pki||{};var wo=Sf.exports=vn.pki.oids=vn.oids=vn.oids||{};function A(t,e){wo[t]=e,wo[e]=t}function $(t,e){wo[t]=e}A("1.2.840.113549.1.1.1","rsaEncryption");A("1.2.840.113549.1.1.4","md5WithRSAEncryption");A("1.2.840.113549.1.1.5","sha1WithRSAEncryption");A("1.2.840.113549.1.1.7","RSAES-OAEP");A("1.2.840.113549.1.1.8","mgf1");A("1.2.840.113549.1.1.9","pSpecified");A("1.2.840.113549.1.1.10","RSASSA-PSS");A("1.2.840.113549.1.1.11","sha256WithRSAEncryption");A("1.2.840.113549.1.1.12","sha384WithRSAEncryption");A("1.2.840.113549.1.1.13","sha512WithRSAEncryption");A("1.3.101.112","EdDSA25519");A("1.2.840.10040.4.3","dsa-with-sha1");A("1.3.14.3.2.7","desCBC");A("1.3.14.3.2.26","sha1");A("2.16.840.1.101.3.4.2.1","sha256");A("2.16.840.1.101.3.4.2.2","sha384");A("2.16.840.1.101.3.4.2.3","sha512");A("1.2.840.113549.2.5","md5");A("1.2.840.113549.1.7.1","data");A("1.2.840.113549.1.7.2","signedData");A("1.2.840.113549.1.7.3","envelopedData");A("1.2.840.113549.1.7.4","signedAndEnvelopedData");A("1.2.840.113549.1.7.5","digestedData");A("1.2.840.113549.1.7.6","encryptedData");A("1.2.840.113549.1.9.1","emailAddress");A("1.2.840.113549.1.9.2","unstructuredName");A("1.2.840.113549.1.9.3","contentType");A("1.2.840.113549.1.9.4","messageDigest");A("1.2.840.113549.1.9.5","signingTime");A("1.2.840.113549.1.9.6","counterSignature");A("1.2.840.113549.1.9.7","challengePassword");A("1.2.840.113549.1.9.8","unstructuredAddress");A("1.2.840.113549.1.9.14","extensionRequest");A("1.2.840.113549.1.9.20","friendlyName");A("1.2.840.113549.1.9.21","localKeyId");A("1.2.840.113549.1.9.22.1","x509Certificate");A("1.2.840.113549.1.12.10.1.1","keyBag");A("1.2.840.113549.1.12.10.1.2","pkcs8ShroudedKeyBag");A("1.2.840.113549.1.12.10.1.3","certBag");A("1.2.840.113549.1.12.10.1.4","crlBag");A("1.2.840.113549.1.12.10.1.5","secretBag");A("1.2.840.113549.1.12.10.1.6","safeContentsBag");A("1.2.840.113549.1.5.13","pkcs5PBES2");A("1.2.840.113549.1.5.12","pkcs5PBKDF2");A("1.2.840.113549.1.12.1.1","pbeWithSHAAnd128BitRC4");A("1.2.840.113549.1.12.1.2","pbeWithSHAAnd40BitRC4");A("1.2.840.113549.1.12.1.3","pbeWithSHAAnd3-KeyTripleDES-CBC");A("1.2.840.113549.1.12.1.4","pbeWithSHAAnd2-KeyTripleDES-CBC");A("1.2.840.113549.1.12.1.5","pbeWithSHAAnd128BitRC2-CBC");A("1.2.840.113549.1.12.1.6","pbewithSHAAnd40BitRC2-CBC");A("1.2.840.113549.2.7","hmacWithSHA1");A("1.2.840.113549.2.8","hmacWithSHA224");A("1.2.840.113549.2.9","hmacWithSHA256");A("1.2.840.113549.2.10","hmacWithSHA384");A("1.2.840.113549.2.11","hmacWithSHA512");A("1.2.840.113549.3.7","des-EDE3-CBC");A("2.16.840.1.101.3.4.1.2","aes128-CBC");A("2.16.840.1.101.3.4.1.22","aes192-CBC");A("2.16.840.1.101.3.4.1.42","aes256-CBC");A("2.5.4.3","commonName");A("2.5.4.5","serialName");A("2.5.4.6","countryName");A("2.5.4.7","localityName");A("2.5.4.8","stateOrProvinceName");A("2.5.4.9","streetAddress");A("2.5.4.10","organizationName");A("2.5.4.11","organizationalUnitName");A("2.5.4.13","description");A("2.5.4.15","businessCategory");A("2.5.4.17","postalCode");A("1.3.6.1.4.1.311.60.2.1.2","jurisdictionOfIncorporationStateOrProvinceName");A("1.3.6.1.4.1.311.60.2.1.3","jurisdictionOfIncorporationCountryName");A("2.16.840.1.113730.1.1","nsCertType");A("2.16.840.1.113730.1.13","nsComment");$("2.5.29.1","authorityKeyIdentifier");$("2.5.29.2","keyAttributes");$("2.5.29.3","certificatePolicies");$("2.5.29.4","keyUsageRestriction");$("2.5.29.5","policyMapping");$("2.5.29.6","subtreesConstraint");$("2.5.29.7","subjectAltName");$("2.5.29.8","issuerAltName");$("2.5.29.9","subjectDirectoryAttributes");$("2.5.29.10","basicConstraints");$("2.5.29.11","nameConstraints");$("2.5.29.12","policyConstraints");$("2.5.29.13","basicConstraints");A("2.5.29.14","subjectKeyIdentifier");A("2.5.29.15","keyUsage");$("2.5.29.16","privateKeyUsagePeriod");A("2.5.29.17","subjectAltName");A("2.5.29.18","issuerAltName");A("2.5.29.19","basicConstraints");$("2.5.29.20","cRLNumber");$("2.5.29.21","cRLReason");$("2.5.29.22","expirationDate");$("2.5.29.23","instructionCode");$("2.5.29.24","invalidityDate");$("2.5.29.25","cRLDistributionPoints");$("2.5.29.26","issuingDistributionPoint");$("2.5.29.27","deltaCRLIndicator");$("2.5.29.28","issuingDistributionPoint");$("2.5.29.29","certificateIssuer");$("2.5.29.30","nameConstraints");A("2.5.29.31","cRLDistributionPoints");A("2.5.29.32","certificatePolicies");$("2.5.29.33","policyMappings");$("2.5.29.34","policyConstraints");A("2.5.29.35","authorityKeyIdentifier");$("2.5.29.36","policyConstraints");A("2.5.29.37","extKeyUsage");$("2.5.29.46","freshestCRL");$("2.5.29.54","inhibitAnyPolicy");A("1.3.6.1.4.1.11129.2.4.2","timestampList");A("1.3.6.1.5.5.7.1.1","authorityInfoAccess");A("1.3.6.1.5.5.7.3.1","serverAuth");A("1.3.6.1.5.5.7.3.2","clientAuth");A("1.3.6.1.5.5.7.3.3","codeSigning");A("1.3.6.1.5.5.7.3.4","emailProtection");A("1.3.6.1.5.5.7.3.8","timeStamping")});var bn=E((Qw,Cf)=>{var ie=J();pe();_i();var R=Cf.exports=ie.asn1=ie.asn1||{};R.Class={UNIVERSAL:0,APPLICATION:64,CONTEXT_SPECIFIC:128,PRIVATE:192};R.Type={NONE:0,BOOLEAN:1,INTEGER:2,BITSTRING:3,OCTETSTRING:4,NULL:5,OID:6,ODESC:7,EXTERNAL:8,REAL:9,ENUMERATED:10,EMBEDDED:11,UTF8:12,ROID:13,SEQUENCE:16,SET:17,PRINTABLESTRING:19,IA5STRING:22,UTCTIME:23,GENERALIZEDTIME:24,BMPSTRING:30};R.create=function(t,e,r,n,i){if(ie.util.isArray(n)){for(var s=[],o=0;o<n.length;++o)n[o]!==void 0&&s.push(n[o]);n=s}var a={tagClass:t,type:e,constructed:r,composed:r||ie.util.isArray(n),value:n};return i&&"bitStringContents"in i&&(a.bitStringContents=i.bitStringContents,a.original=R.copy(a)),a};R.copy=function(t,e){var r;if(ie.util.isArray(t)){r=[];for(var n=0;n<t.length;++n)r.push(R.copy(t[n],e));return r}return typeof t=="string"?t:(r={tagClass:t.tagClass,type:t.type,constructed:t.constructed,composed:t.composed,value:R.copy(t.value,e)},e&&!e.excludeBitStringContents&&(r.bitStringContents=t.bitStringContents),r)};R.equals=function(t,e,r){if(ie.util.isArray(t)){if(!ie.util.isArray(e)||t.length!==e.length)return!1;for(var n=0;n<t.length;++n)if(!R.equals(t[n],e[n]))return!1;return!0}if(typeof t!=typeof e)return!1;if(typeof t=="string")return t===e;var i=t.tagClass===e.tagClass&&t.type===e.type&&t.constructed===e.constructed&&t.composed===e.composed&&R.equals(t.value,e.value);return r&&r.includeBitStringContents&&(i=i&&t.bitStringContents===e.bitStringContents),i};R.getBerValueLength=function(t){var e=t.getByte();if(e!==128){var r,n=e&128;return n?r=t.getInt((e&127)<<3):r=e,r}};function mn(t,e,r){if(r>e){var n=new Error("Too few bytes to parse DER.");throw n.available=t.length(),n.remaining=e,n.requested=r,n}}var pg=function(t,e){var r=t.getByte();if(e--,r!==128){var n,i=r&128;if(!i)n=r;else{var s=r&127;mn(t,e,s),n=t.getInt(s<<3)}if(n<0)throw new Error("Negative length: "+n);return n}};R.fromDer=function(t,e){return e===void 0&&(e={strict:!0,decodeBitStrings:!0}),typeof e=="boolean"&&(e={strict:e,decodeBitStrings:!0}),"strict"in e||(e.strict=!0),"decodeBitStrings"in e||(e.decodeBitStrings=!0),typeof t=="string"&&(t=ie.util.createBuffer(t)),Ai(t,t.length(),0,e)};function Ai(t,e,r,n){var i;mn(t,e,2);var s=t.getByte();e--;var o=s&192,a=s&31;i=t.length();var u=pg(t,e);if(e-=i-t.length(),u!==void 0&&u>e){if(n.strict){var c=new Error("Too few bytes to read ASN.1 value.");throw c.available=t.length(),c.remaining=e,c.requested=u,c}u=e}var f,h,l=(s&32)==32;if(l)if(f=[],u===void 0)for(;;){if(mn(t,e,2),t.bytes(2)===String.fromCharCode(0,0)){t.getBytes(2),e-=2;break}i=t.length(),f.push(Ai(t,e,r+1,n)),e-=i-t.length()}else for(;u>0;)i=t.length(),f.push(Ai(t,u,r+1,n)),e-=i-t.length(),u-=i-t.length();if(f===void 0&&o===R.Class.UNIVERSAL&&a===R.Type.BITSTRING&&(h=t.bytes(u)),f===void 0&&n.decodeBitStrings&&o===R.Class.UNIVERSAL&&a===R.Type.BITSTRING&&u>1){var d=t.read,p=e,g=0;if(a===R.Type.BITSTRING&&(mn(t,e,1),g=t.getByte(),e--),g===0)try{i=t.length();var x={verbose:n.verbose,strict:!0,decodeBitStrings:!0},m=Ai(t,e,r+1,x),B=i-t.length();e-=B,a==R.Type.BITSTRING&&B++;var I=m.tagClass;B===u&&(I===R.Class.UNIVERSAL||I===R.Class.CONTEXT_SPECIFIC)&&(f=[m])}catch(T){}f===void 0&&(t.read=d,e=p)}if(f===void 0){if(u===void 0){if(n.strict)throw new Error("Non-constructed ASN.1 object of indefinite length.");u=e}if(a===R.Type.BMPSTRING)for(f="";u>0;u-=2)mn(t,e,2),f+=String.fromCharCode(t.getInt16()),e-=2;else f=t.getBytes(u)}var L=h===void 0?null:{bitStringContents:h};return R.create(o,a,l,f,L)}R.toDer=function(t){var e=ie.util.createBuffer(),r=t.tagClass|t.type,n=ie.util.createBuffer(),i=!1;if("bitStringContents"in t&&(i=!0,t.original&&(i=R.equals(t,t.original))),i)n.putBytes(t.bitStringContents);else if(t.composed){t.constructed?r|=32:n.putByte(0);for(var s=0;s<t.value.length;++s)t.value[s]!==void 0&&n.putBuffer(R.toDer(t.value[s]))}else if(t.type===R.Type.BMPSTRING)for(var s=0;s<t.value.length;++s)n.putInt16(t.value.charCodeAt(s));else t.type===R.Type.INTEGER&&t.value.length>1&&(t.value.charCodeAt(0)===0&&(t.value.charCodeAt(1)&128)==0||t.value.charCodeAt(0)===255&&(t.value.charCodeAt(1)&128)==128)?n.putBytes(t.value.substr(1)):n.putBytes(t.value);if(e.putByte(r),n.length()<=127)e.putByte(n.length()&127);else{var o=n.length(),a="";do a+=String.fromCharCode(o&255),o=o>>>8;while(o>0);e.putByte(a.length|128);for(var s=a.length-1;s>=0;--s)e.putByte(a.charCodeAt(s))}return e.putBuffer(n),e};R.oidToDer=function(t){var e=t.split("."),r=ie.util.createBuffer();r.putByte(40*parseInt(e[0],10)+parseInt(e[1],10));for(var n,i,s,o,a=2;a<e.length;++a){n=!0,i=[],s=parseInt(e[a],10);do o=s&127,s=s>>>7,n||(o|=128),i.push(o),n=!1;while(s>0);for(var u=i.length-1;u>=0;--u)r.putByte(i[u])}return r};R.derToOid=function(t){var e;typeof t=="string"&&(t=ie.util.createBuffer(t));var r=t.getByte();e=Math.floor(r/40)+"."+r%40;for(var n=0;t.length()>0;)r=t.getByte(),n=n<<7,r&128?n+=r&127:(e+="."+(n+r),n=0);return e};R.utcTimeToDate=function(t){var e=new Date,r=parseInt(t.substr(0,2),10);r=r>=50?1900+r:2e3+r;var n=parseInt(t.substr(2,2),10)-1,i=parseInt(t.substr(4,2),10),s=parseInt(t.substr(6,2),10),o=parseInt(t.substr(8,2),10),a=0;if(t.length>11){var u=t.charAt(10),c=10;u!=="+"&&u!=="-"&&(a=parseInt(t.substr(10,2),10),c+=2)}if(e.setUTCFullYear(r,n,i),e.setUTCHours(s,o,a,0),c&&(u=t.charAt(c),u==="+"||u==="-")){var f=parseInt(t.substr(c+1,2),10),h=parseInt(t.substr(c+4,2),10),l=f*60+h;l*=6e4,u==="+"?e.setTime(+e-l):e.setTime(+e+l)}return e};R.generalizedTimeToDate=function(t){var e=new Date,r=parseInt(t.substr(0,4),10),n=parseInt(t.substr(4,2),10)-1,i=parseInt(t.substr(6,2),10),s=parseInt(t.substr(8,2),10),o=parseInt(t.substr(10,2),10),a=parseInt(t.substr(12,2),10),u=0,c=0,f=!1;t.charAt(t.length-1)==="Z"&&(f=!0);var h=t.length-5,l=t.charAt(h);if(l==="+"||l==="-"){var d=parseInt(t.substr(h+1,2),10),p=parseInt(t.substr(h+4,2),10);c=d*60+p,c*=6e4,l==="+"&&(c*=-1),f=!0}return t.charAt(14)==="."&&(u=parseFloat(t.substr(14),10)*1e3),f?(e.setUTCFullYear(r,n,i),e.setUTCHours(s,o,a,u),e.setTime(+e+c)):(e.setFullYear(r,n,i),e.setHours(s,o,a,u)),e};R.dateToUtcTime=function(t){if(typeof t=="string")return t;var e="",r=[];r.push((""+t.getUTCFullYear()).substr(2)),r.push(""+(t.getUTCMonth()+1)),r.push(""+t.getUTCDate()),r.push(""+t.getUTCHours()),r.push(""+t.getUTCMinutes()),r.push(""+t.getUTCSeconds());for(var n=0;n<r.length;++n)r[n].length<2&&(e+="0"),e+=r[n];return e+="Z",e};R.dateToGeneralizedTime=function(t){if(typeof t=="string")return t;var e="",r=[];r.push(""+t.getUTCFullYear()),r.push(""+(t.getUTCMonth()+1)),r.push(""+t.getUTCDate()),r.push(""+t.getUTCHours()),r.push(""+t.getUTCMinutes()),r.push(""+t.getUTCSeconds());for(var n=0;n<r.length;++n)r[n].length<2&&(e+="0"),e+=r[n];return e+="Z",e};R.integerToDer=function(t){var e=ie.util.createBuffer();if(t>=-128&&t<128)return e.putSignedInt(t,8);if(t>=-32768&&t<32768)return e.putSignedInt(t,16);if(t>=-8388608&&t<8388608)return e.putSignedInt(t,24);if(t>=-2147483648&&t<2147483648)return e.putSignedInt(t,32);var r=new Error("Integer too large; max is 32-bits.");throw r.integer=t,r};R.derToInteger=function(t){typeof t=="string"&&(t=ie.util.createBuffer(t));var e=t.length()*8;if(e>32)throw new Error("Integer too large; max is 32-bits.");return t.getSignedInt(e)};R.validate=function(t,e,r,n){var i=!1;if((t.tagClass===e.tagClass||typeof e.tagClass=="undefined")&&(t.type===e.type||typeof e.type=="undefined"))if(t.constructed===e.constructed||typeof e.constructed=="undefined"){if(i=!0,e.value&&ie.util.isArray(e.value))for(var s=0,o=0;i&&o<e.value.length;++o)i=e.value[o].optional||!1,t.value[s]&&(i=R.validate(t.value[s],e.value[o],r,n),i?++s:e.value[o].optional&&(i=!0)),!i&&n&&n.push("["+e.name+'] Tag class "'+e.tagClass+'", type "'+e.type+'" expected value length "'+e.value.length+'", got "'+t.value.length+'"');if(i&&r&&(e.capture&&(r[e.capture]=t.value),e.captureAsn1&&(r[e.captureAsn1]=t),e.captureBitStringContents&&"bitStringContents"in t&&(r[e.captureBitStringContents]=t.bitStringContents),e.captureBitStringValue&&"bitStringContents"in t)){var a;if(t.bitStringContents.length<2)r[e.captureBitStringValue]="";else{var u=t.bitStringContents.charCodeAt(0);if(u!==0)throw new Error("captureBitStringValue only supported for zero unused bits");r[e.captureBitStringValue]=t.bitStringContents.slice(1)}}}else n&&n.push("["+e.name+'] Expected constructed "'+e.constructed+'", got "'+t.constructed+'"');else n&&(t.tagClass!==e.tagClass&&n.push("["+e.name+'] Expected tag class "'+e.tagClass+'", got "'+t.tagClass+'"'),t.type!==e.type&&n.push("["+e.name+'] Expected type "'+e.type+'", got "'+t.type+'"'));return i};var Bf=/[^\\u0000-\\u00ff]/;R.prettyPrint=function(t,e,r){var n="";e=e||0,r=r||2,e>0&&(n+=`
`);for(var i="",s=0;s<e*r;++s)i+=" ";switch(n+=i+"Tag: ",t.tagClass){case R.Class.UNIVERSAL:n+="Universal:";break;case R.Class.APPLICATION:n+="Application:";break;case R.Class.CONTEXT_SPECIFIC:n+="Context-Specific:";break;case R.Class.PRIVATE:n+="Private:";break}if(t.tagClass===R.Class.UNIVERSAL)switch(n+=t.type,t.type){case R.Type.NONE:n+=" (None)";break;case R.Type.BOOLEAN:n+=" (Boolean)";break;case R.Type.INTEGER:n+=" (Integer)";break;case R.Type.BITSTRING:n+=" (Bit string)";break;case R.Type.OCTETSTRING:n+=" (Octet string)";break;case R.Type.NULL:n+=" (Null)";break;case R.Type.OID:n+=" (Object Identifier)";break;case R.Type.ODESC:n+=" (Object Descriptor)";break;case R.Type.EXTERNAL:n+=" (External or Instance of)";break;case R.Type.REAL:n+=" (Real)";break;case R.Type.ENUMERATED:n+=" (Enumerated)";break;case R.Type.EMBEDDED:n+=" (Embedded PDV)";break;case R.Type.UTF8:n+=" (UTF8)";break;case R.Type.ROID:n+=" (Relative Object Identifier)";break;case R.Type.SEQUENCE:n+=" (Sequence)";break;case R.Type.SET:n+=" (Set)";break;case R.Type.PRINTABLESTRING:n+=" (Printable String)";break;case R.Type.IA5String:n+=" (IA5String (ASCII))";break;case R.Type.UTCTIME:n+=" (UTC time)";break;case R.Type.GENERALIZEDTIME:n+=" (Generalized time)";break;case R.Type.BMPSTRING:n+=" (BMP String)";break}else n+=t.type;if(n+=`
`,n+=i+"Constructed: "+t.constructed+`
`,t.composed){for(var o=0,a="",s=0;s<t.value.length;++s)t.value[s]!==void 0&&(o+=1,a+=R.prettyPrint(t.value[s],e+1,r),s+1<t.value.length&&(a+=","));n+=i+"Sub values: "+o+a}else{if(n+=i+"Value: ",t.type===R.Type.OID){var u=R.derToOid(t.value);n+=u,ie.pki&&ie.pki.oids&&u in ie.pki.oids&&(n+=" ("+ie.pki.oids[u]+") ")}if(t.type===R.Type.INTEGER)try{n+=R.derToInteger(t.value)}catch(f){n+="0x"+ie.util.bytesToHex(t.value)}else if(t.type===R.Type.BITSTRING){if(t.value.length>1?n+="0x"+ie.util.bytesToHex(t.value.slice(1)):n+="(none)",t.value.length>0){var c=t.value.charCodeAt(0);c==1?n+=" (1 unused bit shown)":c>1&&(n+=" ("+c+" unused bits shown)")}}else t.type===R.Type.OCTETSTRING?(Bf.test(t.value)||(n+="("+t.value+") "),n+="0x"+ie.util.bytesToHex(t.value)):t.type===R.Type.UTF8?n+=ie.util.decodeUtf8(t.value):t.type===R.Type.PRINTABLESTRING||t.type===R.Type.IA5String?n+=t.value:Bf.test(t.value)?n+="0x"+ie.util.bytesToHex(t.value):t.value.length===0?n+="[null]":n+=t.value}return n}});var So=E((Zw,_f)=>{var me=J();pe();_f.exports=me.cipher=me.cipher||{};me.cipher.algorithms=me.cipher.algorithms||{};me.cipher.createCipher=function(t,e){var r=t;if(typeof r=="string"&&(r=me.cipher.getAlgorithm(r),r&&(r=r())),!r)throw new Error("Unsupported algorithm: "+t);return new me.cipher.BlockCipher({algorithm:r,key:e,decrypt:!1})};me.cipher.createDecipher=function(t,e){var r=t;if(typeof r=="string"&&(r=me.cipher.getAlgorithm(r),r&&(r=r())),!r)throw new Error("Unsupported algorithm: "+t);return new me.cipher.BlockCipher({algorithm:r,key:e,decrypt:!0})};me.cipher.registerAlgorithm=function(t,e){t=t.toUpperCase(),me.cipher.algorithms[t]=e};me.cipher.getAlgorithm=function(t){return t=t.toUpperCase(),t in me.cipher.algorithms?me.cipher.algorithms[t]:null};var Eo=me.cipher.BlockCipher=function(t){this.algorithm=t.algorithm,this.mode=this.algorithm.mode,this.blockSize=this.mode.blockSize,this._finish=!1,this._input=null,this.output=null,this._op=t.decrypt?this.mode.decrypt:this.mode.encrypt,this._decrypt=t.decrypt,this.algorithm.initialize(t)};Eo.prototype.start=function(t){t=t||{};var e={};for(var r in t)e[r]=t[r];e.decrypt=this._decrypt,this._finish=!1,this._input=me.util.createBuffer(),this.output=t.output||me.util.createBuffer(),this.mode.start(e)};Eo.prototype.update=function(t){for(t&&this._input.putBuffer(t);!this._op.call(this.mode,this._input,this.output,this._finish)&&!this._finish;);this._input.compact()};Eo.prototype.finish=function(t){t&&(this.mode.name==="ECB"||this.mode.name==="CBC")&&(this.mode.pad=function(r){return t(this.blockSize,r,!1)},this.mode.unpad=function(r){return t(this.blockSize,r,!0)});var e={};return e.decrypt=this._decrypt,e.overflow=this._input.length()%this.blockSize,!(!this._decrypt&&this.mode.pad&&!this.mode.pad(this._input,e)||(this._finish=!0,this.update(),this._decrypt&&this.mode.unpad&&!this.mode.unpad(this.output,e))||this.mode.afterFinish&&!this.mode.afterFinish(this.output,e))}});var Co=E((Xw,Af)=>{var be=J();pe();be.cipher=be.cipher||{};var V=Af.exports=be.cipher.modes=be.cipher.modes||{};V.ecb=function(t){t=t||{},this.name="ECB",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)};V.ecb.prototype.start=function(t){};V.ecb.prototype.encrypt=function(t,e,r){if(t.length()<this.blockSize&&!(r&&t.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=t.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(var n=0;n<this._ints;++n)e.putInt32(this._outBlock[n])};V.ecb.prototype.decrypt=function(t,e,r){if(t.length()<this.blockSize&&!(r&&t.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=t.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(var n=0;n<this._ints;++n)e.putInt32(this._outBlock[n])};V.ecb.prototype.pad=function(t,e){var r=t.length()===this.blockSize?this.blockSize:this.blockSize-t.length();return t.fillWithByte(r,r),!0};V.ecb.prototype.unpad=function(t,e){if(e.overflow>0)return!1;var r=t.length(),n=t.at(r-1);return n>this.blockSize<<2?!1:(t.truncate(n),!0)};V.cbc=function(t){t=t||{},this.name="CBC",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)};V.cbc.prototype.start=function(t){if(t.iv===null){if(!this._prev)throw new Error("Invalid IV parameter.");this._iv=this._prev.slice(0)}else if("iv"in t)this._iv=Ii(t.iv,this.blockSize),this._prev=this._iv.slice(0);else throw new Error("Invalid IV parameter.")};V.cbc.prototype.encrypt=function(t,e,r){if(t.length()<this.blockSize&&!(r&&t.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=this._prev[n]^t.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(var n=0;n<this._ints;++n)e.putInt32(this._outBlock[n]);this._prev=this._outBlock};V.cbc.prototype.decrypt=function(t,e,r){if(t.length()<this.blockSize&&!(r&&t.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=t.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(var n=0;n<this._ints;++n)e.putInt32(this._prev[n]^this._outBlock[n]);this._prev=this._inBlock.slice(0)};V.cbc.prototype.pad=function(t,e){var r=t.length()===this.blockSize?this.blockSize:this.blockSize-t.length();return t.fillWithByte(r,r),!0};V.cbc.prototype.unpad=function(t,e){if(e.overflow>0)return!1;var r=t.length(),n=t.at(r-1);return n>this.blockSize<<2?!1:(t.truncate(n),!0)};V.cfb=function(t){t=t||{},this.name="CFB",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialBlock=new Array(this._ints),this._partialOutput=be.util.createBuffer(),this._partialBytes=0};V.cfb.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");this._iv=Ii(t.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0};V.cfb.prototype.encrypt=function(t,e,r){var n=t.length();if(n===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize){for(var i=0;i<this._ints;++i)this._inBlock[i]=t.getInt32()^this._outBlock[i],e.putInt32(this._inBlock[i]);return}var s=(this.blockSize-n)%this.blockSize;s>0&&(s=this.blockSize-s),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialBlock[i]=t.getInt32()^this._outBlock[i],this._partialOutput.putInt32(this._partialBlock[i]);if(s>0)t.read-=this.blockSize;else for(var i=0;i<this._ints;++i)this._inBlock[i]=this._partialBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),s>0&&!r)return e.putBytes(this._partialOutput.getBytes(s-this._partialBytes)),this._partialBytes=s,!0;e.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0};V.cfb.prototype.decrypt=function(t,e,r){var n=t.length();if(n===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize){for(var i=0;i<this._ints;++i)this._inBlock[i]=t.getInt32(),e.putInt32(this._inBlock[i]^this._outBlock[i]);return}var s=(this.blockSize-n)%this.blockSize;s>0&&(s=this.blockSize-s),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialBlock[i]=t.getInt32(),this._partialOutput.putInt32(this._partialBlock[i]^this._outBlock[i]);if(s>0)t.read-=this.blockSize;else for(var i=0;i<this._ints;++i)this._inBlock[i]=this._partialBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),s>0&&!r)return e.putBytes(this._partialOutput.getBytes(s-this._partialBytes)),this._partialBytes=s,!0;e.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0};V.ofb=function(t){t=t||{},this.name="OFB",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=be.util.createBuffer(),this._partialBytes=0};V.ofb.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");this._iv=Ii(t.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0};V.ofb.prototype.encrypt=function(t,e,r){var n=t.length();if(t.length()===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize){for(var i=0;i<this._ints;++i)e.putInt32(t.getInt32()^this._outBlock[i]),this._inBlock[i]=this._outBlock[i];return}var s=(this.blockSize-n)%this.blockSize;s>0&&(s=this.blockSize-s),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialOutput.putInt32(t.getInt32()^this._outBlock[i]);if(s>0)t.read-=this.blockSize;else for(var i=0;i<this._ints;++i)this._inBlock[i]=this._outBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),s>0&&!r)return e.putBytes(this._partialOutput.getBytes(s-this._partialBytes)),this._partialBytes=s,!0;e.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0};V.ofb.prototype.decrypt=V.ofb.prototype.encrypt;V.ctr=function(t){t=t||{},this.name="CTR",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=be.util.createBuffer(),this._partialBytes=0};V.ctr.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");this._iv=Ii(t.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0};V.ctr.prototype.encrypt=function(t,e,r){var n=t.length();if(n===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize)for(var i=0;i<this._ints;++i)e.putInt32(t.getInt32()^this._outBlock[i]);else{var s=(this.blockSize-n)%this.blockSize;s>0&&(s=this.blockSize-s),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialOutput.putInt32(t.getInt32()^this._outBlock[i]);if(s>0&&(t.read-=this.blockSize),this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),s>0&&!r)return e.putBytes(this._partialOutput.getBytes(s-this._partialBytes)),this._partialBytes=s,!0;e.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}Ti(this._inBlock)};V.ctr.prototype.decrypt=V.ctr.prototype.encrypt;V.gcm=function(t){t=t||{},this.name="GCM",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints),this._partialOutput=be.util.createBuffer(),this._partialBytes=0,this._R=3774873600};V.gcm.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");var e=be.util.createBuffer(t.iv);this._cipherLength=0;var r;if("additionalData"in t?r=be.util.createBuffer(t.additionalData):r=be.util.createBuffer(),"tagLength"in t?this._tagLength=t.tagLength:this._tagLength=128,this._tag=null,t.decrypt&&(this._tag=be.util.createBuffer(t.tag).getBytes(),this._tag.length!==this._tagLength/8))throw new Error("Authentication tag does not match tag length.");this._hashBlock=new Array(this._ints),this.tag=null,this._hashSubkey=new Array(this._ints),this.cipher.encrypt([0,0,0,0],this._hashSubkey),this.componentBits=4,this._m=this.generateHashTable(this._hashSubkey,this.componentBits);var n=e.length();if(n===12)this._j0=[e.getInt32(),e.getInt32(),e.getInt32(),1];else{for(this._j0=[0,0,0,0];e.length()>0;)this._j0=this.ghash(this._hashSubkey,this._j0,[e.getInt32(),e.getInt32(),e.getInt32(),e.getInt32()]);this._j0=this.ghash(this._hashSubkey,this._j0,[0,0].concat(Bo(n*8)))}this._inBlock=this._j0.slice(0),Ti(this._inBlock),this._partialBytes=0,r=be.util.createBuffer(r),this._aDataLength=Bo(r.length()*8);var i=r.length()%this.blockSize;for(i&&r.fillWithByte(0,this.blockSize-i),this._s=[0,0,0,0];r.length()>0;)this._s=this.ghash(this._hashSubkey,this._s,[r.getInt32(),r.getInt32(),r.getInt32(),r.getInt32()])};V.gcm.prototype.encrypt=function(t,e,r){var n=t.length();if(n===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize){for(var i=0;i<this._ints;++i)e.putInt32(this._outBlock[i]^=t.getInt32());this._cipherLength+=this.blockSize}else{var s=(this.blockSize-n)%this.blockSize;s>0&&(s=this.blockSize-s),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialOutput.putInt32(t.getInt32()^this._outBlock[i]);if(s<=0||r){if(r){var o=n%this.blockSize;this._cipherLength+=o,this._partialOutput.truncate(this.blockSize-o)}else this._cipherLength+=this.blockSize;for(var i=0;i<this._ints;++i)this._outBlock[i]=this._partialOutput.getInt32();this._partialOutput.read-=this.blockSize}if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),s>0&&!r)return t.read-=this.blockSize,e.putBytes(this._partialOutput.getBytes(s-this._partialBytes)),this._partialBytes=s,!0;e.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}this._s=this.ghash(this._hashSubkey,this._s,this._outBlock),Ti(this._inBlock)};V.gcm.prototype.decrypt=function(t,e,r){var n=t.length();if(n<this.blockSize&&!(r&&n>0))return!0;this.cipher.encrypt(this._inBlock,this._outBlock),Ti(this._inBlock),this._hashBlock[0]=t.getInt32(),this._hashBlock[1]=t.getInt32(),this._hashBlock[2]=t.getInt32(),this._hashBlock[3]=t.getInt32(),this._s=this.ghash(this._hashSubkey,this._s,this._hashBlock);for(var i=0;i<this._ints;++i)e.putInt32(this._outBlock[i]^this._hashBlock[i]);n<this.blockSize?this._cipherLength+=n%this.blockSize:this._cipherLength+=this.blockSize};V.gcm.prototype.afterFinish=function(t,e){var r=!0;e.decrypt&&e.overflow&&t.truncate(this.blockSize-e.overflow),this.tag=be.util.createBuffer();var n=this._aDataLength.concat(Bo(this._cipherLength*8));this._s=this.ghash(this._hashSubkey,this._s,n);var i=[];this.cipher.encrypt(this._j0,i);for(var s=0;s<this._ints;++s)this.tag.putInt32(this._s[s]^i[s]);return this.tag.truncate(this.tag.length()%(this._tagLength/8)),e.decrypt&&this.tag.bytes()!==this._tag&&(r=!1),r};V.gcm.prototype.multiply=function(t,e){for(var r=[0,0,0,0],n=e.slice(0),i=0;i<128;++i){var s=t[i/32|0]&1<<31-i%32;s&&(r[0]^=n[0],r[1]^=n[1],r[2]^=n[2],r[3]^=n[3]),this.pow(n,n)}return r};V.gcm.prototype.pow=function(t,e){for(var r=t[3]&1,n=3;n>0;--n)e[n]=t[n]>>>1|(t[n-1]&1)<<31;e[0]=t[0]>>>1,r&&(e[0]^=this._R)};V.gcm.prototype.tableMultiply=function(t){for(var e=[0,0,0,0],r=0;r<32;++r){var n=r/8|0,i=t[n]>>>(7-r%8)*4&15,s=this._m[r][i];e[0]^=s[0],e[1]^=s[1],e[2]^=s[2],e[3]^=s[3]}return e};V.gcm.prototype.ghash=function(t,e,r){return e[0]^=r[0],e[1]^=r[1],e[2]^=r[2],e[3]^=r[3],this.tableMultiply(e)};V.gcm.prototype.generateHashTable=function(t,e){for(var r=8/e,n=4*r,i=16*r,s=new Array(i),o=0;o<i;++o){var a=[0,0,0,0],u=o/n|0,c=(n-1-o%n)*e;a[u]=1<<e-1<<c,s[o]=this.generateSubHashTable(this.multiply(a,t),e)}return s};V.gcm.prototype.generateSubHashTable=function(t,e){var r=1<<e,n=r>>>1,i=new Array(r);i[n]=t.slice(0);for(var s=n>>>1;s>0;)this.pow(i[2*s],i[s]=[]),s>>=1;for(s=2;s<n;){for(var o=1;o<s;++o){var a=i[s],u=i[o];i[s+o]=[a[0]^u[0],a[1]^u[1],a[2]^u[2],a[3]^u[3]]}s*=2}for(i[0]=[0,0,0,0],s=n+1;s<r;++s){var c=i[s^n];i[s]=[t[0]^c[0],t[1]^c[1],t[2]^c[2],t[3]^c[3]]}return i};function Ii(t,e){if(typeof t=="string"&&(t=be.util.createBuffer(t)),be.util.isArray(t)&&t.length>4){var r=t;t=be.util.createBuffer();for(var n=0;n<r.length;++n)t.putByte(r[n])}if(t.length()<e)throw new Error("Invalid IV length; got "+t.length()+" bytes and expected "+e+" bytes.");if(!be.util.isArray(t)){for(var i=[],s=e/4,n=0;n<s;++n)i.push(t.getInt32());t=i}return t}function Ti(t){t[t.length-1]=t[t.length-1]+1&4294967295}function Bo(t){return[t/4294967296|0,t&4294967295]}});var To=E((Jw,Pf)=>{var re=J();So();Co();pe();Pf.exports=re.aes=re.aes||{};re.aes.startEncrypting=function(t,e,r,n){var i=Ri({key:t,output:r,decrypt:!1,mode:n});return i.start(e),i};re.aes.createEncryptionCipher=function(t,e){return Ri({key:t,output:null,decrypt:!1,mode:e})};re.aes.startDecrypting=function(t,e,r,n){var i=Ri({key:t,output:r,decrypt:!0,mode:n});return i.start(e),i};re.aes.createDecryptionCipher=function(t,e){return Ri({key:t,output:null,decrypt:!0,mode:e})};re.aes.Algorithm=function(t,e){_o||Tf();var r=this;r.name=t,r.mode=new e({blockSize:16,cipher:{encrypt:function(n,i){return Io(r._w,n,i,!1)},decrypt:function(n,i){return Io(r._w,n,i,!0)}}}),r._init=!1};re.aes.Algorithm.prototype.initialize=function(t){if(!this._init){var e=t.key,r;if(typeof e=="string"&&(e.length===16||e.length===24||e.length===32))e=re.util.createBuffer(e);else if(re.util.isArray(e)&&(e.length===16||e.length===24||e.length===32)){r=e,e=re.util.createBuffer();for(var n=0;n<r.length;++n)e.putByte(r[n])}if(!re.util.isArray(e)){r=e,e=[];var i=r.length();if(i===16||i===24||i===32){i=i>>>2;for(var n=0;n<i;++n)e.push(r.getInt32())}}if(!re.util.isArray(e)||!(e.length===4||e.length===6||e.length===8))throw new Error("Invalid key parameter.");var s=this.mode.name,o=["CFB","OFB","CTR","GCM"].indexOf(s)!==-1;this._w=Rf(e,t.decrypt&&!o),this._init=!0}};re.aes._expandKey=function(t,e){return _o||Tf(),Rf(t,e)};re.aes._updateBlock=Io;qr("AES-ECB",re.cipher.modes.ecb);qr("AES-CBC",re.cipher.modes.cbc);qr("AES-CFB",re.cipher.modes.cfb);qr("AES-OFB",re.cipher.modes.ofb);qr("AES-CTR",re.cipher.modes.ctr);qr("AES-GCM",re.cipher.modes.gcm);function qr(t,e){var r=function(){return new re.aes.Algorithm(t,e)};re.cipher.registerAlgorithm(t,r)}var _o=!1,Mr=4,Te,Ao,If,pr,et;function Tf(){_o=!0,If=[0,1,2,4,8,16,32,64,128,27,54];for(var t=new Array(256),e=0;e<128;++e)t[e]=e<<1,t[e+128]=e+128<<1^283;Te=new Array(256),Ao=new Array(256),pr=new Array(4),et=new Array(4);for(var e=0;e<4;++e)pr[e]=new Array(256),et[e]=new Array(256);for(var r=0,n=0,i,s,o,a,u,c,f,e=0;e<256;++e){a=n^n<<1^n<<2^n<<3^n<<4,a=a>>8^a&255^99,Te[r]=a,Ao[a]=r,u=t[a],i=t[r],s=t[i],o=t[s],c=u<<24^a<<16^a<<8^(a^u),f=(i^s^o)<<24^(r^o)<<16^(r^s^o)<<8^(r^i^o);for(var h=0;h<4;++h)pr[h][r]=c,et[h][a]=f,c=c<<24|c>>>8,f=f<<24|f>>>8;r===0?r=n=1:(r=i^t[t[t[i^o]]],n^=t[t[n]])}}function Rf(t,e){for(var r=t.slice(0),n,i=1,s=r.length,o=s+6+1,a=Mr*o,u=s;u<a;++u)n=r[u-1],u%s==0?(n=Te[n>>>16&255]<<24^Te[n>>>8&255]<<16^Te[n&255]<<8^Te[n>>>24]^If[i]<<24,i++):s>6&&u%s==4&&(n=Te[n>>>24]<<24^Te[n>>>16&255]<<16^Te[n>>>8&255]<<8^Te[n&255]),r[u]=r[u-s]^n;if(e){var c,f=et[0],h=et[1],l=et[2],d=et[3],p=r.slice(0);a=r.length;for(var u=0,g=a-Mr;u<a;u+=Mr,g-=Mr)if(u===0||u===a-Mr)p[u]=r[g],p[u+1]=r[g+3],p[u+2]=r[g+2],p[u+3]=r[g+1];else for(var x=0;x<Mr;++x)c=r[g+x],p[u+(3&-x)]=f[Te[c>>>24]]^h[Te[c>>>16&255]]^l[Te[c>>>8&255]]^d[Te[c&255]];r=p}return r}function Io(t,e,r,n){var i=t.length/4-1,s,o,a,u,c;n?(s=et[0],o=et[1],a=et[2],u=et[3],c=Ao):(s=pr[0],o=pr[1],a=pr[2],u=pr[3],c=Te);var f,h,l,d,p,g,x;f=e[0]^t[0],h=e[n?3:1]^t[1],l=e[2]^t[2],d=e[n?1:3]^t[3];for(var m=3,B=1;B<i;++B)p=s[f>>>24]^o[h>>>16&255]^a[l>>>8&255]^u[d&255]^t[++m],g=s[h>>>24]^o[l>>>16&255]^a[d>>>8&255]^u[f&255]^t[++m],x=s[l>>>24]^o[d>>>16&255]^a[f>>>8&255]^u[h&255]^t[++m],d=s[d>>>24]^o[f>>>16&255]^a[h>>>8&255]^u[l&255]^t[++m],f=p,h=g,l=x;r[0]=c[f>>>24]<<24^c[h>>>16&255]<<16^c[l>>>8&255]<<8^c[d&255]^t[++m],r[n?3:1]=c[h>>>24]<<24^c[l>>>16&255]<<16^c[d>>>8&255]<<8^c[f&255]^t[++m],r[2]=c[l>>>24]<<24^c[d>>>16&255]<<16^c[f>>>8&255]<<8^c[h&255]^t[++m],r[n?1:3]=c[d>>>24]<<24^c[f>>>16&255]<<16^c[h>>>8&255]<<8^c[l&255]^t[++m]}function Ri(t){t=t||{};var e=(t.mode||"CBC").toUpperCase(),r="AES-"+e,n;t.decrypt?n=re.cipher.createDecipher(r,t.key):n=re.cipher.createCipher(r,t.key);var i=n.start;return n.start=function(s,o){var a=null;o instanceof re.util.ByteBuffer&&(a=o,o={}),o=o||{},o.output=a,o.iv=s,i.call(n,o)},n}});var Lf=E((eE,Nf)=>{var se=J();So();Co();pe();Nf.exports=se.des=se.des||{};se.des.startEncrypting=function(t,e,r,n){var i=Pi({key:t,output:r,decrypt:!1,mode:n||(e===null?"ECB":"CBC")});return i.start(e),i};se.des.createEncryptionCipher=function(t,e){return Pi({key:t,output:null,decrypt:!1,mode:e})};se.des.startDecrypting=function(t,e,r,n){var i=Pi({key:t,output:r,decrypt:!0,mode:n||(e===null?"ECB":"CBC")});return i.start(e),i};se.des.createDecryptionCipher=function(t,e){return Pi({key:t,output:null,decrypt:!0,mode:e})};se.des.Algorithm=function(t,e){var r=this;r.name=t,r.mode=new e({blockSize:8,cipher:{encrypt:function(n,i){return Df(r._keys,n,i,!1)},decrypt:function(n,i){return Df(r._keys,n,i,!0)}}}),r._init=!1};se.des.Algorithm.prototype.initialize=function(t){if(!this._init){var e=se.util.createBuffer(t.key);if(this.name.indexOf("3DES")===0&&e.length()!==24)throw new Error("Invalid Triple-DES key size: "+e.length()*8);this._keys=Eg(e),this._init=!0}};pt("DES-ECB",se.cipher.modes.ecb);pt("DES-CBC",se.cipher.modes.cbc);pt("DES-CFB",se.cipher.modes.cfb);pt("DES-OFB",se.cipher.modes.ofb);pt("DES-CTR",se.cipher.modes.ctr);pt("3DES-ECB",se.cipher.modes.ecb);pt("3DES-CBC",se.cipher.modes.cbc);pt("3DES-CFB",se.cipher.modes.cfb);pt("3DES-OFB",se.cipher.modes.ofb);pt("3DES-CTR",se.cipher.modes.ctr);function pt(t,e){var r=function(){return new se.des.Algorithm(t,e)};se.cipher.registerAlgorithm(t,r)}var dg=[16843776,0,65536,16843780,16842756,66564,4,65536,1024,16843776,16843780,1024,16778244,16842756,16777216,4,1028,16778240,16778240,66560,66560,16842752,16842752,16778244,65540,16777220,16777220,65540,0,1028,66564,16777216,65536,16843780,4,16842752,16843776,16777216,16777216,1024,16842756,65536,66560,16777220,1024,4,16778244,66564,16843780,65540,16842752,16778244,16777220,1028,66564,16843776,1028,16778240,16778240,0,65540,66560,0,16842756],yg=[-2146402272,-2147450880,32768,1081376,1048576,32,-2146435040,-2147450848,-2147483616,-2146402272,-2146402304,-2147483648,-2147450880,1048576,32,-2146435040,1081344,1048608,-2147450848,0,-2147483648,32768,1081376,-2146435072,1048608,-2147483616,0,1081344,32800,-2146402304,-2146435072,32800,0,1081376,-2146435040,1048576,-2147450848,-2146435072,-2146402304,32768,-2146435072,-2147450880,32,-2146402272,1081376,32,32768,-2147483648,32800,-2146402304,1048576,-2147483616,1048608,-2147450848,-2147483616,1048608,1081344,0,-2147450880,32800,-2147483648,-2146435040,-2146402272,1081344],gg=[520,134349312,0,134348808,134218240,0,131592,134218240,131080,134217736,134217736,131072,134349320,131080,134348800,520,134217728,8,134349312,512,131584,134348800,134348808,131592,134218248,131584,131072,134218248,8,134349320,512,134217728,134349312,134217728,131080,520,131072,134349312,134218240,0,512,131080,134349320,134218240,134217736,512,0,134348808,134218248,131072,134217728,134349320,8,131592,131584,134217736,134348800,134218248,520,134348800,131592,8,134348808,131584],xg=[8396801,8321,8321,128,8396928,8388737,8388609,8193,0,8396800,8396800,8396929,129,0,8388736,8388609,1,8192,8388608,8396801,128,8388608,8193,8320,8388737,1,8320,8388736,8192,8396928,8396929,129,8388736,8388609,8396800,8396929,129,0,0,8396800,8320,8388736,8388737,1,8396801,8321,8321,128,8396929,129,1,8192,8388609,8193,8396928,8388737,8193,8320,8388608,8396801,128,8388608,8192,8396928],vg=[256,34078976,34078720,1107296512,524288,256,1073741824,34078720,1074266368,524288,33554688,1074266368,1107296512,1107820544,524544,1073741824,33554432,1074266112,1074266112,0,1073742080,1107820800,1107820800,33554688,1107820544,1073742080,0,1107296256,34078976,33554432,1107296256,524544,524288,1107296512,256,33554432,1073741824,34078720,1107296512,1074266368,33554688,1073741824,1107820544,34078976,1074266368,256,33554432,1107820544,1107820800,524544,1107296256,1107820800,34078720,0,1074266112,1107296256,524544,33554688,1073742080,524288,0,1074266112,34078976,1073742080],mg=[536870928,541065216,16384,541081616,541065216,16,541081616,4194304,536887296,4210704,4194304,536870928,4194320,536887296,536870912,16400,0,4194320,536887312,16384,4210688,536887312,16,541065232,541065232,0,4210704,541081600,16400,4210688,541081600,536870912,536887296,16,541065232,4210688,541081616,4194304,16400,536870928,4194304,536887296,536870912,16400,536870928,541081616,4210688,541065216,4210704,541081600,0,541065232,16,16384,541065216,4210704,16384,4194320,536887312,0,541081600,536870912,4194320,536887312],bg=[2097152,69206018,67110914,0,2048,67110914,2099202,69208064,69208066,2097152,0,67108866,2,67108864,69206018,2050,67110912,2099202,2097154,67110912,67108866,69206016,69208064,2097154,69206016,2048,2050,69208066,2099200,2,67108864,2099200,67108864,2099200,2097152,67110914,67110914,69206018,69206018,2,2097154,67108864,67110912,2097152,69208064,2050,2099202,69208064,2050,67108866,69208066,69206016,2099200,0,2,69208066,0,2099202,69206016,2048,67108866,67110912,2048,2097154],wg=[268439616,4096,262144,268701760,268435456,268439616,64,268435456,262208,268697600,268701760,266240,268701696,266304,4096,64,268697600,268435520,268439552,4160,266240,262208,268697664,268701696,4160,0,0,268697664,268435520,268439552,266304,262144,266304,262144,268701696,4096,64,268697664,4096,266304,268439552,64,268435520,268697600,268697664,268435456,262144,268439616,0,268701760,262208,268435520,268697600,268439552,268439616,0,268701760,266240,266240,4160,4160,262208,268435456,268701696];function Eg(t){for(var e=[0,4,536870912,536870916,65536,65540,536936448,536936452,512,516,536871424,536871428,66048,66052,536936960,536936964],r=[0,1,1048576,1048577,67108864,67108865,68157440,68157441,256,257,1048832,1048833,67109120,67109121,68157696,68157697],n=[0,8,2048,2056,16777216,16777224,16779264,16779272,0,8,2048,2056,16777216,16777224,16779264,16779272],i=[0,2097152,134217728,136314880,8192,2105344,134225920,136323072,131072,2228224,134348800,136445952,139264,2236416,134356992,136454144],s=[0,262144,16,262160,0,262144,16,262160,4096,266240,4112,266256,4096,266240,4112,266256],o=[0,1024,32,1056,0,1024,32,1056,33554432,33555456,33554464,33555488,33554432,33555456,33554464,33555488],a=[0,268435456,524288,268959744,2,268435458,524290,268959746,0,268435456,524288,268959744,2,268435458,524290,268959746],u=[0,65536,2048,67584,536870912,536936448,536872960,536938496,131072,196608,133120,198656,537001984,537067520,537004032,537069568],c=[0,262144,0,262144,2,262146,2,262146,33554432,33816576,33554432,33816576,33554434,33816578,33554434,33816578],f=[0,268435456,8,268435464,0,268435456,8,268435464,1024,268436480,1032,268436488,1024,268436480,1032,268436488],h=[0,32,0,32,1048576,1048608,1048576,1048608,8192,8224,8192,8224,1056768,1056800,1056768,1056800],l=[0,16777216,512,16777728,2097152,18874368,2097664,18874880,67108864,83886080,67109376,83886592,69206016,85983232,69206528,85983744],d=[0,4096,134217728,134221824,524288,528384,134742016,134746112,16,4112,134217744,134221840,524304,528400,134742032,134746128],p=[0,4,256,260,0,4,256,260,1,5,257,261,1,5,257,261],g=t.length()>8?3:1,x=[],m=[0,0,1,1,1,1,1,1,0,1,1,1,1,1,1,0],B=0,I,L=0;L<g;L++){var T=t.getInt32(),_=t.getInt32();I=(T>>>4^_)&252645135,_^=I,T^=I<<4,I=(_>>>-16^T)&65535,T^=I,_^=I<<-16,I=(T>>>2^_)&858993459,_^=I,T^=I<<2,I=(_>>>-16^T)&65535,T^=I,_^=I<<-16,I=(T>>>1^_)&1431655765,_^=I,T^=I<<1,I=(_>>>8^T)&16711935,T^=I,_^=I<<8,I=(T>>>1^_)&1431655765,_^=I,T^=I<<1,I=T<<8|_>>>20&240,T=_<<24|_<<8&16711680|_>>>8&65280|_>>>24&240,_=I;for(var O=0;O<m.length;++O){m[O]?(T=T<<2|T>>>26,_=_<<2|_>>>26):(T=T<<1|T>>>27,_=_<<1|_>>>27),T&=-15,_&=-15;var q=e[T>>>28]|r[T>>>24&15]|n[T>>>20&15]|i[T>>>16&15]|s[T>>>12&15]|o[T>>>8&15]|a[T>>>4&15],ce=u[_>>>28]|c[_>>>24&15]|f[_>>>20&15]|h[_>>>16&15]|l[_>>>12&15]|d[_>>>8&15]|p[_>>>4&15];I=(ce>>>16^q)&65535,x[B++]=q^I,x[B++]=ce^I<<16}}return x}function Df(t,e,r,n){var i=t.length===32?3:9,s;i===3?s=n?[30,-2,-2]:[0,32,2]:s=n?[94,62,-2,32,64,2,30,-2,-2]:[0,32,2,62,30,-2,64,96,2];var o,a=e[0],u=e[1];o=(a>>>4^u)&252645135,u^=o,a^=o<<4,o=(a>>>16^u)&65535,u^=o,a^=o<<16,o=(u>>>2^a)&858993459,a^=o,u^=o<<2,o=(u>>>8^a)&16711935,a^=o,u^=o<<8,o=(a>>>1^u)&1431655765,u^=o,a^=o<<1,a=a<<1|a>>>31,u=u<<1|u>>>31;for(var c=0;c<i;c+=3){for(var f=s[c+1],h=s[c+2],l=s[c];l!=f;l+=h){var d=u^t[l],p=(u>>>4|u<<28)^t[l+1];o=a,a=u,u=o^(yg[d>>>24&63]|xg[d>>>16&63]|mg[d>>>8&63]|wg[d&63]|dg[p>>>24&63]|gg[p>>>16&63]|vg[p>>>8&63]|bg[p&63])}o=a,a=u,u=o}a=a>>>1|a<<31,u=u>>>1|u<<31,o=(a>>>1^u)&1431655765,u^=o,a^=o<<1,o=(u>>>8^a)&16711935,a^=o,u^=o<<8,o=(u>>>2^a)&858993459,a^=o,u^=o<<2,o=(a>>>16^u)&65535,u^=o,a^=o<<16,o=(a>>>4^u)&252645135,u^=o,a^=o<<4,r[0]=a,r[1]=u}function Pi(t){t=t||{};var e=(t.mode||"CBC").toUpperCase(),r="DES-"+e,n;t.decrypt?n=se.cipher.createDecipher(r,t.key):n=se.cipher.createCipher(r,t.key);var i=n.start;return n.start=function(s,o){var a=null;o instanceof se.util.ByteBuffer&&(a=o,o={}),o=o||{},o.output=a,o.iv=s,i.call(n,o)},n}});var dr=E((tE,kf)=>{var Di=J();kf.exports=Di.md=Di.md||{};Di.md.algorithms=Di.md.algorithms||{}});var Ff=E((rE,Of)=>{var At=J();dr();pe();var Sg=Of.exports=At.hmac=At.hmac||{};Sg.create=function(){var t=null,e=null,r=null,n=null,i={};return i.start=function(s,o){if(s!==null)if(typeof s=="string")if(s=s.toLowerCase(),s in At.md.algorithms)e=At.md.algorithms[s].create();else throw new Error('Unknown hash algorithm "'+s+'"');else e=s;if(o===null)o=t;else{if(typeof o=="string")o=At.util.createBuffer(o);else if(At.util.isArray(o)){var a=o;o=At.util.createBuffer();for(var u=0;u<a.length;++u)o.putByte(a[u])}var c=o.length();c>e.blockLength&&(e.start(),e.update(o.bytes()),o=e.digest()),r=At.util.createBuffer(),n=At.util.createBuffer(),c=o.length();for(var u=0;u<c;++u){var a=o.at(u);r.putByte(54^a),n.putByte(92^a)}if(c<e.blockLength)for(var a=e.blockLength-c,u=0;u<a;++u)r.putByte(54),n.putByte(92);t=o,r=r.bytes(),n=n.bytes()}e.start(),e.update(r)},i.update=function(s){e.update(s)},i.getMac=function(){var s=e.digest().bytes();return e.start(),e.update(n),e.update(s),e.digest()},i.digest=i.getMac,i}});var Vr=E(()=>{});var Uf=E((sE,Kf)=>{var Re=J();Ff();dr();pe();var Bg=Re.pkcs5=Re.pkcs5||{},It;Re.util.isNodejs&&!Re.options.usePureJavaScript&&(It=Vr());Kf.exports=Re.pbkdf2=Bg.pbkdf2=function(t,e,r,n,i,s){if(typeof i=="function"&&(s=i,i=null),Re.util.isNodejs&&!Re.options.usePureJavaScript&&It.pbkdf2&&(i===null||typeof i!="object")&&(It.pbkdf2Sync.length>4||!i||i==="sha1"))return typeof i!="string"&&(i="sha1"),t=Buffer.from(t,"binary"),e=Buffer.from(e,"binary"),s?It.pbkdf2Sync.length===4?It.pbkdf2(t,e,r,n,function(I,L){if(I)return s(I);s(null,L.toString("binary"))}):It.pbkdf2(t,e,r,n,i,function(I,L){if(I)return s(I);s(null,L.toString("binary"))}):It.pbkdf2Sync.length===4?It.pbkdf2Sync(t,e,r,n).toString("binary"):It.pbkdf2Sync(t,e,r,n,i).toString("binary");if((typeof i=="undefined"||i===null)&&(i="sha1"),typeof i=="string"){if(!(i in Re.md.algorithms))throw new Error("Unknown hash algorithm: "+i);i=Re.md[i].create()}var o=i.digestLength;if(n>4294967295*o){var a=new Error("Derived key is too long.");if(s)return s(a);throw a}var u=Math.ceil(n/o),c=n-(u-1)*o,f=Re.hmac.create();f.start(i,t);var h="",l,d,p;if(!s){for(var g=1;g<=u;++g){f.start(null,null),f.update(e),f.update(Re.util.int32ToBytes(g)),l=p=f.digest().getBytes();for(var x=2;x<=r;++x)f.start(null,null),f.update(p),d=f.digest().getBytes(),l=Re.util.xorBytes(l,d,o),p=d;h+=g<u?l:l.substr(0,c)}return h}var g=1,x;function m(){if(g>u)return s(null,h);f.start(null,null),f.update(e),f.update(Re.util.int32ToBytes(g)),l=p=f.digest().getBytes(),x=2,B()}function B(){if(x<=r)return f.start(null,null),f.update(p),d=f.digest().getBytes(),l=Re.util.xorBytes(l,d,o),p=d,++x,Re.util.setImmediate(B);h+=g<u?l:l.substr(0,c),++g,m()}m()}});var Vf=E((oE,Mf)=>{var Ni=J();pe();var qf=Mf.exports=Ni.pem=Ni.pem||{};qf.encode=function(t,e){e=e||{};var r="-----BEGIN "+t.type+`-----\r
`,n;if(t.procType&&(n={name:"Proc-Type",values:[String(t.procType.version),t.procType.type]},r+=Li(n)),t.contentDomain&&(n={name:"Content-Domain",values:[t.contentDomain]},r+=Li(n)),t.dekInfo&&(n={name:"DEK-Info",values:[t.dekInfo.algorithm]},t.dekInfo.parameters&&n.values.push(t.dekInfo.parameters),r+=Li(n)),t.headers)for(var i=0;i<t.headers.length;++i)r+=Li(t.headers[i]);return t.procType&&(r+=`\r
`),r+=Ni.util.encode64(t.body,e.maxline||64)+`\r
`,r+="-----END "+t.type+`-----\r
`,r};qf.decode=function(t){for(var e=[],r=/\s*-----BEGIN ([A-Z0-9- ]+)-----\r?\n?([\x21-\x7e\s]+?(?:\r?\n\r?\n))?([:A-Za-z0-9+\/=\s]+?)-----END \1-----/g,n=/([\x21-\x7e]+):\s*([\x21-\x7e\s^:]+)/,i=/\r?\n/,s;s=r.exec(t),!!s;){var o={type:s[1],procType:null,contentDomain:null,dekInfo:null,headers:[],body:Ni.util.decode64(s[3])};if(e.push(o),!!s[2]){for(var a=s[2].split(i),u=0;s&&u<a.length;){for(var c=a[u].replace(/\s+$/,""),f=u+1;f<a.length;++f){var h=a[f];if(!/\s/.test(h[0]))break;c+=h,u=f}if(s=c.match(n),s){for(var l={name:s[1],values:[]},d=s[2].split(","),p=0;p<d.length;++p)l.values.push(Cg(d[p]));if(o.procType)if(!o.contentDomain&&l.name==="Content-Domain")o.contentDomain=d[0]||"";else if(!o.dekInfo&&l.name==="DEK-Info"){if(l.values.length===0)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must have at least one subfield.');o.dekInfo={algorithm:d[0],parameters:d[1]||null}}else o.headers.push(l);else{if(l.name!=="Proc-Type")throw new Error('Invalid PEM formatted message. The first encapsulated header must be "Proc-Type".');if(l.values.length!==2)throw new Error('Invalid PEM formatted message. The "Proc-Type" header must have two subfields.');o.procType={version:d[0],type:d[1]}}}++u}if(o.procType==="ENCRYPTED"&&!o.dekInfo)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must be present if "Proc-Type" is "ENCRYPTED".')}}if(e.length===0)throw new Error("Invalid PEM formatted message.");return e};function Li(t){for(var e=t.name+": ",r=[],n=function(u,c){return" "+c},i=0;i<t.values.length;++i)r.push(t.values[i].replace(/^(\S+\r\n)/,n));e+=r.join(",")+`\r
`;for(var s=0,o=-1,i=0;i<e.length;++i,++s)if(s>65&&o!==-1){var a=e[o];a===","?(++o,e=e.substr(0,o)+`\r
 `+e.substr(o)):e=e.substr(0,o)+`\r
`+a+e.substr(o+1),s=i-o-1,o=-1,++i}else(e[i]===" "||e[i]==="	"||e[i]===",")&&(o=i);return e}function Cg(t){return t.replace(/^\s+/,"")}});var $f=E((aE,Wf)=>{var dt=J();dr();pe();var zf=Wf.exports=dt.sha256=dt.sha256||{};dt.md.sha256=dt.md.algorithms.sha256=zf;zf.create=function(){Hf||_g();var t=null,e=dt.util.createBuffer(),r=new Array(64),n={algorithm:"sha256",blockLength:64,digestLength:32,messageLength:0,fullMessageLength:null,messageLengthSize:8};return n.start=function(){n.messageLength=0,n.fullMessageLength=n.messageLength64=[];for(var i=n.messageLengthSize/4,s=0;s<i;++s)n.fullMessageLength.push(0);return e=dt.util.createBuffer(),t={h0:1779033703,h1:3144134277,h2:1013904242,h3:2773480762,h4:1359893119,h5:2600822924,h6:528734635,h7:1541459225},n},n.start(),n.update=function(i,s){s==="utf8"&&(i=dt.util.encodeUtf8(i));var o=i.length;n.messageLength+=o,o=[o/4294967296>>>0,o>>>0];for(var a=n.fullMessageLength.length-1;a>=0;--a)n.fullMessageLength[a]+=o[1],o[1]=o[0]+(n.fullMessageLength[a]/4294967296>>>0),n.fullMessageLength[a]=n.fullMessageLength[a]>>>0,o[0]=o[1]/4294967296>>>0;return e.putBytes(i),jf(t,r,e),(e.read>2048||e.length()===0)&&e.compact(),n},n.digest=function(){var i=dt.util.createBuffer();i.putBytes(e.bytes());var s=n.fullMessageLength[n.fullMessageLength.length-1]+n.messageLengthSize,o=s&n.blockLength-1;i.putBytes(Ro.substr(0,n.blockLength-o));for(var a,u,c=n.fullMessageLength[0]*8,f=0;f<n.fullMessageLength.length-1;++f)a=n.fullMessageLength[f+1]*8,u=a/4294967296>>>0,c+=u,i.putInt32(c>>>0),c=a>>>0;i.putInt32(c);var h={h0:t.h0,h1:t.h1,h2:t.h2,h3:t.h3,h4:t.h4,h5:t.h5,h6:t.h6,h7:t.h7};jf(h,r,i);var l=dt.util.createBuffer();return l.putInt32(h.h0),l.putInt32(h.h1),l.putInt32(h.h2),l.putInt32(h.h3),l.putInt32(h.h4),l.putInt32(h.h5),l.putInt32(h.h6),l.putInt32(h.h7),l},n};var Ro=null,Hf=!1,Gf=null;function _g(){Ro=String.fromCharCode(128),Ro+=dt.util.fillString(String.fromCharCode(0),64),Gf=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],Hf=!0}function jf(t,e,r){for(var n,i,s,o,a,u,c,f,h,l,d,p,g,x,m,B=r.length();B>=64;){for(c=0;c<16;++c)e[c]=r.getInt32();for(;c<64;++c)n=e[c-2],n=(n>>>17|n<<15)^(n>>>19|n<<13)^n>>>10,i=e[c-15],i=(i>>>7|i<<25)^(i>>>18|i<<14)^i>>>3,e[c]=n+e[c-7]+i+e[c-16]|0;for(f=t.h0,h=t.h1,l=t.h2,d=t.h3,p=t.h4,g=t.h5,x=t.h6,m=t.h7,c=0;c<64;++c)o=(p>>>6|p<<26)^(p>>>11|p<<21)^(p>>>25|p<<7),a=x^p&(g^x),s=(f>>>2|f<<30)^(f>>>13|f<<19)^(f>>>22|f<<10),u=f&h|l&(f^h),n=m+o+a+Gf[c]+e[c],i=s+u,m=x,x=g,g=p,p=d+n>>>0,d=l,l=h,h=f,f=n+i>>>0;t.h0=t.h0+f|0,t.h1=t.h1+h|0,t.h2=t.h2+l|0,t.h3=t.h3+d|0,t.h4=t.h4+p|0,t.h5=t.h5+g|0,t.h6=t.h6+x|0,t.h7=t.h7+m|0,B-=64}}});var Qf=E((uE,Yf)=>{var yt=J();pe();var ki=null;yt.util.isNodejs&&!yt.options.usePureJavaScript&&!process.versions["node-webkit"]&&(ki=Vr());var Ag=Yf.exports=yt.prng=yt.prng||{};Ag.create=function(t){for(var e={plugin:t,key:null,seed:null,time:null,reseeds:0,generated:0,keyBytes:""},r=t.md,n=new Array(32),i=0;i<32;++i)n[i]=r.create();e.pools=n,e.pool=0,e.generate=function(c,f){if(!f)return e.generateSync(c);var h=e.plugin.cipher,l=e.plugin.increment,d=e.plugin.formatKey,p=e.plugin.formatSeed,g=yt.util.createBuffer();e.key=null,x();function x(m){if(m)return f(m);if(g.length()>=c)return f(null,g.getBytes(c));if(e.generated>1048575&&(e.key=null),e.key===null)return yt.util.nextTick(function(){s(x)});var B=h(e.key,e.seed);e.generated+=B.length,g.putBytes(B),e.key=d(h(e.key,l(e.seed))),e.seed=p(h(e.key,e.seed)),yt.util.setImmediate(x)}},e.generateSync=function(c){var f=e.plugin.cipher,h=e.plugin.increment,l=e.plugin.formatKey,d=e.plugin.formatSeed;e.key=null;for(var p=yt.util.createBuffer();p.length()<c;){e.generated>1048575&&(e.key=null),e.key===null&&o();var g=f(e.key,e.seed);e.generated+=g.length,p.putBytes(g),e.key=l(f(e.key,h(e.seed))),e.seed=d(f(e.key,e.seed))}return p.getBytes(c)};function s(c){if(e.pools[0].messageLength>=32)return a(),c();var f=32-e.pools[0].messageLength<<5;e.seedFile(f,function(h,l){if(h)return c(h);e.collect(l),a(),c()})}function o(){if(e.pools[0].messageLength>=32)return a();var c=32-e.pools[0].messageLength<<5;e.collect(e.seedFileSync(c)),a()}function a(){e.reseeds=e.reseeds===4294967295?0:e.reseeds+1;var c=e.plugin.md.create();c.update(e.keyBytes);for(var f=1,h=0;h<32;++h)e.reseeds%f==0&&(c.update(e.pools[h].digest().getBytes()),e.pools[h].start()),f=f<<1;e.keyBytes=c.digest().getBytes(),c.start(),c.update(e.keyBytes);var l=c.digest().getBytes();e.key=e.plugin.formatKey(e.keyBytes),e.seed=e.plugin.formatSeed(l),e.generated=0}function u(c){var f=null,h=yt.util.globalScope,l=h.crypto||h.msCrypto;l&&l.getRandomValues&&(f=function(T){return l.getRandomValues(T)});var d=yt.util.createBuffer();if(f)for(;d.length()<c;){var p=Math.max(1,Math.min(c-d.length(),65536)/4),g=new Uint32Array(Math.floor(p));try{f(g);for(var x=0;x<g.length;++x)d.putInt32(g[x])}catch(T){if(!(typeof QuotaExceededError!="undefined"&&T instanceof QuotaExceededError))throw T}}if(d.length()<c)for(var m,B,I,L=Math.floor(Math.random()*65536);d.length()<c;){B=16807*(L&65535),m=16807*(L>>16),B+=(m&32767)<<16,B+=m>>15,B=(B&2147483647)+(B>>31),L=B&4294967295;for(var x=0;x<3;++x)I=L>>>(x<<3),I^=Math.floor(Math.random()*256),d.putByte(String.fromCharCode(I&255))}return d.getBytes(c)}return ki?(e.seedFile=function(c,f){ki.randomBytes(c,function(h,l){if(h)return f(h);f(null,l.toString())})},e.seedFileSync=function(c){return ki.randomBytes(c).toString()}):(e.seedFile=function(c,f){try{f(null,u(c))}catch(h){f(h)}},e.seedFileSync=u),e.collect=function(c){for(var f=c.length,h=0;h<f;++h)e.pools[e.pool].update(c.substr(h,1)),e.pool=e.pool===31?0:e.pool+1},e.collectInt=function(c,f){for(var h="",l=0;l<f;l+=8)h+=String.fromCharCode(c>>l&255);e.collect(h)},e.registerWorker=function(c){if(c===self)e.seedFile=function(h,l){function d(p){var g=p.data;g.forge&&g.forge.prng&&(self.removeEventListener("message",d),l(g.forge.prng.err,g.forge.prng.bytes))}self.addEventListener("message",d),self.postMessage({forge:{prng:{needed:h}}})};else{var f=function(h){var l=h.data;l.forge&&l.forge.prng&&e.seedFile(l.forge.prng.needed,function(d,p){c.postMessage({forge:{prng:{err:d,bytes:p}}})})};c.addEventListener("message",f)}},e}});var wn=E((cE,Po)=>{var we=J();To();$f();Qf();pe();(function(){if(we.random&&we.random.getBytes){Po.exports=we.random;return}(function(t){var e={},r=new Array(4),n=we.util.createBuffer();e.formatKey=function(h){var l=we.util.createBuffer(h);return h=new Array(4),h[0]=l.getInt32(),h[1]=l.getInt32(),h[2]=l.getInt32(),h[3]=l.getInt32(),we.aes._expandKey(h,!1)},e.formatSeed=function(h){var l=we.util.createBuffer(h);return h=new Array(4),h[0]=l.getInt32(),h[1]=l.getInt32(),h[2]=l.getInt32(),h[3]=l.getInt32(),h},e.cipher=function(h,l){return we.aes._updateBlock(h,l,r,!1),n.putInt32(r[0]),n.putInt32(r[1]),n.putInt32(r[2]),n.putInt32(r[3]),n.getBytes()},e.increment=function(h){return++h[3],h},e.md=we.md.sha256;function i(){var h=we.prng.create(e);return h.getBytes=function(l,d){return h.generate(l,d)},h.getBytesSync=function(l){return h.generate(l)},h}var s=i(),o=null,a=we.util.globalScope,u=a.crypto||a.msCrypto;if(u&&u.getRandomValues&&(o=function(h){return u.getRandomValues(h)}),we.options.usePureJavaScript||!we.util.isNodejs&&!o){if(typeof window=="undefined"||window.document===void 0,s.collectInt(+new Date,32),typeof navigator!="undefined"){var c="";for(var f in navigator)try{typeof navigator[f]=="string"&&(c+=navigator[f])}catch(h){}s.collect(c),c=null}t&&(t().mousemove(function(h){s.collectInt(h.clientX,16),s.collectInt(h.clientY,16)}),t().keypress(function(h){s.collectInt(h.charCode,8)}))}if(!we.random)we.random=s;else for(var f in s)we.random[f]=s[f];we.random.createInstance=i,Po.exports=we.random})(typeof jQuery!="undefined"?jQuery:null)})()});var eh=E((fE,Jf)=>{var ke=J();pe();var Do=[217,120,249,196,25,221,181,237,40,233,253,121,74,160,216,157,198,126,55,131,43,118,83,142,98,76,100,136,68,139,251,162,23,154,89,245,135,179,79,19,97,69,109,141,9,129,125,50,189,143,64,235,134,183,123,11,240,149,33,34,92,107,78,130,84,214,101,147,206,96,178,28,115,86,192,20,167,140,241,220,18,117,202,31,59,190,228,209,66,61,212,48,163,60,182,38,111,191,14,218,70,105,7,87,39,242,29,155,188,148,67,3,248,17,199,246,144,239,62,231,6,195,213,47,200,102,30,215,8,232,234,222,128,82,238,247,132,170,114,172,53,77,106,42,150,26,210,113,90,21,73,116,75,159,208,94,4,24,164,236,194,224,65,110,15,81,203,204,36,145,175,80,161,244,112,57,153,124,58,133,35,184,180,122,252,2,54,91,37,85,151,49,45,93,250,152,227,138,146,174,5,223,41,16,103,108,186,201,211,0,230,207,225,158,168,44,99,22,1,63,88,226,137,169,13,56,52,27,171,51,255,176,187,72,12,95,185,177,205,46,197,243,219,71,229,165,156,119,10,166,32,104,254,127,193,173],Zf=[1,2,3,5],Ig=function(t,e){return t<<e&65535|(t&65535)>>16-e},Tg=function(t,e){return(t&65535)>>e|t<<16-e&65535};Jf.exports=ke.rc2=ke.rc2||{};ke.rc2.expandKey=function(t,e){typeof t=="string"&&(t=ke.util.createBuffer(t)),e=e||128;var r=t,n=t.length(),i=e,s=Math.ceil(i/8),o=255>>(i&7),a;for(a=n;a<128;a++)r.putByte(Do[r.at(a-1)+r.at(a-n)&255]);for(r.setAt(128-s,Do[r.at(128-s)&o]),a=127-s;a>=0;a--)r.setAt(a,Do[r.at(a+1)^r.at(a+s)]);return r};var Xf=function(t,e,r){var n=!1,i=null,s=null,o=null,a,u,c,f,h=[];for(t=ke.rc2.expandKey(t,e),c=0;c<64;c++)h.push(t.getInt16Le());r?(a=function(p){for(c=0;c<4;c++)p[c]+=h[f]+(p[(c+3)%4]&p[(c+2)%4])+(~p[(c+3)%4]&p[(c+1)%4]),p[c]=Ig(p[c],Zf[c]),f++},u=function(p){for(c=0;c<4;c++)p[c]+=h[p[(c+3)%4]&63]}):(a=function(p){for(c=3;c>=0;c--)p[c]=Tg(p[c],Zf[c]),p[c]-=h[f]+(p[(c+3)%4]&p[(c+2)%4])+(~p[(c+3)%4]&p[(c+1)%4]),f--},u=function(p){for(c=3;c>=0;c--)p[c]-=h[p[(c+3)%4]&63]});var l=function(p){var g=[];for(c=0;c<4;c++){var x=i.getInt16Le();o!==null&&(r?x^=o.getInt16Le():o.putInt16Le(x)),g.push(x&65535)}f=r?0:63;for(var m=0;m<p.length;m++)for(var B=0;B<p[m][0];B++)p[m][1](g);for(c=0;c<4;c++)o!==null&&(r?o.putInt16Le(g[c]):g[c]^=o.getInt16Le()),s.putInt16Le(g[c])},d=null;return d={start:function(p,g){p&&typeof p=="string"&&(p=ke.util.createBuffer(p)),n=!1,i=ke.util.createBuffer(),s=g||new ke.util.createBuffer,o=p,d.output=s},update:function(p){for(n||i.putBuffer(p);i.length()>=8;)l([[5,a],[1,u],[6,a],[1,u],[5,a]])},finish:function(p){var g=!0;if(r)if(p)g=p(8,i,!r);else{var x=i.length()===8?8:8-i.length();i.fillWithByte(x,x)}if(g&&(n=!0,d.update()),!r&&(g=i.length()===0,g))if(p)g=p(8,s,!r);else{var m=s.length(),B=s.at(m-1);B>m?g=!1:s.truncate(B)}return g}},d};ke.rc2.startEncrypting=function(t,e,r){var n=ke.rc2.createEncryptionCipher(t,128);return n.start(e,r),n};ke.rc2.createEncryptionCipher=function(t,e){return Xf(t,e,!0)};ke.rc2.startDecrypting=function(t,e,r){var n=ke.rc2.createDecryptionCipher(t,128);return n.start(e,r),n};ke.rc2.createDecryptionCipher=function(t,e){return Xf(t,e,!1)}});var Ki=E((hE,uh)=>{var No=J();uh.exports=No.jsbn=No.jsbn||{};var Tt,Rg=244837814094590,th=(Rg&16777215)==15715070;function S(t,e,r){this.data=[],t!=null&&(typeof t=="number"?this.fromNumber(t,e,r):e==null&&typeof t!="string"?this.fromString(t,256):this.fromString(t,e))}No.jsbn.BigInteger=S;function G(){return new S(null)}function Pg(t,e,r,n,i,s){for(;--s>=0;){var o=e*this.data[t++]+r.data[n]+i;i=Math.floor(o/67108864),r.data[n++]=o&67108863}return i}function Dg(t,e,r,n,i,s){for(var o=e&32767,a=e>>15;--s>=0;){var u=this.data[t]&32767,c=this.data[t++]>>15,f=a*u+c*o;u=o*u+((f&32767)<<15)+r.data[n]+(i&1073741823),i=(u>>>30)+(f>>>15)+a*c+(i>>>30),r.data[n++]=u&1073741823}return i}function rh(t,e,r,n,i,s){for(var o=e&16383,a=e>>14;--s>=0;){var u=this.data[t]&16383,c=this.data[t++]>>14,f=a*u+c*o;u=o*u+((f&16383)<<14)+r.data[n]+i,i=(u>>28)+(f>>14)+a*c,r.data[n++]=u&268435455}return i}typeof navigator=="undefined"?(S.prototype.am=rh,Tt=28):th&&navigator.appName=="Microsoft Internet Explorer"?(S.prototype.am=Dg,Tt=30):th&&navigator.appName!="Netscape"?(S.prototype.am=Pg,Tt=26):(S.prototype.am=rh,Tt=28);S.prototype.DB=Tt;S.prototype.DM=(1<<Tt)-1;S.prototype.DV=1<<Tt;var Lo=52;S.prototype.FV=Math.pow(2,Lo);S.prototype.F1=Lo-Tt;S.prototype.F2=2*Tt-Lo;var Ng="0123456789abcdefghijklmnopqrstuvwxyz",Oi=new Array,zr,He;zr="0".charCodeAt(0);for(He=0;He<=9;++He)Oi[zr++]=He;zr="a".charCodeAt(0);for(He=10;He<36;++He)Oi[zr++]=He;zr="A".charCodeAt(0);for(He=10;He<36;++He)Oi[zr++]=He;function nh(t){return Ng.charAt(t)}function ih(t,e){var r=Oi[t.charCodeAt(e)];return r??-1}function Lg(t){for(var e=this.t-1;e>=0;--e)t.data[e]=this.data[e];t.t=this.t,t.s=this.s}function kg(t){this.t=1,this.s=t<0?-1:0,t>0?this.data[0]=t:t<-1?this.data[0]=t+this.DV:this.t=0}function jt(t){var e=G();return e.fromInt(t),e}function Og(t,e){var r;if(e==16)r=4;else if(e==8)r=3;else if(e==256)r=8;else if(e==2)r=1;else if(e==32)r=5;else if(e==4)r=2;else{this.fromRadix(t,e);return}this.t=0,this.s=0;for(var n=t.length,i=!1,s=0;--n>=0;){var o=r==8?t[n]&255:ih(t,n);if(o<0){t.charAt(n)=="-"&&(i=!0);continue}i=!1,s==0?this.data[this.t++]=o:s+r>this.DB?(this.data[this.t-1]|=(o&(1<<this.DB-s)-1)<<s,this.data[this.t++]=o>>this.DB-s):this.data[this.t-1]|=o<<s,s+=r,s>=this.DB&&(s-=this.DB)}r==8&&(t[0]&128)!=0&&(this.s=-1,s>0&&(this.data[this.t-1]|=(1<<this.DB-s)-1<<s)),this.clamp(),i&&S.ZERO.subTo(this,this)}function Fg(){for(var t=this.s&this.DM;this.t>0&&this.data[this.t-1]==t;)--this.t}function Kg(t){if(this.s<0)return"-"+this.negate().toString(t);var e;if(t==16)e=4;else if(t==8)e=3;else if(t==2)e=1;else if(t==32)e=5;else if(t==4)e=2;else return this.toRadix(t);var r=(1<<e)-1,n,i=!1,s="",o=this.t,a=this.DB-o*this.DB%e;if(o-- >0)for(a<this.DB&&(n=this.data[o]>>a)>0&&(i=!0,s=nh(n));o>=0;)a<e?(n=(this.data[o]&(1<<a)-1)<<e-a,n|=this.data[--o]>>(a+=this.DB-e)):(n=this.data[o]>>(a-=e)&r,a<=0&&(a+=this.DB,--o)),n>0&&(i=!0),i&&(s+=nh(n));return i?s:"0"}function Ug(){var t=G();return S.ZERO.subTo(this,t),t}function qg(){return this.s<0?this.negate():this}function Mg(t){var e=this.s-t.s;if(e!=0)return e;var r=this.t;if(e=r-t.t,e!=0)return this.s<0?-e:e;for(;--r>=0;)if((e=this.data[r]-t.data[r])!=0)return e;return 0}function Fi(t){var e=1,r;return(r=t>>>16)!=0&&(t=r,e+=16),(r=t>>8)!=0&&(t=r,e+=8),(r=t>>4)!=0&&(t=r,e+=4),(r=t>>2)!=0&&(t=r,e+=2),(r=t>>1)!=0&&(t=r,e+=1),e}function Vg(){return this.t<=0?0:this.DB*(this.t-1)+Fi(this.data[this.t-1]^this.s&this.DM)}function zg(t,e){var r;for(r=this.t-1;r>=0;--r)e.data[r+t]=this.data[r];for(r=t-1;r>=0;--r)e.data[r]=0;e.t=this.t+t,e.s=this.s}function Hg(t,e){for(var r=t;r<this.t;++r)e.data[r-t]=this.data[r];e.t=Math.max(this.t-t,0),e.s=this.s}function Gg(t,e){var r=t%this.DB,n=this.DB-r,i=(1<<n)-1,s=Math.floor(t/this.DB),o=this.s<<r&this.DM,a;for(a=this.t-1;a>=0;--a)e.data[a+s+1]=this.data[a]>>n|o,o=(this.data[a]&i)<<r;for(a=s-1;a>=0;--a)e.data[a]=0;e.data[s]=o,e.t=this.t+s+1,e.s=this.s,e.clamp()}function jg(t,e){e.s=this.s;var r=Math.floor(t/this.DB);if(r>=this.t){e.t=0;return}var n=t%this.DB,i=this.DB-n,s=(1<<n)-1;e.data[0]=this.data[r]>>n;for(var o=r+1;o<this.t;++o)e.data[o-r-1]|=(this.data[o]&s)<<i,e.data[o-r]=this.data[o]>>n;n>0&&(e.data[this.t-r-1]|=(this.s&s)<<i),e.t=this.t-r,e.clamp()}function Wg(t,e){for(var r=0,n=0,i=Math.min(t.t,this.t);r<i;)n+=this.data[r]-t.data[r],e.data[r++]=n&this.DM,n>>=this.DB;if(t.t<this.t){for(n-=t.s;r<this.t;)n+=this.data[r],e.data[r++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;r<t.t;)n-=t.data[r],e.data[r++]=n&this.DM,n>>=this.DB;n-=t.s}e.s=n<0?-1:0,n<-1?e.data[r++]=this.DV+n:n>0&&(e.data[r++]=n),e.t=r,e.clamp()}function $g(t,e){var r=this.abs(),n=t.abs(),i=r.t;for(e.t=i+n.t;--i>=0;)e.data[i]=0;for(i=0;i<n.t;++i)e.data[i+r.t]=r.am(0,n.data[i],e,i,0,r.t);e.s=0,e.clamp(),this.s!=t.s&&S.ZERO.subTo(e,e)}function Yg(t){for(var e=this.abs(),r=t.t=2*e.t;--r>=0;)t.data[r]=0;for(r=0;r<e.t-1;++r){var n=e.am(r,e.data[r],t,2*r,0,1);(t.data[r+e.t]+=e.am(r+1,2*e.data[r],t,2*r+1,n,e.t-r-1))>=e.DV&&(t.data[r+e.t]-=e.DV,t.data[r+e.t+1]=1)}t.t>0&&(t.data[t.t-1]+=e.am(r,e.data[r],t,2*r,0,1)),t.s=0,t.clamp()}function Qg(t,e,r){var n=t.abs();if(!(n.t<=0)){var i=this.abs();if(i.t<n.t){e!=null&&e.fromInt(0),r!=null&&this.copyTo(r);return}r==null&&(r=G());var s=G(),o=this.s,a=t.s,u=this.DB-Fi(n.data[n.t-1]);u>0?(n.lShiftTo(u,s),i.lShiftTo(u,r)):(n.copyTo(s),i.copyTo(r));var c=s.t,f=s.data[c-1];if(f!=0){var h=f*(1<<this.F1)+(c>1?s.data[c-2]>>this.F2:0),l=this.FV/h,d=(1<<this.F1)/h,p=1<<this.F2,g=r.t,x=g-c,m=e??G();for(s.dlShiftTo(x,m),r.compareTo(m)>=0&&(r.data[r.t++]=1,r.subTo(m,r)),S.ONE.dlShiftTo(c,m),m.subTo(s,s);s.t<c;)s.data[s.t++]=0;for(;--x>=0;){var B=r.data[--g]==f?this.DM:Math.floor(r.data[g]*l+(r.data[g-1]+p)*d);if((r.data[g]+=s.am(0,B,r,x,0,c))<B)for(s.dlShiftTo(x,m),r.subTo(m,r);r.data[g]<--B;)r.subTo(m,r)}e!=null&&(r.drShiftTo(c,e),o!=a&&S.ZERO.subTo(e,e)),r.t=c,r.clamp(),u>0&&r.rShiftTo(u,r),o<0&&S.ZERO.subTo(r,r)}}}function Zg(t){var e=G();return this.abs().divRemTo(t,null,e),this.s<0&&e.compareTo(S.ZERO)>0&&t.subTo(e,e),e}function yr(t){this.m=t}function Xg(t){return t.s<0||t.compareTo(this.m)>=0?t.mod(this.m):t}function Jg(t){return t}function e2(t){t.divRemTo(this.m,null,t)}function t2(t,e,r){t.multiplyTo(e,r),this.reduce(r)}function r2(t,e){t.squareTo(e),this.reduce(e)}yr.prototype.convert=Xg;yr.prototype.revert=Jg;yr.prototype.reduce=e2;yr.prototype.mulTo=t2;yr.prototype.sqrTo=r2;function n2(){if(this.t<1)return 0;var t=this.data[0];if((t&1)==0)return 0;var e=t&3;return e=e*(2-(t&15)*e)&15,e=e*(2-(t&255)*e)&255,e=e*(2-((t&65535)*e&65535))&65535,e=e*(2-t*e%this.DV)%this.DV,e>0?this.DV-e:-e}function gr(t){this.m=t,this.mp=t.invDigit(),this.mpl=this.mp&32767,this.mph=this.mp>>15,this.um=(1<<t.DB-15)-1,this.mt2=2*t.t}function i2(t){var e=G();return t.abs().dlShiftTo(this.m.t,e),e.divRemTo(this.m,null,e),t.s<0&&e.compareTo(S.ZERO)>0&&this.m.subTo(e,e),e}function s2(t){var e=G();return t.copyTo(e),this.reduce(e),e}function o2(t){for(;t.t<=this.mt2;)t.data[t.t++]=0;for(var e=0;e<this.m.t;++e){var r=t.data[e]&32767,n=r*this.mpl+((r*this.mph+(t.data[e]>>15)*this.mpl&this.um)<<15)&t.DM;for(r=e+this.m.t,t.data[r]+=this.m.am(0,n,t,e,0,this.m.t);t.data[r]>=t.DV;)t.data[r]-=t.DV,t.data[++r]++}t.clamp(),t.drShiftTo(this.m.t,t),t.compareTo(this.m)>=0&&t.subTo(this.m,t)}function a2(t,e){t.squareTo(e),this.reduce(e)}function u2(t,e,r){t.multiplyTo(e,r),this.reduce(r)}gr.prototype.convert=i2;gr.prototype.revert=s2;gr.prototype.reduce=o2;gr.prototype.mulTo=u2;gr.prototype.sqrTo=a2;function c2(){return(this.t>0?this.data[0]&1:this.s)==0}function f2(t,e){if(t>4294967295||t<1)return S.ONE;var r=G(),n=G(),i=e.convert(this),s=Fi(t)-1;for(i.copyTo(r);--s>=0;)if(e.sqrTo(r,n),(t&1<<s)>0)e.mulTo(n,i,r);else{var o=r;r=n,n=o}return e.revert(r)}function h2(t,e){var r;return t<256||e.isEven()?r=new yr(e):r=new gr(e),this.exp(t,r)}S.prototype.copyTo=Lg;S.prototype.fromInt=kg;S.prototype.fromString=Og;S.prototype.clamp=Fg;S.prototype.dlShiftTo=zg;S.prototype.drShiftTo=Hg;S.prototype.lShiftTo=Gg;S.prototype.rShiftTo=jg;S.prototype.subTo=Wg;S.prototype.multiplyTo=$g;S.prototype.squareTo=Yg;S.prototype.divRemTo=Qg;S.prototype.invDigit=n2;S.prototype.isEven=c2;S.prototype.exp=f2;S.prototype.toString=Kg;S.prototype.negate=Ug;S.prototype.abs=qg;S.prototype.compareTo=Mg;S.prototype.bitLength=Vg;S.prototype.mod=Zg;S.prototype.modPowInt=h2;S.ZERO=jt(0);S.ONE=jt(1);function l2(){var t=G();return this.copyTo(t),t}function p2(){if(this.s<0){if(this.t==1)return this.data[0]-this.DV;if(this.t==0)return-1}else{if(this.t==1)return this.data[0];if(this.t==0)return 0}return(this.data[1]&(1<<32-this.DB)-1)<<this.DB|this.data[0]}function d2(){return this.t==0?this.s:this.data[0]<<24>>24}function y2(){return this.t==0?this.s:this.data[0]<<16>>16}function g2(t){return Math.floor(Math.LN2*this.DB/Math.log(t))}function x2(){return this.s<0?-1:this.t<=0||this.t==1&&this.data[0]<=0?0:1}function v2(t){if(t==null&&(t=10),this.signum()==0||t<2||t>36)return"0";var e=this.chunkSize(t),r=Math.pow(t,e),n=jt(r),i=G(),s=G(),o="";for(this.divRemTo(n,i,s);i.signum()>0;)o=(r+s.intValue()).toString(t).substr(1)+o,i.divRemTo(n,i,s);return s.intValue().toString(t)+o}function m2(t,e){this.fromInt(0),e==null&&(e=10);for(var r=this.chunkSize(e),n=Math.pow(e,r),i=!1,s=0,o=0,a=0;a<t.length;++a){var u=ih(t,a);if(u<0){t.charAt(a)=="-"&&this.signum()==0&&(i=!0);continue}o=e*o+u,++s>=r&&(this.dMultiply(n),this.dAddOffset(o,0),s=0,o=0)}s>0&&(this.dMultiply(Math.pow(e,s)),this.dAddOffset(o,0)),i&&S.ZERO.subTo(this,this)}function b2(t,e,r){if(typeof e=="number")if(t<2)this.fromInt(1);else for(this.fromNumber(t,r),this.testBit(t-1)||this.bitwiseTo(S.ONE.shiftLeft(t-1),ko,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(e);)this.dAddOffset(2,0),this.bitLength()>t&&this.subTo(S.ONE.shiftLeft(t-1),this);else{var n=new Array,i=t&7;n.length=(t>>3)+1,e.nextBytes(n),i>0?n[0]&=(1<<i)-1:n[0]=0,this.fromString(n,256)}}function w2(){var t=this.t,e=new Array;e[0]=this.s;var r=this.DB-t*this.DB%8,n,i=0;if(t-- >0)for(r<this.DB&&(n=this.data[t]>>r)!=(this.s&this.DM)>>r&&(e[i++]=n|this.s<<this.DB-r);t>=0;)r<8?(n=(this.data[t]&(1<<r)-1)<<8-r,n|=this.data[--t]>>(r+=this.DB-8)):(n=this.data[t]>>(r-=8)&255,r<=0&&(r+=this.DB,--t)),(n&128)!=0&&(n|=-256),i==0&&(this.s&128)!=(n&128)&&++i,(i>0||n!=this.s)&&(e[i++]=n);return e}function E2(t){return this.compareTo(t)==0}function S2(t){return this.compareTo(t)<0?this:t}function B2(t){return this.compareTo(t)>0?this:t}function C2(t,e,r){var n,i,s=Math.min(t.t,this.t);for(n=0;n<s;++n)r.data[n]=e(this.data[n],t.data[n]);if(t.t<this.t){for(i=t.s&this.DM,n=s;n<this.t;++n)r.data[n]=e(this.data[n],i);r.t=this.t}else{for(i=this.s&this.DM,n=s;n<t.t;++n)r.data[n]=e(i,t.data[n]);r.t=t.t}r.s=e(this.s,t.s),r.clamp()}function _2(t,e){return t&e}function A2(t){var e=G();return this.bitwiseTo(t,_2,e),e}function ko(t,e){return t|e}function I2(t){var e=G();return this.bitwiseTo(t,ko,e),e}function sh(t,e){return t^e}function T2(t){var e=G();return this.bitwiseTo(t,sh,e),e}function oh(t,e){return t&~e}function R2(t){var e=G();return this.bitwiseTo(t,oh,e),e}function P2(){for(var t=G(),e=0;e<this.t;++e)t.data[e]=this.DM&~this.data[e];return t.t=this.t,t.s=~this.s,t}function D2(t){var e=G();return t<0?this.rShiftTo(-t,e):this.lShiftTo(t,e),e}function N2(t){var e=G();return t<0?this.lShiftTo(-t,e):this.rShiftTo(t,e),e}function L2(t){if(t==0)return-1;var e=0;return(t&65535)==0&&(t>>=16,e+=16),(t&255)==0&&(t>>=8,e+=8),(t&15)==0&&(t>>=4,e+=4),(t&3)==0&&(t>>=2,e+=2),(t&1)==0&&++e,e}function k2(){for(var t=0;t<this.t;++t)if(this.data[t]!=0)return t*this.DB+L2(this.data[t]);return this.s<0?this.t*this.DB:-1}function O2(t){for(var e=0;t!=0;)t&=t-1,++e;return e}function F2(){for(var t=0,e=this.s&this.DM,r=0;r<this.t;++r)t+=O2(this.data[r]^e);return t}function K2(t){var e=Math.floor(t/this.DB);return e>=this.t?this.s!=0:(this.data[e]&1<<t%this.DB)!=0}function U2(t,e){var r=S.ONE.shiftLeft(t);return this.bitwiseTo(r,e,r),r}function q2(t){return this.changeBit(t,ko)}function M2(t){return this.changeBit(t,oh)}function V2(t){return this.changeBit(t,sh)}function z2(t,e){for(var r=0,n=0,i=Math.min(t.t,this.t);r<i;)n+=this.data[r]+t.data[r],e.data[r++]=n&this.DM,n>>=this.DB;if(t.t<this.t){for(n+=t.s;r<this.t;)n+=this.data[r],e.data[r++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;r<t.t;)n+=t.data[r],e.data[r++]=n&this.DM,n>>=this.DB;n+=t.s}e.s=n<0?-1:0,n>0?e.data[r++]=n:n<-1&&(e.data[r++]=this.DV+n),e.t=r,e.clamp()}function H2(t){var e=G();return this.addTo(t,e),e}function G2(t){var e=G();return this.subTo(t,e),e}function j2(t){var e=G();return this.multiplyTo(t,e),e}function W2(t){var e=G();return this.divRemTo(t,e,null),e}function $2(t){var e=G();return this.divRemTo(t,null,e),e}function Y2(t){var e=G(),r=G();return this.divRemTo(t,e,r),new Array(e,r)}function Q2(t){this.data[this.t]=this.am(0,t-1,this,0,0,this.t),++this.t,this.clamp()}function Z2(t,e){if(t!=0){for(;this.t<=e;)this.data[this.t++]=0;for(this.data[e]+=t;this.data[e]>=this.DV;)this.data[e]-=this.DV,++e>=this.t&&(this.data[this.t++]=0),++this.data[e]}}function En(){}function ah(t){return t}function X2(t,e,r){t.multiplyTo(e,r)}function J2(t,e){t.squareTo(e)}En.prototype.convert=ah;En.prototype.revert=ah;En.prototype.mulTo=X2;En.prototype.sqrTo=J2;function ex(t){return this.exp(t,new En)}function tx(t,e,r){var n=Math.min(this.t+t.t,e);for(r.s=0,r.t=n;n>0;)r.data[--n]=0;var i;for(i=r.t-this.t;n<i;++n)r.data[n+this.t]=this.am(0,t.data[n],r,n,0,this.t);for(i=Math.min(t.t,e);n<i;++n)this.am(0,t.data[n],r,n,0,e-n);r.clamp()}function rx(t,e,r){--e;var n=r.t=this.t+t.t-e;for(r.s=0;--n>=0;)r.data[n]=0;for(n=Math.max(e-this.t,0);n<t.t;++n)r.data[this.t+n-e]=this.am(e-n,t.data[n],r,0,0,this.t+n-e);r.clamp(),r.drShiftTo(1,r)}function Hr(t){this.r2=G(),this.q3=G(),S.ONE.dlShiftTo(2*t.t,this.r2),this.mu=this.r2.divide(t),this.m=t}function nx(t){if(t.s<0||t.t>2*this.m.t)return t.mod(this.m);if(t.compareTo(this.m)<0)return t;var e=G();return t.copyTo(e),this.reduce(e),e}function ix(t){return t}function sx(t){for(t.drShiftTo(this.m.t-1,this.r2),t.t>this.m.t+1&&(t.t=this.m.t+1,t.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);t.compareTo(this.r2)<0;)t.dAddOffset(1,this.m.t+1);for(t.subTo(this.r2,t);t.compareTo(this.m)>=0;)t.subTo(this.m,t)}function ox(t,e){t.squareTo(e),this.reduce(e)}function ax(t,e,r){t.multiplyTo(e,r),this.reduce(r)}Hr.prototype.convert=nx;Hr.prototype.revert=ix;Hr.prototype.reduce=sx;Hr.prototype.mulTo=ax;Hr.prototype.sqrTo=ox;function ux(t,e){var r=t.bitLength(),n,i=jt(1),s;if(r<=0)return i;r<18?n=1:r<48?n=3:r<144?n=4:r<768?n=5:n=6,r<8?s=new yr(e):e.isEven()?s=new Hr(e):s=new gr(e);var o=new Array,a=3,u=n-1,c=(1<<n)-1;if(o[1]=s.convert(this),n>1){var f=G();for(s.sqrTo(o[1],f);a<=c;)o[a]=G(),s.mulTo(f,o[a-2],o[a]),a+=2}var h=t.t-1,l,d=!0,p=G(),g;for(r=Fi(t.data[h])-1;h>=0;){for(r>=u?l=t.data[h]>>r-u&c:(l=(t.data[h]&(1<<r+1)-1)<<u-r,h>0&&(l|=t.data[h-1]>>this.DB+r-u)),a=n;(l&1)==0;)l>>=1,--a;if((r-=a)<0&&(r+=this.DB,--h),d)o[l].copyTo(i),d=!1;else{for(;a>1;)s.sqrTo(i,p),s.sqrTo(p,i),a-=2;a>0?s.sqrTo(i,p):(g=i,i=p,p=g),s.mulTo(p,o[l],i)}for(;h>=0&&(t.data[h]&1<<r)==0;)s.sqrTo(i,p),g=i,i=p,p=g,--r<0&&(r=this.DB-1,--h)}return s.revert(i)}function cx(t){var e=this.s<0?this.negate():this.clone(),r=t.s<0?t.negate():t.clone();if(e.compareTo(r)<0){var n=e;e=r,r=n}var i=e.getLowestSetBit(),s=r.getLowestSetBit();if(s<0)return e;for(i<s&&(s=i),s>0&&(e.rShiftTo(s,e),r.rShiftTo(s,r));e.signum()>0;)(i=e.getLowestSetBit())>0&&e.rShiftTo(i,e),(i=r.getLowestSetBit())>0&&r.rShiftTo(i,r),e.compareTo(r)>=0?(e.subTo(r,e),e.rShiftTo(1,e)):(r.subTo(e,r),r.rShiftTo(1,r));return s>0&&r.lShiftTo(s,r),r}function fx(t){if(t<=0)return 0;var e=this.DV%t,r=this.s<0?t-1:0;if(this.t>0)if(e==0)r=this.data[0]%t;else for(var n=this.t-1;n>=0;--n)r=(e*r+this.data[n])%t;return r}function hx(t){var e=t.isEven();if(this.isEven()&&e||t.signum()==0)return S.ZERO;for(var r=t.clone(),n=this.clone(),i=jt(1),s=jt(0),o=jt(0),a=jt(1);r.signum()!=0;){for(;r.isEven();)r.rShiftTo(1,r),e?((!i.isEven()||!s.isEven())&&(i.addTo(this,i),s.subTo(t,s)),i.rShiftTo(1,i)):s.isEven()||s.subTo(t,s),s.rShiftTo(1,s);for(;n.isEven();)n.rShiftTo(1,n),e?((!o.isEven()||!a.isEven())&&(o.addTo(this,o),a.subTo(t,a)),o.rShiftTo(1,o)):a.isEven()||a.subTo(t,a),a.rShiftTo(1,a);r.compareTo(n)>=0?(r.subTo(n,r),e&&i.subTo(o,i),s.subTo(a,s)):(n.subTo(r,n),e&&o.subTo(i,o),a.subTo(s,a))}if(n.compareTo(S.ONE)!=0)return S.ZERO;if(a.compareTo(t)>=0)return a.subtract(t);if(a.signum()<0)a.addTo(t,a);else return a;return a.signum()<0?a.add(t):a}var tt=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509],lx=(1<<26)/tt[tt.length-1];function px(t){var e,r=this.abs();if(r.t==1&&r.data[0]<=tt[tt.length-1]){for(e=0;e<tt.length;++e)if(r.data[0]==tt[e])return!0;return!1}if(r.isEven())return!1;for(e=1;e<tt.length;){for(var n=tt[e],i=e+1;i<tt.length&&n<lx;)n*=tt[i++];for(n=r.modInt(n);e<i;)if(n%tt[e++]==0)return!1}return r.millerRabin(t)}function dx(t){var e=this.subtract(S.ONE),r=e.getLowestSetBit();if(r<=0)return!1;for(var n=e.shiftRight(r),i=yx(),s,o=0;o<t;++o){do s=new S(this.bitLength(),i);while(s.compareTo(S.ONE)<=0||s.compareTo(e)>=0);var a=s.modPow(n,this);if(a.compareTo(S.ONE)!=0&&a.compareTo(e)!=0){for(var u=1;u++<r&&a.compareTo(e)!=0;)if(a=a.modPowInt(2,this),a.compareTo(S.ONE)==0)return!1;if(a.compareTo(e)!=0)return!1}}return!0}function yx(){return{nextBytes:function(t){for(var e=0;e<t.length;++e)t[e]=Math.floor(Math.random()*256)}}}S.prototype.chunkSize=g2;S.prototype.toRadix=v2;S.prototype.fromRadix=m2;S.prototype.fromNumber=b2;S.prototype.bitwiseTo=C2;S.prototype.changeBit=U2;S.prototype.addTo=z2;S.prototype.dMultiply=Q2;S.prototype.dAddOffset=Z2;S.prototype.multiplyLowerTo=tx;S.prototype.multiplyUpperTo=rx;S.prototype.modInt=fx;S.prototype.millerRabin=dx;S.prototype.clone=l2;S.prototype.intValue=p2;S.prototype.byteValue=d2;S.prototype.shortValue=y2;S.prototype.signum=x2;S.prototype.toByteArray=w2;S.prototype.equals=E2;S.prototype.min=S2;S.prototype.max=B2;S.prototype.and=A2;S.prototype.or=I2;S.prototype.xor=T2;S.prototype.andNot=R2;S.prototype.not=P2;S.prototype.shiftLeft=D2;S.prototype.shiftRight=N2;S.prototype.getLowestSetBit=k2;S.prototype.bitCount=F2;S.prototype.testBit=K2;S.prototype.setBit=q2;S.prototype.clearBit=M2;S.prototype.flipBit=V2;S.prototype.add=H2;S.prototype.subtract=G2;S.prototype.multiply=j2;S.prototype.divide=W2;S.prototype.remainder=$2;S.prototype.divideAndRemainder=Y2;S.prototype.modPow=ux;S.prototype.modInverse=hx;S.prototype.pow=ex;S.prototype.gcd=cx;S.prototype.isProbablePrime=px});var ph=E((lE,lh)=>{var gt=J();dr();pe();var ch=lh.exports=gt.sha1=gt.sha1||{};gt.md.sha1=gt.md.algorithms.sha1=ch;ch.create=function(){fh||gx();var t=null,e=gt.util.createBuffer(),r=new Array(80),n={algorithm:"sha1",blockLength:64,digestLength:20,messageLength:0,fullMessageLength:null,messageLengthSize:8};return n.start=function(){n.messageLength=0,n.fullMessageLength=n.messageLength64=[];for(var i=n.messageLengthSize/4,s=0;s<i;++s)n.fullMessageLength.push(0);return e=gt.util.createBuffer(),t={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878,h4:3285377520},n},n.start(),n.update=function(i,s){s==="utf8"&&(i=gt.util.encodeUtf8(i));var o=i.length;n.messageLength+=o,o=[o/4294967296>>>0,o>>>0];for(var a=n.fullMessageLength.length-1;a>=0;--a)n.fullMessageLength[a]+=o[1],o[1]=o[0]+(n.fullMessageLength[a]/4294967296>>>0),n.fullMessageLength[a]=n.fullMessageLength[a]>>>0,o[0]=o[1]/4294967296>>>0;return e.putBytes(i),hh(t,r,e),(e.read>2048||e.length()===0)&&e.compact(),n},n.digest=function(){var i=gt.util.createBuffer();i.putBytes(e.bytes());var s=n.fullMessageLength[n.fullMessageLength.length-1]+n.messageLengthSize,o=s&n.blockLength-1;i.putBytes(Oo.substr(0,n.blockLength-o));for(var a,u,c=n.fullMessageLength[0]*8,f=0;f<n.fullMessageLength.length-1;++f)a=n.fullMessageLength[f+1]*8,u=a/4294967296>>>0,c+=u,i.putInt32(c>>>0),c=a>>>0;i.putInt32(c);var h={h0:t.h0,h1:t.h1,h2:t.h2,h3:t.h3,h4:t.h4};hh(h,r,i);var l=gt.util.createBuffer();return l.putInt32(h.h0),l.putInt32(h.h1),l.putInt32(h.h2),l.putInt32(h.h3),l.putInt32(h.h4),l},n};var Oo=null,fh=!1;function gx(){Oo=String.fromCharCode(128),Oo+=gt.util.fillString(String.fromCharCode(0),64),fh=!0}function hh(t,e,r){for(var n,i,s,o,a,u,c,f,h=r.length();h>=64;){for(i=t.h0,s=t.h1,o=t.h2,a=t.h3,u=t.h4,f=0;f<16;++f)n=r.getInt32(),e[f]=n,c=a^s&(o^a),n=(i<<5|i>>>27)+c+u+1518500249+n,u=a,a=o,o=(s<<30|s>>>2)>>>0,s=i,i=n;for(;f<20;++f)n=e[f-3]^e[f-8]^e[f-14]^e[f-16],n=n<<1|n>>>31,e[f]=n,c=a^s&(o^a),n=(i<<5|i>>>27)+c+u+1518500249+n,u=a,a=o,o=(s<<30|s>>>2)>>>0,s=i,i=n;for(;f<32;++f)n=e[f-3]^e[f-8]^e[f-14]^e[f-16],n=n<<1|n>>>31,e[f]=n,c=s^o^a,n=(i<<5|i>>>27)+c+u+1859775393+n,u=a,a=o,o=(s<<30|s>>>2)>>>0,s=i,i=n;for(;f<40;++f)n=e[f-6]^e[f-16]^e[f-28]^e[f-32],n=n<<2|n>>>30,e[f]=n,c=s^o^a,n=(i<<5|i>>>27)+c+u+1859775393+n,u=a,a=o,o=(s<<30|s>>>2)>>>0,s=i,i=n;for(;f<60;++f)n=e[f-6]^e[f-16]^e[f-28]^e[f-32],n=n<<2|n>>>30,e[f]=n,c=s&o|a&(s^o),n=(i<<5|i>>>27)+c+u+2400959708+n,u=a,a=o,o=(s<<30|s>>>2)>>>0,s=i,i=n;for(;f<80;++f)n=e[f-6]^e[f-16]^e[f-28]^e[f-32],n=n<<2|n>>>30,e[f]=n,c=s^o^a,n=(i<<5|i>>>27)+c+u+3395469782+n,u=a,a=o,o=(s<<30|s>>>2)>>>0,s=i,i=n;t.h0=t.h0+i|0,t.h1=t.h1+s|0,t.h2=t.h2+o|0,t.h3=t.h3+a|0,t.h4=t.h4+u|0,h-=64}}});var gh=E((pE,yh)=>{var xt=J();pe();wn();ph();var dh=yh.exports=xt.pkcs1=xt.pkcs1||{};dh.encode_rsa_oaep=function(t,e,r){var n,i,s,o;typeof r=="string"?(n=r,i=arguments[3]||void 0,s=arguments[4]||void 0):r&&(n=r.label||void 0,i=r.seed||void 0,s=r.md||void 0,r.mgf1&&r.mgf1.md&&(o=r.mgf1.md)),s?s.start():s=xt.md.sha1.create(),o||(o=s);var a=Math.ceil(t.n.bitLength()/8),u=a-2*s.digestLength-2;if(e.length>u){var c=new Error("RSAES-OAEP input message length is too long.");throw c.length=e.length,c.maxLength=u,c}n||(n=""),s.update(n,"raw");for(var f=s.digest(),h="",l=u-e.length,d=0;d<l;d++)h+="\0";var p=f.getBytes()+h+""+e;if(!i)i=xt.random.getBytes(s.digestLength);else if(i.length!==s.digestLength){var c=new Error("Invalid RSAES-OAEP seed. The seed length must match the digest length.");throw c.seedLength=i.length,c.digestLength=s.digestLength,c}var g=Ui(i,a-s.digestLength-1,o),x=xt.util.xorBytes(p,g,p.length),m=Ui(x,s.digestLength,o),B=xt.util.xorBytes(i,m,i.length);return"\0"+B+x};dh.decode_rsa_oaep=function(t,e,r){var n,i,s;typeof r=="string"?(n=r,i=arguments[3]||void 0):r&&(n=r.label||void 0,i=r.md||void 0,r.mgf1&&r.mgf1.md&&(s=r.mgf1.md));var o=Math.ceil(t.n.bitLength()/8);if(e.length!==o){var x=new Error("RSAES-OAEP encoded message length is invalid.");throw x.length=e.length,x.expectedLength=o,x}if(i===void 0?i=xt.md.sha1.create():i.start(),s||(s=i),o<2*i.digestLength+2)throw new Error("RSAES-OAEP key is too short for the hash function.");n||(n=""),i.update(n,"raw");for(var a=i.digest().getBytes(),u=e.charAt(0),c=e.substring(1,i.digestLength+1),f=e.substring(1+i.digestLength),h=Ui(f,i.digestLength,s),l=xt.util.xorBytes(c,h,c.length),d=Ui(l,o-i.digestLength-1,s),p=xt.util.xorBytes(f,d,f.length),g=p.substring(0,i.digestLength),x=u!=="\0",m=0;m<i.digestLength;++m)x|=a.charAt(m)!==g.charAt(m);for(var B=1,I=i.digestLength,L=i.digestLength;L<p.length;L++){var T=p.charCodeAt(L),_=T&1^1,O=B?65534:0;x|=T&O,B=B&_,I+=B}if(x||p.charCodeAt(I)!==1)throw new Error("Invalid RSAES-OAEP padding.");return p.substring(I+1)};function Ui(t,e,r){r||(r=xt.md.sha1.create());for(var n="",i=Math.ceil(e/r.digestLength),s=0;s<i;++s){var o=String.fromCharCode(s>>24&255,s>>16&255,s>>8&255,s&255);r.start(),r.update(t+o),n+=r.digest().getBytes()}return n.substring(0,e)}});var xh=E((dE,Fo)=>{var Wt=J();pe();Ki();wn();(function(){if(Wt.prime){Fo.exports=Wt.prime;return}var t=Fo.exports=Wt.prime=Wt.prime||{},e=Wt.jsbn.BigInteger,r=[6,4,2,4,2,4,6,2],n=new e(null);n.fromInt(30);var i=function(h,l){return h|l};t.generateProbablePrime=function(h,l,d){typeof l=="function"&&(d=l,l={}),l=l||{};var p=l.algorithm||"PRIMEINC";typeof p=="string"&&(p={name:p}),p.options=p.options||{};var g=l.prng||Wt.random,x={nextBytes:function(m){for(var B=g.getBytesSync(m.length),I=0;I<m.length;++I)m[I]=B.charCodeAt(I)}};if(p.name==="PRIMEINC")return s(h,x,p.options,d);throw new Error("Invalid prime generation algorithm: "+p.name)};function s(h,l,d,p){return"workers"in d?u(h,l,d,p):o(h,l,d,p)}function o(h,l,d,p){var g=c(h,l),x=0,m=f(g.bitLength());"millerRabinTests"in d&&(m=d.millerRabinTests);var B=10;"maxBlockTime"in d&&(B=d.maxBlockTime),a(g,h,l,x,m,B,p)}function a(h,l,d,p,g,x,m){var B=+new Date;do{if(h.bitLength()>l&&(h=c(l,d)),h.isProbablePrime(g))return m(null,h);h.dAddOffset(r[p++%8],0)}while(x<0||+new Date-B<x);Wt.util.setImmediate(function(){a(h,l,d,p,g,x,m)})}function u(h,l,d,p){if(typeof Worker=="undefined")return o(h,l,d,p);var g=c(h,l),x=d.workers,m=d.workLoad||100,B=m*30/8,I=d.workerScript||"forge/prime.worker.js";if(x===-1)return Wt.util.estimateCores(function(T,_){T&&(_=2),x=_-1,L()});L();function L(){x=Math.max(1,x);for(var T=[],_=0;_<x;++_)T[_]=new Worker(I);for(var O=x,_=0;_<x;++_)T[_].addEventListener("message",ce);var q=!1;function ce(Qe){if(!q){--O;var Fe=Qe.data;if(Fe.found){for(var Ae=0;Ae<T.length;++Ae)T[Ae].terminate();return q=!0,p(null,new e(Fe.prime,16))}g.bitLength()>h&&(g=c(h,l));var wr=g.toString(16);Qe.target.postMessage({hex:wr,workLoad:m}),g.dAddOffset(B,0)}}}}function c(h,l){var d=new e(h,l),p=h-1;return d.testBit(p)||d.bitwiseTo(e.ONE.shiftLeft(p),i,d),d.dAddOffset(31-d.mod(n).byteValue(),0),d}function f(h){return h<=100?27:h<=150?18:h<=200?15:h<=250?12:h<=300?9:h<=350?8:h<=400?7:h<=500?6:h<=600?5:h<=800?4:h<=1250?3:2}})()});var Mi=E((yE,Bh)=>{var F=J();bn();Ki();_i();gh();xh();wn();pe();typeof z=="undefined"&&(z=F.jsbn.BigInteger);var z,Ko=F.util.isNodejs?Vr():null,v=F.asn1,Ge=F.util;F.pki=F.pki||{};Bh.exports=F.pki.rsa=F.rsa=F.rsa||{};var K=F.pki,xx=[6,4,2,4,2,4,6,2],vx={name:"PrivateKeyInfo",tagClass:v.Class.UNIVERSAL,type:v.Type.SEQUENCE,constructed:!0,value:[{name:"PrivateKeyInfo.version",tagClass:v.Class.UNIVERSAL,type:v.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"PrivateKeyInfo.privateKeyAlgorithm",tagClass:v.Class.UNIVERSAL,type:v.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:v.Class.UNIVERSAL,type:v.Type.OID,constructed:!1,capture:"privateKeyOid"}]},{name:"PrivateKeyInfo",tagClass:v.Class.UNIVERSAL,type:v.Type.OCTETSTRING,constructed:!1,capture:"privateKey"}]},mx={name:"RSAPrivateKey",tagClass:v.Class.UNIVERSAL,type:v.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPrivateKey.version",tagClass:v.Class.UNIVERSAL,type:v.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"RSAPrivateKey.modulus",tagClass:v.Class.UNIVERSAL,type:v.Type.INTEGER,constructed:!1,capture:"privateKeyModulus"},{name:"RSAPrivateKey.publicExponent",tagClass:v.Class.UNIVERSAL,type:v.Type.INTEGER,constructed:!1,capture:"privateKeyPublicExponent"},{name:"RSAPrivateKey.privateExponent",tagClass:v.Class.UNIVERSAL,type:v.Type.INTEGER,constructed:!1,capture:"privateKeyPrivateExponent"},{name:"RSAPrivateKey.prime1",tagClass:v.Class.UNIVERSAL,type:v.Type.INTEGER,constructed:!1,capture:"privateKeyPrime1"},{name:"RSAPrivateKey.prime2",tagClass:v.Class.UNIVERSAL,type:v.Type.INTEGER,constructed:!1,capture:"privateKeyPrime2"},{name:"RSAPrivateKey.exponent1",tagClass:v.Class.UNIVERSAL,type:v.Type.INTEGER,constructed:!1,capture:"privateKeyExponent1"},{name:"RSAPrivateKey.exponent2",tagClass:v.Class.UNIVERSAL,type:v.Type.INTEGER,constructed:!1,capture:"privateKeyExponent2"},{name:"RSAPrivateKey.coefficient",tagClass:v.Class.UNIVERSAL,type:v.Type.INTEGER,constructed:!1,capture:"privateKeyCoefficient"}]},bx={name:"RSAPublicKey",tagClass:v.Class.UNIVERSAL,type:v.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPublicKey.modulus",tagClass:v.Class.UNIVERSAL,type:v.Type.INTEGER,constructed:!1,capture:"publicKeyModulus"},{name:"RSAPublicKey.exponent",tagClass:v.Class.UNIVERSAL,type:v.Type.INTEGER,constructed:!1,capture:"publicKeyExponent"}]},wx=F.pki.rsa.publicKeyValidator={name:"SubjectPublicKeyInfo",tagClass:v.Class.UNIVERSAL,type:v.Type.SEQUENCE,constructed:!0,captureAsn1:"subjectPublicKeyInfo",value:[{name:"SubjectPublicKeyInfo.AlgorithmIdentifier",tagClass:v.Class.UNIVERSAL,type:v.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:v.Class.UNIVERSAL,type:v.Type.OID,constructed:!1,capture:"publicKeyOid"}]},{name:"SubjectPublicKeyInfo.subjectPublicKey",tagClass:v.Class.UNIVERSAL,type:v.Type.BITSTRING,constructed:!1,value:[{name:"SubjectPublicKeyInfo.subjectPublicKey.RSAPublicKey",tagClass:v.Class.UNIVERSAL,type:v.Type.SEQUENCE,constructed:!0,optional:!0,captureAsn1:"rsaPublicKey"}]}]},Ex=function(t){var e;if(t.algorithm in K.oids)e=K.oids[t.algorithm];else{var r=new Error("Unknown message digest algorithm.");throw r.algorithm=t.algorithm,r}var n=v.oidToDer(e).getBytes(),i=v.create(v.Class.UNIVERSAL,v.Type.SEQUENCE,!0,[]),s=v.create(v.Class.UNIVERSAL,v.Type.SEQUENCE,!0,[]);s.value.push(v.create(v.Class.UNIVERSAL,v.Type.OID,!1,n)),s.value.push(v.create(v.Class.UNIVERSAL,v.Type.NULL,!1,""));var o=v.create(v.Class.UNIVERSAL,v.Type.OCTETSTRING,!1,t.digest().getBytes());return i.value.push(s),i.value.push(o),v.toDer(i).getBytes()},vh=function(t,e,r){if(r)return t.modPow(e.e,e.n);if(!e.p||!e.q)return t.modPow(e.d,e.n);e.dP||(e.dP=e.d.mod(e.p.subtract(z.ONE))),e.dQ||(e.dQ=e.d.mod(e.q.subtract(z.ONE))),e.qInv||(e.qInv=e.q.modInverse(e.p));var n;do n=new z(F.util.bytesToHex(F.random.getBytes(e.n.bitLength()/8)),16);while(n.compareTo(e.n)>=0||!n.gcd(e.n).equals(z.ONE));t=t.multiply(n.modPow(e.e,e.n)).mod(e.n);for(var i=t.mod(e.p).modPow(e.dP,e.p),s=t.mod(e.q).modPow(e.dQ,e.q);i.compareTo(s)<0;)i=i.add(e.p);var o=i.subtract(s).multiply(e.qInv).mod(e.p).multiply(e.q).add(s);return o=o.multiply(n.modInverse(e.n)).mod(e.n),o};K.rsa.encrypt=function(t,e,r){var n=r,i,s=Math.ceil(e.n.bitLength()/8);r!==!1&&r!==!0?(n=r===2,i=mh(t,e,r)):(i=F.util.createBuffer(),i.putBytes(t));for(var o=new z(i.toHex(),16),a=vh(o,e,n),u=a.toString(16),c=F.util.createBuffer(),f=s-Math.ceil(u.length/2);f>0;)c.putByte(0),--f;return c.putBytes(F.util.hexToBytes(u)),c.getBytes()};K.rsa.decrypt=function(t,e,r,n){var i=Math.ceil(e.n.bitLength()/8);if(t.length!==i){var s=new Error("Encrypted message length is invalid.");throw s.length=t.length,s.expected=i,s}var o=new z(F.util.createBuffer(t).toHex(),16);if(o.compareTo(e.n)>=0)throw new Error("Encrypted message is invalid.");for(var a=vh(o,e,r),u=a.toString(16),c=F.util.createBuffer(),f=i-Math.ceil(u.length/2);f>0;)c.putByte(0),--f;return c.putBytes(F.util.hexToBytes(u)),n!==!1?qi(c.getBytes(),e,r):c.getBytes()};K.rsa.createKeyPairGenerationState=function(t,e,r){typeof t=="string"&&(t=parseInt(t,10)),t=t||2048,r=r||{};var n=r.prng||F.random,i={nextBytes:function(a){for(var u=n.getBytesSync(a.length),c=0;c<a.length;++c)a[c]=u.charCodeAt(c)}},s=r.algorithm||"PRIMEINC",o;if(s==="PRIMEINC")o={algorithm:s,state:0,bits:t,rng:i,eInt:e||65537,e:new z(null),p:null,q:null,qBits:t>>1,pBits:t-(t>>1),pqState:0,num:null,keys:null},o.e.fromInt(o.eInt);else throw new Error("Invalid key generation algorithm: "+s);return o};K.rsa.stepKeyPairGenerationState=function(t,e){"algorithm"in t||(t.algorithm="PRIMEINC");var r=new z(null);r.fromInt(30);for(var n=0,i=function(h,l){return h|l},s=+new Date,o,a=0;t.keys===null&&(e<=0||a<e);){if(t.state===0){var u=t.p===null?t.pBits:t.qBits,c=u-1;t.pqState===0?(t.num=new z(u,t.rng),t.num.testBit(c)||t.num.bitwiseTo(z.ONE.shiftLeft(c),i,t.num),t.num.dAddOffset(31-t.num.mod(r).byteValue(),0),n=0,++t.pqState):t.pqState===1?t.num.bitLength()>u?t.pqState=0:t.num.isProbablePrime(Bx(t.num.bitLength()))?++t.pqState:t.num.dAddOffset(xx[n++%8],0):t.pqState===2?t.pqState=t.num.subtract(z.ONE).gcd(t.e).compareTo(z.ONE)===0?3:0:t.pqState===3&&(t.pqState=0,t.p===null?t.p=t.num:t.q=t.num,t.p!==null&&t.q!==null&&++t.state,t.num=null)}else if(t.state===1)t.p.compareTo(t.q)<0&&(t.num=t.p,t.p=t.q,t.q=t.num),++t.state;else if(t.state===2)t.p1=t.p.subtract(z.ONE),t.q1=t.q.subtract(z.ONE),t.phi=t.p1.multiply(t.q1),++t.state;else if(t.state===3)t.phi.gcd(t.e).compareTo(z.ONE)===0?++t.state:(t.p=null,t.q=null,t.state=0);else if(t.state===4)t.n=t.p.multiply(t.q),t.n.bitLength()===t.bits?++t.state:(t.q=null,t.state=0);else if(t.state===5){var f=t.e.modInverse(t.phi);t.keys={privateKey:K.rsa.setPrivateKey(t.n,t.e,f,t.p,t.q,f.mod(t.p1),f.mod(t.q1),t.q.modInverse(t.p)),publicKey:K.rsa.setPublicKey(t.n,t.e)}}o=+new Date,a+=o-s,s=o}return t.keys!==null};K.rsa.generateKeyPair=function(t,e,r,n){if(arguments.length===1?typeof t=="object"?(r=t,t=void 0):typeof t=="function"&&(n=t,t=void 0):arguments.length===2?typeof t=="number"?typeof e=="function"?(n=e,e=void 0):typeof e!="number"&&(r=e,e=void 0):(r=t,n=e,t=void 0,e=void 0):arguments.length===3&&(typeof e=="number"?typeof r=="function"&&(n=r,r=void 0):(n=r,r=e,e=void 0)),r=r||{},t===void 0&&(t=r.bits||2048),e===void 0&&(e=r.e||65537),!F.options.usePureJavaScript&&!r.prng&&t>=256&&t<=16384&&(e===65537||e===3)){if(n){if(bh("generateKeyPair"))return Ko.generateKeyPair("rsa",{modulusLength:t,publicExponent:e,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"pkcs8",format:"pem"}},function(a,u,c){if(a)return n(a);n(null,{privateKey:K.privateKeyFromPem(c),publicKey:K.publicKeyFromPem(u)})});if(wh("generateKey")&&wh("exportKey"))return Ge.globalScope.crypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:t,publicExponent:Sh(e),hash:{name:"SHA-256"}},!0,["sign","verify"]).then(function(a){return Ge.globalScope.crypto.subtle.exportKey("pkcs8",a.privateKey)}).then(void 0,function(a){n(a)}).then(function(a){if(a){var u=K.privateKeyFromAsn1(v.fromDer(F.util.createBuffer(a)));n(null,{privateKey:u,publicKey:K.setRsaPublicKey(u.n,u.e)})}});if(Eh("generateKey")&&Eh("exportKey")){var i=Ge.globalScope.msCrypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:t,publicExponent:Sh(e),hash:{name:"SHA-256"}},!0,["sign","verify"]);i.oncomplete=function(a){var u=a.target.result,c=Ge.globalScope.msCrypto.subtle.exportKey("pkcs8",u.privateKey);c.oncomplete=function(f){var h=f.target.result,l=K.privateKeyFromAsn1(v.fromDer(F.util.createBuffer(h)));n(null,{privateKey:l,publicKey:K.setRsaPublicKey(l.n,l.e)})},c.onerror=function(f){n(f)}},i.onerror=function(a){n(a)};return}}else if(bh("generateKeyPairSync")){var s=Ko.generateKeyPairSync("rsa",{modulusLength:t,publicExponent:e,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"pkcs8",format:"pem"}});return{privateKey:K.privateKeyFromPem(s.privateKey),publicKey:K.publicKeyFromPem(s.publicKey)}}}var o=K.rsa.createKeyPairGenerationState(t,e,r);if(!n)return K.rsa.stepKeyPairGenerationState(o,0),o.keys;Sx(o,r,n)};K.setRsaPublicKey=K.rsa.setPublicKey=function(t,e){var r={n:t,e};return r.encrypt=function(n,i,s){if(typeof i=="string"?i=i.toUpperCase():i===void 0&&(i="RSAES-PKCS1-V1_5"),i==="RSAES-PKCS1-V1_5")i={encode:function(a,u,c){return mh(a,u,2).getBytes()}};else if(i==="RSA-OAEP"||i==="RSAES-OAEP")i={encode:function(a,u){return F.pkcs1.encode_rsa_oaep(u,a,s)}};else if(["RAW","NONE","NULL",null].indexOf(i)!==-1)i={encode:function(a){return a}};else if(typeof i=="string")throw new Error('Unsupported encryption scheme: "'+i+'".');var o=i.encode(n,r,!0);return K.rsa.encrypt(o,r,!0)},r.verify=function(n,i,s){typeof s=="string"?s=s.toUpperCase():s===void 0&&(s="RSASSA-PKCS1-V1_5"),s==="RSASSA-PKCS1-V1_5"?s={verify:function(a,u){u=qi(u,r,!0);var c=v.fromDer(u);return a===c.value[1].value}}:(s==="NONE"||s==="NULL"||s===null)&&(s={verify:function(a,u){return u=qi(u,r,!0),a===u}});var o=K.rsa.decrypt(i,r,!0,!1);return s.verify(n,o,r.n.bitLength())},r};K.setRsaPrivateKey=K.rsa.setPrivateKey=function(t,e,r,n,i,s,o,a){var u={n:t,e,d:r,p:n,q:i,dP:s,dQ:o,qInv:a};return u.decrypt=function(c,f,h){typeof f=="string"?f=f.toUpperCase():f===void 0&&(f="RSAES-PKCS1-V1_5");var l=K.rsa.decrypt(c,u,!1,!1);if(f==="RSAES-PKCS1-V1_5")f={decode:qi};else if(f==="RSA-OAEP"||f==="RSAES-OAEP")f={decode:function(d,p){return F.pkcs1.decode_rsa_oaep(p,d,h)}};else if(["RAW","NONE","NULL",null].indexOf(f)!==-1)f={decode:function(d){return d}};else throw new Error('Unsupported encryption scheme: "'+f+'".');return f.decode(l,u,!1)},u.sign=function(c,f){var h=!1;typeof f=="string"&&(f=f.toUpperCase()),f===void 0||f==="RSASSA-PKCS1-V1_5"?(f={encode:Ex},h=1):(f==="NONE"||f==="NULL"||f===null)&&(f={encode:function(){return c}},h=1);var l=f.encode(c,u.n.bitLength());return K.rsa.encrypt(l,u,h)},u};K.wrapRsaPrivateKey=function(t){return v.create(v.Class.UNIVERSAL,v.Type.SEQUENCE,!0,[v.create(v.Class.UNIVERSAL,v.Type.INTEGER,!1,v.integerToDer(0).getBytes()),v.create(v.Class.UNIVERSAL,v.Type.SEQUENCE,!0,[v.create(v.Class.UNIVERSAL,v.Type.OID,!1,v.oidToDer(K.oids.rsaEncryption).getBytes()),v.create(v.Class.UNIVERSAL,v.Type.NULL,!1,"")]),v.create(v.Class.UNIVERSAL,v.Type.OCTETSTRING,!1,v.toDer(t).getBytes())])};K.privateKeyFromAsn1=function(t){var e={},r=[];if(v.validate(t,vx,e,r)&&(t=v.fromDer(F.util.createBuffer(e.privateKey))),e={},r=[],!v.validate(t,mx,e,r)){var n=new Error("Cannot read private key. ASN.1 object does not contain an RSAPrivateKey.");throw n.errors=r,n}var i,s,o,a,u,c,f,h;return i=F.util.createBuffer(e.privateKeyModulus).toHex(),s=F.util.createBuffer(e.privateKeyPublicExponent).toHex(),o=F.util.createBuffer(e.privateKeyPrivateExponent).toHex(),a=F.util.createBuffer(e.privateKeyPrime1).toHex(),u=F.util.createBuffer(e.privateKeyPrime2).toHex(),c=F.util.createBuffer(e.privateKeyExponent1).toHex(),f=F.util.createBuffer(e.privateKeyExponent2).toHex(),h=F.util.createBuffer(e.privateKeyCoefficient).toHex(),K.setRsaPrivateKey(new z(i,16),new z(s,16),new z(o,16),new z(a,16),new z(u,16),new z(c,16),new z(f,16),new z(h,16))};K.privateKeyToAsn1=K.privateKeyToRSAPrivateKey=function(t){return v.create(v.Class.UNIVERSAL,v.Type.SEQUENCE,!0,[v.create(v.Class.UNIVERSAL,v.Type.INTEGER,!1,v.integerToDer(0).getBytes()),v.create(v.Class.UNIVERSAL,v.Type.INTEGER,!1,vt(t.n)),v.create(v.Class.UNIVERSAL,v.Type.INTEGER,!1,vt(t.e)),v.create(v.Class.UNIVERSAL,v.Type.INTEGER,!1,vt(t.d)),v.create(v.Class.UNIVERSAL,v.Type.INTEGER,!1,vt(t.p)),v.create(v.Class.UNIVERSAL,v.Type.INTEGER,!1,vt(t.q)),v.create(v.Class.UNIVERSAL,v.Type.INTEGER,!1,vt(t.dP)),v.create(v.Class.UNIVERSAL,v.Type.INTEGER,!1,vt(t.dQ)),v.create(v.Class.UNIVERSAL,v.Type.INTEGER,!1,vt(t.qInv))])};K.publicKeyFromAsn1=function(t){var e={},r=[];if(v.validate(t,wx,e,r)){var n=v.derToOid(e.publicKeyOid);if(n!==K.oids.rsaEncryption){var i=new Error("Cannot read public key. Unknown OID.");throw i.oid=n,i}t=e.rsaPublicKey}if(r=[],!v.validate(t,bx,e,r)){var i=new Error("Cannot read public key. ASN.1 object does not contain an RSAPublicKey.");throw i.errors=r,i}var s=F.util.createBuffer(e.publicKeyModulus).toHex(),o=F.util.createBuffer(e.publicKeyExponent).toHex();return K.setRsaPublicKey(new z(s,16),new z(o,16))};K.publicKeyToAsn1=K.publicKeyToSubjectPublicKeyInfo=function(t){return v.create(v.Class.UNIVERSAL,v.Type.SEQUENCE,!0,[v.create(v.Class.UNIVERSAL,v.Type.SEQUENCE,!0,[v.create(v.Class.UNIVERSAL,v.Type.OID,!1,v.oidToDer(K.oids.rsaEncryption).getBytes()),v.create(v.Class.UNIVERSAL,v.Type.NULL,!1,"")]),v.create(v.Class.UNIVERSAL,v.Type.BITSTRING,!1,[K.publicKeyToRSAPublicKey(t)])])};K.publicKeyToRSAPublicKey=function(t){return v.create(v.Class.UNIVERSAL,v.Type.SEQUENCE,!0,[v.create(v.Class.UNIVERSAL,v.Type.INTEGER,!1,vt(t.n)),v.create(v.Class.UNIVERSAL,v.Type.INTEGER,!1,vt(t.e))])};function mh(t,e,r){var n=F.util.createBuffer(),i=Math.ceil(e.n.bitLength()/8);if(t.length>i-11){var s=new Error("Message is too long for PKCS#1 v1.5 padding.");throw s.length=t.length,s.max=i-11,s}n.putByte(0),n.putByte(r);var o=i-3-t.length,a;if(r===0||r===1){a=r===0?0:255;for(var u=0;u<o;++u)n.putByte(a)}else for(;o>0;){for(var c=0,f=F.random.getBytes(o),u=0;u<o;++u)a=f.charCodeAt(u),a===0?++c:n.putByte(a);o=c}return n.putByte(0),n.putBytes(t),n}function qi(t,e,r,n){var i=Math.ceil(e.n.bitLength()/8),s=F.util.createBuffer(t),o=s.getByte(),a=s.getByte();if(o!==0||r&&a!==0&&a!==1||!r&&a!=2||r&&a===0&&typeof n=="undefined")throw new Error("Encryption block is invalid.");var u=0;if(a===0){u=i-3-n;for(var c=0;c<u;++c)if(s.getByte()!==0)throw new Error("Encryption block is invalid.")}else if(a===1)for(u=0;s.length()>1;){if(s.getByte()!==255){--s.read;break}++u}else if(a===2)for(u=0;s.length()>1;){if(s.getByte()===0){--s.read;break}++u}var f=s.getByte();if(f!==0||u!==i-3-s.length())throw new Error("Encryption block is invalid.");return s.getBytes()}function Sx(t,e,r){typeof e=="function"&&(r=e,e={}),e=e||{};var n={algorithm:{name:e.algorithm||"PRIMEINC",options:{workers:e.workers||2,workLoad:e.workLoad||100,workerScript:e.workerScript}}};"prng"in e&&(n.prng=e.prng),i();function i(){s(t.pBits,function(a,u){if(a)return r(a);if(t.p=u,t.q!==null)return o(a,t.q);s(t.qBits,o)})}function s(a,u){F.prime.generateProbablePrime(a,n,u)}function o(a,u){if(a)return r(a);if(t.q=u,t.p.compareTo(t.q)<0){var c=t.p;t.p=t.q,t.q=c}if(t.p.subtract(z.ONE).gcd(t.e).compareTo(z.ONE)!==0){t.p=null,i();return}if(t.q.subtract(z.ONE).gcd(t.e).compareTo(z.ONE)!==0){t.q=null,s(t.qBits,o);return}if(t.p1=t.p.subtract(z.ONE),t.q1=t.q.subtract(z.ONE),t.phi=t.p1.multiply(t.q1),t.phi.gcd(t.e).compareTo(z.ONE)!==0){t.p=t.q=null,i();return}if(t.n=t.p.multiply(t.q),t.n.bitLength()!==t.bits){t.q=null,s(t.qBits,o);return}var f=t.e.modInverse(t.phi);t.keys={privateKey:K.rsa.setPrivateKey(t.n,t.e,f,t.p,t.q,f.mod(t.p1),f.mod(t.q1),t.q.modInverse(t.p)),publicKey:K.rsa.setPublicKey(t.n,t.e)},r(null,t.keys)}}function vt(t){var e=t.toString(16);e[0]>="8"&&(e="00"+e);var r=F.util.hexToBytes(e);return r.length>1&&(r.charCodeAt(0)===0&&(r.charCodeAt(1)&128)==0||r.charCodeAt(0)===255&&(r.charCodeAt(1)&128)==128)?r.substr(1):r}function Bx(t){return t<=100?27:t<=150?18:t<=200?15:t<=250?12:t<=300?9:t<=350?8:t<=400?7:t<=500?6:t<=600?5:t<=800?4:t<=1250?3:2}function bh(t){return F.util.isNodejs&&typeof Ko[t]=="function"}function wh(t){return typeof Ge.globalScope!="undefined"&&typeof Ge.globalScope.crypto=="object"&&typeof Ge.globalScope.crypto.subtle=="object"&&typeof Ge.globalScope.crypto.subtle[t]=="function"}function Eh(t){return typeof Ge.globalScope!="undefined"&&typeof Ge.globalScope.msCrypto=="object"&&typeof Ge.globalScope.msCrypto.subtle=="object"&&typeof Ge.globalScope.msCrypto.subtle[t]=="function"}function Sh(t){for(var e=F.util.hexToBytes(t.toString(16)),r=new Uint8Array(e.length),n=0;n<e.length;++n)r[n]=e.charCodeAt(n);return r}});var Rh=E((gE,Th)=>{var P=J();To();bn();Lf();dr();_i();Uf();Vf();wn();eh();Mi();pe();typeof Ch=="undefined"&&(Ch=P.jsbn.BigInteger);var Ch,w=P.asn1,U=P.pki=P.pki||{};Th.exports=U.pbe=P.pbe=P.pbe||{};var xr=U.oids,Cx={name:"EncryptedPrivateKeyInfo",tagClass:w.Class.UNIVERSAL,type:w.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedPrivateKeyInfo.encryptionAlgorithm",tagClass:w.Class.UNIVERSAL,type:w.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:w.Class.UNIVERSAL,type:w.Type.OID,constructed:!1,capture:"encryptionOid"},{name:"AlgorithmIdentifier.parameters",tagClass:w.Class.UNIVERSAL,type:w.Type.SEQUENCE,constructed:!0,captureAsn1:"encryptionParams"}]},{name:"EncryptedPrivateKeyInfo.encryptedData",tagClass:w.Class.UNIVERSAL,type:w.Type.OCTETSTRING,constructed:!1,capture:"encryptedData"}]},_x={name:"PBES2Algorithms",tagClass:w.Class.UNIVERSAL,type:w.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc",tagClass:w.Class.UNIVERSAL,type:w.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc.oid",tagClass:w.Class.UNIVERSAL,type:w.Type.OID,constructed:!1,capture:"kdfOid"},{name:"PBES2Algorithms.params",tagClass:w.Class.UNIVERSAL,type:w.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.params.salt",tagClass:w.Class.UNIVERSAL,type:w.Type.OCTETSTRING,constructed:!1,capture:"kdfSalt"},{name:"PBES2Algorithms.params.iterationCount",tagClass:w.Class.UNIVERSAL,type:w.Type.INTEGER,constructed:!1,capture:"kdfIterationCount"},{name:"PBES2Algorithms.params.keyLength",tagClass:w.Class.UNIVERSAL,type:w.Type.INTEGER,constructed:!1,optional:!0,capture:"keyLength"},{name:"PBES2Algorithms.params.prf",tagClass:w.Class.UNIVERSAL,type:w.Type.SEQUENCE,constructed:!0,optional:!0,value:[{name:"PBES2Algorithms.params.prf.algorithm",tagClass:w.Class.UNIVERSAL,type:w.Type.OID,constructed:!1,capture:"prfOid"}]}]}]},{name:"PBES2Algorithms.encryptionScheme",tagClass:w.Class.UNIVERSAL,type:w.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.encryptionScheme.oid",tagClass:w.Class.UNIVERSAL,type:w.Type.OID,constructed:!1,capture:"encOid"},{name:"PBES2Algorithms.encryptionScheme.iv",tagClass:w.Class.UNIVERSAL,type:w.Type.OCTETSTRING,constructed:!1,capture:"encIv"}]}]},Ax={name:"pkcs-12PbeParams",tagClass:w.Class.UNIVERSAL,type:w.Type.SEQUENCE,constructed:!0,value:[{name:"pkcs-12PbeParams.salt",tagClass:w.Class.UNIVERSAL,type:w.Type.OCTETSTRING,constructed:!1,capture:"salt"},{name:"pkcs-12PbeParams.iterations",tagClass:w.Class.UNIVERSAL,type:w.Type.INTEGER,constructed:!1,capture:"iterations"}]};U.encryptPrivateKeyInfo=function(t,e,r){r=r||{},r.saltSize=r.saltSize||8,r.count=r.count||2048,r.algorithm=r.algorithm||"aes128",r.prfAlgorithm=r.prfAlgorithm||"sha1";var n=P.random.getBytesSync(r.saltSize),i=r.count,s=w.integerToDer(i),o,a,u;if(r.algorithm.indexOf("aes")===0||r.algorithm==="des"){var c,f,h;switch(r.algorithm){case"aes128":o=16,c=16,f=xr["aes128-CBC"],h=P.aes.createEncryptionCipher;break;case"aes192":o=24,c=16,f=xr["aes192-CBC"],h=P.aes.createEncryptionCipher;break;case"aes256":o=32,c=16,f=xr["aes256-CBC"],h=P.aes.createEncryptionCipher;break;case"des":o=8,c=8,f=xr.desCBC,h=P.des.createEncryptionCipher;break;default:var l=new Error("Cannot encrypt private key. Unknown encryption algorithm.");throw l.algorithm=r.algorithm,l}var d="hmacWith"+r.prfAlgorithm.toUpperCase(),p=Ih(d),g=P.pkcs5.pbkdf2(e,n,i,o,p),x=P.random.getBytesSync(c),m=h(g);m.start(x),m.update(w.toDer(t)),m.finish(),u=m.output.getBytes();var B=Ix(n,s,o,d);a=w.create(w.Class.UNIVERSAL,w.Type.SEQUENCE,!0,[w.create(w.Class.UNIVERSAL,w.Type.OID,!1,w.oidToDer(xr.pkcs5PBES2).getBytes()),w.create(w.Class.UNIVERSAL,w.Type.SEQUENCE,!0,[w.create(w.Class.UNIVERSAL,w.Type.SEQUENCE,!0,[w.create(w.Class.UNIVERSAL,w.Type.OID,!1,w.oidToDer(xr.pkcs5PBKDF2).getBytes()),B]),w.create(w.Class.UNIVERSAL,w.Type.SEQUENCE,!0,[w.create(w.Class.UNIVERSAL,w.Type.OID,!1,w.oidToDer(f).getBytes()),w.create(w.Class.UNIVERSAL,w.Type.OCTETSTRING,!1,x)])])])}else if(r.algorithm==="3des"){o=24;var I=new P.util.ByteBuffer(n),g=U.pbe.generatePkcs12Key(e,I,1,i,o),x=U.pbe.generatePkcs12Key(e,I,2,i,o),m=P.des.createEncryptionCipher(g);m.start(x),m.update(w.toDer(t)),m.finish(),u=m.output.getBytes(),a=w.create(w.Class.UNIVERSAL,w.Type.SEQUENCE,!0,[w.create(w.Class.UNIVERSAL,w.Type.OID,!1,w.oidToDer(xr["pbeWithSHAAnd3-KeyTripleDES-CBC"]).getBytes()),w.create(w.Class.UNIVERSAL,w.Type.SEQUENCE,!0,[w.create(w.Class.UNIVERSAL,w.Type.OCTETSTRING,!1,n),w.create(w.Class.UNIVERSAL,w.Type.INTEGER,!1,s.getBytes())])])}else{var l=new Error("Cannot encrypt private key. Unknown encryption algorithm.");throw l.algorithm=r.algorithm,l}var L=w.create(w.Class.UNIVERSAL,w.Type.SEQUENCE,!0,[a,w.create(w.Class.UNIVERSAL,w.Type.OCTETSTRING,!1,u)]);return L};U.decryptPrivateKeyInfo=function(t,e){var r=null,n={},i=[];if(!w.validate(t,Cx,n,i)){var s=new Error("Cannot read encrypted private key. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw s.errors=i,s}var o=w.derToOid(n.encryptionOid),a=U.pbe.getCipher(o,n.encryptionParams,e),u=P.util.createBuffer(n.encryptedData);return a.update(u),a.finish()&&(r=w.fromDer(a.output)),r};U.encryptedPrivateKeyToPem=function(t,e){var r={type:"ENCRYPTED PRIVATE KEY",body:w.toDer(t).getBytes()};return P.pem.encode(r,{maxline:e})};U.encryptedPrivateKeyFromPem=function(t){var e=P.pem.decode(t)[0];if(e.type!=="ENCRYPTED PRIVATE KEY"){var r=new Error('Could not convert encrypted private key from PEM; PEM header type is "ENCRYPTED PRIVATE KEY".');throw r.headerType=e.type,r}if(e.procType&&e.procType.type==="ENCRYPTED")throw new Error("Could not convert encrypted private key from PEM; PEM is encrypted.");return w.fromDer(e.body)};U.encryptRsaPrivateKey=function(t,e,r){if(r=r||{},!r.legacy){var n=U.wrapRsaPrivateKey(U.privateKeyToAsn1(t));return n=U.encryptPrivateKeyInfo(n,e,r),U.encryptedPrivateKeyToPem(n)}var i,s,o,a;switch(r.algorithm){case"aes128":i="AES-128-CBC",o=16,s=P.random.getBytesSync(16),a=P.aes.createEncryptionCipher;break;case"aes192":i="AES-192-CBC",o=24,s=P.random.getBytesSync(16),a=P.aes.createEncryptionCipher;break;case"aes256":i="AES-256-CBC",o=32,s=P.random.getBytesSync(16),a=P.aes.createEncryptionCipher;break;case"3des":i="DES-EDE3-CBC",o=24,s=P.random.getBytesSync(8),a=P.des.createEncryptionCipher;break;case"des":i="DES-CBC",o=8,s=P.random.getBytesSync(8),a=P.des.createEncryptionCipher;break;default:var u=new Error('Could not encrypt RSA private key; unsupported encryption algorithm "'+r.algorithm+'".');throw u.algorithm=r.algorithm,u}var c=P.pbe.opensslDeriveBytes(e,s.substr(0,8),o),f=a(c);f.start(s),f.update(w.toDer(U.privateKeyToAsn1(t))),f.finish();var h={type:"RSA PRIVATE KEY",procType:{version:"4",type:"ENCRYPTED"},dekInfo:{algorithm:i,parameters:P.util.bytesToHex(s).toUpperCase()},body:f.output.getBytes()};return P.pem.encode(h)};U.decryptRsaPrivateKey=function(t,e){var r=null,n=P.pem.decode(t)[0];if(n.type!=="ENCRYPTED PRIVATE KEY"&&n.type!=="PRIVATE KEY"&&n.type!=="RSA PRIVATE KEY"){var i=new Error('Could not convert private key from PEM; PEM header type is not "ENCRYPTED PRIVATE KEY", "PRIVATE KEY", or "RSA PRIVATE KEY".');throw i.headerType=i,i}if(n.procType&&n.procType.type==="ENCRYPTED"){var s,o;switch(n.dekInfo.algorithm){case"DES-CBC":s=8,o=P.des.createDecryptionCipher;break;case"DES-EDE3-CBC":s=24,o=P.des.createDecryptionCipher;break;case"AES-128-CBC":s=16,o=P.aes.createDecryptionCipher;break;case"AES-192-CBC":s=24,o=P.aes.createDecryptionCipher;break;case"AES-256-CBC":s=32,o=P.aes.createDecryptionCipher;break;case"RC2-40-CBC":s=5,o=function(h){return P.rc2.createDecryptionCipher(h,40)};break;case"RC2-64-CBC":s=8,o=function(h){return P.rc2.createDecryptionCipher(h,64)};break;case"RC2-128-CBC":s=16,o=function(h){return P.rc2.createDecryptionCipher(h,128)};break;default:var i=new Error('Could not decrypt private key; unsupported encryption algorithm "'+n.dekInfo.algorithm+'".');throw i.algorithm=n.dekInfo.algorithm,i}var a=P.util.hexToBytes(n.dekInfo.parameters),u=P.pbe.opensslDeriveBytes(e,a.substr(0,8),s),c=o(u);if(c.start(a),c.update(P.util.createBuffer(n.body)),c.finish())r=c.output.getBytes();else return r}else r=n.body;return n.type==="ENCRYPTED PRIVATE KEY"?r=U.decryptPrivateKeyInfo(w.fromDer(r),e):r=w.fromDer(r),r!==null&&(r=U.privateKeyFromAsn1(r)),r};U.pbe.generatePkcs12Key=function(t,e,r,n,i,s){var o,a;if(typeof s=="undefined"||s===null){if(!("sha1"in P.md))throw new Error('"sha1" hash algorithm unavailable.');s=P.md.sha1.create()}var u=s.digestLength,c=s.blockLength,f=new P.util.ByteBuffer,h=new P.util.ByteBuffer;if(t!=null){for(a=0;a<t.length;a++)h.putInt16(t.charCodeAt(a));h.putInt16(0)}var l=h.length(),d=e.length(),p=new P.util.ByteBuffer;p.fillWithByte(r,c);var g=c*Math.ceil(d/c),x=new P.util.ByteBuffer;for(a=0;a<g;a++)x.putByte(e.at(a%d));var m=c*Math.ceil(l/c),B=new P.util.ByteBuffer;for(a=0;a<m;a++)B.putByte(h.at(a%l));var I=x;I.putBuffer(B);for(var L=Math.ceil(i/u),T=1;T<=L;T++){var _=new P.util.ByteBuffer;_.putBytes(p.bytes()),_.putBytes(I.bytes());for(var O=0;O<n;O++)s.start(),s.update(_.getBytes()),_=s.digest();var q=new P.util.ByteBuffer;for(a=0;a<c;a++)q.putByte(_.at(a%u));var ce=Math.ceil(d/c)+Math.ceil(l/c),Qe=new P.util.ByteBuffer;for(o=0;o<ce;o++){var Fe=new P.util.ByteBuffer(I.getBytes(c)),Ae=511;for(a=q.length()-1;a>=0;a--)Ae=Ae>>8,Ae+=q.at(a)+Fe.at(a),Fe.setAt(a,Ae&255);Qe.putBuffer(Fe)}I=Qe,f.putBuffer(_)}return f.truncate(f.length()-i),f};U.pbe.getCipher=function(t,e,r){switch(t){case U.oids.pkcs5PBES2:return U.pbe.getCipherForPBES2(t,e,r);case U.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:case U.oids["pbewithSHAAnd40BitRC2-CBC"]:return U.pbe.getCipherForPKCS12PBE(t,e,r);default:var n=new Error("Cannot read encrypted PBE data block. Unsupported OID.");throw n.oid=t,n.supportedOids=["pkcs5PBES2","pbeWithSHAAnd3-KeyTripleDES-CBC","pbewithSHAAnd40BitRC2-CBC"],n}};U.pbe.getCipherForPBES2=function(t,e,r){var n={},i=[];if(!w.validate(e,_x,n,i)){var s=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw s.errors=i,s}if(t=w.derToOid(n.kdfOid),t!==U.oids.pkcs5PBKDF2){var s=new Error("Cannot read encrypted private key. Unsupported key derivation function OID.");throw s.oid=t,s.supportedOids=["pkcs5PBKDF2"],s}if(t=w.derToOid(n.encOid),t!==U.oids["aes128-CBC"]&&t!==U.oids["aes192-CBC"]&&t!==U.oids["aes256-CBC"]&&t!==U.oids["des-EDE3-CBC"]&&t!==U.oids.desCBC){var s=new Error("Cannot read encrypted private key. Unsupported encryption scheme OID.");throw s.oid=t,s.supportedOids=["aes128-CBC","aes192-CBC","aes256-CBC","des-EDE3-CBC","desCBC"],s}var o=n.kdfSalt,a=P.util.createBuffer(n.kdfIterationCount);a=a.getInt(a.length()<<3);var u,c;switch(U.oids[t]){case"aes128-CBC":u=16,c=P.aes.createDecryptionCipher;break;case"aes192-CBC":u=24,c=P.aes.createDecryptionCipher;break;case"aes256-CBC":u=32,c=P.aes.createDecryptionCipher;break;case"des-EDE3-CBC":u=24,c=P.des.createDecryptionCipher;break;case"desCBC":u=8,c=P.des.createDecryptionCipher;break}var f=Ah(n.prfOid),h=P.pkcs5.pbkdf2(r,o,a,u,f),l=n.encIv,d=c(h);return d.start(l),d};U.pbe.getCipherForPKCS12PBE=function(t,e,r){var n={},i=[];if(!w.validate(e,Ax,n,i)){var s=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw s.errors=i,s}var o=P.util.createBuffer(n.salt),a=P.util.createBuffer(n.iterations);a=a.getInt(a.length()<<3);var u,c,f;switch(t){case U.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:u=24,c=8,f=P.des.startDecrypting;break;case U.oids["pbewithSHAAnd40BitRC2-CBC"]:u=5,c=8,f=function(g,x){var m=P.rc2.createDecryptionCipher(g,40);return m.start(x,null),m};break;default:var s=new Error("Cannot read PKCS #12 PBE data block. Unsupported OID.");throw s.oid=t,s}var h=Ah(n.prfOid),l=U.pbe.generatePkcs12Key(r,o,1,a,u,h);h.start();var d=U.pbe.generatePkcs12Key(r,o,2,a,c,h);return f(l,d)};U.pbe.opensslDeriveBytes=function(t,e,r,n){if(typeof n=="undefined"||n===null){if(!("md5"in P.md))throw new Error('"md5" hash algorithm unavailable.');n=P.md.md5.create()}e===null&&(e="");for(var i=[_h(n,t+e)],s=16,o=1;s<r;++o,s+=16)i.push(_h(n,i[o-1]+t+e));return i.join("").substr(0,r)};function _h(t,e){return t.start().update(e).digest().getBytes()}function Ah(t){var e;if(!t)e="hmacWithSHA1";else if(e=U.oids[w.derToOid(t)],!e){var r=new Error("Unsupported PRF OID.");throw r.oid=t,r.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],r}return Ih(e)}function Ih(t){var e=P.md;switch(t){case"hmacWithSHA224":e=P.md.sha512;case"hmacWithSHA1":case"hmacWithSHA256":case"hmacWithSHA384":case"hmacWithSHA512":t=t.substr(8).toLowerCase();break;default:var r=new Error("Unsupported PRF algorithm.");throw r.algorithm=t,r.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],r}if(!e||!(t in e))throw new Error("Unknown hash algorithm: "+t);return e[t].create()}function Ix(t,e,r,n){var i=w.create(w.Class.UNIVERSAL,w.Type.SEQUENCE,!0,[w.create(w.Class.UNIVERSAL,w.Type.OCTETSTRING,!1,t),w.create(w.Class.UNIVERSAL,w.Type.INTEGER,!1,e.getBytes())]);return n!=="hmacWithSHA1"&&i.value.push(w.create(w.Class.UNIVERSAL,w.Type.INTEGER,!1,P.util.hexToBytes(r.toString(16))),w.create(w.Class.UNIVERSAL,w.Type.SEQUENCE,!0,[w.create(w.Class.UNIVERSAL,w.Type.OID,!1,w.oidToDer(U.oids[n]).getBytes()),w.create(w.Class.UNIVERSAL,w.Type.NULL,!1,"")])),i}});var Gr={};Ee(Gr,{concat:()=>Tx});function Tx(t,e){e||(e=t.reduce((i,s)=>i+s.length,0));let r=new Uint8Array(e),n=0;for(let i of t)r.set(i,n),n+=i.length;return r}var jr=Z(()=>{});var Sn=E(Ph=>{"use strict";Ph.get=(t=globalThis)=>{let e=t.crypto;if(!e||!e.subtle)throw Object.assign(new Error("Missing Web Crypto API. The most likely cause of this error is that this page is being accessed from an insecure context (i.e. not HTTPS). For more information and possible resolutions see https://github.com/libp2p/js-libp2p-crypto/blob/master/README.md#web-crypto-api"),{code:"ERR_MISSING_WEB_CRYPTO"});return e}});var Uo=E((vE,Nh)=>{"use strict";var{concat:Rx}=(jr(),Gr),{fromString:Dh}=(lt(),ht),Px=Sn();function Dx({algorithm:t="AES-GCM",nonceLength:e=12,keyLength:r=16,digest:n="SHA-256",saltLength:i=16,iterations:s=32767}={}){let o=Px.get();r*=8;async function a(c,f){let h=o.getRandomValues(new Uint8Array(i)),l=o.getRandomValues(new Uint8Array(e)),d={name:t,iv:l},p={name:"PBKDF2",salt:h,iterations:s,hash:{name:n}},g=await o.subtle.importKey("raw",Dh(f),{name:"PBKDF2"},!1,["deriveKey","deriveBits"]),x=await o.subtle.deriveKey(p,g,{name:t,length:r},!0,["encrypt"]),m=await o.subtle.encrypt(d,x,c);return Rx([h,d.iv,new Uint8Array(m)])}async function u(c,f){let h=c.slice(0,i),l=c.slice(i,i+e),d=c.slice(i+e),p={name:t,iv:l},g={name:"PBKDF2",salt:h,iterations:s,hash:{name:n}},x=await o.subtle.importKey("raw",Dh(f),{name:"PBKDF2"},!1,["deriveKey","deriveBits"]),m=await o.subtle.deriveKey(g,x,{name:t,length:r},!0,["decrypt"]),B=await o.subtle.decrypt(p,m,d);return new Uint8Array(B)}return{encrypt:a,decrypt:u}}Nh.exports={create:Dx}});var kh=E((mE,Lh)=>{"use strict";var{base64:Nx}=(nn(),Cr),Lx=Uo();Lh.exports={import:async function(t,e){let r=Nx.decode(t);return await Lx.create().decrypt(r,e)}}});var Wr={};Ee(Wr,{equals:()=>kx});function kx(t,e){if(t===e)return!0;if(t.byteLength!==e.byteLength)return!1;for(let r=0;r<t.byteLength;r++)if(t[r]!==e[r])return!1;return!0}var $r=Z(()=>{});var qh=E((bE,Uh)=>{var ne=J();dr();pe();var Bn=Uh.exports=ne.sha512=ne.sha512||{};ne.md.sha512=ne.md.algorithms.sha512=Bn;var Oh=ne.sha384=ne.sha512.sha384=ne.sha512.sha384||{};Oh.create=function(){return Bn.create("SHA-384")};ne.md.sha384=ne.md.algorithms.sha384=Oh;ne.sha512.sha256=ne.sha512.sha256||{create:function(){return Bn.create("SHA-512/256")}};ne.md["sha512/256"]=ne.md.algorithms["sha512/256"]=ne.sha512.sha256;ne.sha512.sha224=ne.sha512.sha224||{create:function(){return Bn.create("SHA-512/224")}};ne.md["sha512/224"]=ne.md.algorithms["sha512/224"]=ne.sha512.sha224;Bn.create=function(t){if(Fh||Ox(),typeof t=="undefined"&&(t="SHA-512"),!(t in vr))throw new Error("Invalid SHA-512 algorithm: "+t);for(var e=vr[t],r=null,n=ne.util.createBuffer(),i=new Array(80),s=0;s<80;++s)i[s]=new Array(2);var o=64;switch(t){case"SHA-384":o=48;break;case"SHA-512/256":o=32;break;case"SHA-512/224":o=28;break}var a={algorithm:t.replace("-","").toLowerCase(),blockLength:128,digestLength:o,messageLength:0,fullMessageLength:null,messageLengthSize:16};return a.start=function(){a.messageLength=0,a.fullMessageLength=a.messageLength128=[];for(var u=a.messageLengthSize/4,c=0;c<u;++c)a.fullMessageLength.push(0);n=ne.util.createBuffer(),r=new Array(e.length);for(var c=0;c<e.length;++c)r[c]=e[c].slice(0);return a},a.start(),a.update=function(u,c){c==="utf8"&&(u=ne.util.encodeUtf8(u));var f=u.length;a.messageLength+=f,f=[f/4294967296>>>0,f>>>0];for(var h=a.fullMessageLength.length-1;h>=0;--h)a.fullMessageLength[h]+=f[1],f[1]=f[0]+(a.fullMessageLength[h]/4294967296>>>0),a.fullMessageLength[h]=a.fullMessageLength[h]>>>0,f[0]=f[1]/4294967296>>>0;return n.putBytes(u),Kh(r,i,n),(n.read>2048||n.length()===0)&&n.compact(),a},a.digest=function(){var u=ne.util.createBuffer();u.putBytes(n.bytes());var c=a.fullMessageLength[a.fullMessageLength.length-1]+a.messageLengthSize,f=c&a.blockLength-1;u.putBytes(qo.substr(0,a.blockLength-f));for(var h,l,d=a.fullMessageLength[0]*8,p=0;p<a.fullMessageLength.length-1;++p)h=a.fullMessageLength[p+1]*8,l=h/4294967296>>>0,d+=l,u.putInt32(d>>>0),d=h>>>0;u.putInt32(d);for(var g=new Array(r.length),p=0;p<r.length;++p)g[p]=r[p].slice(0);Kh(g,i,u);var x=ne.util.createBuffer(),m;t==="SHA-512"?m=g.length:t==="SHA-384"?m=g.length-2:m=g.length-4;for(var p=0;p<m;++p)x.putInt32(g[p][0]),(p!==m-1||t!=="SHA-512/224")&&x.putInt32(g[p][1]);return x},a};var qo=null,Fh=!1,Mo=null,vr=null;function Ox(){qo=String.fromCharCode(128),qo+=ne.util.fillString(String.fromCharCode(0),128),Mo=[[1116352408,3609767458],[1899447441,602891725],[3049323471,3964484399],[3921009573,2173295548],[961987163,4081628472],[1508970993,3053834265],[2453635748,2937671579],[2870763221,3664609560],[3624381080,2734883394],[310598401,1164996542],[607225278,1323610764],[1426881987,3590304994],[1925078388,4068182383],[2162078206,991336113],[2614888103,633803317],[3248222580,3479774868],[3835390401,2666613458],[4022224774,944711139],[264347078,2341262773],[604807628,2007800933],[770255983,1495990901],[1249150122,1856431235],[1555081692,3175218132],[1996064986,2198950837],[2554220882,3999719339],[2821834349,766784016],[2952996808,2566594879],[3210313671,3203337956],[3336571891,1034457026],[3584528711,2466948901],[113926993,3758326383],[338241895,168717936],[666307205,1188179964],[773529912,1546045734],[1294757372,1522805485],[1396182291,2643833823],[1695183700,2343527390],[1986661051,1014477480],[2177026350,1206759142],[2456956037,344077627],[2730485921,1290863460],[2820302411,3158454273],[3259730800,3505952657],[3345764771,106217008],[3516065817,3606008344],[3600352804,1432725776],[4094571909,1467031594],[275423344,851169720],[430227734,3100823752],[506948616,1363258195],[659060556,3750685593],[883997877,3785050280],[958139571,3318307427],[1322822218,3812723403],[1537002063,2003034995],[1747873779,3602036899],[1955562222,1575990012],[2024104815,1125592928],[2227730452,2716904306],[2361852424,442776044],[2428436474,593698344],[2756734187,3733110249],[3204031479,2999351573],[3329325298,3815920427],[3391569614,3928383900],[3515267271,566280711],[3940187606,3454069534],[4118630271,4000239992],[116418474,1914138554],[174292421,2731055270],[289380356,3203993006],[460393269,320620315],[685471733,587496836],[852142971,1086792851],[1017036298,365543100],[1126000580,2618297676],[1288033470,3409855158],[1501505948,4234509866],[1607167915,987167468],[1816402316,1246189591]],vr={},vr["SHA-512"]=[[1779033703,4089235720],[3144134277,2227873595],[1013904242,4271175723],[2773480762,1595750129],[1359893119,2917565137],[2600822924,725511199],[528734635,4215389547],[1541459225,327033209]],vr["SHA-384"]=[[3418070365,3238371032],[1654270250,914150663],[2438529370,812702999],[355462360,4144912697],[1731405415,4290775857],[2394180231,1750603025],[3675008525,1694076839],[1203062813,3204075428]],vr["SHA-512/256"]=[[573645204,4230739756],[2673172387,3360449730],[596883563,1867755857],[2520282905,1497426621],[2519219938,2827943907],[3193839141,1401305490],[721525244,746961066],[246885852,2177182882]],vr["SHA-512/224"]=[[2352822216,424955298],[1944164710,2312950998],[502970286,855612546],[1738396948,1479516111],[258812777,2077511080],[2011393907,79989058],[1067287976,1780299464],[286451373,2446758561]],Fh=!0}function Kh(t,e,r){for(var n,i,s,o,a,u,c,f,h,l,d,p,g,x,m,B,I,L,T,_,O,q,ce,Qe,Fe,Ae,wr,Vn,le,De,k,is,ss,os,as,la=r.length();la>=128;){for(le=0;le<16;++le)e[le][0]=r.getInt32()>>>0,e[le][1]=r.getInt32()>>>0;for(;le<80;++le)is=e[le-2],De=is[0],k=is[1],n=((De>>>19|k<<13)^(k>>>29|De<<3)^De>>>6)>>>0,i=((De<<13|k>>>19)^(k<<3|De>>>29)^(De<<26|k>>>6))>>>0,os=e[le-15],De=os[0],k=os[1],s=((De>>>1|k<<31)^(De>>>8|k<<24)^De>>>7)>>>0,o=((De<<31|k>>>1)^(De<<24|k>>>8)^(De<<25|k>>>7))>>>0,ss=e[le-7],as=e[le-16],k=i+ss[1]+o+as[1],e[le][0]=n+ss[0]+s+as[0]+(k/4294967296>>>0)>>>0,e[le][1]=k>>>0;for(g=t[0][0],x=t[0][1],m=t[1][0],B=t[1][1],I=t[2][0],L=t[2][1],T=t[3][0],_=t[3][1],O=t[4][0],q=t[4][1],ce=t[5][0],Qe=t[5][1],Fe=t[6][0],Ae=t[6][1],wr=t[7][0],Vn=t[7][1],le=0;le<80;++le)c=((O>>>14|q<<18)^(O>>>18|q<<14)^(q>>>9|O<<23))>>>0,f=((O<<18|q>>>14)^(O<<14|q>>>18)^(q<<23|O>>>9))>>>0,h=(Fe^O&(ce^Fe))>>>0,l=(Ae^q&(Qe^Ae))>>>0,a=((g>>>28|x<<4)^(x>>>2|g<<30)^(x>>>7|g<<25))>>>0,u=((g<<4|x>>>28)^(x<<30|g>>>2)^(x<<25|g>>>7))>>>0,d=(g&m|I&(g^m))>>>0,p=(x&B|L&(x^B))>>>0,k=Vn+f+l+Mo[le][1]+e[le][1],n=wr+c+h+Mo[le][0]+e[le][0]+(k/4294967296>>>0)>>>0,i=k>>>0,k=u+p,s=a+d+(k/4294967296>>>0)>>>0,o=k>>>0,wr=Fe,Vn=Ae,Fe=ce,Ae=Qe,ce=O,Qe=q,k=_+i,O=T+n+(k/4294967296>>>0)>>>0,q=k>>>0,T=I,_=L,I=m,L=B,m=g,B=x,k=i+o,g=n+s+(k/4294967296>>>0)>>>0,x=k>>>0;k=t[0][1]+x,t[0][0]=t[0][0]+g+(k/4294967296>>>0)>>>0,t[0][1]=k>>>0,k=t[1][1]+B,t[1][0]=t[1][0]+m+(k/4294967296>>>0)>>>0,t[1][1]=k>>>0,k=t[2][1]+L,t[2][0]=t[2][0]+I+(k/4294967296>>>0)>>>0,t[2][1]=k>>>0,k=t[3][1]+_,t[3][0]=t[3][0]+T+(k/4294967296>>>0)>>>0,t[3][1]=k>>>0,k=t[4][1]+q,t[4][0]=t[4][0]+O+(k/4294967296>>>0)>>>0,t[4][1]=k>>>0,k=t[5][1]+Qe,t[5][0]=t[5][0]+ce+(k/4294967296>>>0)>>>0,t[5][1]=k>>>0,k=t[6][1]+Ae,t[6][0]=t[6][0]+Fe+(k/4294967296>>>0)>>>0,t[6][1]=k>>>0,k=t[7][1]+Vn,t[7][0]=t[7][0]+wr+(k/4294967296>>>0)>>>0,t[7][1]=k>>>0,la-=128}}});var Vo=E((wE,Mh)=>{"use strict";var Fx=go(),Kx=qe();Mh.exports=function(t){if(isNaN(t)||t<=0)throw Kx(new Error("random bytes length must be a Number bigger than 0"),"ERR_INVALID_LENGTH");return Fx(t)}});var Vi=E(Cn=>{"use strict";pe();Ki();var Ux=J(),{fromString:qx}=(lt(),ht),{toString:Vh}=(ot(),st),{concat:zh}=(jr(),Gr);Cn.bigIntegerToUintBase64url=(t,e)=>{let r=Uint8Array.from(t.abs().toByteArray());if(r=r[0]===0?r.slice(1):r,e!=null){if(r.length>e)throw new Error("byte array longer than desired length");r=zh([new Uint8Array(e-r.length),r])}return Vh(r,"base64url")};Cn.base64urlToBigInteger=t=>{let e=Cn.base64urlToBuffer(t);return new Ux.jsbn.BigInteger(Vh(e,"base16"),16)};Cn.base64urlToBuffer=(t,e)=>{let r=qx(t,"base64urlpad");if(e!=null){if(r.length>e)throw new Error("byte array longer than desired length");r=zh([new Uint8Array(e-r.length),r])}return r}});var jh=E(_n=>{"use strict";bn();Mi();var $t=J(),{bigIntegerToUintBase64url:mt,base64urlToBigInteger:bt}=Vi(),{fromString:Hh}=(lt(),ht),{toString:Gh}=(ot(),st);_n.pkcs1ToJwk=function(t){let e=$t.asn1.fromDer(Gh(t,"ascii")),r=$t.pki.privateKeyFromAsn1(e);return{kty:"RSA",n:mt(r.n),e:mt(r.e),d:mt(r.d),p:mt(r.p),q:mt(r.q),dp:mt(r.dP),dq:mt(r.dQ),qi:mt(r.qInv),alg:"RS256",kid:"2011-04-29"}};_n.jwkToPkcs1=function(t){let e=$t.pki.privateKeyToAsn1({n:bt(t.n),e:bt(t.e),d:bt(t.d),p:bt(t.p),q:bt(t.q),dP:bt(t.dp),dQ:bt(t.dq),qInv:bt(t.qi)});return Hh($t.asn1.toDer(e).getBytes(),"ascii")};_n.pkixToJwk=function(t){let e=$t.asn1.fromDer(Gh(t,"ascii")),r=$t.pki.publicKeyFromAsn1(e);return{kty:"RSA",n:mt(r.n),e:mt(r.e),alg:"RS256",kid:"2011-04-29"}};_n.jwkToPkix=function(t){let e=$t.pki.publicKeyToAsn1({n:bt(t.n),e:bt(t.e)});return Hh($t.asn1.toDer(e).getBytes(),"ascii")}});var Qh=E((BE,Yh)=>{"use strict";Mi();var Wh=J(),{base64urlToBigInteger:Mx}=Vi();function $h(t,e){return e.map(r=>Mx(t[r]))}function Vx(t){return Wh.pki.setRsaPrivateKey(...$h(t,["n","e","d","p","q","dp","dq","qi"]))}function zx(t){return Wh.pki.setRsaPublicKey(...$h(t,["n","e"]))}Yh.exports={jwk2pub:zx,jwk2priv:Vx}});var Jh=E(Pt=>{"use strict";var Rt=Sn(),Hx=Vo(),{toString:Gx}=(ot(),st),{fromString:jx}=(lt(),ht);Pt.utils=jh();Pt.generateKey=async function(t){let e=await Rt.get().subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:t,publicExponent:new Uint8Array([1,0,1]),hash:{name:"SHA-256"}},!0,["sign","verify"]),r=await Zh(e);return{privateKey:r[0],publicKey:r[1]}};Pt.unmarshalPrivateKey=async function(t){let r=[await Rt.get().subtle.importKey("jwk",t,{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!0,["sign"]),await Wx(t)],n=await Zh({privateKey:r[0],publicKey:r[1]});return{privateKey:n[0],publicKey:n[1]}};Pt.getRandomValues=Hx;Pt.hashAndSign=async function(t,e){let r=await Rt.get().subtle.importKey("jwk",t,{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!1,["sign"]),n=await Rt.get().subtle.sign({name:"RSASSA-PKCS1-v1_5"},r,Uint8Array.from(e));return new Uint8Array(n,n.byteOffset,n.byteLength)};Pt.hashAndVerify=async function(t,e,r){let n=await Rt.get().subtle.importKey("jwk",t,{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!1,["verify"]);return Rt.get().subtle.verify({name:"RSASSA-PKCS1-v1_5"},n,e,r)};function Zh(t){return Promise.all([Rt.get().subtle.exportKey("jwk",t.privateKey),Rt.get().subtle.exportKey("jwk",t.publicKey)])}function Wx(t){return Rt.get().subtle.importKey("jwk",{kty:t.kty,n:t.n,e:t.e},{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!0,["verify"])}var{jwk2pub:$x,jwk2priv:Yx}=Qh();function Xh(t,e,r,n){let i=e?$x(t):Yx(t),s=Gx(Uint8Array.from(r),"ascii"),o=n(s,i);return jx(o,"ascii")}Pt.encrypt=function(t,e){return Xh(t,!0,e,(r,n)=>n.encrypt(r))};Pt.decrypt=function(t,e){return Xh(t,!1,e,(r,n)=>n.decrypt(r))}});var zi=E((_E,el)=>{"use strict";var{base64:Qx}=(nn(),Cr),Zx=Uo();el.exports={export:async function(t,e){let n=await Zx.create().encrypt(t,e);return Qx.encode(n)}}});var sl=E((AE,il)=>{"use strict";var{sha256:tl}=(nr(),Ft),rl=qe(),{equals:nl}=($r(),Wr),{toString:Xx}=(ot(),st);qh();var Hi=J(),je=Jh(),Gi=Si(),Jx=zi(),ji=class{constructor(e){this._key=e}async verify(e,r){return je.hashAndVerify(this._key,r,e)}marshal(){return je.utils.jwkToPkix(this._key)}get bytes(){return Gi.PublicKey.encode({Type:Gi.KeyType.RSA,Data:this.marshal()}).finish()}encrypt(e){return je.encrypt(this._key,e)}equals(e){return nl(this.bytes,e.bytes)}async hash(){let{bytes:e}=await tl.digest(this.bytes);return e}},An=class{constructor(e,r){this._key=e,this._publicKey=r}genSecret(){return je.getRandomValues(16)}async sign(e){return je.hashAndSign(this._key,e)}get public(){if(!this._publicKey)throw rl(new Error("public key not provided"),"ERR_PUBKEY_NOT_PROVIDED");return new ji(this._publicKey)}decrypt(e){return je.decrypt(this._key,e)}marshal(){return je.utils.jwkToPkcs1(this._key)}get bytes(){return Gi.PrivateKey.encode({Type:Gi.KeyType.RSA,Data:this.marshal()}).finish()}equals(e){return nl(this.bytes,e.bytes)}async hash(){let{bytes:e}=await tl.digest(this.bytes);return e}async id(){let e=await this.public.hash();return Xx(e,"base58btc")}async export(e,r="pkcs-8"){if(r==="pkcs-8"){let n=new Hi.util.ByteBuffer(this.marshal()),i=Hi.asn1.fromDer(n),s=Hi.pki.privateKeyFromAsn1(i),o={algorithm:"aes256",count:1e4,saltSize:128/8,prfAlgorithm:"sha512"};return Hi.pki.encryptRsaPrivateKey(s,e,o)}else{if(r==="libp2p-key")return Jx.export(this.bytes,e);throw rl(new Error(`export format '${r}' is not supported`),"ERR_INVALID_EXPORT_FORMAT")}}};async function ev(t){let e=je.utils.pkcs1ToJwk(t),r=await je.unmarshalPrivateKey(e);return new An(r.privateKey,r.publicKey)}function tv(t){let e=je.utils.pkixToJwk(t);return new ji(e)}async function rv(t){let e=await je.unmarshalPrivateKey(t);return new An(e.privateKey,e.publicKey)}async function nv(t){let e=await je.generateKey(t);return new An(e.privateKey,e.publicKey)}il.exports={RsaPublicKey:ji,RsaPrivateKey:An,unmarshalRsaPublicKey:tv,unmarshalRsaPrivateKey:ev,generateKeyPair:nv,fromJwk:rv}});var pl=E((ae,ll)=>{"use strict";Object.defineProperty(ae,"__esModule",{value:!0});ae.utils=ae.verify=ae.sign=ae.getPublicKey=ae.SignResult=ae.Signature=ae.Point=ae.ExtendedPoint=ae.CURVE=void 0;var ue={a:-1n,d:37095705934669439343138083508754565189542113879843219016388785533085940283555n,P:2n**255n-19n,n:2n**252n+27742317777372353535851937790883648493n,h:8n,Gx:15112221349535400772501151409588531511454012693041857206046113283949847762202n,Gy:46316835694926478169428394003475163141307993866256225615783033603165251855960n};ae.CURVE=ue;var Pe=32,In=19681161376707505956807079304988542015446066515923890162744021073123829784752n,iv=25063068953384623474111414158702152701244531502492656460079210482610430750235n,sv=54469307008909316920995813868745141605393597292927456921205312896311721017578n,ov=1159843021668779879193775521855586647937357759715417654439879720876111806838n,av=40440834346308536858101042469323190826248399146238708352240133220865137265952n,ee=class{constructor(e,r,n,i){this.x=e,this.y=r,this.z=n,this.t=i}static fromAffine(e){if(!(e instanceof oe))throw new TypeError("ExtendedPoint#fromAffine: expected Point");return e.equals(oe.ZERO)?ee.ZERO:new ee(e.x,e.y,1n,C(e.x*e.y))}static toAffineBatch(e){let r=cv(e.map(n=>n.z));return e.map((n,i)=>n.toAffine(r[i]))}static normalizeZ(e){return this.toAffineBatch(e).map(this.fromAffine)}static fromRistrettoHash(e){let r=Go(e.slice(0,Pe)),n=this.calcElligatorRistrettoMap(r),i=Go(e.slice(Pe,Pe*2)),s=this.calcElligatorRistrettoMap(i);return n.add(s)}static calcElligatorRistrettoMap(e){let{d:r}=ue,n=C(In*e*e),i=C((n+1n)*ov),s=-1n,o=C((s-r*n)*C(n+r)),{isValid:a,value:u}=Wo(i,o),c=C(u*e);Qt(c)||(c=C(-c)),a||(u=c),a||(s=n);let f=C(s*(n-1n)*av-o),h=u*u,l=C((u+u)*o),d=C(f*iv),p=C(1n-h),g=C(1n+h);return new ee(C(l*g),C(p*d),C(d*g),C(l*p))}static fromRistrettoBytes(e){let{a:r,d:n}=ue,i="ExtendedPoint.fromRistrettoBytes: Cannot convert bytes to Ristretto Point",s=Go(e);if(!lv(al(s,Pe),e)||Qt(s))throw new Error(i);let o=C(s*s),a=C(1n+r*o),u=C(1n-r*o),c=C(a*a),f=C(u*u),h=C(r*n*c-f),{isValid:l,value:d}=cl(C(h*f)),p=C(d*u),g=C(d*p*h),x=C((s+s)*p);Qt(x)&&(x=C(-x));let m=C(a*g),B=C(x*m);if(!l||Qt(B)||m===0n)throw new Error(i);return new ee(x,m,1n,B)}toRistrettoBytes(){let{x:e,y:r,z:n,t:i}=this,s=C((n+r)*(n-r)),o=C(e*r),{value:a}=cl(C(s*o**2n)),u=C(a*s),c=C(a*o),f=C(u*c*i),h;Qt(i*f)?([e,r]=[C(r*In),C(e*In)],h=C(u*sv)):h=c,Qt(e*f)&&(r=C(-r));let l=C((n-r)*h);return Qt(l)&&(l=C(-l)),al(l,Pe)}equals(e){let r=this,n=e,[i,s,o,a]=[r.t,n.t,r.z,n.z];return C(i*a)===C(s*o)}negate(){return new ee(C(-this.x),this.y,this.z,C(-this.t))}double(){let e=this.x,r=this.y,n=this.z,{a:i}=ue,s=C(e**2n),o=C(r**2n),a=C(2n*n**2n),u=C(i*s),c=C((e+r)**2n-s-o),f=C(u+o),h=C(f-a),l=C(u-o),d=C(c*h),p=C(f*l),g=C(c*l),x=C(h*f);return new ee(d,p,x,g)}add(e){let r=this.x,n=this.y,i=this.z,s=this.t,o=e.x,a=e.y,u=e.z,c=e.t,f=C((n-r)*(a+o)),h=C((n+r)*(a-o)),l=C(h-f);if(l===0n)return this.double();let d=C(i*2n*c),p=C(s*2n*u),g=C(p+d),x=C(h+f),m=C(p-d),B=C(g*l),I=C(x*m),L=C(g*m),T=C(l*x);return new ee(B,I,T,L)}subtract(e){return this.add(e.negate())}multiplyUnsafe(e){if(!ul(e))throw new TypeError("Point#multiply: expected number or bigint");let r=C(BigInt(e),ue.n);if(r===1n)return this;let n=ee.ZERO,i=this;for(;r>0n;)r&1n&&(n=n.add(i)),i=i.double(),r>>=1n;return n}precomputeWindow(e){let r=256/e+1,n=[],i=this,s=i;for(let o=0;o<r;o++){s=i,n.push(s);for(let a=1;a<2**(e-1);a++)s=s.add(i),n.push(s);i=s.double()}return n}wNAF(e,r){!r&&this.equals(ee.BASE)&&(r=oe.BASE);let n=r&&r._WINDOW_SIZE||1;if(256%n)throw new Error("Point#wNAF: Invalid precomputation window, must be power of 2");let i=r&&zo.get(r);i||(i=this.precomputeWindow(n),r&&n!==1&&(i=ee.normalizeZ(i),zo.set(r,i)));let s=ee.ZERO,o=ee.ZERO,a=256/n+1,u=2**(n-1),c=BigInt(2**n-1),f=2**n,h=BigInt(n);for(let l=0;l<a;l++){let d=l*u,p=Number(e&c);if(e>>=h,p>u&&(p-=f,e+=1n),p===0)o=o.add(l%2?i[d].negate():i[d]);else{let g=i[d+Math.abs(p)-1];s=s.add(p<0?g.negate():g)}}return[s,o]}multiply(e,r){if(!ul(e))throw new TypeError("Point#multiply: expected number or bigint");let n=C(BigInt(e),ue.n);return ee.normalizeZ(this.wNAF(n,r))[0]}toAffine(e=jo(this.z)){let r=C(this.x*e),n=C(this.y*e);return new oe(r,n)}};ae.ExtendedPoint=ee;ee.BASE=new ee(ue.Gx,ue.Gy,1n,C(ue.Gx*ue.Gy));ee.ZERO=new ee(0n,1n,1n,0n);var zo=new WeakMap,oe=class{constructor(e,r){this.x=e,this.y=r}_setWindowSize(e){this._WINDOW_SIZE=e,zo.delete(this)}static fromHex(e){let{d:r,P:n}=ue,i=e instanceof Uint8Array?e:Tn(e);if(i.length!==32)throw new Error("Point.fromHex: expected 32 bytes");let s=i[31],o=s&~128,a=(s&128)!=0,u=Uint8Array.from(Array.from(i.slice(0,31)).concat(o)),c=Yr(u);if(c>=n)throw new Error("Point.fromHex expects hex <= Fp");let f=C(c*c),h=C(f-1n),l=C(r*f+1n),{isValid:d,value:p}=Wo(h,l);if(!d)throw new Error("Point.fromHex: invalid y coordinate");let g=(p&1n)===1n;return a!==g&&(p=C(-p)),new oe(p,c)}static async fromPrivateKey(e){let r=await ae.utils.sha512(hl(e));return oe.BASE.multiply(fl(r))}toRawBytes(){let e=Ho(this.y),r=new Uint8Array(Pe);for(let i=e.length-2,s=0;s<Pe&&i>=0;i-=2,s++)r[s]=Number.parseInt(e[i]+e[i+1],16);let n=this.x&1n?128:0;return r[Pe-1]|=n,r}toHex(){return ol(this.toRawBytes())}toX25519(){return C((1n+this.y)*jo(1n-this.y))}equals(e){return this.x===e.x&&this.y===e.y}negate(){return new oe(C(-this.x),this.y)}add(e){return ee.fromAffine(this).add(ee.fromAffine(e)).toAffine()}subtract(e){return this.add(e.negate())}multiply(e){return ee.fromAffine(this).multiply(e,this).toAffine()}};ae.Point=oe;oe.BASE=new oe(ue.Gx,ue.Gy);oe.ZERO=new oe(0n,1n);var Yt=class{constructor(e,r){this.r=e,this.s=r}static fromHex(e){e=Yo(e);let r=oe.fromHex(e.slice(0,32)),n=Yr(e.slice(32));if(!pv(n))throw new Error("Signature.fromHex expects s <= CURVE.n");return new Yt(r,n)}toRawBytes(){let e=Tn(Ho(this.s)).reverse(),r=new Uint8Array(Pe);r.set(e);let n=new Uint8Array(Pe*2);return n.set(this.r.toRawBytes()),n.set(r,32),n}toHex(){return ol(this.toRawBytes())}};ae.Signature=Yt;ae.SignResult=Yt;function uv(...t){if(t.length===1)return t[0];let e=t.reduce((n,i)=>n+i.length,0),r=new Uint8Array(e);for(let n=0,i=0;n<t.length;n++){let s=t[n];r.set(s,i),i+=s.length}return r}function ol(t){let e="";for(let r=0;r<t.length;r++)e+=t[r].toString(16).padStart(2,"0");return e}function Tn(t){if(typeof t!="string")throw new TypeError("hexToBytes: expected string, got "+typeof t);if(t.length%2)throw new Error("hexToBytes: received invalid unpadded hex");let e=new Uint8Array(t.length/2);for(let r=0;r<e.length;r++){let n=r*2;e[r]=Number.parseInt(t.slice(n,n+2),16)}return e}function Ho(t){let e=t.toString(16);return e.length&1?`0${e}`:e}function al(t,e=Pe){let r=Ho(t).padStart(e*2,"0");return Tn(r).reverse()}function Qt(t){return(C(t)&1n)===1n}function ul(t){return!!(typeof t=="bigint"&&t>0n||typeof t=="number"&&t>0&&Number.isSafeInteger(t))}function Yr(t){let e=0n;for(let r=0;r<t.length;r++)e+=BigInt(t[r])<<8n*BigInt(r);return e}function Go(t){return C(Yr(t)&2n**255n-1n)}function C(t,e=ue.P){let r=t%e;return r>=0n?r:e+r}function jo(t,e=ue.P){if(t===0n||e<=0n)throw new Error(`invert: expected positive integers, got n=${t} mod=${e}`);let r=C(t,e),n=e,[i,s,o,a]=[0n,1n,1n,0n];for(;r!==0n;){let c=n/r,f=n%r,h=i-o*c,l=s-a*c;[n,r]=[r,f],[i,s]=[o,a],[o,a]=[h,l]}if(n!==1n)throw new Error("invert: does not exist");return C(i,e)}function cv(t,e=ue.P){let r=t.length,n=new Array(r),i=1n;for(let s=0;s<r;s++)t[s]!==0n&&(n[s]=i,i=C(i*t[s],e));i=jo(i,e);for(let s=r-1;s>=0;s--){if(t[s]===0n)continue;let o=C(i*t[s],e);t[s]=C(i*n[s],e),i=o}return t}function wt(t,e){let{P:r}=ue,n=t;for(;e-- >0n;)n*=n,n%=r;return n}function fv(t){let{P:e}=ue,n=t*t%e*t%e,i=wt(n,2n)*n%e,s=wt(i,1n)*t%e,o=wt(s,5n)*s%e,a=wt(o,10n)*o%e,u=wt(a,20n)*a%e,c=wt(u,40n)*u%e,f=wt(c,80n)*c%e,h=wt(f,80n)*c%e,l=wt(h,10n)*o%e;return wt(l,2n)*t%e}function Wo(t,e){let r=C(e*e*e),n=C(r*r*e),i=C(t*r*fv(t*n)),s=C(e*i*i),o=i,a=C(i*In),u=s===t,c=s===C(-t),f=s===C(-t*In);return u&&(i=o),(c||f)&&(i=a),Qt(i)&&(i=C(-i)),{isValid:u||c,value:i}}function cl(t){return Wo(1n,t)}async function $o(...t){let e=uv(...t),r=await ae.utils.sha512(e),n=Yr(r);return C(n,ue.n)}function hv(t){return t.slice(Pe)}function fl(t){let e=Pe-1,r=t.slice(0,Pe);return r[0]&=248,r[e]&=127,r[e]|=64,C(Yr(r),ue.n)}function lv(t,e){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++)if(t[r]!==e[r])return!1;return!0}function Yo(t){return t instanceof Uint8Array?t:Tn(t)}function pv(t){return 0<t&&t<ue.n}function hl(t){let e;if(typeof t=="bigint"||typeof t=="number"&&Number.isSafeInteger(t)){if(e=BigInt(t),e<0n||e>2n**256n)throw new Error("Expected 32 bytes of private key");t=e.toString(16).padStart(Pe*2,"0")}if(typeof t=="string"){if(t.length!==64)throw new Error("Expected 32 bytes of private key");return Tn(t)}else if(t instanceof Uint8Array){if(t.length!==32)throw new Error("Expected 32 bytes of private key");return t}else throw new TypeError("Expected valid private key")}async function dv(t){let e=await oe.fromPrivateKey(t);return typeof t=="string"?e.toHex():e.toRawBytes()}ae.getPublicKey=dv;async function yv(t,e){let r=await ae.utils.sha512(hl(e)),n=fl(r),i=oe.BASE.multiply(n),s=Yo(t),o=await $o(hv(r),s),a=oe.BASE.multiply(o),u=await $o(a.toRawBytes(),i.toRawBytes(),s),c=C(o+u*n,ue.n),f=new Yt(a,c);return typeof t=="string"?f.toHex():f.toRawBytes()}ae.sign=yv;async function gv(t,e,r){e=Yo(e),r instanceof oe||(r=oe.fromHex(r)),t instanceof Yt||(t=Yt.fromHex(t));let n=await $o(t.r.toRawBytes(),r.toRawBytes(),e),i=ee.fromAffine(r).multiplyUnsafe(n),s=ee.BASE.multiply(t.s);return ee.fromAffine(t.r).add(i).subtract(s).multiplyUnsafe(8n).equals(ee.ZERO)}ae.verify=gv;oe.BASE._setWindowSize(8);var Zt=(()=>{let t=typeof self=="object"&&"crypto"in self?self.crypto:void 0;return{node:typeof ll!="undefined"&&typeof zn=="function"&&!t?Vr():void 0,web:t}})();ae.utils={TORSION_SUBGROUP:["0100000000000000000000000000000000000000000000000000000000000000","c7176a703d4dd84fba3c0b760d10670f2a2053fa2c39ccc64ec7fd7792ac037a","0000000000000000000000000000000000000000000000000000000000000080","26e8958fc2b227b045c3f489f2ef98f0d5dfac05d3c63339b13802886d53fc05","ecffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff7f","26e8958fc2b227b045c3f489f2ef98f0d5dfac05d3c63339b13802886d53fc85","0000000000000000000000000000000000000000000000000000000000000000","c7176a703d4dd84fba3c0b760d10670f2a2053fa2c39ccc64ec7fd7792ac03fa"],randomBytes:(t=32)=>{if(Zt.web)return Zt.web.getRandomValues(new Uint8Array(t));if(Zt.node){let{randomBytes:e}=Zt.node;return new Uint8Array(e(t).buffer)}else throw new Error("The environment doesn't have randomBytes function")},randomPrivateKey:()=>{let t=1024;for(;t--;){let e=ae.utils.randomBytes(32),r=Yr(e);if(r>1n&&r<ue.n)return e}throw new Error("Valid private key was not found in 1024 iterations. PRNG is broken")},sha512:async t=>{if(Zt.web){let e=await Zt.web.subtle.digest("SHA-512",t.buffer);return new Uint8Array(e)}else{if(Zt.node)return Uint8Array.from(Zt.node.createHash("sha512").update(t).digest());throw new Error("The environment doesn't have sha512 function")}},precompute(t=8,e=oe.BASE){let r=e.equals(oe.BASE)?e:new oe(e.x,e.y);return r._setWindowSize(t),r.multiply(1n),r}}});var yl=E(Xt=>{"use strict";var Rn=pl(),xv=32,vv=64,Wi=32;Xt.publicKeyLength=xv;Xt.privateKeyLength=vv;Xt.generateKey=async function(){let t=Rn.utils.randomPrivateKey(),e=await Rn.getPublicKey(t);return{privateKey:dl(t,e),publicKey:e}};Xt.generateKeyFromSeed=async function(t){if(t.length!==Wi)throw new TypeError('"seed" must be 32 bytes in length.');if(!(t instanceof Uint8Array))throw new TypeError('"seed" must be a node.js Buffer, or Uint8Array.');let e=t,r=await Rn.getPublicKey(e);return{privateKey:dl(e,r),publicKey:r}};Xt.hashAndSign=function(t,e){let r=t.slice(0,Wi);return Rn.sign(e,r)};Xt.hashAndVerify=function(t,e,r){return Rn.verify(e,r,t)};function dl(t,e){let r=new Uint8Array(Xt.privateKeyLength);for(let n=0;n<Wi;n++)r[n]=t[n],r[Wi+n]=e[n];return r}});var bl=E((TE,ml)=>{"use strict";var gl=qe(),{equals:xl}=($r(),Wr),{sha256:vl}=(nr(),Ft),{base58btc:mv}=(Br(),Sr),{identity:bv}=(Zn(),fn),Ce=yl(),$i=Si(),wv=zi(),Yi=class{constructor(e){this._key=Zr(e,Ce.publicKeyLength)}async verify(e,r){return Ce.hashAndVerify(this._key,r,e)}marshal(){return this._key}get bytes(){return $i.PublicKey.encode({Type:$i.KeyType.Ed25519,Data:this.marshal()}).finish()}equals(e){return xl(this.bytes,e.bytes)}async hash(){let{bytes:e}=await vl.digest(this.bytes);return e}},Qr=class{constructor(e,r){this._key=Zr(e,Ce.privateKeyLength),this._publicKey=Zr(r,Ce.publicKeyLength)}async sign(e){return Ce.hashAndSign(this._key,e)}get public(){return new Yi(this._publicKey)}marshal(){return this._key}get bytes(){return $i.PrivateKey.encode({Type:$i.KeyType.Ed25519,Data:this.marshal()}).finish()}equals(e){return xl(this.bytes,e.bytes)}async hash(){let{bytes:e}=await vl.digest(this.bytes);return e}async id(){let e=await bv.digest(this.public.bytes);return mv.encode(e.bytes).substring(1)}async export(e,r="libp2p-key"){if(r==="libp2p-key")return wv.export(this.bytes,e);throw gl(new Error(`export format '${r}' is not supported`),"ERR_INVALID_EXPORT_FORMAT")}};function Ev(t){if(t.length>Ce.privateKeyLength){t=Zr(t,Ce.privateKeyLength+Ce.publicKeyLength);let n=t.slice(0,Ce.privateKeyLength),i=t.slice(Ce.privateKeyLength,t.length);return new Qr(n,i)}t=Zr(t,Ce.privateKeyLength);let e=t.slice(0,Ce.privateKeyLength),r=t.slice(Ce.publicKeyLength);return new Qr(e,r)}function Sv(t){return t=Zr(t,Ce.publicKeyLength),new Yi(t)}async function Bv(){let{privateKey:t,publicKey:e}=await Ce.generateKey();return new Qr(t,e)}async function Cv(t){let{privateKey:e,publicKey:r}=await Ce.generateKeyFromSeed(t);return new Qr(e,r)}function Zr(t,e){if(t=Uint8Array.from(t||[]),t.length!==e)throw gl(new Error(`Key must be a Uint8Array of length ${e}, got ${t.length}`),"ERR_INVALID_KEY_TYPE");return t}ml.exports={Ed25519PublicKey:Yi,Ed25519PrivateKey:Qr,unmarshalEd25519PrivateKey:Ev,unmarshalEd25519PublicKey:Sv,generateKeyPair:Bv,generateKeyPairFromSeed:Cv}});var kl=E((W,Ll)=>{"use strict";Object.defineProperty(W,"__esModule",{value:!0});W.utils=W.schnorr=W.verify=W.signSync=W.sign=W.getSharedSecret=W.recoverPublicKey=W.getPublicKey=W.SignResult=W.Signature=W.Point=W.CURVE=void 0;var Y={a:0n,b:7n,P:2n**256n-2n**32n-977n,n:2n**256n-432420386565659656852420866394968145599n,h:1n,Gx:55066263022277343669578718895168534326250603453777594175500187360389116729240n,Gy:32670510020758816978083085130507043184471273380659243275938904335757337482424n,beta:0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501een};W.CURVE=Y;function wl(t){let{a:e,b:r}=Y;return D(t**3n+e*t+r)}var Qi=Y.a===0n,j=class{constructor(e,r,n){this.x=e,this.y=r,this.z=n}static fromAffine(e){if(!(e instanceof Q))throw new TypeError("JacobianPoint#fromAffine: expected Point");return new j(e.x,e.y,1n)}static toAffineBatch(e){let r=Av(e.map(n=>n.z));return e.map((n,i)=>n.toAffine(r[i]))}static normalizeZ(e){return j.toAffineBatch(e).map(j.fromAffine)}equals(e){let r=this,n=e,i=D(r.z*r.z),s=D(r.z*i),o=D(n.z*n.z),a=D(n.z*o);return D(r.x*o)===D(i*n.x)&&D(r.y*a)===D(s*n.y)}negate(){return new j(this.x,D(-this.y),this.z)}double(){let e=this.x,r=this.y,n=this.z,i=D(e**2n),s=D(r**2n),o=D(s**2n),a=D(2n*(D(D((e+s)**2n))-i-o)),u=D(3n*i),c=D(u**2n),f=D(c-2n*a),h=D(u*(a-f)-8n*o),l=D(2n*r*n);return new j(f,h,l)}add(e){if(!(e instanceof j))throw new TypeError("JacobianPoint#add: expected JacobianPoint");let r=this.x,n=this.y,i=this.z,s=e.x,o=e.y,a=e.z;if(s===0n||o===0n)return this;if(r===0n||n===0n)return e;let u=D(i**2n),c=D(a**2n),f=D(r*c),h=D(s*u),l=D(n*a*c),d=D(D(o*i)*u),p=D(h-f),g=D(d-l);if(p===0n)return g===0n?this.double():j.ZERO;let x=D(p**2n),m=D(p*x),B=D(f*x),I=D(g**2n-m-2n*B),L=D(g*(B-I)-l*m),T=D(i*a*p);return new j(I,L,T)}subtract(e){return this.add(e.negate())}multiplyUnsafe(e){if(!Bl(e))throw new TypeError("Point#multiply: expected valid scalar");let r=D(BigInt(e),Y.n);if(!Qi){let f=j.ZERO,h=this;for(;r>0n;)r&1n&&(f=f.add(h)),h=h.double(),r>>=1n;return f}let[n,i,s,o]=_l(r),a=j.ZERO,u=j.ZERO,c=this;for(;i>0n||o>0n;)i&1n&&(a=a.add(c)),o&1n&&(u=u.add(c)),c=c.double(),i>>=1n,o>>=1n;return n&&(a=a.negate()),s&&(u=u.negate()),u=new j(D(u.x*Y.beta),u.y,u.z),a.add(u)}precomputeWindow(e){let r=Qi?128/e+1:256/e+1,n=[],i=this,s=i;for(let o=0;o<r;o++){s=i,n.push(s);for(let a=1;a<2**(e-1);a++)s=s.add(i),n.push(s);i=s.double()}return n}wNAF(e,r){!r&&this.equals(j.BASE)&&(r=Q.BASE);let n=r&&r._WINDOW_SIZE||1;if(256%n)throw new Error("Point#wNAF: Invalid precomputation window, must be power of 2");let i=r&&Qo.get(r);i||(i=this.precomputeWindow(n),r&&n!==1&&(i=j.normalizeZ(i),Qo.set(r,i)));let s=j.ZERO,o=j.ZERO,a=Qi?128/n+1:256/n+1,u=2**(n-1),c=BigInt(2**n-1),f=2**n,h=BigInt(n);for(let l=0;l<a;l++){let d=l*u,p=Number(e&c);if(e>>=h,p>u&&(p-=f,e+=1n),p===0)o=o.add(l%2?i[d].negate():i[d]);else{let g=i[d+Math.abs(p)-1];s=s.add(p<0?g.negate():g)}}return[s,o]}multiply(e,r){if(!Bl(e))throw new TypeError("Point#multiply: expected valid scalar");let n=D(BigInt(e),Y.n),i,s;if(Qi){let[o,a,u,c]=_l(n),f,h,l,d;[f,l]=this.wNAF(a,r),[h,d]=this.wNAF(c,r),o&&(f=f.negate()),u&&(h=h.negate()),h=new j(D(h.x*Y.beta),h.y,h.z),[i,s]=[f.add(h),l.add(d)]}else[i,s]=this.wNAF(n,r);return j.normalizeZ([i,s])[0]}toAffine(e=Nn(this.z)){let r=e**2n,n=D(this.x*r),i=D(this.y*r*e);return new Q(n,i)}};j.BASE=new j(Y.Gx,Y.Gy,1n);j.ZERO=new j(0n,1n,0n);var Qo=new WeakMap,Q=class{constructor(e,r){this.x=e,this.y=r}_setWindowSize(e){this._WINDOW_SIZE=e,Qo.delete(this)}static fromCompressedHex(e){let r=e.length===32,n=We(r?e:e.slice(1)),i=wl(n),s=_v(i),o=(s&1n)===1n;r?o&&(s=D(-s)):(e[0]&1)==1!==o&&(s=D(-s));let a=new Q(n,s);return a.assertValidity(),a}static fromUncompressedHex(e){let r=We(e.slice(1,33)),n=We(e.slice(33)),i=new Q(r,n);return i.assertValidity(),i}static fromHex(e){let r=Ji(e),n=r[0];if(r.length===32||r.length===33&&(n===2||n===3))return this.fromCompressedHex(r);if(r.length===65&&n===4)return this.fromUncompressedHex(r);throw new Error(`Point.fromHex: received invalid point. Expected 32-33 compressed bytes or 65 uncompressed bytes, not ${r.length}`)}static fromPrivateKey(e){return Q.BASE.multiply(Xr(e))}static fromSignature(e,r,n){let i=e instanceof Uint8Array?We(e):Nt(e),s=Tl(r),{r:o,s:a}=s;if(n!==0&&n!==1)throw new Error("Cannot recover signature: invalid yParity bit");let u=2+(n&1),c=Q.fromHex(`0${u}${Jt(o)}`),f=j.fromAffine(c).multiplyUnsafe(a),h=j.BASE.multiply(i),l=Nn(o,Y.n),p=f.subtract(h).multiplyUnsafe(l).toAffine();return p.assertValidity(),p}toRawBytes(e=!1){return er(this.toHex(e))}toHex(e=!1){let r=Jt(this.x);return e?`${this.y&1n?"03":"02"}${r}`:`04${r}${Jt(this.y)}`}toHexX(){return this.toHex(!0).slice(2)}toRawX(){return this.toRawBytes(!0).slice(1)}assertValidity(){let e="Point is not on elliptic curve",{P:r}=Y,{x:n,y:i}=this;if(n===0n||i===0n||n>=r||i>=r)throw new Error(e);let s=D(i*i),o=wl(n);if((s-o)%r!==0n)throw new Error(e)}equals(e){return this.x===e.x&&this.y===e.y}negate(){return new Q(this.x,D(-this.y))}double(){return j.fromAffine(this).double().toAffine()}add(e){return j.fromAffine(this).add(j.fromAffine(e)).toAffine()}subtract(e){return this.add(e.negate())}multiply(e){return j.fromAffine(this).multiply(e,this).toAffine()}};W.Point=Q;Q.BASE=new Q(Y.Gx,Y.Gy);Q.ZERO=new Q(0n,0n);function El(t){return Number.parseInt(t[0],16)>=8?"00"+t:t}var Dt=class{constructor(e,r){this.r=e,this.s=r}static fromCompact(e){if(typeof e!="string"&&!(e instanceof Uint8Array))throw new TypeError("Signature.fromCompact: Expected string or Uint8Array");let r=e instanceof Uint8Array?Zi(e):e;if(r.length!==128)throw new Error("Signature.fromCompact: Expected 64-byte hex");let n=new Dt(Nt(r.slice(0,64)),Nt(r.slice(64,128)));return n.assertValidity(),n}static fromDER(e){let r="Signature.fromDER";if(typeof e!="string"&&!(e instanceof Uint8Array))throw new TypeError(`${r}: Expected string or Uint8Array`);let n=e instanceof Uint8Array?Zi(e):e,i=Dn(n.slice(2,4));if(n.slice(0,2)!=="30"||i!==n.length-4||n.slice(4,6)!=="02")throw new Error(`${r}: Invalid signature ${n}`);let s=Dn(n.slice(6,8)),o=8+s,a=n.slice(8,o);if(a.startsWith("00")&&Dn(a.slice(2,4))<=127)throw new Error(`${r}: Invalid r with trailing length`);let u=Nt(a);if(n.slice(o,o+2)!=="02")throw new Error(`${r}: Invalid r-s separator`);let f=Dn(n.slice(o+2,o+4)),h=i-f-s-10;if(h>0||h===-4)throw new Error(`${r}: Invalid total length`);if(f>i-s-4)throw new Error(`${r}: Invalid s`);let l=o+4,d=n.slice(l,l+f);if(d.startsWith("00")&&Dn(d.slice(2,4))<=127)throw new Error(`${r}: Invalid s with trailing length`);let p=Nt(d),g=new Dt(u,p);return g.assertValidity(),g}static fromHex(e){return this.fromDER(e)}assertValidity(){let{r:e,s:r}=this;if(!Ln(e))throw new Error("Invalid Signature: r must be 0 < r < n");if(!Ln(r))throw new Error("Invalid Signature: s must be 0 < s < n")}toDERRawBytes(e=!1){return er(this.toDERHex(e))}toDERHex(e=!1){let r=El(Pn(this.s));if(e)return r;let n=El(Pn(this.r)),i=Pn(n.length/2),s=Pn(r.length/2);return`30${Pn(n.length/2+r.length/2+4)}02${i}${n}02${s}${r}`}toRawBytes(){return this.toDERRawBytes()}toHex(){return this.toDERHex()}toCompactRawBytes(){return er(this.toCompactHex())}toCompactHex(){return Jt(this.r)+Jt(this.s)}};W.Signature=Dt;W.SignResult=Dt;function Sl(...t){if(t.length===1)return t[0];let e=t.reduce((n,i)=>n+i.length,0),r=new Uint8Array(e);for(let n=0,i=0;n<t.length;n++){let s=t[n];r.set(s,i),i+=s.length}return r}function Zi(t){let e="";for(let r=0;r<t.length;r++)e+=t[r].toString(16).padStart(2,"0");return e}function Jt(t){return t.toString(16).padStart(64,"0")}function Xi(t){return er(Jt(t))}function Pn(t){let e=t.toString(16);return e.length&1?`0${e}`:e}function Nt(t){if(typeof t!="string")throw new TypeError("hexToNumber: expected string, got "+typeof t);return BigInt(`0x${t}`)}function er(t){if(typeof t!="string")throw new TypeError("hexToBytes: expected string, got "+typeof t);if(t.length%2)throw new Error("hexToBytes: received invalid unpadded hex");let e=new Uint8Array(t.length/2);for(let r=0;r<e.length;r++){let n=r*2;e[r]=Number.parseInt(t.slice(n,n+2),16)}return e}function Ji(t){return t instanceof Uint8Array?t:er(t)}function We(t){return Nt(Zi(t))}function Dn(t){return Number.parseInt(t,16)*2}function Bl(t){return!!(typeof t=="bigint"&&t>0n||typeof t=="number"&&t>0&&Number.isSafeInteger(t))}function D(t,e=Y.P){let r=t%e;return r>=0?r:e+r}function $e(t,e){let{P:r}=Y,n=t;for(;e-- >0n;)n*=n,n%=r;return n}function _v(t){let{P:e}=Y,r=t*t*t%e,n=r*r*t%e,i=$e(n,3n)*n%e,s=$e(i,3n)*n%e,o=$e(s,2n)*r%e,a=$e(o,11n)*o%e,u=$e(a,22n)*a%e,c=$e(u,44n)*u%e,f=$e(c,88n)*c%e,h=$e(f,44n)*u%e,l=$e(h,3n)*n%e,d=$e(l,23n)*a%e,p=$e(d,6n)*r%e;return $e(p,2n)}function Nn(t,e=Y.P){if(t===0n||e<=0n)throw new Error(`invert: expected positive integers, got n=${t} mod=${e}`);let r=D(t,e),n=e,[i,s,o,a]=[0n,1n,1n,0n];for(;r!==0n;){let c=n/r,f=n%r,h=i-o*c,l=s-a*c;[n,r]=[r,f],[i,s]=[o,a],[o,a]=[h,l]}if(n!==1n)throw new Error("invert: does not exist");return D(i,e)}function Av(t,e=Y.P){let r=t.length,n=new Array(r),i=1n;for(let s=0;s<r;s++)t[s]!==0n&&(n[s]=i,i=D(i*t[s],e));i=Nn(i,e);for(let s=r-1;s>=0;s--){if(t[s]===0n)continue;let o=D(i*t[s],e);t[s]=D(i*n[s],e),i=o}return t}var Cl=(t,e)=>(t+e/2n)/e,es=2n**128n;function _l(t){let{n:e}=Y,r=0x3086d221a7d46bcde86c90e49284eb15n,n=-0xe4437ed6010e88286f547fa90abfe4c3n,i=0x114ca50f7a8e2f3f657c1108d9d44cfd8n,s=r,o=Cl(s*t,e),a=Cl(-n*t,e),u=D(t-o*r-a*i,e),c=D(-o*n-a*s,e),f=u>es,h=c>es;if(f&&(u=e-u),h&&(c=e-c),u>es||c>es)throw new Error("splitScalarEndo: Endomorphism failed");return[f,u,h,c]}function Iv(t){typeof t!="string"&&(t=Zi(t));let e=Nt(t||"0"),n=t.length/2*8-256;return n>0&&(e=e>>BigInt(n)),e>=Y.n&&(e-=Y.n),e}function Al(t,e){if(t==null)throw new Error(`sign: expected valid msgHash, not "${t}"`);let r=typeof t=="string"?Nt(t):We(t),n=Xi(r),i=We(n),s=Xi(e),o=new Uint8Array(32).fill(1),a=new Uint8Array(32).fill(0),u=Uint8Array.from([0]),c=Uint8Array.from([1]);return[n,i,s,o,a,u,c]}async function Tv(t,e){let r=Xr(e),[n,i,s,o,a,u,c]=Al(t,r),f=W.utils.hmacSha256;a=await f(a,o,u,s,n),o=await f(a,o),a=await f(a,o,c,s,n),o=await f(a,o);for(let h=0;h<1e3;h++){o=await f(a,o);let l=Il(o,i,r);if(l)return l;a=await f(a,o,u),o=await f(a,o)}throw new TypeError("secp256k1: Tried 1,000 k values for sign(), all were invalid")}function Rv(t,e){let r=Xr(e),[n,i,s,o,a,u,c]=Al(t,r),f=W.utils.hmacSha256Sync;if(!f)throw new Error("utils.hmacSha256Sync is undefined, you need to set it");if(a=f(a,o,u,s,n),a instanceof Promise)throw new Error("To use sync sign(), ensure utils.hmacSha256 is sync");o=f(a,o),a=f(a,o,c,s,n),o=f(a,o);for(let h=0;h<1e3;h++){o=f(a,o);let l=Il(o,i,r);if(l)return l;a=f(a,o,u),o=f(a,o)}throw new TypeError("secp256k1: Tried 1,000 k values for sign(), all were invalid")}function Ln(t){return 0<t&&t<Y.n}function Il(t,e,r){let n=We(t);if(!Ln(n))return;let i=Y.n,s=Q.BASE.multiply(n),o=D(s.x,i),a=D(Nn(n,i)*(e+o*r),i);if(!(o===0n||a===0n))return[s,o,a]}function Xr(t){let e;if(typeof t=="bigint")e=t;else if(typeof t=="number"&&Number.isSafeInteger(t)&&t>0)e=BigInt(t);else if(typeof t=="string"){if(t.length!==64)throw new Error("Expected 32 bytes of private key");e=Nt(t)}else if(t instanceof Uint8Array){if(t.length!==32)throw new Error("Expected 32 bytes of private key");e=We(t)}else throw new TypeError("Expected valid private key");if(!Ln(e))throw new Error("Expected private key: 0 < key < n");return e}function Zo(t){return t instanceof Q?(t.assertValidity(),t):Q.fromHex(t)}function Tl(t){return t instanceof Dt?(t.assertValidity(),t):Dt.fromDER(t)}function Pv(t,e=!1){let r=Q.fromPrivateKey(t);return typeof t=="string"?r.toHex(e):r.toRawBytes(e)}W.getPublicKey=Pv;function Dv(t,e,r){let n=Q.fromSignature(t,e,r);return typeof t=="string"?n.toHex():n.toRawBytes()}W.recoverPublicKey=Dv;function Rl(t){let e=t instanceof Uint8Array,r=typeof t=="string",n=(e||r)&&t.length;return e?n===33||n===65:r?n===66||n===130:t instanceof Q}function Nv(t,e,r=!1){if(Rl(t))throw new TypeError("getSharedSecret: first arg must be private key");if(!Rl(e))throw new TypeError("getSharedSecret: second arg must be public key");let n=Zo(e);n.assertValidity();let i=n.multiply(Xr(t));return typeof t=="string"?i.toHex(r):i.toRawBytes(r)}W.getSharedSecret=Nv;function Pl(t,e,r=!1){let[n,i,s]=t,{canonical:o,der:a,recovered:u}=e,c=(n.x===i?0:2)|Number(n.y&1n),f=s,h=Y.n>>1n;s>h&&o&&(f=Y.n-s,c^=1);let l=new Dt(i,f);l.assertValidity();let d=a===!1?l.toCompactHex():l.toDERHex(),p=r?d:er(d);return u?[p,c]:p}async function Lv(t,e,r={}){return Pl(await Tv(t,e),r,typeof t=="string")}W.sign=Lv;function kv(t,e,r={}){return Pl(Rv(t,e),r,typeof t=="string")}W.signSync=kv;function Ov(t,e,r){let{n}=Y,i;try{i=Tl(t)}catch(x){return!1}let{r:s,s:o}=i,a=Iv(e);if(a===0n)return!1;let u=j.fromAffine(Zo(r)),c=Nn(o,n),f=D(a*c,n),h=D(s*c,n),l=j.BASE.multiply(f),d=u.multiplyUnsafe(h),p=l.add(d).toAffine();return D(p.x,n)===s}W.verify=Ov;async function Xo(t,...e){let r=new Uint8Array(t.split("").map(s=>s.charCodeAt(0))),n=await W.utils.sha256(r),i=await W.utils.sha256(Sl(n,n,...e));return We(i)}async function Dl(t,e,r){let n=Xi(t),i=await Xo("BIP0340/challenge",n,e.toRawX(),r);return D(i,Y.n)}function Jo(t){return D(t.y,2n)===0n}var mr=class{constructor(e,r){if(this.r=e,this.s=r,e<=0n||r<=0n||e>=Y.P||r>=Y.n)throw new Error("Invalid signature")}static fromHex(e){let r=Ji(e);if(r.length!==64)throw new TypeError(`SchnorrSignature.fromHex: expected 64 bytes, not ${r.length}`);let n=We(r.slice(0,32)),i=We(r.slice(32));return new mr(n,i)}toHex(){return Jt(this.r)+Jt(this.s)}toRawBytes(){return er(this.toHex())}};function Fv(t){let e=Q.fromPrivateKey(t);return typeof t=="string"?e.toHexX():e.toRawX()}async function Kv(t,e,r=W.utils.randomBytes()){if(t==null)throw new TypeError(`sign: Expected valid message, not "${t}"`);e||(e=0n);let{n}=Y,i=Ji(t),s=Xr(e),o=Ji(r);if(o.length!==32)throw new TypeError("sign: Expected 32 bytes of aux randomness");let a=Q.fromPrivateKey(s),u=Jo(a)?s:n-s,c=await Xo("BIP0340/aux",o),f=u^c,h=await Xo("BIP0340/nonce",Xi(f),a.toRawX(),i),l=D(h,n);if(l===0n)throw new Error("sign: Creation of signature failed. k is zero");let d=Q.fromPrivateKey(l),p=Jo(d)?l:n-l,g=await Dl(d.x,a,i),x=new mr(d.x,D(p+g*u,n));if(!await Nl(x.toRawBytes(),i,a.toRawX()))throw new Error("sign: Invalid signature produced");return typeof t=="string"?x.toHex():x.toRawBytes()}async function Nl(t,e,r){let n=t instanceof mr?t:mr.fromHex(t),i=typeof e=="string"?er(e):e,s=Zo(r),o=await Dl(n.r,s,i),a=Q.fromPrivateKey(n.s),u=s.multiply(o),c=a.subtract(u);return!(c.equals(Q.BASE)||!Jo(c)||c.x!==n.r)}W.schnorr={Signature:mr,getPublicKey:Fv,sign:Kv,verify:Nl};Q.BASE._setWindowSize(8);var Ue=(()=>{let t=typeof self=="object"&&"crypto"in self?self.crypto:void 0;return{node:typeof Ll!="undefined"&&typeof zn=="function"&&!t?Vr():void 0,web:t}})();W.utils={isValidPrivateKey(t){try{return Xr(t),!0}catch(e){return!1}},randomBytes:(t=32)=>{if(Ue.web)return Ue.web.getRandomValues(new Uint8Array(t));if(Ue.node){let{randomBytes:e}=Ue.node;return new Uint8Array(e(t).buffer)}else throw new Error("The environment doesn't have randomBytes function")},randomPrivateKey:()=>{let t=8;for(;t--;){let e=W.utils.randomBytes(32),r=We(e);if(Ln(r)&&r!==1n)return e}throw new Error("Valid private key was not found in 8 iterations. PRNG is broken")},sha256:async t=>{if(Ue.web){let e=await Ue.web.subtle.digest("SHA-256",t.buffer);return new Uint8Array(e)}else if(Ue.node){let{createHash:e}=Ue.node;return Uint8Array.from(e("sha256").update(t).digest())}else throw new Error("The environment doesn't have sha256 function")},hmacSha256:async(t,...e)=>{if(Ue.web){let r=await Ue.web.subtle.importKey("raw",t,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]),n=Sl(...e),i=await Ue.web.subtle.sign("HMAC",r,n);return new Uint8Array(i)}else if(Ue.node){let{createHmac:r}=Ue.node,n=r("sha256",t);for(let i of e)n.update(i);return Uint8Array.from(n.digest())}else throw new Error("The environment doesn't have hmac-sha256 function")},sha256Sync:void 0,hmacSha256Sync:void 0,precompute(t=8,e=Q.BASE){let r=e===Q.BASE?e:new Q(e.x,e.y);return r._setWindowSize(t),r.multiply(3n),r}}});var Kl=E((RE,Fl)=>{"use strict";var kn=qe(),tr=kl(),{sha256:Ol}=(nr(),Ft);Fl.exports=()=>{let t=32;function e(){return tr.utils.randomPrivateKey()}async function r(c,f){let{digest:h}=await Ol.digest(f);try{return await tr.sign(h,c)}catch(l){throw kn(l,"ERR_INVALID_INPUT")}}async function n(c,f,h){try{let{digest:l}=await Ol.digest(h);return tr.verify(f,l,c)}catch(l){throw kn(l,"ERR_INVALID_INPUT")}}function i(c){return tr.Point.fromHex(c).toRawBytes(!0)}function s(c){return tr.Point.fromHex(c).toRawBytes(!1)}function o(c){try{tr.getPublicKey(c,!0)}catch(f){throw kn(f,"ERR_INVALID_PRIVATE_KEY")}}function a(c){try{tr.Point.fromHex(c)}catch(f){throw kn(f,"ERR_INVALID_PUBLIC_KEY")}}function u(c){try{return tr.getPublicKey(c,!0)}catch(f){throw kn(f,"ERR_INVALID_PRIVATE_KEY")}}return{generateKey:e,privateKeyLength:t,hashAndSign:r,hashAndVerify:n,compressPublicKey:i,decompressPublicKey:s,validatePrivateKey:o,validatePublicKey:a,computePublicKey:u}}});var Vl=E((PE,Ml)=>{"use strict";var{sha256:Ul}=(nr(),Ft),Uv=qe(),{equals:ql}=($r(),Wr),{toString:qv}=(ot(),st),Mv=zi();Ml.exports=(t,e,r)=>{r=r||Kl()();class n{constructor(c){r.validatePublicKey(c),this._key=c}verify(c,f){return r.hashAndVerify(this._key,f,c)}marshal(){return r.compressPublicKey(this._key)}get bytes(){return t.PublicKey.encode({Type:t.KeyType.Secp256k1,Data:this.marshal()}).finish()}equals(c){return ql(this.bytes,c.bytes)}async hash(){let{bytes:c}=await Ul.digest(this.bytes);return c}}class i{constructor(c,f){this._key=c,this._publicKey=f||r.computePublicKey(c),r.validatePrivateKey(this._key),r.validatePublicKey(this._publicKey)}sign(c){return r.hashAndSign(this._key,c)}get public(){return new n(this._publicKey)}marshal(){return this._key}get bytes(){return t.PrivateKey.encode({Type:t.KeyType.Secp256k1,Data:this.marshal()}).finish()}equals(c){return ql(this.bytes,c.bytes)}async hash(){let{bytes:c}=await Ul.digest(this.bytes);return c}async id(){let c=await this.public.hash();return qv(c,"base58btc")}async export(c,f="libp2p-key"){if(f==="libp2p-key")return Mv.export(this.bytes,c);throw Uv(new Error(`export format '${f}' is not supported`),"ERR_INVALID_EXPORT_FORMAT")}}function s(u){return new i(u)}function o(u){return new n(u)}async function a(){let u=await r.generateKey();return new i(u)}return{Secp256k1PublicKey:n,Secp256k1PrivateKey:i,unmarshalSecp256k1PrivateKey:s,unmarshalSecp256k1PublicKey:o,generateKeyPair:a}}});var Hl=E((DE,zl)=>{"use strict";zl.exports={SHA1:20,SHA256:32,SHA512:64}});var Wl=E(jl=>{"use strict";var Gl=Sn(),Vv=Hl(),zv={SHA1:"SHA-1",SHA256:"SHA-256",SHA512:"SHA-512"},Hv=async(t,e)=>{let r=await Gl.get().subtle.sign({name:"HMAC"},t,e);return new Uint8Array(r,r.byteOffset,r.byteLength)};jl.create=async function(t,e){let r=zv[t],n=await Gl.get().subtle.importKey("raw",e,{name:"HMAC",hash:{name:r}},!1,["sign"]);return{async digest(i){return Hv(n,i)},length:Vv[t]}}});var Xl=E((LE,Zl)=>{"use strict";var $l=qe(),{concat:Yl}=(jr(),Gr),{fromString:Gv}=(lt(),ht),jv=Wl(),Ql={"AES-128":{ivSize:16,keySize:16},"AES-256":{ivSize:16,keySize:32},Blowfish:{ivSize:8,cipherKeySize:32}};Zl.exports=async(t,e,r)=>{let n=Ql[t];if(!n){let B=Object.keys(Ql).join(" / ");throw $l(new Error(`unknown cipher type '${t}'. Must be ${B}`),"ERR_INVALID_CIPHER_TYPE")}if(!e)throw $l(new Error("missing hash type"),"ERR_MISSING_HASH_TYPE");let i=n.keySize,s=n.ivSize,o=20,a=Gv("key expansion"),u=2*(s+i+o),c=await jv.create(e,r),f=await c.digest(a),h=[],l=0;for(;l<u;){let B=await c.digest(Yl([f,a])),I=B.length;l+I>u&&(I=u-l),h.push(B),l+=I,f=await c.digest(f)}let d=u/2,p=Yl(h),g=p.slice(0,d),x=p.slice(d,u),m=B=>({iv:B.slice(0,s),cipherKey:B.slice(s,s+i),macKey:B.slice(s+i)});return{k1:m(g),k2:m(x)}}});var ep=E((kE,Jl)=>{"use strict";var Wv=qe();Jl.exports=function(t,e){if(!t.includes(e)){let r=t.join(" / ");throw Wv(new Error(`Unknown curve: ${e}. Must be ${r}`),"ERR_INVALID_CURVE")}}});var op=E(sp=>{"use strict";var $v=qe(),On=Sn(),{base64urlToBuffer:tp}=Vi(),Yv=ep(),{toString:ea}=(ot(),st),{concat:Qv}=(jr(),Gr),{equals:Zv}=($r(),Wr),rp={"P-256":256,"P-384":384,"P-521":521};sp.generateEphmeralKeyPair=async function(t){Yv(Object.keys(rp),t);let e=await On.get().subtle.generateKey({name:"ECDH",namedCurve:t},!0,["deriveBits"]),r=async(i,s)=>{let o;s?o=await On.get().subtle.importKey("jwk",Jv(t,s),{name:"ECDH",namedCurve:t},!1,["deriveBits"]):o=e.privateKey;let a=[await On.get().subtle.importKey("jwk",ip(t,i),{name:"ECDH",namedCurve:t},!1,[]),o],u=await On.get().subtle.deriveBits({name:"ECDH",namedCurve:t,public:a[0]},a[1],rp[t]);return new Uint8Array(u,u.byteOffset,u.byteLength)},n=await On.get().subtle.exportKey("jwk",e.publicKey);return{key:Xv(n),genSharedKey:r}};var np={"P-256":32,"P-384":48,"P-521":66};function Xv(t){let e=np[t.crv];return Qv([Uint8Array.from([4]),tp(t.x,e),tp(t.y,e)],1+e*2)}function ip(t,e){let r=np[t];if(Zv(!e.slice(0,1),Uint8Array.from([4])))throw $v(new Error("Cannot unmarshal public key - invalid key format"),"ERR_INVALID_KEY_FORMAT");return{kty:"EC",crv:t,x:ea(e.slice(1,r+1),"base64url"),y:ea(e.slice(1+r),"base64url"),ext:!0}}var Jv=(t,e)=>({...ip(t,e.public),d:ea(e.private,"base64url")})});var up=E((FE,ap)=>{"use strict";var em=op();ap.exports=async t=>em.generateEphmeralKeyPair(t)});var hp=E((KE,fp)=>{"use strict";var Et=Si();bn();Rh();var ta=J(),Fn=qe(),{fromString:tm}=(lt(),ht),rm=kh(),Ye={rsa:sl(),ed25519:bl(),secp256k1:Vl()(Et,Vo())},ts={message:"secp256k1 support requires libp2p-crypto-secp256k1 package",code:"ERR_MISSING_PACKAGE"};function Jr(t){let e=Ye[t.toLowerCase()];if(!e){let r=Object.keys(Ye).join(" / ");throw Fn(new Error(`invalid or unsupported key type ${t}. Must be ${r}`),"ERR_UNSUPPORTED_KEY_TYPE")}return e}var nm=async(t,e)=>Jr(t).generateKeyPair(e),im=async(t,e,r)=>{let n=Jr(t);if(t.toLowerCase()!=="ed25519")throw Fn(new Error("Seed key derivation is unimplemented for RSA or secp256k1"),"ERR_UNSUPPORTED_KEY_DERIVATION_TYPE");return n.generateKeyPairFromSeed(e,r)},sm=t=>{let e=Et.PublicKey.decode(t),r=e.Data;switch(e.Type){case Et.KeyType.RSA:return Ye.rsa.unmarshalRsaPublicKey(r);case Et.KeyType.Ed25519:return Ye.ed25519.unmarshalEd25519PublicKey(r);case Et.KeyType.Secp256k1:if(Ye.secp256k1)return Ye.secp256k1.unmarshalSecp256k1PublicKey(r);throw Fn(new Error(ts.message),ts.code);default:Jr(e.Type)}},om=(t,e)=>(e=(e||"rsa").toLowerCase(),Jr(e),t.bytes),cp=async t=>{let e=Et.PrivateKey.decode(t),r=e.Data;switch(e.Type){case Et.KeyType.RSA:return Ye.rsa.unmarshalRsaPrivateKey(r);case Et.KeyType.Ed25519:return Ye.ed25519.unmarshalEd25519PrivateKey(r);case Et.KeyType.Secp256k1:if(Ye.secp256k1)return Ye.secp256k1.unmarshalSecp256k1PrivateKey(r);throw Fn(new Error(ts.message),ts.code);default:Jr(e.Type)}},am=(t,e)=>(e=(e||"rsa").toLowerCase(),Jr(e),t.bytes),um=async(t,e)=>{try{let i=await rm.import(t,e);return cp(i)}catch(i){}let r=ta.pki.decryptRsaPrivateKey(t,e);if(r===null)throw Fn(new Error("Cannot read the key, most likely the password is wrong or not a RSA key"),"ERR_CANNOT_DECRYPT_PEM");let n=ta.asn1.toDer(ta.pki.privateKeyToAsn1(r));return n=tm(n.getBytes(),"ascii"),Ye.rsa.unmarshalRsaPrivateKey(n)};fp.exports={supportedKeys:Ye,keysPBM:Et,keyStretcher:Xl(),generateEphemeralKeyPair:up(),generateKeyPair:nm,generateKeyPairFromSeed:im,unmarshalPublicKey:sm,marshalPublicKey:om,unmarshalPrivateKey:cp,marshalPrivateKey:am,import:um}});var lp=E((UE,ra)=>{"use strict";function cm(t,{className:e,symbolName:r}){let n=Symbol.for(r),i={[e]:class extends t{constructor(...s){super(...s);Object.defineProperty(this,n,{value:!0})}get[Symbol.toStringTag](){return e}}}[e];return i[`is${e}`]=s=>!!(s&&s[n]),i}function fm(t,{className:e,symbolName:r,withoutNew:n}){let i=Symbol.for(r),s={[e]:function(...o){if(n&&!(this instanceof s))return new s(...o);let a=t.call(this,...o)||this;return a&&!a[i]&&Object.defineProperty(a,i,{value:!0}),a}}[e];return s.prototype=Object.create(t.prototype),s.prototype.constructor=s,Object.defineProperty(s.prototype,Symbol.toStringTag,{get(){return e}}),s[`is${e}`]=o=>!!(o&&o[i]),s}ra.exports=cm;ra.exports.proto=fm});var yp=E((qE,dp)=>{"use strict";var en=di(),pp=en.Reader,hm=en.Writer,ge=en.util,Kn=en.roots["libp2p-peer-id"]||(en.roots["libp2p-peer-id"]={});Kn.PeerIdProto=function(){function t(e){if(e)for(var r=Object.keys(e),n=0;n<r.length;++n)e[r[n]]!=null&&(this[r[n]]=e[r[n]])}return t.prototype.id=ge.newBuffer([]),t.prototype.pubKey=ge.newBuffer([]),t.prototype.privKey=ge.newBuffer([]),t.encode=function(r,n){return n||(n=hm.create()),n.uint32(10).bytes(r.id),r.pubKey!=null&&Object.hasOwnProperty.call(r,"pubKey")&&n.uint32(18).bytes(r.pubKey),r.privKey!=null&&Object.hasOwnProperty.call(r,"privKey")&&n.uint32(26).bytes(r.privKey),n},t.decode=function(r,n){r instanceof pp||(r=pp.create(r));for(var i=n===void 0?r.len:r.pos+n,s=new Kn.PeerIdProto;r.pos<i;){var o=r.uint32();switch(o>>>3){case 1:s.id=r.bytes();break;case 2:s.pubKey=r.bytes();break;case 3:s.privKey=r.bytes();break;default:r.skipType(o&7);break}}if(!s.hasOwnProperty("id"))throw ge.ProtocolError("missing required 'id'",{instance:s});return s},t.fromObject=function(r){if(r instanceof Kn.PeerIdProto)return r;var n=new Kn.PeerIdProto;return r.id!=null&&(typeof r.id=="string"?ge.base64.decode(r.id,n.id=ge.newBuffer(ge.base64.length(r.id)),0):r.id.length&&(n.id=r.id)),r.pubKey!=null&&(typeof r.pubKey=="string"?ge.base64.decode(r.pubKey,n.pubKey=ge.newBuffer(ge.base64.length(r.pubKey)),0):r.pubKey.length&&(n.pubKey=r.pubKey)),r.privKey!=null&&(typeof r.privKey=="string"?ge.base64.decode(r.privKey,n.privKey=ge.newBuffer(ge.base64.length(r.privKey)),0):r.privKey.length&&(n.privKey=r.privKey)),n},t.toObject=function(r,n){n||(n={});var i={};return n.defaults&&(n.bytes===String?i.id="":(i.id=[],n.bytes!==Array&&(i.id=ge.newBuffer(i.id))),n.bytes===String?i.pubKey="":(i.pubKey=[],n.bytes!==Array&&(i.pubKey=ge.newBuffer(i.pubKey))),n.bytes===String?i.privKey="":(i.privKey=[],n.bytes!==Array&&(i.privKey=ge.newBuffer(i.privKey)))),r.id!=null&&r.hasOwnProperty("id")&&(i.id=n.bytes===String?ge.base64.encode(r.id,0,r.id.length):n.bytes===Array?Array.prototype.slice.call(r.id):r.id),r.pubKey!=null&&r.hasOwnProperty("pubKey")&&(i.pubKey=n.bytes===String?ge.base64.encode(r.pubKey,0,r.pubKey.length):n.bytes===Array?Array.prototype.slice.call(r.pubKey):r.pubKey),r.privKey!=null&&r.hasOwnProperty("privKey")&&(i.privKey=n.bytes===String?ge.base64.encode(r.privKey,0,r.privKey.length):n.bytes===Array?Array.prototype.slice.call(r.privKey):r.privKey),i},t.prototype.toJSON=function(){return this.constructor.toObject(this,en.util.toJSONOptions)},t}();dp.exports=Kn});var oa=E((_e,Sp)=>{"use strict";var{CID:na}=(ms(),Ya),lm=(rn(),tn),pm=(ys(),Wn),dm=(Br(),Sr),ym=(nn(),Cr),{base58btc:ia}=(Br(),Sr),{base32:gm}=(rn(),tn),{base16:gp}=(ds(),jn),Un=(un(),Yn),St=hp(),xm=lp(),{PeerIdProto:xp}=yp(),{equals:br}=($r(),Wr),{fromString:qn}=(lt(),ht),{toString:vm}=(ot(),st),{identity:rs}=(Zn(),fn),vp={...lm,...pm,...dm,...ym},mm=Object.keys(vp).reduce((t,e)=>t.or(vp[e]),gm.decoder),bm=112,mp=114,bp=class{constructor(e,r,n){if(!(e instanceof Uint8Array))throw new Error("invalid id provided");if(r&&n&&!br(r.public.bytes,n.bytes))throw new Error("inconsistent arguments");this._id=e,this._idB58String=ia.encode(this.id).substring(1),this._privKey=r,this._pubKey=n}get id(){return this._id}set id(e){throw new Error("Id is immutable")}get privKey(){return this._privKey}set privKey(e){this._privKey=e}get pubKey(){if(this._pubKey)return this._pubKey;if(this._privKey)return this._privKey.public;try{let e=Un.decode(this.id);e.code===rs.code&&(this._pubKey=St.unmarshalPublicKey(e.digest))}catch(e){}return this._pubKey}set pubKey(e){this._pubKey=e}marshalPubKey(){if(this.pubKey)return St.marshalPublicKey(this.pubKey)}marshalPrivKey(){if(this.privKey)return St.marshalPrivateKey(this.privKey)}marshal(e){return xp.encode({id:this.toBytes(),pubKey:this.marshalPubKey(),privKey:e?null:this.marshalPrivKey()}).finish()}toPrint(){let e=this.toB58String();e.startsWith("Qm")&&(e=e.slice(2));let r=6;return e.length<r&&(r=e.length),"<peer.ID "+e.substr(0,r)+">"}toJSON(){return{id:this.toB58String(),privKey:Ep(this.marshalPrivKey()),pubKey:Ep(this.marshalPubKey())}}toHexString(){return gp.encode(this.id).substring(1)}toBytes(){return this.id}toB58String(){return this._idB58String}toString(){if(!this._idCIDString){let e=na.createV1(mp,Un.decode(this.id));Object.defineProperty(this,"_idCIDString",{value:e.toString(),enumerable:!1})}return this._idCIDString}equals(e){if(e instanceof Uint8Array)return br(this.id,e);if(e.id)return br(this.id,e.id);throw new Error("not valid Id")}isEqual(e){return this.equals(e)}isValid(){return Boolean(this.privKey&&this.privKey.public&&this.privKey.public.bytes&&this.pubKey.bytes instanceof Uint8Array&&br(this.privKey.public.bytes,this.pubKey.bytes))}hasInlinePublicKey(){try{if(Un.decode(this.id).code===rs.code)return!0}catch(e){}return!1}},Bt=xm(bp,{className:"PeerId",symbolName:"@libp2p/js-peer-id/PeerId"});_e=Sp.exports=Bt;var Mn=t=>t.bytes.length<=42?Un.create(rs.code,t.bytes).bytes:t.hash(),sa=async(t,e)=>{let r=await Mn(e);return new Bt(r,t,e)};_e.create=async t=>{t=t||{},t.bits=t.bits||2048,t.keyType=t.keyType||"RSA";let e=await St.generateKeyPair(t.keyType,t.bits);return sa(e,e.public)};_e.createFromHexString=t=>new Bt(gp.decode("f"+t));_e.createFromBytes=t=>{try{let e=na.decode(t);if(!wp(e))throw new Error("Supplied PeerID CID is invalid");return _e.createFromCID(e)}catch{if(Un.decode(t).code!==rs.code)throw new Error("Supplied PeerID CID is invalid");return new Bt(t)}};_e.createFromB58String=t=>_e.createFromBytes(ia.decode("z"+t));var wp=t=>t.code===mp||t.code===bm;_e.createFromCID=t=>{if(t=na.asCID(t),!t||!wp(t))throw new Error("Supplied PeerID CID is invalid");return new Bt(t.multihash.bytes)};_e.createFromPubKey=async t=>{let e=t;if(typeof e=="string"&&(e=qn(t,"base64pad")),!(e instanceof Uint8Array))throw new Error("Supplied key is neither a base64 string nor a Uint8Array");let r=await St.unmarshalPublicKey(e);return sa(void 0,r)};_e.createFromPrivKey=async t=>{if(typeof t=="string"&&(t=qn(t,"base64pad")),!(t instanceof Uint8Array))throw new Error("Supplied key is neither a base64 string nor a Uint8Array");let e=await St.unmarshalPrivateKey(t);return sa(e,e.public)};_e.createFromJSON=async t=>{let e=ia.decode("z"+t.id),r=t.privKey&&qn(t.privKey,"base64pad"),n=t.pubKey&&qn(t.pubKey,"base64pad"),i=n&&await St.unmarshalPublicKey(n);if(!r)return new Bt(e,void 0,i);let s=await St.unmarshalPrivateKey(r),o=await Mn(s.public),a;if(i&&(a=await Mn(i)),i&&!br(o,a))throw new Error("Public and private key do not match");if(e&&!br(o,e))throw new Error("Id and private key do not match");return new Bt(e,s,i)};_e.createFromProtobuf=async t=>{typeof t=="string"&&(t=qn(t,"base16"));let{id:e,privKey:r,pubKey:n}=xp.decode(t);r=r?await St.unmarshalPrivateKey(r):!1,n=n?await St.unmarshalPublicKey(n):!1;let i,s;if(r&&(s=await Mn(r.public)),n&&(i=await Mn(n)),r){if(n&&!br(s,i))throw new Error("Public and private key do not match");return new Bt(s,r,r.public)}if(n)return new Bt(i,void 0,n);if(e)return new Bt(e);throw new Error("Protobuf did not contain any usable key material")};_e.parse=t=>((t.charAt(0)==="1"||t.charAt(0)==="Q")&&(t=`z${t}`),_e.createFromBytes(mm.decode(t)));_e.isPeerId=t=>Boolean(typeof t=="object"&&t._id&&t._idB58String);function Ep(t){if(t)return vm(t,"base64pad")}});var aa=E((ME,_p)=>{"use strict";var wm=lf(),{toString:Em}=(ot(),st),{fromString:Bp}=(lt(),ht),Cp=oa(),{sha256:Sm}=(nr(),Ft),Bm=()=>wm(8),Cm=(t,e)=>{let r;t instanceof Uint8Array?r=Cp.createFromBytes(t).id:r=Cp.parse(t).id;let n=new Uint8Array(r.length+e.length);return n.set(r,0),n.set(e,r.length),n},_m=t=>Sm.encode(t),Am=(t,e)=>{let r;Array.isArray(e)?r=n=>e.indexOf(n)>-1:r=n=>e.has(n);for(let n of t)if(r(n))return!0;return!1},Im=t=>Array.isArray(t)?t:[t],Tm=(t,e)=>{let r=Object.assign({},t);return t.from instanceof Uint8Array&&(r.from=Em(t.from,"base58btc")),e&&(r.receivedFrom=e),r},Rm=t=>{let e=Object.assign({},t);return typeof t.from=="string"&&(e.from=Bp(t.from,"base58btc")),typeof t.data=="string"&&(e.data=Bp(t.data)),e};_p.exports={randomSeqno:Bm,msgId:Cm,noSignMsgId:_m,anyMatch:Am,ensureArray:Im,normalizeInRpcMessage:Tm,normalizeOutRpcMessage:Rm}});var Pp=E((VE,Rp)=>{"use strict";var ua=oa(),{RPC:Ap}=js(),{concat:Ip}=(jr(),Gr),{fromString:Pm}=(lt(),ht),ca=Pm("libp2p-pubsub:"),{normalizeOutRpcMessage:Dm}=aa();async function Nm(t,e){let r=Ip([ca,Ap.Message.encode(Dm(e)).finish()]),n=await t.privKey.sign(r);return{...e,signature:n,key:t.pubKey.bytes}}async function Lm(t){if(!t.signature)throw new Error("Message must contain a signature to be verified");if(!t.from)throw new Error("Message must contain a from property to be verified");let e=Ip([ca,Ap.Message.encode({...t,from:ua.createFromB58String(t.from).toBytes(),signature:void 0,key:void 0}).finish()]);return(await Tp(t)).verify(e,t.signature)}async function Tp(t){if(!t.from)throw new Error("Could not get the public key from the originator id");let e=ua.createFromB58String(t.from);if(t.key){let r=await ua.createFromPubKey(t.key);if(r.equals(e))return r.pubKey;throw new Error("Public Key does not match the originator")}else{if(e.pubKey)return e.pubKey;throw new Error("Could not get the public key from the originator id")}}Rp.exports={messagePublicKey:Tp,signMessage:Nm,SignPrefix:ca,verifySignature:Lm}});var fa=E((zE,Lp)=>{"use strict";var Dp=ni(),{EventEmitter:km}=Bs(),Oe=qe(),{pipe:Om}=_s(),{default:Fm}=T0(),Km=K0(),{codes:rt}=q0(),{RPC:Np}=js(),Um=af(),{SignaturePolicy:Lt}=cf(),rr=aa(),{signMessage:qm,verifySignature:Mm}=Pp(),ns=class extends km{constructor({debugName:e,multicodecs:r,libp2p:n,globalSignaturePolicy:i=Lt.StrictSign,canRelayMessage:s=!1,emitSelf:o=!1,messageProcessingConcurrency:a=10}){if(typeof e!="string")throw new Error("a debugname `string` is required");if(!r)throw new Error("multicodecs are required");if(!n)throw new Error("libp2p is required");super();if(this.log=Object.assign(Dp(e),{err:Dp(`${e}:error`)}),this.multicodecs=rr.ensureArray(r),this._libp2p=n,this.registrar=n.registrar,this.peerId=n.peerId,this.started=!1,this.topics=new Map,this.subscriptions=new Set,this.peers=new Map,!Lt[i])throw Oe(new Error("Invalid global signature policy"),rt.ERR_INVALID_SIGNATURE_POLICY);this.globalSignaturePolicy=i,this.canRelayMessage=s,this.emitSelf=o,this.topicValidators=new Map,this.queue=new Fm({concurrency:a}),this._registrarId=void 0,this._onIncomingStream=this._onIncomingStream.bind(this),this._onPeerConnected=this._onPeerConnected.bind(this),this._onPeerDisconnected=this._onPeerDisconnected.bind(this)}start(){if(this.started)return;this.log("starting"),this.registrar.handle(this.multicodecs,this._onIncomingStream);let e=new Km({multicodecs:this.multicodecs,handlers:{onConnect:this._onPeerConnected,onDisconnect:this._onPeerDisconnected}});this._registrarId=this.registrar.register(e),this.log("started"),this.started=!0}stop(){!this.started||(this.registrar.unregister(this._registrarId),this.log("stopping"),this.peers.forEach(e=>e.close()),this.peers=new Map,this.subscriptions=new Set,this.started=!1,this.log("stopped"))}_onIncomingStream({protocol:e,stream:r,connection:n}){let i=n.remotePeer,s=i.toB58String(),o=this._addPeer(i,e),a=o.attachInboundStream(r);this._processMessages(s,a,o)}async _onPeerConnected(e,r){let n=e.toB58String();this.log("connected",n);try{let{stream:i,protocol:s}=await r.newStream(this.multicodecs);await this._addPeer(e,s).attachOutboundStream(i)}catch(i){this.log.err(i)}this._sendSubscriptions(n,Array.from(this.subscriptions),!0)}_onPeerDisconnected(e,r){let n=e.toB58String();this.log("connection ended",n,r?r.message:""),this._removePeer(e)}_addPeer(e,r){let n=e.toB58String(),i=this.peers.get(n);if(i)return i;this.log("new peer",n);let s=new Um({id:e,protocol:r});return this.peers.set(n,s),s.once("close",()=>this._removePeer(e)),s}_removePeer(e){if(!e)return;let r=e.toB58String(),n=this.peers.get(r);if(!!n){n.removeAllListeners(),n.close(),this.log("delete peer",r),this.peers.delete(r);for(let i of this.topics.values())i.delete(r);return n}}async _processMessages(e,r,n){try{await Om(r,async i=>{for await(let s of i){let o=s instanceof Uint8Array?s:s.slice(),a=this._decodeRpc(o);(async()=>{try{await this._processRpc(e,n,a)}catch(u){this.log.err(u)}})()}})}catch(i){this._onPeerDisconnected(n.id,i)}}async _processRpc(e,r,n){this.log("rpc from",e);let i=n.subscriptions,s=n.msgs;return i.length&&(i.forEach(o=>{this._processRpcSubOpt(e,o)}),this.emit("pubsub:subscription-change",r.id,i)),this._acceptFrom(e)?(s.length&&this.queue.addAll(s.map(o=>async()=>{if(!(this.canRelayMessage||o.topicIDs&&o.topicIDs.some(a=>this.subscriptions.has(a)))){this.log("received message we didn't subscribe to. Dropping.");return}try{let a=rr.normalizeInRpcMessage(o,e);await this._processRpcMessage(a)}catch(a){this.log.err(a)}})),!0):(this.log("received message from unacceptable peer %s",e),!1)}_processRpcSubOpt(e,r){let n=r.topicID;if(!n)return;let i=this.topics.get(n);i||(i=new Set,this.topics.set(n,i)),r.subscribe?i.add(e):i.delete(e)}async _processRpcMessage(e){if(!(this.peerId.toB58String()===e.from&&!this.emitSelf)){try{await this.validate(e)}catch(r){this.log("Message is invalid, dropping it. %O",r);return}return this._emitMessage(e),this._publish(rr.normalizeOutRpcMessage(e))}}_emitMessage(e){e.topicIDs.forEach(r=>{this.subscriptions.has(r)&&this.emit(r,e)})}getMsgId(e){let r=this.globalSignaturePolicy;switch(r){case Lt.StrictSign:return rr.msgId(e.from,e.seqno);case Lt.StrictNoSign:return rr.noSignMsgId(e.data);default:throw Oe(new Error("Cannot get message id: unhandled signature policy: "+r),rt.ERR_UNHANDLED_SIGNATURE_POLICY)}}_acceptFrom(e){return!0}_decodeRpc(e){return Np.decode(e)}_encodeRpc(e){return Np.encode(e).finish()}_sendRpc(e,r){let n=this.peers.get(e);if(!n||!n.isWritable){let i=`Cannot send RPC to ${e} as there is no open stream to it available`;this.log.err(i);return}n.write(this._encodeRpc(r))}_sendSubscriptions(e,r,n){return this._sendRpc(e,{subscriptions:r.map(i=>({topicID:i,subscribe:n}))})}async validate(e){let r=this.globalSignaturePolicy;switch(r){case Lt.StrictNoSign:if(e.from)throw Oe(new Error("StrictNoSigning: from should not be present"),rt.ERR_UNEXPECTED_FROM);if(e.signature)throw Oe(new Error("StrictNoSigning: signature should not be present"),rt.ERR_UNEXPECTED_SIGNATURE);if(e.key)throw Oe(new Error("StrictNoSigning: key should not be present"),rt.ERR_UNEXPECTED_KEY);if(e.seqno)throw Oe(new Error("StrictNoSigning: seqno should not be present"),rt.ERR_UNEXPECTED_SEQNO);break;case Lt.StrictSign:if(!e.signature)throw Oe(new Error("StrictSigning: Signing required and no signature was present"),rt.ERR_MISSING_SIGNATURE);if(!e.seqno)throw Oe(new Error("StrictSigning: Signing required and no seqno was present"),rt.ERR_MISSING_SEQNO);if(!await Mm(e))throw Oe(new Error("StrictSigning: Invalid message signature"),rt.ERR_INVALID_SIGNATURE);break;default:throw Oe(new Error("Cannot validate message: unhandled signature policy: "+r),rt.ERR_UNHANDLED_SIGNATURE_POLICY)}for(let n of e.topicIDs){let i=this.topicValidators.get(n);i&&await i(n,e)}}_buildMessage(e){let r=this.globalSignaturePolicy;switch(r){case Lt.StrictSign:return e.from=this.peerId.toB58String(),e.seqno=rr.randomSeqno(),qm(this.peerId,e);case Lt.StrictNoSign:return Promise.resolve(e);default:throw Oe(new Error("Cannot build message: unhandled signature policy: "+r),rt.ERR_UNHANDLED_SIGNATURE_POLICY)}}getSubscribers(e){if(!this.started)throw Oe(new Error("not started yet"),"ERR_NOT_STARTED_YET");if(!e||typeof e!="string")throw Oe(new Error("a string topic must be provided"),"ERR_NOT_VALID_TOPIC");let r=this.topics.get(e);return r?Array.from(r):[]}async publish(e,r){if(!this.started)throw new Error("Pubsub has not started");this.log("publish",e,r);let i={receivedFrom:this.peerId.toB58String(),data:r,topicIDs:[e]},s=await this._buildMessage(i),o=rr.normalizeInRpcMessage(s);this.emitSelf&&this._emitMessage(o),await this._publish(o)}_publish(e){throw Oe(new Error("publish must be implemented by the subclass"),"ERR_NOT_IMPLEMENTED")}subscribe(e){if(!this.started)throw new Error("Pubsub has not started");this.subscriptions.has(e)||(this.subscriptions.add(e),this.peers.forEach((r,n)=>this._sendSubscriptions(n,[e],!0)))}unsubscribe(e){if(!this.started)throw new Error("Pubsub is not started");this.subscriptions.has(e)&&this.listenerCount(e)===0&&(this.subscriptions.delete(e),this.peers.forEach((r,n)=>this._sendSubscriptions(n,[e],!1)))}getTopics(){if(!this.started)throw new Error("Pubsub is not started");return Array.from(this.subscriptions)}};ns.utils=rr;ns.SignaturePolicy=Lt;Lp.exports=ns});var Fp=E((HE,Op)=>{"use strict";var kp=ni(),Vm=Object.assign(kp("libp2p:floodsub"),{error:kp("libp2p:floodsub:err")});Op.exports={log:Vm,multicodec:"/floodsub/1.0.0"}});var $m=E((GE,ha)=>{"use strict";var zm="libp2p:floodsub",Hm=wa(),{toString:Gm}=(ot(),st),jm=fa(),{utils:Wm}=fa(),{multicodec:Kp}=Fp(),Up=class extends jm{constructor(e,r={}){super({debugName:zm,multicodecs:Kp,libp2p:e,canRelayMessage:!0,...r});this.seenCache=new Hm}async _processRpcMessage(e){let r=await this.getMsgId(e),n=Gm(r,"base64");this.seenCache.has(n)||(this.seenCache.put(n),await super._processRpcMessage(e))}_publish(e){return this._forwardMessage(e),Promise.resolve()}_forwardMessage(e){e.topicIDs.forEach(r=>{let n=this.topics.get(r);!n||n.forEach(i=>{this.log("publish msgs on topics",e.topicIDs,i),i!==this.peerId.toB58String()&&i!==e.receivedFrom&&this._sendRpc(i,{msgs:[Wm.normalizeOutRpcMessage(e)]})})})}};ha.exports=Up;ha.exports.multicodec=Kp});return $m();})();
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */
/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */
/*! noble-ed25519 - MIT License (c) Paul Miller (paulmillr.com) */
/*! noble-secp256k1 - MIT License (c) Paul Miller (paulmillr.com) */
return Libp2pFloodsub}));
